var Z6=Object.defineProperty;var ej=(t,e,r)=>e in t?Z6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Wr=(t,e,r)=>ej(t,typeof e!="symbol"?e+"":e,r);function tj(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var bZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ak(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lk={exports:{}},_w={},ck={exports:{}},vr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp=Symbol.for("react.element"),rj=Symbol.for("react.portal"),nj=Symbol.for("react.fragment"),sj=Symbol.for("react.strict_mode"),ij=Symbol.for("react.profiler"),aj=Symbol.for("react.provider"),oj=Symbol.for("react.context"),Aj=Symbol.for("react.forward_ref"),lj=Symbol.for("react.suspense"),cj=Symbol.for("react.memo"),uj=Symbol.for("react.lazy"),R5=Symbol.iterator;function dj(t){return t===null||typeof t!="object"?null:(t=R5&&t[R5]||t["@@iterator"],typeof t=="function"?t:null)}var uk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dk=Object.assign,hk={};function eh(t,e,r){this.props=t,this.context=e,this.refs=hk,this.updater=r||uk}eh.prototype.isReactComponent={};eh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fk(){}fk.prototype=eh.prototype;function Ty(t,e,r){this.props=t,this.context=e,this.refs=hk,this.updater=r||uk}var Uy=Ty.prototype=new fk;Uy.constructor=Ty;dk(Uy,eh.prototype);Uy.isPureReactComponent=!0;var P5=Array.isArray,pk=Object.prototype.hasOwnProperty,Ly={current:null},gk={key:!0,ref:!0,__self:!0,__source:!0};function mk(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)pk.call(e,n)&&!gk.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var A=Array(o),c=0;c<o;c++)A[c]=arguments[c+2];s.children=A}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:Fp,type:t,key:i,ref:a,props:s,_owner:Ly.current}}function hj(t,e){return{$$typeof:Fp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fp}function fj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var D5=/\/+/g;function q1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fj(""+t.key):e.toString(36)}function Ng(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Fp:case rj:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+q1(a,0):n,P5(s)?(r="",t!=null&&(r=t.replace(D5,"$&/")+"/"),Ng(s,e,r,"",function(c){return c})):s!=null&&(jy(s)&&(s=hj(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(D5,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",P5(t))for(var o=0;o<t.length;o++){i=t[o];var A=n+q1(i,o);a+=Ng(i,e,r,A,s)}else if(A=dj(t),typeof A=="function")for(t=A.call(t),o=0;!(i=t.next()).done;)i=i.value,A=n+q1(i,o++),a+=Ng(i,e,r,A,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function I0(t,e,r){if(t==null)return t;var n=[],s=0;return Ng(t,n,"","",function(i){return e.call(r,i,s++)}),n}function pj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ci={current:null},Fg={transition:null},gj={ReactCurrentDispatcher:Ci,ReactCurrentBatchConfig:Fg,ReactCurrentOwner:Ly};function wk(){throw Error("act(...) is not supported in production builds of React.")}vr.Children={map:I0,forEach:function(t,e,r){I0(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return I0(t,function(){e++}),e},toArray:function(t){return I0(t,function(e){return e})||[]},only:function(t){if(!jy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};vr.Component=eh;vr.Fragment=nj;vr.Profiler=ij;vr.PureComponent=Ty;vr.StrictMode=sj;vr.Suspense=lj;vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gj;vr.act=wk;vr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=dk({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Ly.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(A in e)pk.call(e,A)&&!gk.hasOwnProperty(A)&&(n[A]=e[A]===void 0&&o!==void 0?o[A]:e[A])}var A=arguments.length-2;if(A===1)n.children=r;else if(1<A){o=Array(A);for(var c=0;c<A;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:Fp,type:t.type,key:s,ref:i,props:n,_owner:a}};vr.createContext=function(t){return t={$$typeof:oj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aj,_context:t},t.Consumer=t};vr.createElement=mk;vr.createFactory=function(t){var e=mk.bind(null,t);return e.type=t,e};vr.createRef=function(){return{current:null}};vr.forwardRef=function(t){return{$$typeof:Aj,render:t}};vr.isValidElement=jy;vr.lazy=function(t){return{$$typeof:uj,_payload:{_status:-1,_result:t},_init:pj}};vr.memo=function(t,e){return{$$typeof:cj,type:t,compare:e===void 0?null:e}};vr.startTransition=function(t){var e=Fg.transition;Fg.transition={};try{t()}finally{Fg.transition=e}};vr.unstable_act=wk;vr.useCallback=function(t,e){return Ci.current.useCallback(t,e)};vr.useContext=function(t){return Ci.current.useContext(t)};vr.useDebugValue=function(){};vr.useDeferredValue=function(t){return Ci.current.useDeferredValue(t)};vr.useEffect=function(t,e){return Ci.current.useEffect(t,e)};vr.useId=function(){return Ci.current.useId()};vr.useImperativeHandle=function(t,e,r){return Ci.current.useImperativeHandle(t,e,r)};vr.useInsertionEffect=function(t,e){return Ci.current.useInsertionEffect(t,e)};vr.useLayoutEffect=function(t,e){return Ci.current.useLayoutEffect(t,e)};vr.useMemo=function(t,e){return Ci.current.useMemo(t,e)};vr.useReducer=function(t,e,r){return Ci.current.useReducer(t,e,r)};vr.useRef=function(t){return Ci.current.useRef(t)};vr.useState=function(t){return Ci.current.useState(t)};vr.useSyncExternalStore=function(t,e,r){return Ci.current.useSyncExternalStore(t,e,r)};vr.useTransition=function(){return Ci.current.useTransition()};vr.version="18.3.1";ck.exports=vr;var z=ck.exports;const Co=Ak(z),mj=tj({__proto__:null,default:Co},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wj=z,xj=Symbol.for("react.element"),vj=Symbol.for("react.fragment"),yj=Object.prototype.hasOwnProperty,bj=wj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bj={key:!0,ref:!0,__self:!0,__source:!0};function xk(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)yj.call(e,n)&&!Bj.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:xj,type:t,key:i,ref:a,props:s,_owner:bj.current}}_w.Fragment=vj;_w.jsx=xk;_w.jsxs=xk;lk.exports=_w;var l=lk.exports,Bv={},vk={exports:{}},ha={},yk={exports:{}},bk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ie,we){var Pe=ie.length;ie.push(we);e:for(;0<Pe;){var Se=Pe-1>>>1,M=ie[Se];if(0<s(M,we))ie[Se]=we,ie[Pe]=M,Pe=Se;else break e}}function r(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var we=ie[0],Pe=ie.pop();if(Pe!==we){ie[0]=Pe;e:for(var Se=0,M=ie.length,H=M>>>1;Se<H;){var K=2*(Se+1)-1,ee=ie[K],se=K+1,ue=ie[se];if(0>s(ee,Pe))se<M&&0>s(ue,ee)?(ie[Se]=ue,ie[se]=Pe,Se=se):(ie[Se]=ee,ie[K]=Pe,Se=K);else if(se<M&&0>s(ue,Pe))ie[Se]=ue,ie[se]=Pe,Se=se;else break e}}return we}function s(ie,we){var Pe=ie.sortIndex-we.sortIndex;return Pe!==0?Pe:ie.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var A=[],c=[],u=1,d=null,p=3,g=!1,v=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ie){for(var we=r(c);we!==null;){if(we.callback===null)n(c);else if(we.startTime<=ie)n(c),we.sortIndex=we.expirationTime,e(A,we);else break;we=r(c)}}function U(ie){if(y=!1,N(ie),!v)if(r(A)!==null)v=!0,_e(D);else{var we=r(c);we!==null&&Ce(U,we.startTime-ie)}}function D(ie,we){v=!1,y&&(y=!1,x(_),_=-1),g=!0;var Pe=p;try{for(N(we),d=r(A);d!==null&&(!(d.expirationTime>we)||ie&&!S());){var Se=d.callback;if(typeof Se=="function"){d.callback=null,p=d.priorityLevel;var M=Se(d.expirationTime<=we);we=t.unstable_now(),typeof M=="function"?d.callback=M:d===r(A)&&n(A),N(we)}else n(A);d=r(A)}if(d!==null)var H=!0;else{var K=r(c);K!==null&&Ce(U,K.startTime-we),H=!1}return H}finally{d=null,p=Pe,g=!1}}var P=!1,E=null,_=-1,B=5,j=-1;function S(){return!(t.unstable_now()-j<B)}function L(){if(E!==null){var ie=t.unstable_now();j=ie;var we=!0;try{we=E(!0,ie)}finally{we?T():(P=!1,E=null)}}else P=!1}var T;if(typeof I=="function")T=function(){I(L)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ye=Z.port2;Z.port1.onmessage=L,T=function(){ye.postMessage(null)}}else T=function(){k(L,0)};function _e(ie){E=ie,P||(P=!0,T())}function Ce(ie,we){_=k(function(){ie(t.unstable_now())},we)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,_e(D))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(A)},t.unstable_next=function(ie){switch(p){case 1:case 2:case 3:var we=3;break;default:we=p}var Pe=p;p=we;try{return ie()}finally{p=Pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,we){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var Pe=p;p=ie;try{return we()}finally{p=Pe}},t.unstable_scheduleCallback=function(ie,we,Pe){var Se=t.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?Se+Pe:Se):Pe=Se,ie){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Pe+M,ie={id:u++,callback:we,priorityLevel:ie,startTime:Pe,expirationTime:M,sortIndex:-1},Pe>Se?(ie.sortIndex=Pe,e(c,ie),r(A)===null&&ie===r(c)&&(y?(x(_),_=-1):y=!0,Ce(U,Pe-Se))):(ie.sortIndex=M,e(A,ie),v||g||(v=!0,_e(D))),ie},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(ie){var we=p;return function(){var Pe=p;p=we;try{return ie.apply(this,arguments)}finally{p=Pe}}}})(bk);yk.exports=bk;var _j=yk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cj=z,ca=_j;function pt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bk=new Set,$f={};function hu(t,e){Ed(t,e),Ed(t+"Capture",e)}function Ed(t,e){for($f[t]=e,t=0;t<e.length;t++)Bk.add(e[t])}var hA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_v=Object.prototype.hasOwnProperty,Ij=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M5={},O5={};function Ej(t){return _v.call(O5,t)?!0:_v.call(M5,t)?!1:Ij.test(t)?O5[t]=!0:(M5[t]=!0,!1)}function kj(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sj(t,e,r,n){if(e===null||typeof e>"u"||kj(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ii(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ws={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ws[t]=new Ii(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ws[e]=new Ii(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ws[t]=new Ii(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ws[t]=new Ii(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ws[t]=new Ii(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ws[t]=new Ii(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ws[t]=new Ii(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ws[t]=new Ii(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ws[t]=new Ii(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qy=/[\-:]([a-z])/g;function Ry(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qy,Ry);Ws[e]=new Ii(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qy,Ry);Ws[e]=new Ii(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qy,Ry);Ws[e]=new Ii(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ws[t]=new Ii(t,1,!1,t.toLowerCase(),null,!1,!1)});Ws.xlinkHref=new Ii("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ws[t]=new Ii(t,1,!1,t.toLowerCase(),null,!0,!0)});function Py(t,e,r,n){var s=Ws.hasOwnProperty(e)?Ws[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sj(e,r,s,n)&&(r=null),n||s===null?Ej(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var bA=Cj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E0=Symbol.for("react.element"),Wu=Symbol.for("react.portal"),Ju=Symbol.for("react.fragment"),Dy=Symbol.for("react.strict_mode"),Cv=Symbol.for("react.profiler"),_k=Symbol.for("react.provider"),Ck=Symbol.for("react.context"),My=Symbol.for("react.forward_ref"),Iv=Symbol.for("react.suspense"),Ev=Symbol.for("react.suspense_list"),Oy=Symbol.for("react.memo"),il=Symbol.for("react.lazy"),Ik=Symbol.for("react.offscreen"),H5=Symbol.iterator;function jh(t){return t===null||typeof t!="object"?null:(t=H5&&t[H5]||t["@@iterator"],typeof t=="function"?t:null)}var Pn=Object.assign,W1;function nf(t){if(W1===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);W1=e&&e[1]||""}return`
`+W1+t}var J1=!1;function X1(t,e){if(!t||J1)return"";J1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var A=`
`+s[a].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=a&&0<=o);break}}}finally{J1=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?nf(t):""}function Nj(t){switch(t.tag){case 5:return nf(t.type);case 16:return nf("Lazy");case 13:return nf("Suspense");case 19:return nf("SuspenseList");case 0:case 2:case 15:return t=X1(t.type,!1),t;case 11:return t=X1(t.type.render,!1),t;case 1:return t=X1(t.type,!0),t;default:return""}}function kv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ju:return"Fragment";case Wu:return"Portal";case Cv:return"Profiler";case Dy:return"StrictMode";case Iv:return"Suspense";case Ev:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ck:return(t.displayName||"Context")+".Consumer";case _k:return(t._context.displayName||"Context")+".Provider";case My:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Oy:return e=t.displayName||null,e!==null?e:kv(t.type)||"Memo";case il:e=t._payload,t=t._init;try{return kv(t(e))}catch{}}return null}function Fj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kv(e);case 8:return e===Dy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ol(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ek(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Tj(t){var e=Ek(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function k0(t){t._valueTracker||(t._valueTracker=Tj(t))}function kk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Ek(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function hm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sv(t,e){var r=e.checked;return Pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function V5(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ol(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sk(t,e){e=e.checked,e!=null&&Py(t,"checked",e,!1)}function Nv(t,e){Sk(t,e);var r=Ol(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fv(t,e.type,r):e.hasOwnProperty("defaultValue")&&Fv(t,e.type,Ol(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function K5(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Fv(t,e,r){(e!=="number"||hm(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var sf=Array.isArray;function ud(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ol(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Tv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(pt(91));return Pn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function z5(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(pt(92));if(sf(r)){if(1<r.length)throw Error(pt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ol(r)}}function Nk(t,e){var r=Ol(e.value),n=Ol(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function G5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var S0,Tk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(S0=S0||document.createElement("div"),S0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=S0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Bf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Uj=["Webkit","ms","Moz","O"];Object.keys(Bf).forEach(function(t){Uj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bf[e]=Bf[t]})});function Uk(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Bf.hasOwnProperty(t)&&Bf[t]?(""+e).trim():e+"px"}function Lk(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Uk(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Lj=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lv(t,e){if(e){if(Lj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(pt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(pt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(pt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(pt(62))}}function jv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qv=null;function Hy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rv=null,dd=null,hd=null;function $5(t){if(t=Lp(t)){if(typeof Rv!="function")throw Error(pt(280));var e=t.stateNode;e&&(e=Sw(e),Rv(t.stateNode,t.type,e))}}function jk(t){dd?hd?hd.push(t):hd=[t]:dd=t}function Qk(){if(dd){var t=dd,e=hd;if(hd=dd=null,$5(t),e)for(t=0;t<e.length;t++)$5(e[t])}}function Rk(t,e){return t(e)}function Pk(){}var Y1=!1;function Dk(t,e,r){if(Y1)return t(e,r);Y1=!0;try{return Rk(t,e,r)}finally{Y1=!1,(dd!==null||hd!==null)&&(Pk(),Qk())}}function Wf(t,e){var r=t.stateNode;if(r===null)return null;var n=Sw(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(pt(231,e,typeof r));return r}var Pv=!1;if(hA)try{var Qh={};Object.defineProperty(Qh,"passive",{get:function(){Pv=!0}}),window.addEventListener("test",Qh,Qh),window.removeEventListener("test",Qh,Qh)}catch{Pv=!1}function jj(t,e,r,n,s,i,a,o,A){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var _f=!1,fm=null,pm=!1,Dv=null,Qj={onError:function(t){_f=!0,fm=t}};function Rj(t,e,r,n,s,i,a,o,A){_f=!1,fm=null,jj.apply(Qj,arguments)}function Pj(t,e,r,n,s,i,a,o,A){if(Rj.apply(this,arguments),_f){if(_f){var c=fm;_f=!1,fm=null}else throw Error(pt(198));pm||(pm=!0,Dv=c)}}function fu(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Mk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function q5(t){if(fu(t)!==t)throw Error(pt(188))}function Dj(t){var e=t.alternate;if(!e){if(e=fu(t),e===null)throw Error(pt(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return q5(s),t;if(i===n)return q5(s),e;i=i.sibling}throw Error(pt(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(pt(189))}}if(r.alternate!==n)throw Error(pt(190))}if(r.tag!==3)throw Error(pt(188));return r.stateNode.current===r?t:e}function Ok(t){return t=Dj(t),t!==null?Hk(t):null}function Hk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hk(t);if(e!==null)return e;t=t.sibling}return null}var Vk=ca.unstable_scheduleCallback,W5=ca.unstable_cancelCallback,Mj=ca.unstable_shouldYield,Oj=ca.unstable_requestPaint,ss=ca.unstable_now,Hj=ca.unstable_getCurrentPriorityLevel,Vy=ca.unstable_ImmediatePriority,Kk=ca.unstable_UserBlockingPriority,gm=ca.unstable_NormalPriority,Vj=ca.unstable_LowPriority,zk=ca.unstable_IdlePriority,Cw=null,So=null;function Kj(t){if(So&&typeof So.onCommitFiberRoot=="function")try{So.onCommitFiberRoot(Cw,t,void 0,(t.current.flags&128)===128)}catch{}}var Za=Math.clz32?Math.clz32:$j,zj=Math.log,Gj=Math.LN2;function $j(t){return t>>>=0,t===0?32:31-(zj(t)/Gj|0)|0}var N0=64,F0=4194304;function af(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mm(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=af(o):(i&=a,i!==0&&(n=af(i)))}else a=r&~s,a!==0?n=af(a):i!==0&&(n=af(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Za(e),s=1<<r,n|=t[r],e&=~s;return n}function qj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wj(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Za(i),o=1<<a,A=s[a];A===-1?(!(o&r)||o&n)&&(s[a]=qj(o,e)):A<=e&&(t.expiredLanes|=o),i&=~o}}function Mv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gk(){var t=N0;return N0<<=1,!(N0&4194240)&&(N0=64),t}function Z1(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Tp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Za(e),t[e]=r}function Jj(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Za(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Ky(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Za(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Zr=0;function $k(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qk,zy,Wk,Jk,Xk,Ov=!1,T0=[],Il=null,El=null,kl=null,Jf=new Map,Xf=new Map,Al=[],Xj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function J5(t,e){switch(t){case"focusin":case"focusout":Il=null;break;case"dragenter":case"dragleave":El=null;break;case"mouseover":case"mouseout":kl=null;break;case"pointerover":case"pointerout":Jf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xf.delete(e.pointerId)}}function Rh(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Lp(e),e!==null&&zy(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Yj(t,e,r,n,s){switch(e){case"focusin":return Il=Rh(Il,t,e,r,n,s),!0;case"dragenter":return El=Rh(El,t,e,r,n,s),!0;case"mouseover":return kl=Rh(kl,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Jf.set(i,Rh(Jf.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Xf.set(i,Rh(Xf.get(i)||null,t,e,r,n,s)),!0}return!1}function Yk(t){var e=Rc(t.target);if(e!==null){var r=fu(e);if(r!==null){if(e=r.tag,e===13){if(e=Mk(r),e!==null){t.blockedOn=e,Xk(t.priority,function(){Wk(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Hv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Qv=n,r.target.dispatchEvent(n),Qv=null}else return e=Lp(r),e!==null&&zy(e),t.blockedOn=r,!1;e.shift()}return!0}function X5(t,e,r){Tg(t)&&r.delete(e)}function Zj(){Ov=!1,Il!==null&&Tg(Il)&&(Il=null),El!==null&&Tg(El)&&(El=null),kl!==null&&Tg(kl)&&(kl=null),Jf.forEach(X5),Xf.forEach(X5)}function Ph(t,e){t.blockedOn===e&&(t.blockedOn=null,Ov||(Ov=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,Zj)))}function Yf(t){function e(s){return Ph(s,t)}if(0<T0.length){Ph(T0[0],t);for(var r=1;r<T0.length;r++){var n=T0[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Il!==null&&Ph(Il,t),El!==null&&Ph(El,t),kl!==null&&Ph(kl,t),Jf.forEach(e),Xf.forEach(e),r=0;r<Al.length;r++)n=Al[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Al.length&&(r=Al[0],r.blockedOn===null);)Yk(r),r.blockedOn===null&&Al.shift()}var fd=bA.ReactCurrentBatchConfig,wm=!0;function eQ(t,e,r,n){var s=Zr,i=fd.transition;fd.transition=null;try{Zr=1,Gy(t,e,r,n)}finally{Zr=s,fd.transition=i}}function tQ(t,e,r,n){var s=Zr,i=fd.transition;fd.transition=null;try{Zr=4,Gy(t,e,r,n)}finally{Zr=s,fd.transition=i}}function Gy(t,e,r,n){if(wm){var s=Hv(t,e,r,n);if(s===null)lx(t,e,n,xm,r),J5(t,n);else if(Yj(s,t,e,r,n))n.stopPropagation();else if(J5(t,n),e&4&&-1<Xj.indexOf(t)){for(;s!==null;){var i=Lp(s);if(i!==null&&qk(i),i=Hv(t,e,r,n),i===null&&lx(t,e,n,xm,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else lx(t,e,n,null,r)}}var xm=null;function Hv(t,e,r,n){if(xm=null,t=Hy(n),t=Rc(t),t!==null)if(e=fu(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Mk(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xm=t,null}function Zk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hj()){case Vy:return 1;case Kk:return 4;case gm:case Vj:return 16;case zk:return 536870912;default:return 16}default:return 16}}var ml=null,$y=null,Ug=null;function eS(){if(Ug)return Ug;var t,e=$y,r=e.length,n,s="value"in ml?ml.value:ml.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Ug=s.slice(t,1<n?1-n:void 0)}function Lg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function U0(){return!0}function Y5(){return!1}function fa(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?U0:Y5,this.isPropagationStopped=Y5,this}return Pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=U0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=U0)},persist:function(){},isPersistent:U0}),e}var th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qy=fa(th),Up=Pn({},th,{view:0,detail:0}),rQ=fa(Up),ex,tx,Dh,Iw=Pn({},Up,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dh&&(Dh&&t.type==="mousemove"?(ex=t.screenX-Dh.screenX,tx=t.screenY-Dh.screenY):tx=ex=0,Dh=t),ex)},movementY:function(t){return"movementY"in t?t.movementY:tx}}),Z5=fa(Iw),nQ=Pn({},Iw,{dataTransfer:0}),sQ=fa(nQ),iQ=Pn({},Up,{relatedTarget:0}),rx=fa(iQ),aQ=Pn({},th,{animationName:0,elapsedTime:0,pseudoElement:0}),oQ=fa(aQ),AQ=Pn({},th,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lQ=fa(AQ),cQ=Pn({},th,{data:0}),e_=fa(cQ),uQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hQ[t])?!!e[t]:!1}function Wy(){return fQ}var pQ=Pn({},Up,{key:function(t){if(t.key){var e=uQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wy,charCode:function(t){return t.type==="keypress"?Lg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gQ=fa(pQ),mQ=Pn({},Iw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t_=fa(mQ),wQ=Pn({},Up,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wy}),xQ=fa(wQ),vQ=Pn({},th,{propertyName:0,elapsedTime:0,pseudoElement:0}),yQ=fa(vQ),bQ=Pn({},Iw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BQ=fa(bQ),_Q=[9,13,27,32],Jy=hA&&"CompositionEvent"in window,Cf=null;hA&&"documentMode"in document&&(Cf=document.documentMode);var CQ=hA&&"TextEvent"in window&&!Cf,tS=hA&&(!Jy||Cf&&8<Cf&&11>=Cf),r_=" ",n_=!1;function rS(t,e){switch(t){case"keyup":return _Q.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xu=!1;function IQ(t,e){switch(t){case"compositionend":return nS(e);case"keypress":return e.which!==32?null:(n_=!0,r_);case"textInput":return t=e.data,t===r_&&n_?null:t;default:return null}}function EQ(t,e){if(Xu)return t==="compositionend"||!Jy&&rS(t,e)?(t=eS(),Ug=$y=ml=null,Xu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tS&&e.locale!=="ko"?null:e.data;default:return null}}var kQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kQ[t.type]:e==="textarea"}function sS(t,e,r,n){jk(n),e=vm(e,"onChange"),0<e.length&&(r=new qy("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var If=null,Zf=null;function SQ(t){pS(t,0)}function Ew(t){var e=ed(t);if(kk(e))return t}function NQ(t,e){if(t==="change")return e}var iS=!1;if(hA){var nx;if(hA){var sx="oninput"in document;if(!sx){var i_=document.createElement("div");i_.setAttribute("oninput","return;"),sx=typeof i_.oninput=="function"}nx=sx}else nx=!1;iS=nx&&(!document.documentMode||9<document.documentMode)}function a_(){If&&(If.detachEvent("onpropertychange",aS),Zf=If=null)}function aS(t){if(t.propertyName==="value"&&Ew(Zf)){var e=[];sS(e,Zf,t,Hy(t)),Dk(SQ,e)}}function FQ(t,e,r){t==="focusin"?(a_(),If=e,Zf=r,If.attachEvent("onpropertychange",aS)):t==="focusout"&&a_()}function TQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ew(Zf)}function UQ(t,e){if(t==="click")return Ew(e)}function LQ(t,e){if(t==="input"||t==="change")return Ew(e)}function jQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ro=typeof Object.is=="function"?Object.is:jQ;function ep(t,e){if(ro(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!_v.call(e,s)||!ro(t[s],e[s]))return!1}return!0}function o_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function A_(t,e){var r=o_(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=o_(r)}}function oS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function AS(){for(var t=window,e=hm();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=hm(t.document)}return e}function Xy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QQ(t){var e=AS(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&oS(r.ownerDocument.documentElement,r)){if(n!==null&&Xy(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=A_(r,i);var a=A_(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RQ=hA&&"documentMode"in document&&11>=document.documentMode,Yu=null,Vv=null,Ef=null,Kv=!1;function l_(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Kv||Yu==null||Yu!==hm(n)||(n=Yu,"selectionStart"in n&&Xy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ef&&ep(Ef,n)||(Ef=n,n=vm(Vv,"onSelect"),0<n.length&&(e=new qy("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Yu)))}function L0(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Zu={animationend:L0("Animation","AnimationEnd"),animationiteration:L0("Animation","AnimationIteration"),animationstart:L0("Animation","AnimationStart"),transitionend:L0("Transition","TransitionEnd")},ix={},lS={};hA&&(lS=document.createElement("div").style,"AnimationEvent"in window||(delete Zu.animationend.animation,delete Zu.animationiteration.animation,delete Zu.animationstart.animation),"TransitionEvent"in window||delete Zu.transitionend.transition);function kw(t){if(ix[t])return ix[t];if(!Zu[t])return t;var e=Zu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in lS)return ix[t]=e[r];return t}var cS=kw("animationend"),uS=kw("animationiteration"),dS=kw("animationstart"),hS=kw("transitionend"),fS=new Map,c_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tc(t,e){fS.set(t,e),hu(e,[t])}for(var ax=0;ax<c_.length;ax++){var ox=c_[ax],PQ=ox.toLowerCase(),DQ=ox[0].toUpperCase()+ox.slice(1);tc(PQ,"on"+DQ)}tc(cS,"onAnimationEnd");tc(uS,"onAnimationIteration");tc(dS,"onAnimationStart");tc("dblclick","onDoubleClick");tc("focusin","onFocus");tc("focusout","onBlur");tc(hS,"onTransitionEnd");Ed("onMouseEnter",["mouseout","mouseover"]);Ed("onMouseLeave",["mouseout","mouseover"]);Ed("onPointerEnter",["pointerout","pointerover"]);Ed("onPointerLeave",["pointerout","pointerover"]);hu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hu("onBeforeInput",["compositionend","keypress","textInput","paste"]);hu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(of));function u_(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Pj(n,e,void 0,t),t.currentTarget=null}function pS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],A=o.instance,c=o.currentTarget;if(o=o.listener,A!==i&&s.isPropagationStopped())break e;u_(s,o,c),i=A}else for(a=0;a<n.length;a++){if(o=n[a],A=o.instance,c=o.currentTarget,o=o.listener,A!==i&&s.isPropagationStopped())break e;u_(s,o,c),i=A}}}if(pm)throw t=Dv,pm=!1,Dv=null,t}function xn(t,e){var r=e[Wv];r===void 0&&(r=e[Wv]=new Set);var n=t+"__bubble";r.has(n)||(gS(e,t,2,!1),r.add(n))}function Ax(t,e,r){var n=0;e&&(n|=4),gS(r,t,n,e)}var j0="_reactListening"+Math.random().toString(36).slice(2);function tp(t){if(!t[j0]){t[j0]=!0,Bk.forEach(function(r){r!=="selectionchange"&&(MQ.has(r)||Ax(r,!1,t),Ax(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[j0]||(e[j0]=!0,Ax("selectionchange",!1,e))}}function gS(t,e,r,n){switch(Zk(e)){case 1:var s=eQ;break;case 4:s=tQ;break;default:s=Gy}r=s.bind(null,e,r,t),s=void 0,!Pv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function lx(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var A=a.tag;if((A===3||A===4)&&(A=a.stateNode.containerInfo,A===s||A.nodeType===8&&A.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Rc(o),a===null)return;if(A=a.tag,A===5||A===6){n=i=a;continue e}o=o.parentNode}}n=n.return}Dk(function(){var c=i,u=Hy(r),d=[];e:{var p=fS.get(t);if(p!==void 0){var g=qy,v=t;switch(t){case"keypress":if(Lg(r)===0)break e;case"keydown":case"keyup":g=gQ;break;case"focusin":v="focus",g=rx;break;case"focusout":v="blur",g=rx;break;case"beforeblur":case"afterblur":g=rx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Z5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=sQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=xQ;break;case cS:case uS:case dS:g=oQ;break;case hS:g=yQ;break;case"scroll":g=rQ;break;case"wheel":g=BQ;break;case"copy":case"cut":case"paste":g=lQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=t_}var y=(e&4)!==0,k=!y&&t==="scroll",x=y?p!==null?p+"Capture":null:p;y=[];for(var I=c,N;I!==null;){N=I;var U=N.stateNode;if(N.tag===5&&U!==null&&(N=U,x!==null&&(U=Wf(I,x),U!=null&&y.push(rp(I,U,N)))),k)break;I=I.return}0<y.length&&(p=new g(p,v,null,r,u),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&r!==Qv&&(v=r.relatedTarget||r.fromElement)&&(Rc(v)||v[fA]))break e;if((g||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=r.relatedTarget||r.toElement,g=c,v=v?Rc(v):null,v!==null&&(k=fu(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(y=Z5,U="onMouseLeave",x="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(y=t_,U="onPointerLeave",x="onPointerEnter",I="pointer"),k=g==null?p:ed(g),N=v==null?p:ed(v),p=new y(U,I+"leave",g,r,u),p.target=k,p.relatedTarget=N,U=null,Rc(u)===c&&(y=new y(x,I+"enter",v,r,u),y.target=N,y.relatedTarget=k,U=y),k=U,g&&v)t:{for(y=g,x=v,I=0,N=y;N;N=Eu(N))I++;for(N=0,U=x;U;U=Eu(U))N++;for(;0<I-N;)y=Eu(y),I--;for(;0<N-I;)x=Eu(x),N--;for(;I--;){if(y===x||x!==null&&y===x.alternate)break t;y=Eu(y),x=Eu(x)}y=null}else y=null;g!==null&&d_(d,p,g,y,!1),v!==null&&k!==null&&d_(d,k,v,y,!0)}}e:{if(p=c?ed(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var D=NQ;else if(s_(p))if(iS)D=LQ;else{D=TQ;var P=FQ}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=UQ);if(D&&(D=D(t,c))){sS(d,D,r,u);break e}P&&P(t,p,c),t==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&Fv(p,"number",p.value)}switch(P=c?ed(c):window,t){case"focusin":(s_(P)||P.contentEditable==="true")&&(Yu=P,Vv=c,Ef=null);break;case"focusout":Ef=Vv=Yu=null;break;case"mousedown":Kv=!0;break;case"contextmenu":case"mouseup":case"dragend":Kv=!1,l_(d,r,u);break;case"selectionchange":if(RQ)break;case"keydown":case"keyup":l_(d,r,u)}var E;if(Jy)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Xu?rS(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(tS&&r.locale!=="ko"&&(Xu||_!=="onCompositionStart"?_==="onCompositionEnd"&&Xu&&(E=eS()):(ml=u,$y="value"in ml?ml.value:ml.textContent,Xu=!0)),P=vm(c,_),0<P.length&&(_=new e_(_,t,null,r,u),d.push({event:_,listeners:P}),E?_.data=E:(E=nS(r),E!==null&&(_.data=E)))),(E=CQ?IQ(t,r):EQ(t,r))&&(c=vm(c,"onBeforeInput"),0<c.length&&(u=new e_("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:c}),u.data=E))}pS(d,e)})}function rp(t,e,r){return{instance:t,listener:e,currentTarget:r}}function vm(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wf(t,r),i!=null&&n.unshift(rp(t,i,s)),i=Wf(t,e),i!=null&&n.push(rp(t,i,s))),t=t.return}return n}function Eu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function d_(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,A=o.alternate,c=o.stateNode;if(A!==null&&A===n)break;o.tag===5&&c!==null&&(o=c,s?(A=Wf(r,i),A!=null&&a.unshift(rp(r,A,o))):s||(A=Wf(r,i),A!=null&&a.push(rp(r,A,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var OQ=/\r\n?/g,HQ=/\u0000|\uFFFD/g;function h_(t){return(typeof t=="string"?t:""+t).replace(OQ,`
`).replace(HQ,"")}function Q0(t,e,r){if(e=h_(e),h_(t)!==e&&r)throw Error(pt(425))}function ym(){}var zv=null,Gv=null;function $v(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qv=typeof setTimeout=="function"?setTimeout:void 0,VQ=typeof clearTimeout=="function"?clearTimeout:void 0,f_=typeof Promise=="function"?Promise:void 0,KQ=typeof queueMicrotask=="function"?queueMicrotask:typeof f_<"u"?function(t){return f_.resolve(null).then(t).catch(zQ)}:qv;function zQ(t){setTimeout(function(){throw t})}function cx(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Yf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Yf(e)}function Sl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function p_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var rh=Math.random().toString(36).slice(2),Bo="__reactFiber$"+rh,np="__reactProps$"+rh,fA="__reactContainer$"+rh,Wv="__reactEvents$"+rh,GQ="__reactListeners$"+rh,$Q="__reactHandles$"+rh;function Rc(t){var e=t[Bo];if(e)return e;for(var r=t.parentNode;r;){if(e=r[fA]||r[Bo]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=p_(t);t!==null;){if(r=t[Bo])return r;t=p_(t)}return e}t=r,r=t.parentNode}return null}function Lp(t){return t=t[Bo]||t[fA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ed(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pt(33))}function Sw(t){return t[np]||null}var Jv=[],td=-1;function rc(t){return{current:t}}function Bn(t){0>td||(t.current=Jv[td],Jv[td]=null,td--)}function pn(t,e){td++,Jv[td]=t.current,t.current=e}var Hl={},pi=rc(Hl),Oi=rc(!1),qc=Hl;function kd(t,e){var r=t.type.contextTypes;if(!r)return Hl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Hi(t){return t=t.childContextTypes,t!=null}function bm(){Bn(Oi),Bn(pi)}function g_(t,e,r){if(pi.current!==Hl)throw Error(pt(168));pn(pi,e),pn(Oi,r)}function mS(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(pt(108,Fj(t)||"Unknown",s));return Pn({},r,n)}function Bm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hl,qc=pi.current,pn(pi,t),pn(Oi,Oi.current),!0}function m_(t,e,r){var n=t.stateNode;if(!n)throw Error(pt(169));r?(t=mS(t,e,qc),n.__reactInternalMemoizedMergedChildContext=t,Bn(Oi),Bn(pi),pn(pi,t)):Bn(Oi),pn(Oi,r)}var tA=null,Nw=!1,ux=!1;function wS(t){tA===null?tA=[t]:tA.push(t)}function qQ(t){Nw=!0,wS(t)}function nc(){if(!ux&&tA!==null){ux=!0;var t=0,e=Zr;try{var r=tA;for(Zr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}tA=null,Nw=!1}catch(s){throw tA!==null&&(tA=tA.slice(t+1)),Vk(Vy,nc),s}finally{Zr=e,ux=!1}}return null}var rd=[],nd=0,_m=null,Cm=0,Ea=[],ka=0,Wc=null,nA=1,sA="";function Ic(t,e){rd[nd++]=Cm,rd[nd++]=_m,_m=t,Cm=e}function xS(t,e,r){Ea[ka++]=nA,Ea[ka++]=sA,Ea[ka++]=Wc,Wc=t;var n=nA;t=sA;var s=32-Za(n)-1;n&=~(1<<s),r+=1;var i=32-Za(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,nA=1<<32-Za(e)+s|r<<s|n,sA=i+t}else nA=1<<i|r<<s|n,sA=t}function Yy(t){t.return!==null&&(Ic(t,1),xS(t,1,0))}function Zy(t){for(;t===_m;)_m=rd[--nd],rd[nd]=null,Cm=rd[--nd],rd[nd]=null;for(;t===Wc;)Wc=Ea[--ka],Ea[ka]=null,sA=Ea[--ka],Ea[ka]=null,nA=Ea[--ka],Ea[ka]=null}var la=null,oa=null,En=!1,Ya=null;function vS(t,e){var r=Fa(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function w_(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,la=t,oa=Sl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,la=t,oa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Wc!==null?{id:nA,overflow:sA}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Fa(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,la=t,oa=null,!0):!1;default:return!1}}function Xv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yv(t){if(En){var e=oa;if(e){var r=e;if(!w_(t,e)){if(Xv(t))throw Error(pt(418));e=Sl(r.nextSibling);var n=la;e&&w_(t,e)?vS(n,r):(t.flags=t.flags&-4097|2,En=!1,la=t)}}else{if(Xv(t))throw Error(pt(418));t.flags=t.flags&-4097|2,En=!1,la=t}}}function x_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;la=t}function R0(t){if(t!==la)return!1;if(!En)return x_(t),En=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$v(t.type,t.memoizedProps)),e&&(e=oa)){if(Xv(t))throw yS(),Error(pt(418));for(;e;)vS(t,e),e=Sl(e.nextSibling)}if(x_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){oa=Sl(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}oa=null}}else oa=la?Sl(t.stateNode.nextSibling):null;return!0}function yS(){for(var t=oa;t;)t=Sl(t.nextSibling)}function Sd(){oa=la=null,En=!1}function eb(t){Ya===null?Ya=[t]:Ya.push(t)}var WQ=bA.ReactCurrentBatchConfig;function Mh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pt(309));var n=r.stateNode}if(!n)throw Error(pt(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(pt(284));if(!r._owner)throw Error(pt(290,t))}return t}function P0(t,e){throw t=Object.prototype.toString.call(e),Error(pt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function v_(t){var e=t._init;return e(t._payload)}function bS(t){function e(x,I){if(t){var N=x.deletions;N===null?(x.deletions=[I],x.flags|=16):N.push(I)}}function r(x,I){if(!t)return null;for(;I!==null;)e(x,I),I=I.sibling;return null}function n(x,I){for(x=new Map;I!==null;)I.key!==null?x.set(I.key,I):x.set(I.index,I),I=I.sibling;return x}function s(x,I){return x=Ul(x,I),x.index=0,x.sibling=null,x}function i(x,I,N){return x.index=N,t?(N=x.alternate,N!==null?(N=N.index,N<I?(x.flags|=2,I):N):(x.flags|=2,I)):(x.flags|=1048576,I)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,I,N,U){return I===null||I.tag!==6?(I=wx(N,x.mode,U),I.return=x,I):(I=s(I,N),I.return=x,I)}function A(x,I,N,U){var D=N.type;return D===Ju?u(x,I,N.props.children,U,N.key):I!==null&&(I.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===il&&v_(D)===I.type)?(U=s(I,N.props),U.ref=Mh(x,I,N),U.return=x,U):(U=Og(N.type,N.key,N.props,null,x.mode,U),U.ref=Mh(x,I,N),U.return=x,U)}function c(x,I,N,U){return I===null||I.tag!==4||I.stateNode.containerInfo!==N.containerInfo||I.stateNode.implementation!==N.implementation?(I=xx(N,x.mode,U),I.return=x,I):(I=s(I,N.children||[]),I.return=x,I)}function u(x,I,N,U,D){return I===null||I.tag!==7?(I=Hc(N,x.mode,U,D),I.return=x,I):(I=s(I,N),I.return=x,I)}function d(x,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return I=wx(""+I,x.mode,N),I.return=x,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case E0:return N=Og(I.type,I.key,I.props,null,x.mode,N),N.ref=Mh(x,null,I),N.return=x,N;case Wu:return I=xx(I,x.mode,N),I.return=x,I;case il:var U=I._init;return d(x,U(I._payload),N)}if(sf(I)||jh(I))return I=Hc(I,x.mode,N,null),I.return=x,I;P0(x,I)}return null}function p(x,I,N,U){var D=I!==null?I.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return D!==null?null:o(x,I,""+N,U);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case E0:return N.key===D?A(x,I,N,U):null;case Wu:return N.key===D?c(x,I,N,U):null;case il:return D=N._init,p(x,I,D(N._payload),U)}if(sf(N)||jh(N))return D!==null?null:u(x,I,N,U,null);P0(x,N)}return null}function g(x,I,N,U,D){if(typeof U=="string"&&U!==""||typeof U=="number")return x=x.get(N)||null,o(I,x,""+U,D);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case E0:return x=x.get(U.key===null?N:U.key)||null,A(I,x,U,D);case Wu:return x=x.get(U.key===null?N:U.key)||null,c(I,x,U,D);case il:var P=U._init;return g(x,I,N,P(U._payload),D)}if(sf(U)||jh(U))return x=x.get(N)||null,u(I,x,U,D,null);P0(I,U)}return null}function v(x,I,N,U){for(var D=null,P=null,E=I,_=I=0,B=null;E!==null&&_<N.length;_++){E.index>_?(B=E,E=null):B=E.sibling;var j=p(x,E,N[_],U);if(j===null){E===null&&(E=B);break}t&&E&&j.alternate===null&&e(x,E),I=i(j,I,_),P===null?D=j:P.sibling=j,P=j,E=B}if(_===N.length)return r(x,E),En&&Ic(x,_),D;if(E===null){for(;_<N.length;_++)E=d(x,N[_],U),E!==null&&(I=i(E,I,_),P===null?D=E:P.sibling=E,P=E);return En&&Ic(x,_),D}for(E=n(x,E);_<N.length;_++)B=g(E,x,_,N[_],U),B!==null&&(t&&B.alternate!==null&&E.delete(B.key===null?_:B.key),I=i(B,I,_),P===null?D=B:P.sibling=B,P=B);return t&&E.forEach(function(S){return e(x,S)}),En&&Ic(x,_),D}function y(x,I,N,U){var D=jh(N);if(typeof D!="function")throw Error(pt(150));if(N=D.call(N),N==null)throw Error(pt(151));for(var P=D=null,E=I,_=I=0,B=null,j=N.next();E!==null&&!j.done;_++,j=N.next()){E.index>_?(B=E,E=null):B=E.sibling;var S=p(x,E,j.value,U);if(S===null){E===null&&(E=B);break}t&&E&&S.alternate===null&&e(x,E),I=i(S,I,_),P===null?D=S:P.sibling=S,P=S,E=B}if(j.done)return r(x,E),En&&Ic(x,_),D;if(E===null){for(;!j.done;_++,j=N.next())j=d(x,j.value,U),j!==null&&(I=i(j,I,_),P===null?D=j:P.sibling=j,P=j);return En&&Ic(x,_),D}for(E=n(x,E);!j.done;_++,j=N.next())j=g(E,x,_,j.value,U),j!==null&&(t&&j.alternate!==null&&E.delete(j.key===null?_:j.key),I=i(j,I,_),P===null?D=j:P.sibling=j,P=j);return t&&E.forEach(function(L){return e(x,L)}),En&&Ic(x,_),D}function k(x,I,N,U){if(typeof N=="object"&&N!==null&&N.type===Ju&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case E0:e:{for(var D=N.key,P=I;P!==null;){if(P.key===D){if(D=N.type,D===Ju){if(P.tag===7){r(x,P.sibling),I=s(P,N.props.children),I.return=x,x=I;break e}}else if(P.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===il&&v_(D)===P.type){r(x,P.sibling),I=s(P,N.props),I.ref=Mh(x,P,N),I.return=x,x=I;break e}r(x,P);break}else e(x,P);P=P.sibling}N.type===Ju?(I=Hc(N.props.children,x.mode,U,N.key),I.return=x,x=I):(U=Og(N.type,N.key,N.props,null,x.mode,U),U.ref=Mh(x,I,N),U.return=x,x=U)}return a(x);case Wu:e:{for(P=N.key;I!==null;){if(I.key===P)if(I.tag===4&&I.stateNode.containerInfo===N.containerInfo&&I.stateNode.implementation===N.implementation){r(x,I.sibling),I=s(I,N.children||[]),I.return=x,x=I;break e}else{r(x,I);break}else e(x,I);I=I.sibling}I=xx(N,x.mode,U),I.return=x,x=I}return a(x);case il:return P=N._init,k(x,I,P(N._payload),U)}if(sf(N))return v(x,I,N,U);if(jh(N))return y(x,I,N,U);P0(x,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,I!==null&&I.tag===6?(r(x,I.sibling),I=s(I,N),I.return=x,x=I):(r(x,I),I=wx(N,x.mode,U),I.return=x,x=I),a(x)):r(x,I)}return k}var Nd=bS(!0),BS=bS(!1),Im=rc(null),Em=null,sd=null,tb=null;function rb(){tb=sd=Em=null}function nb(t){var e=Im.current;Bn(Im),t._currentValue=e}function Zv(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function pd(t,e){Em=t,tb=sd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ri=!0),t.firstContext=null)}function ja(t){var e=t._currentValue;if(tb!==t)if(t={context:t,memoizedValue:e,next:null},sd===null){if(Em===null)throw Error(pt(308));sd=t,Em.dependencies={lanes:0,firstContext:t}}else sd=sd.next=t;return e}var Pc=null;function sb(t){Pc===null?Pc=[t]:Pc.push(t)}function _S(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,sb(e)):(r.next=s.next,s.next=r),e.interleaved=r,pA(t,n)}function pA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var al=!1;function ib(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nl(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,jr&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,pA(t,r)}return s=n.interleaved,s===null?(e.next=e,sb(n)):(e.next=s.next,s.next=e),n.interleaved=e,pA(t,r)}function jg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ky(t,r)}}function y_(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function km(t,e,r,n){var s=t.updateQueue;al=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var A=o,c=A.next;A.next=null,a===null?i=c:a.next=c,a=A;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=A))}if(i!==null){var d=s.baseState;a=0,u=c=A=null,o=i;do{var p=o.lane,g=o.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,y=o;switch(p=e,g=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(g,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(g,d,p):v,p==null)break e;d=Pn({},d,p);break e;case 2:al=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else g={eventTime:g,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=g,A=d):u=u.next=g,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(A=d),s.baseState=A,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Xc|=a,t.lanes=a,t.memoizedState=d}}function b_(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(pt(191,s));s.call(n)}}}var jp={},No=rc(jp),sp=rc(jp),ip=rc(jp);function Dc(t){if(t===jp)throw Error(pt(174));return t}function ab(t,e){switch(pn(ip,e),pn(sp,t),pn(No,jp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uv(e,t)}Bn(No),pn(No,e)}function Fd(){Bn(No),Bn(sp),Bn(ip)}function IS(t){Dc(ip.current);var e=Dc(No.current),r=Uv(e,t.type);e!==r&&(pn(sp,t),pn(No,r))}function ob(t){sp.current===t&&(Bn(No),Bn(sp))}var jn=rc(0);function Sm(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dx=[];function Ab(){for(var t=0;t<dx.length;t++)dx[t]._workInProgressVersionPrimary=null;dx.length=0}var Qg=bA.ReactCurrentDispatcher,hx=bA.ReactCurrentBatchConfig,Jc=0,Qn=null,xs=null,Ss=null,Nm=!1,kf=!1,ap=0,JQ=0;function ti(){throw Error(pt(321))}function lb(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ro(t[r],e[r]))return!1;return!0}function cb(t,e,r,n,s,i){if(Jc=i,Qn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qg.current=t===null||t.memoizedState===null?eR:tR,t=r(n,s),kf){i=0;do{if(kf=!1,ap=0,25<=i)throw Error(pt(301));i+=1,Ss=xs=null,e.updateQueue=null,Qg.current=rR,t=r(n,s)}while(kf)}if(Qg.current=Fm,e=xs!==null&&xs.next!==null,Jc=0,Ss=xs=Qn=null,Nm=!1,e)throw Error(pt(300));return t}function ub(){var t=ap!==0;return ap=0,t}function bo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ss===null?Qn.memoizedState=Ss=t:Ss=Ss.next=t,Ss}function Qa(){if(xs===null){var t=Qn.alternate;t=t!==null?t.memoizedState:null}else t=xs.next;var e=Ss===null?Qn.memoizedState:Ss.next;if(e!==null)Ss=e,xs=t;else{if(t===null)throw Error(pt(310));xs=t,t={memoizedState:xs.memoizedState,baseState:xs.baseState,baseQueue:xs.baseQueue,queue:xs.queue,next:null},Ss===null?Qn.memoizedState=Ss=t:Ss=Ss.next=t}return Ss}function op(t,e){return typeof e=="function"?e(t):e}function fx(t){var e=Qa(),r=e.queue;if(r===null)throw Error(pt(311));r.lastRenderedReducer=t;var n=xs,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,A=null,c=i;do{var u=c.lane;if((Jc&u)===u)A!==null&&(A=A.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};A===null?(o=A=d,a=n):A=A.next=d,Qn.lanes|=u,Xc|=u}c=c.next}while(c!==null&&c!==i);A===null?a=n:A.next=o,ro(n,e.memoizedState)||(Ri=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=A,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Qn.lanes|=i,Xc|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function px(t){var e=Qa(),r=e.queue;if(r===null)throw Error(pt(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);ro(i,e.memoizedState)||(Ri=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function ES(){}function kS(t,e){var r=Qn,n=Qa(),s=e(),i=!ro(n.memoizedState,s);if(i&&(n.memoizedState=s,Ri=!0),n=n.queue,db(FS.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Ss!==null&&Ss.memoizedState.tag&1){if(r.flags|=2048,Ap(9,NS.bind(null,r,n,s,e),void 0,null),Ts===null)throw Error(pt(349));Jc&30||SS(r,e,s)}return s}function SS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Qn.updateQueue,e===null?(e={lastEffect:null,stores:null},Qn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function NS(t,e,r,n){e.value=r,e.getSnapshot=n,TS(e)&&US(t)}function FS(t,e,r){return r(function(){TS(e)&&US(t)})}function TS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ro(t,r)}catch{return!0}}function US(t){var e=pA(t,1);e!==null&&eo(e,t,1,-1)}function B_(t){var e=bo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:op,lastRenderedState:t},e.queue=t,t=t.dispatch=ZQ.bind(null,Qn,t),[e.memoizedState,t]}function Ap(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Qn.updateQueue,e===null?(e={lastEffect:null,stores:null},Qn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function LS(){return Qa().memoizedState}function Rg(t,e,r,n){var s=bo();Qn.flags|=t,s.memoizedState=Ap(1|e,r,void 0,n===void 0?null:n)}function Fw(t,e,r,n){var s=Qa();n=n===void 0?null:n;var i=void 0;if(xs!==null){var a=xs.memoizedState;if(i=a.destroy,n!==null&&lb(n,a.deps)){s.memoizedState=Ap(e,r,i,n);return}}Qn.flags|=t,s.memoizedState=Ap(1|e,r,i,n)}function __(t,e){return Rg(8390656,8,t,e)}function db(t,e){return Fw(2048,8,t,e)}function jS(t,e){return Fw(4,2,t,e)}function QS(t,e){return Fw(4,4,t,e)}function RS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function PS(t,e,r){return r=r!=null?r.concat([t]):null,Fw(4,4,RS.bind(null,e,t),r)}function hb(){}function DS(t,e){var r=Qa();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&lb(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function MS(t,e){var r=Qa();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&lb(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function OS(t,e,r){return Jc&21?(ro(r,e)||(r=Gk(),Qn.lanes|=r,Xc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ri=!0),t.memoizedState=r)}function XQ(t,e){var r=Zr;Zr=r!==0&&4>r?r:4,t(!0);var n=hx.transition;hx.transition={};try{t(!1),e()}finally{Zr=r,hx.transition=n}}function HS(){return Qa().memoizedState}function YQ(t,e,r){var n=Tl(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},VS(t))KS(e,r);else if(r=_S(t,e,r,n),r!==null){var s=_i();eo(r,t,n,s),zS(r,e,n)}}function ZQ(t,e,r){var n=Tl(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(VS(t))KS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,ro(o,a)){var A=e.interleaved;A===null?(s.next=s,sb(e)):(s.next=A.next,A.next=s),e.interleaved=s;return}}catch{}finally{}r=_S(t,e,s,n),r!==null&&(s=_i(),eo(r,t,n,s),zS(r,e,n))}}function VS(t){var e=t.alternate;return t===Qn||e!==null&&e===Qn}function KS(t,e){kf=Nm=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function zS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ky(t,r)}}var Fm={readContext:ja,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useInsertionEffect:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useSyncExternalStore:ti,useId:ti,unstable_isNewReconciler:!1},eR={readContext:ja,useCallback:function(t,e){return bo().memoizedState=[t,e===void 0?null:e],t},useContext:ja,useEffect:__,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Rg(4194308,4,RS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Rg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rg(4,2,t,e)},useMemo:function(t,e){var r=bo();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=bo();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=YQ.bind(null,Qn,t),[n.memoizedState,t]},useRef:function(t){var e=bo();return t={current:t},e.memoizedState=t},useState:B_,useDebugValue:hb,useDeferredValue:function(t){return bo().memoizedState=t},useTransition:function(){var t=B_(!1),e=t[0];return t=XQ.bind(null,t[1]),bo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Qn,s=bo();if(En){if(r===void 0)throw Error(pt(407));r=r()}else{if(r=e(),Ts===null)throw Error(pt(349));Jc&30||SS(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,__(FS.bind(null,n,i,t),[t]),n.flags|=2048,Ap(9,NS.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=bo(),e=Ts.identifierPrefix;if(En){var r=sA,n=nA;r=(n&~(1<<32-Za(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ap++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=JQ++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tR={readContext:ja,useCallback:DS,useContext:ja,useEffect:db,useImperativeHandle:PS,useInsertionEffect:jS,useLayoutEffect:QS,useMemo:MS,useReducer:fx,useRef:LS,useState:function(){return fx(op)},useDebugValue:hb,useDeferredValue:function(t){var e=Qa();return OS(e,xs.memoizedState,t)},useTransition:function(){var t=fx(op)[0],e=Qa().memoizedState;return[t,e]},useMutableSource:ES,useSyncExternalStore:kS,useId:HS,unstable_isNewReconciler:!1},rR={readContext:ja,useCallback:DS,useContext:ja,useEffect:db,useImperativeHandle:PS,useInsertionEffect:jS,useLayoutEffect:QS,useMemo:MS,useReducer:px,useRef:LS,useState:function(){return px(op)},useDebugValue:hb,useDeferredValue:function(t){var e=Qa();return xs===null?e.memoizedState=t:OS(e,xs.memoizedState,t)},useTransition:function(){var t=px(op)[0],e=Qa().memoizedState;return[t,e]},useMutableSource:ES,useSyncExternalStore:kS,useId:HS,unstable_isNewReconciler:!1};function Ja(t,e){if(t&&t.defaultProps){e=Pn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function e2(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Pn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Tw={isMounted:function(t){return(t=t._reactInternals)?fu(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=_i(),s=Tl(t),i=cA(n,s);i.payload=e,r!=null&&(i.callback=r),e=Nl(t,i,s),e!==null&&(eo(e,t,s,n),jg(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=_i(),s=Tl(t),i=cA(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Nl(t,i,s),e!==null&&(eo(e,t,s,n),jg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=_i(),n=Tl(t),s=cA(r,n);s.tag=2,e!=null&&(s.callback=e),e=Nl(t,s,n),e!==null&&(eo(e,t,n,r),jg(e,t,n))}};function C_(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!ep(r,n)||!ep(s,i):!0}function GS(t,e,r){var n=!1,s=Hl,i=e.contextType;return typeof i=="object"&&i!==null?i=ja(i):(s=Hi(e)?qc:pi.current,n=e.contextTypes,i=(n=n!=null)?kd(t,s):Hl),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tw,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function I_(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Tw.enqueueReplaceState(e,e.state,null)}function t2(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},ib(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ja(i):(i=Hi(e)?qc:pi.current,s.context=kd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(e2(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tw.enqueueReplaceState(s,s.state,null),km(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Td(t,e){try{var r="",n=e;do r+=Nj(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function gx(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function r2(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var nR=typeof WeakMap=="function"?WeakMap:Map;function $S(t,e,r){r=cA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Um||(Um=!0,d2=n),r2(t,e)},r}function qS(t,e,r){r=cA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){r2(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){r2(t,e),typeof n!="function"&&(Fl===null?Fl=new Set([this]):Fl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function E_(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new nR;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=mR.bind(null,t,e,r),e.then(t,t))}function k_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function S_(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=cA(-1,1),e.tag=2,Nl(r,e,1))),r.lanes|=1),t)}var sR=bA.ReactCurrentOwner,Ri=!1;function Bi(t,e,r,n){e.child=t===null?BS(e,null,r,n):Nd(e,t.child,r,n)}function N_(t,e,r,n,s){r=r.render;var i=e.ref;return pd(e,s),n=cb(t,e,r,n,i,s),r=ub(),t!==null&&!Ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gA(t,e,s)):(En&&r&&Yy(e),e.flags|=1,Bi(t,e,n,s),e.child)}function F_(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!yb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,WS(t,e,i,n,s)):(t=Og(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:ep,r(a,n)&&t.ref===e.ref)return gA(t,e,s)}return e.flags|=1,t=Ul(i,n),t.ref=e.ref,t.return=e,e.child=t}function WS(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(ep(i,n)&&t.ref===e.ref)if(Ri=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Ri=!0);else return e.lanes=t.lanes,gA(t,e,s)}return n2(t,e,r,n,s)}function JS(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(ad,aa),aa|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pn(ad,aa),aa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,pn(ad,aa),aa|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,pn(ad,aa),aa|=n;return Bi(t,e,s,r),e.child}function XS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function n2(t,e,r,n,s){var i=Hi(r)?qc:pi.current;return i=kd(e,i),pd(e,s),r=cb(t,e,r,n,i,s),n=ub(),t!==null&&!Ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gA(t,e,s)):(En&&n&&Yy(e),e.flags|=1,Bi(t,e,r,s),e.child)}function T_(t,e,r,n,s){if(Hi(r)){var i=!0;Bm(e)}else i=!1;if(pd(e,s),e.stateNode===null)Pg(t,e),GS(e,r,n),t2(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var A=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=ja(c):(c=Hi(r)?qc:pi.current,c=kd(e,c));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||A!==c)&&I_(e,a,n,c),al=!1;var p=e.memoizedState;a.state=p,km(e,n,a,s),A=e.memoizedState,o!==n||p!==A||Oi.current||al?(typeof u=="function"&&(e2(e,r,u,n),A=e.memoizedState),(o=al||C_(e,r,o,n,p,A,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=A),a.props=n,a.state=A,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,CS(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Ja(e.type,o),a.props=c,d=e.pendingProps,p=a.context,A=r.contextType,typeof A=="object"&&A!==null?A=ja(A):(A=Hi(r)?qc:pi.current,A=kd(e,A));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||p!==A)&&I_(e,a,n,A),al=!1,p=e.memoizedState,a.state=p,km(e,n,a,s);var v=e.memoizedState;o!==d||p!==v||Oi.current||al?(typeof g=="function"&&(e2(e,r,g,n),v=e.memoizedState),(c=al||C_(e,r,c,n,p,v,A)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,A),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,A)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=A,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return s2(t,e,r,n,i,s)}function s2(t,e,r,n,s,i){XS(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&m_(e,r,!1),gA(t,e,i);n=e.stateNode,sR.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Nd(e,t.child,null,i),e.child=Nd(e,null,o,i)):Bi(t,e,o,i),e.memoizedState=n.state,s&&m_(e,r,!0),e.child}function YS(t){var e=t.stateNode;e.pendingContext?g_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&g_(t,e.context,!1),ab(t,e.containerInfo)}function U_(t,e,r,n,s){return Sd(),eb(s),e.flags|=256,Bi(t,e,r,n),e.child}var i2={dehydrated:null,treeContext:null,retryLane:0};function a2(t){return{baseLanes:t,cachePool:null,transitions:null}}function ZS(t,e,r){var n=e.pendingProps,s=jn.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pn(jn,s&1),t===null)return Yv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=jw(a,n,0,null),t=Hc(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=a2(r),e.memoizedState=i2,t):fb(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return iR(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var A={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=A,e.deletions=null):(n=Ul(s,A),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Ul(o,i):(i=Hc(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?a2(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=i2,n}return i=t.child,t=i.sibling,n=Ul(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function fb(t,e){return e=jw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function D0(t,e,r,n){return n!==null&&eb(n),Nd(e,t.child,null,r),t=fb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iR(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=gx(Error(pt(422))),D0(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=jw({mode:"visible",children:n.children},s,0,null),i=Hc(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Nd(e,t.child,null,a),e.child.memoizedState=a2(a),e.memoizedState=i2,i);if(!(e.mode&1))return D0(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(pt(419)),n=gx(i,n,void 0),D0(t,e,a,n)}if(o=(a&t.childLanes)!==0,Ri||o){if(n=Ts,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,pA(t,s),eo(n,t,s,-1))}return vb(),n=gx(Error(pt(421))),D0(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=wR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,oa=Sl(s.nextSibling),la=e,En=!0,Ya=null,t!==null&&(Ea[ka++]=nA,Ea[ka++]=sA,Ea[ka++]=Wc,nA=t.id,sA=t.overflow,Wc=e),e=fb(e,n.children),e.flags|=4096,e)}function L_(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Zv(t.return,e,r)}function mx(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function eN(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Bi(t,e,n.children,r),n=jn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L_(t,r,e);else if(t.tag===19)L_(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(pn(jn,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Sm(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),mx(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Sm(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}mx(e,!0,r,null,i);break;case"together":mx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Xc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(pt(153));if(e.child!==null){for(t=e.child,r=Ul(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ul(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function aR(t,e,r){switch(e.tag){case 3:YS(e),Sd();break;case 5:IS(e);break;case 1:Hi(e.type)&&Bm(e);break;case 4:ab(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;pn(Im,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(pn(jn,jn.current&1),e.flags|=128,null):r&e.child.childLanes?ZS(t,e,r):(pn(jn,jn.current&1),t=gA(t,e,r),t!==null?t.sibling:null);pn(jn,jn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return eN(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pn(jn,jn.current),n)break;return null;case 22:case 23:return e.lanes=0,JS(t,e,r)}return gA(t,e,r)}var tN,o2,rN,nN;tN=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};o2=function(){};rN=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Dc(No.current);var i=null;switch(r){case"input":s=Sv(t,s),n=Sv(t,n),i=[];break;case"select":s=Pn({},s,{value:void 0}),n=Pn({},n,{value:void 0}),i=[];break;case"textarea":s=Tv(t,s),n=Tv(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ym)}Lv(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($f.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var A=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&A!==o&&(A!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||A&&A.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in A)A.hasOwnProperty(a)&&o[a]!==A[a]&&(r||(r={}),r[a]=A[a])}else r||(i||(i=[]),i.push(c,r)),r=A;else c==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,o=o?o.__html:void 0,A!=null&&o!==A&&(i=i||[]).push(c,A)):c==="children"?typeof A!="string"&&typeof A!="number"||(i=i||[]).push(c,""+A):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($f.hasOwnProperty(c)?(A!=null&&c==="onScroll"&&xn("scroll",t),i||o===A||(i=[])):(i=i||[]).push(c,A))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};nN=function(t,e,r,n){r!==n&&(e.flags|=4)};function Oh(t,e){if(!En)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ri(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function oR(t,e,r){var n=e.pendingProps;switch(Zy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(e),null;case 1:return Hi(e.type)&&bm(),ri(e),null;case 3:return n=e.stateNode,Fd(),Bn(Oi),Bn(pi),Ab(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(R0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ya!==null&&(p2(Ya),Ya=null))),o2(t,e),ri(e),null;case 5:ob(e);var s=Dc(ip.current);if(r=e.type,t!==null&&e.stateNode!=null)rN(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(pt(166));return ri(e),null}if(t=Dc(No.current),R0(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Bo]=e,n[np]=i,t=(e.mode&1)!==0,r){case"dialog":xn("cancel",n),xn("close",n);break;case"iframe":case"object":case"embed":xn("load",n);break;case"video":case"audio":for(s=0;s<of.length;s++)xn(of[s],n);break;case"source":xn("error",n);break;case"img":case"image":case"link":xn("error",n),xn("load",n);break;case"details":xn("toggle",n);break;case"input":V5(n,i),xn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},xn("invalid",n);break;case"textarea":z5(n,i),xn("invalid",n)}Lv(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Q0(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Q0(n.textContent,o,t),s=["children",""+o]):$f.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&xn("scroll",n)}switch(r){case"input":k0(n),K5(n,i,!0);break;case"textarea":k0(n),G5(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ym)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fk(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Bo]=e,t[np]=n,tN(t,e,!1,!1),e.stateNode=t;e:{switch(a=jv(r,n),r){case"dialog":xn("cancel",t),xn("close",t),s=n;break;case"iframe":case"object":case"embed":xn("load",t),s=n;break;case"video":case"audio":for(s=0;s<of.length;s++)xn(of[s],t);s=n;break;case"source":xn("error",t),s=n;break;case"img":case"image":case"link":xn("error",t),xn("load",t),s=n;break;case"details":xn("toggle",t),s=n;break;case"input":V5(t,n),s=Sv(t,n),xn("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Pn({},n,{value:void 0}),xn("invalid",t);break;case"textarea":z5(t,n),s=Tv(t,n),xn("invalid",t);break;default:s=n}Lv(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var A=o[i];i==="style"?Lk(t,A):i==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&Tk(t,A)):i==="children"?typeof A=="string"?(r!=="textarea"||A!=="")&&qf(t,A):typeof A=="number"&&qf(t,""+A):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($f.hasOwnProperty(i)?A!=null&&i==="onScroll"&&xn("scroll",t):A!=null&&Py(t,i,A,a))}switch(r){case"input":k0(t),K5(t,n,!1);break;case"textarea":k0(t),G5(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ol(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ud(t,!!n.multiple,i,!1):n.defaultValue!=null&&ud(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ym)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ri(e),null;case 6:if(t&&e.stateNode!=null)nN(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(pt(166));if(r=Dc(ip.current),Dc(No.current),R0(e)){if(n=e.stateNode,r=e.memoizedProps,n[Bo]=e,(i=n.nodeValue!==r)&&(t=la,t!==null))switch(t.tag){case 3:Q0(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Q0(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Bo]=e,e.stateNode=n}return ri(e),null;case 13:if(Bn(jn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(En&&oa!==null&&e.mode&1&&!(e.flags&128))yS(),Sd(),e.flags|=98560,i=!1;else if(i=R0(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(pt(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(pt(317));i[Bo]=e}else Sd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ri(e),i=!1}else Ya!==null&&(p2(Ya),Ya=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||jn.current&1?ys===0&&(ys=3):vb())),e.updateQueue!==null&&(e.flags|=4),ri(e),null);case 4:return Fd(),o2(t,e),t===null&&tp(e.stateNode.containerInfo),ri(e),null;case 10:return nb(e.type._context),ri(e),null;case 17:return Hi(e.type)&&bm(),ri(e),null;case 19:if(Bn(jn),i=e.memoizedState,i===null)return ri(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Oh(i,!1);else{if(ys!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Sm(t),a!==null){for(e.flags|=128,Oh(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return pn(jn,jn.current&1|2),e.child}t=t.sibling}i.tail!==null&&ss()>Ud&&(e.flags|=128,n=!0,Oh(i,!1),e.lanes=4194304)}else{if(!n)if(t=Sm(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Oh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!En)return ri(e),null}else 2*ss()-i.renderingStartTime>Ud&&r!==1073741824&&(e.flags|=128,n=!0,Oh(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ss(),e.sibling=null,r=jn.current,pn(jn,n?r&1|2:r&1),e):(ri(e),null);case 22:case 23:return xb(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?aa&1073741824&&(ri(e),e.subtreeFlags&6&&(e.flags|=8192)):ri(e),null;case 24:return null;case 25:return null}throw Error(pt(156,e.tag))}function AR(t,e){switch(Zy(e),e.tag){case 1:return Hi(e.type)&&bm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fd(),Bn(Oi),Bn(pi),Ab(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ob(e),null;case 13:if(Bn(jn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(pt(340));Sd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Bn(jn),null;case 4:return Fd(),null;case 10:return nb(e.type._context),null;case 22:case 23:return xb(),null;case 24:return null;default:return null}}var M0=!1,di=!1,lR=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function id(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Gn(t,e,n)}else r.current=null}function A2(t,e,r){try{r()}catch(n){Gn(t,e,n)}}var j_=!1;function cR(t,e){if(zv=wm,t=AS(),Xy(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,A=-1,c=0,u=0,d=t,p=null;t:for(;;){for(var g;d!==r||s!==0&&d.nodeType!==3||(o=a+s),d!==i||n!==0&&d.nodeType!==3||(A=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===r&&++c===s&&(o=a),p===i&&++u===n&&(A=a),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}r=o===-1||A===-1?null:{start:o,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(Gv={focusedElem:t,selectionRange:r},wm=!1,Rt=e;Rt!==null;)if(e=Rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Rt=t;else for(;Rt!==null;){e=Rt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,k=v.memoizedState,x=e.stateNode,I=x.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ja(e.type,y),k);x.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pt(163))}}catch(U){Gn(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,Rt=t;break}Rt=e.return}return v=j_,j_=!1,v}function Sf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&A2(e,r,i)}s=s.next}while(s!==n)}}function Uw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function l2(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function sN(t){var e=t.alternate;e!==null&&(t.alternate=null,sN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bo],delete e[np],delete e[Wv],delete e[GQ],delete e[$Q])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iN(t){return t.tag===5||t.tag===3||t.tag===4}function Q_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function c2(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ym));else if(n!==4&&(t=t.child,t!==null))for(c2(t,e,r),t=t.sibling;t!==null;)c2(t,e,r),t=t.sibling}function u2(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(u2(t,e,r),t=t.sibling;t!==null;)u2(t,e,r),t=t.sibling}var Os=null,Xa=!1;function JA(t,e,r){for(r=r.child;r!==null;)aN(t,e,r),r=r.sibling}function aN(t,e,r){if(So&&typeof So.onCommitFiberUnmount=="function")try{So.onCommitFiberUnmount(Cw,r)}catch{}switch(r.tag){case 5:di||id(r,e);case 6:var n=Os,s=Xa;Os=null,JA(t,e,r),Os=n,Xa=s,Os!==null&&(Xa?(t=Os,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Os.removeChild(r.stateNode));break;case 18:Os!==null&&(Xa?(t=Os,r=r.stateNode,t.nodeType===8?cx(t.parentNode,r):t.nodeType===1&&cx(t,r),Yf(t)):cx(Os,r.stateNode));break;case 4:n=Os,s=Xa,Os=r.stateNode.containerInfo,Xa=!0,JA(t,e,r),Os=n,Xa=s;break;case 0:case 11:case 14:case 15:if(!di&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&A2(r,e,a),s=s.next}while(s!==n)}JA(t,e,r);break;case 1:if(!di&&(id(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Gn(r,e,o)}JA(t,e,r);break;case 21:JA(t,e,r);break;case 22:r.mode&1?(di=(n=di)||r.memoizedState!==null,JA(t,e,r),di=n):JA(t,e,r);break;default:JA(t,e,r)}}function R_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lR),e.forEach(function(n){var s=xR.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ga(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Os=o.stateNode,Xa=!1;break e;case 3:Os=o.stateNode.containerInfo,Xa=!0;break e;case 4:Os=o.stateNode.containerInfo,Xa=!0;break e}o=o.return}if(Os===null)throw Error(pt(160));aN(i,a,s),Os=null,Xa=!1;var A=s.alternate;A!==null&&(A.return=null),s.return=null}catch(c){Gn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oN(e,t),e=e.sibling}function oN(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ga(e,t),mo(t),n&4){try{Sf(3,t,t.return),Uw(3,t)}catch(y){Gn(t,t.return,y)}try{Sf(5,t,t.return)}catch(y){Gn(t,t.return,y)}}break;case 1:Ga(e,t),mo(t),n&512&&r!==null&&id(r,r.return);break;case 5:if(Ga(e,t),mo(t),n&512&&r!==null&&id(r,r.return),t.flags&32){var s=t.stateNode;try{qf(s,"")}catch(y){Gn(t,t.return,y)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Sk(s,i),jv(o,a);var c=jv(o,i);for(a=0;a<A.length;a+=2){var u=A[a],d=A[a+1];u==="style"?Lk(s,d):u==="dangerouslySetInnerHTML"?Tk(s,d):u==="children"?qf(s,d):Py(s,u,d,c)}switch(o){case"input":Nv(s,i);break;case"textarea":Nk(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ud(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?ud(s,!!i.multiple,i.defaultValue,!0):ud(s,!!i.multiple,i.multiple?[]:"",!1))}s[np]=i}catch(y){Gn(t,t.return,y)}}break;case 6:if(Ga(e,t),mo(t),n&4){if(t.stateNode===null)throw Error(pt(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Gn(t,t.return,y)}}break;case 3:if(Ga(e,t),mo(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Yf(e.containerInfo)}catch(y){Gn(t,t.return,y)}break;case 4:Ga(e,t),mo(t);break;case 13:Ga(e,t),mo(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(mb=ss())),n&4&&R_(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(di=(c=di)||u,Ga(e,t),di=c):Ga(e,t),mo(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Rt=t,u=t.child;u!==null;){for(d=Rt=u;Rt!==null;){switch(p=Rt,g=p.child,p.tag){case 0:case 11:case 14:case 15:Sf(4,p,p.return);break;case 1:id(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Gn(n,r,y)}}break;case 5:id(p,p.return);break;case 22:if(p.memoizedState!==null){D_(d);continue}}g!==null?(g.return=p,Rt=g):D_(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=d.stateNode,A=d.memoizedProps.style,a=A!=null&&A.hasOwnProperty("display")?A.display:null,o.style.display=Uk("display",a))}catch(y){Gn(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Gn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ga(e,t),mo(t),n&4&&R_(t);break;case 21:break;default:Ga(e,t),mo(t)}}function mo(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(iN(r)){var n=r;break e}r=r.return}throw Error(pt(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(qf(s,""),n.flags&=-33);var i=Q_(t);u2(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Q_(t);c2(t,o,a);break;default:throw Error(pt(161))}}catch(A){Gn(t,t.return,A)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uR(t,e,r){Rt=t,AN(t)}function AN(t,e,r){for(var n=(t.mode&1)!==0;Rt!==null;){var s=Rt,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||M0;if(!a){var o=s.alternate,A=o!==null&&o.memoizedState!==null||di;o=M0;var c=di;if(M0=a,(di=A)&&!c)for(Rt=s;Rt!==null;)a=Rt,A=a.child,a.tag===22&&a.memoizedState!==null?M_(s):A!==null?(A.return=a,Rt=A):M_(s);for(;i!==null;)Rt=i,AN(i),i=i.sibling;Rt=s,M0=o,di=c}P_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Rt=i):P_(t)}}function P_(t){for(;Rt!==null;){var e=Rt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:di||Uw(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!di)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ja(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&b_(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}b_(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var A=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&r.focus();break;case"img":A.src&&(r.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Yf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pt(163))}di||e.flags&512&&l2(e)}catch(p){Gn(e,e.return,p)}}if(e===t){Rt=null;break}if(r=e.sibling,r!==null){r.return=e.return,Rt=r;break}Rt=e.return}}function D_(t){for(;Rt!==null;){var e=Rt;if(e===t){Rt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Rt=r;break}Rt=e.return}}function M_(t){for(;Rt!==null;){var e=Rt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Uw(4,e)}catch(A){Gn(e,r,A)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(A){Gn(e,s,A)}}var i=e.return;try{l2(e)}catch(A){Gn(e,i,A)}break;case 5:var a=e.return;try{l2(e)}catch(A){Gn(e,a,A)}}}catch(A){Gn(e,e.return,A)}if(e===t){Rt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Rt=o;break}Rt=e.return}}var dR=Math.ceil,Tm=bA.ReactCurrentDispatcher,pb=bA.ReactCurrentOwner,La=bA.ReactCurrentBatchConfig,jr=0,Ts=null,fs=null,qs=0,aa=0,ad=rc(0),ys=0,lp=null,Xc=0,Lw=0,gb=0,Nf=null,ji=null,mb=0,Ud=1/0,eA=null,Um=!1,d2=null,Fl=null,O0=!1,wl=null,Lm=0,Ff=0,h2=null,Dg=-1,Mg=0;function _i(){return jr&6?ss():Dg!==-1?Dg:Dg=ss()}function Tl(t){return t.mode&1?jr&2&&qs!==0?qs&-qs:WQ.transition!==null?(Mg===0&&(Mg=Gk()),Mg):(t=Zr,t!==0||(t=window.event,t=t===void 0?16:Zk(t.type)),t):1}function eo(t,e,r,n){if(50<Ff)throw Ff=0,h2=null,Error(pt(185));Tp(t,r,n),(!(jr&2)||t!==Ts)&&(t===Ts&&(!(jr&2)&&(Lw|=r),ys===4&&ll(t,qs)),Vi(t,n),r===1&&jr===0&&!(e.mode&1)&&(Ud=ss()+500,Nw&&nc()))}function Vi(t,e){var r=t.callbackNode;Wj(t,e);var n=mm(t,t===Ts?qs:0);if(n===0)r!==null&&W5(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&W5(r),e===1)t.tag===0?qQ(O_.bind(null,t)):wS(O_.bind(null,t)),KQ(function(){!(jr&6)&&nc()}),r=null;else{switch($k(n)){case 1:r=Vy;break;case 4:r=Kk;break;case 16:r=gm;break;case 536870912:r=zk;break;default:r=gm}r=gN(r,lN.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function lN(t,e){if(Dg=-1,Mg=0,jr&6)throw Error(pt(327));var r=t.callbackNode;if(gd()&&t.callbackNode!==r)return null;var n=mm(t,t===Ts?qs:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=jm(t,n);else{e=n;var s=jr;jr|=2;var i=uN();(Ts!==t||qs!==e)&&(eA=null,Ud=ss()+500,Oc(t,e));do try{pR();break}catch(o){cN(t,o)}while(!0);rb(),Tm.current=i,jr=s,fs!==null?e=0:(Ts=null,qs=0,e=ys)}if(e!==0){if(e===2&&(s=Mv(t),s!==0&&(n=s,e=f2(t,s))),e===1)throw r=lp,Oc(t,0),ll(t,n),Vi(t,ss()),r;if(e===6)ll(t,n);else{if(s=t.current.alternate,!(n&30)&&!hR(s)&&(e=jm(t,n),e===2&&(i=Mv(t),i!==0&&(n=i,e=f2(t,i))),e===1))throw r=lp,Oc(t,0),ll(t,n),Vi(t,ss()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(pt(345));case 2:Ec(t,ji,eA);break;case 3:if(ll(t,n),(n&130023424)===n&&(e=mb+500-ss(),10<e)){if(mm(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){_i(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=qv(Ec.bind(null,t,ji,eA),e);break}Ec(t,ji,eA);break;case 4:if(ll(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-Za(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=ss()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dR(n/1960))-n,10<n){t.timeoutHandle=qv(Ec.bind(null,t,ji,eA),n);break}Ec(t,ji,eA);break;case 5:Ec(t,ji,eA);break;default:throw Error(pt(329))}}}return Vi(t,ss()),t.callbackNode===r?lN.bind(null,t):null}function f2(t,e){var r=Nf;return t.current.memoizedState.isDehydrated&&(Oc(t,e).flags|=256),t=jm(t,e),t!==2&&(e=ji,ji=r,e!==null&&p2(e)),t}function p2(t){ji===null?ji=t:ji.push.apply(ji,t)}function hR(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ro(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ll(t,e){for(e&=~gb,e&=~Lw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Za(e),n=1<<r;t[r]=-1,e&=~n}}function O_(t){if(jr&6)throw Error(pt(327));gd();var e=mm(t,0);if(!(e&1))return Vi(t,ss()),null;var r=jm(t,e);if(t.tag!==0&&r===2){var n=Mv(t);n!==0&&(e=n,r=f2(t,n))}if(r===1)throw r=lp,Oc(t,0),ll(t,e),Vi(t,ss()),r;if(r===6)throw Error(pt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ec(t,ji,eA),Vi(t,ss()),null}function wb(t,e){var r=jr;jr|=1;try{return t(e)}finally{jr=r,jr===0&&(Ud=ss()+500,Nw&&nc())}}function Yc(t){wl!==null&&wl.tag===0&&!(jr&6)&&gd();var e=jr;jr|=1;var r=La.transition,n=Zr;try{if(La.transition=null,Zr=1,t)return t()}finally{Zr=n,La.transition=r,jr=e,!(jr&6)&&nc()}}function xb(){aa=ad.current,Bn(ad)}function Oc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,VQ(r)),fs!==null)for(r=fs.return;r!==null;){var n=r;switch(Zy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bm();break;case 3:Fd(),Bn(Oi),Bn(pi),Ab();break;case 5:ob(n);break;case 4:Fd();break;case 13:Bn(jn);break;case 19:Bn(jn);break;case 10:nb(n.type._context);break;case 22:case 23:xb()}r=r.return}if(Ts=t,fs=t=Ul(t.current,null),qs=aa=e,ys=0,lp=null,gb=Lw=Xc=0,ji=Nf=null,Pc!==null){for(e=0;e<Pc.length;e++)if(r=Pc[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Pc=null}return t}function cN(t,e){do{var r=fs;try{if(rb(),Qg.current=Fm,Nm){for(var n=Qn.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Nm=!1}if(Jc=0,Ss=xs=Qn=null,kf=!1,ap=0,pb.current=null,r===null||r.return===null){ys=1,lp=e,fs=null;break}e:{var i=t,a=r.return,o=r,A=e;if(e=qs,o.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var c=A,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=k_(a);if(g!==null){g.flags&=-257,S_(g,a,o,i,e),g.mode&1&&E_(i,c,e),e=g,A=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(A),e.updateQueue=y}else v.add(A);break e}else{if(!(e&1)){E_(i,c,e),vb();break e}A=Error(pt(426))}}else if(En&&o.mode&1){var k=k_(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),S_(k,a,o,i,e),eb(Td(A,o));break e}}i=A=Td(A,o),ys!==4&&(ys=2),Nf===null?Nf=[i]:Nf.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=$S(i,A,e);y_(i,x);break e;case 1:o=A;var I=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof I.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Fl===null||!Fl.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var U=qS(i,o,e);y_(i,U);break e}}i=i.return}while(i!==null)}hN(r)}catch(D){e=D,fs===r&&r!==null&&(fs=r=r.return);continue}break}while(!0)}function uN(){var t=Tm.current;return Tm.current=Fm,t===null?Fm:t}function vb(){(ys===0||ys===3||ys===2)&&(ys=4),Ts===null||!(Xc&268435455)&&!(Lw&268435455)||ll(Ts,qs)}function jm(t,e){var r=jr;jr|=2;var n=uN();(Ts!==t||qs!==e)&&(eA=null,Oc(t,e));do try{fR();break}catch(s){cN(t,s)}while(!0);if(rb(),jr=r,Tm.current=n,fs!==null)throw Error(pt(261));return Ts=null,qs=0,ys}function fR(){for(;fs!==null;)dN(fs)}function pR(){for(;fs!==null&&!Mj();)dN(fs)}function dN(t){var e=pN(t.alternate,t,aa);t.memoizedProps=t.pendingProps,e===null?hN(t):fs=e,pb.current=null}function hN(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=AR(r,e),r!==null){r.flags&=32767,fs=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ys=6,fs=null;return}}else if(r=oR(r,e,aa),r!==null){fs=r;return}if(e=e.sibling,e!==null){fs=e;return}fs=e=t}while(e!==null);ys===0&&(ys=5)}function Ec(t,e,r){var n=Zr,s=La.transition;try{La.transition=null,Zr=1,gR(t,e,r,n)}finally{La.transition=s,Zr=n}return null}function gR(t,e,r,n){do gd();while(wl!==null);if(jr&6)throw Error(pt(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(pt(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Jj(t,i),t===Ts&&(fs=Ts=null,qs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||O0||(O0=!0,gN(gm,function(){return gd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=La.transition,La.transition=null;var a=Zr;Zr=1;var o=jr;jr|=4,pb.current=null,cR(t,r),oN(r,t),QQ(Gv),wm=!!zv,Gv=zv=null,t.current=r,uR(r),Oj(),jr=o,Zr=a,La.transition=i}else t.current=r;if(O0&&(O0=!1,wl=t,Lm=s),i=t.pendingLanes,i===0&&(Fl=null),Kj(r.stateNode),Vi(t,ss()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Um)throw Um=!1,t=d2,d2=null,t;return Lm&1&&t.tag!==0&&gd(),i=t.pendingLanes,i&1?t===h2?Ff++:(Ff=0,h2=t):Ff=0,nc(),null}function gd(){if(wl!==null){var t=$k(Lm),e=La.transition,r=Zr;try{if(La.transition=null,Zr=16>t?16:t,wl===null)var n=!1;else{if(t=wl,wl=null,Lm=0,jr&6)throw Error(pt(331));var s=jr;for(jr|=4,Rt=t.current;Rt!==null;){var i=Rt,a=i.child;if(Rt.flags&16){var o=i.deletions;if(o!==null){for(var A=0;A<o.length;A++){var c=o[A];for(Rt=c;Rt!==null;){var u=Rt;switch(u.tag){case 0:case 11:case 15:Sf(8,u,i)}var d=u.child;if(d!==null)d.return=u,Rt=d;else for(;Rt!==null;){u=Rt;var p=u.sibling,g=u.return;if(sN(u),u===c){Rt=null;break}if(p!==null){p.return=g,Rt=p;break}Rt=g}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var k=y.sibling;y.sibling=null,y=k}while(y!==null)}}Rt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Rt=a;else e:for(;Rt!==null;){if(i=Rt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Sf(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Rt=x;break e}Rt=i.return}}var I=t.current;for(Rt=I;Rt!==null;){a=Rt;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,Rt=N;else e:for(a=I;Rt!==null;){if(o=Rt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Uw(9,o)}}catch(D){Gn(o,o.return,D)}if(o===a){Rt=null;break e}var U=o.sibling;if(U!==null){U.return=o.return,Rt=U;break e}Rt=o.return}}if(jr=s,nc(),So&&typeof So.onPostCommitFiberRoot=="function")try{So.onPostCommitFiberRoot(Cw,t)}catch{}n=!0}return n}finally{Zr=r,La.transition=e}}return!1}function H_(t,e,r){e=Td(r,e),e=$S(t,e,1),t=Nl(t,e,1),e=_i(),t!==null&&(Tp(t,1,e),Vi(t,e))}function Gn(t,e,r){if(t.tag===3)H_(t,t,r);else for(;e!==null;){if(e.tag===3){H_(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Fl===null||!Fl.has(n))){t=Td(r,t),t=qS(e,t,1),e=Nl(e,t,1),t=_i(),e!==null&&(Tp(e,1,t),Vi(e,t));break}}e=e.return}}function mR(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=_i(),t.pingedLanes|=t.suspendedLanes&r,Ts===t&&(qs&r)===r&&(ys===4||ys===3&&(qs&130023424)===qs&&500>ss()-mb?Oc(t,0):gb|=r),Vi(t,e)}function fN(t,e){e===0&&(t.mode&1?(e=F0,F0<<=1,!(F0&130023424)&&(F0=4194304)):e=1);var r=_i();t=pA(t,e),t!==null&&(Tp(t,e,r),Vi(t,r))}function wR(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),fN(t,r)}function xR(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(pt(314))}n!==null&&n.delete(e),fN(t,r)}var pN;pN=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Oi.current)Ri=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ri=!1,aR(t,e,r);Ri=!!(t.flags&131072)}else Ri=!1,En&&e.flags&1048576&&xS(e,Cm,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Pg(t,e),t=e.pendingProps;var s=kd(e,pi.current);pd(e,r),s=cb(null,e,n,t,s,r);var i=ub();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hi(n)?(i=!0,Bm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ib(e),s.updater=Tw,e.stateNode=s,s._reactInternals=e,t2(e,n,t,r),e=s2(null,e,n,!0,i,r)):(e.tag=0,En&&i&&Yy(e),Bi(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Pg(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=yR(n),t=Ja(n,t),s){case 0:e=n2(null,e,n,t,r);break e;case 1:e=T_(null,e,n,t,r);break e;case 11:e=N_(null,e,n,t,r);break e;case 14:e=F_(null,e,n,Ja(n.type,t),r);break e}throw Error(pt(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ja(n,s),n2(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ja(n,s),T_(t,e,n,s,r);case 3:e:{if(YS(e),t===null)throw Error(pt(387));n=e.pendingProps,i=e.memoizedState,s=i.element,CS(t,e),km(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Td(Error(pt(423)),e),e=U_(t,e,n,r,s);break e}else if(n!==s){s=Td(Error(pt(424)),e),e=U_(t,e,n,r,s);break e}else for(oa=Sl(e.stateNode.containerInfo.firstChild),la=e,En=!0,Ya=null,r=BS(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Sd(),n===s){e=gA(t,e,r);break e}Bi(t,e,n,r)}e=e.child}return e;case 5:return IS(e),t===null&&Yv(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,$v(n,s)?a=null:i!==null&&$v(n,i)&&(e.flags|=32),XS(t,e),Bi(t,e,a,r),e.child;case 6:return t===null&&Yv(e),null;case 13:return ZS(t,e,r);case 4:return ab(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Nd(e,null,n,r):Bi(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ja(n,s),N_(t,e,n,s,r);case 7:return Bi(t,e,e.pendingProps,r),e.child;case 8:return Bi(t,e,e.pendingProps.children,r),e.child;case 12:return Bi(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,pn(Im,n._currentValue),n._currentValue=a,i!==null)if(ro(i.value,a)){if(i.children===s.children&&!Oi.current){e=gA(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var A=o.firstContext;A!==null;){if(A.context===n){if(i.tag===1){A=cA(-1,r&-r),A.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?A.next=A:(A.next=u.next,u.next=A),c.pending=A}}i.lanes|=r,A=i.alternate,A!==null&&(A.lanes|=r),Zv(i.return,r,e),o.lanes|=r;break}A=A.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(pt(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),Zv(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Bi(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,pd(e,r),s=ja(s),n=n(s),e.flags|=1,Bi(t,e,n,r),e.child;case 14:return n=e.type,s=Ja(n,e.pendingProps),s=Ja(n.type,s),F_(t,e,n,s,r);case 15:return WS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ja(n,s),Pg(t,e),e.tag=1,Hi(n)?(t=!0,Bm(e)):t=!1,pd(e,r),GS(e,n,s),t2(e,n,s,r),s2(null,e,n,!0,t,r);case 19:return eN(t,e,r);case 22:return JS(t,e,r)}throw Error(pt(156,e.tag))};function gN(t,e){return Vk(t,e)}function vR(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fa(t,e,r,n){return new vR(t,e,r,n)}function yb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yR(t){if(typeof t=="function")return yb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===My)return 11;if(t===Oy)return 14}return 2}function Ul(t,e){var r=t.alternate;return r===null?(r=Fa(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Og(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")yb(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ju:return Hc(r.children,s,i,e);case Dy:a=8,s|=8;break;case Cv:return t=Fa(12,r,e,s|2),t.elementType=Cv,t.lanes=i,t;case Iv:return t=Fa(13,r,e,s),t.elementType=Iv,t.lanes=i,t;case Ev:return t=Fa(19,r,e,s),t.elementType=Ev,t.lanes=i,t;case Ik:return jw(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _k:a=10;break e;case Ck:a=9;break e;case My:a=11;break e;case Oy:a=14;break e;case il:a=16,n=null;break e}throw Error(pt(130,t==null?t:typeof t,""))}return e=Fa(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Hc(t,e,r,n){return t=Fa(7,t,n,e),t.lanes=r,t}function jw(t,e,r,n){return t=Fa(22,t,n,e),t.elementType=Ik,t.lanes=r,t.stateNode={isHidden:!1},t}function wx(t,e,r){return t=Fa(6,t,null,e),t.lanes=r,t}function xx(t,e,r){return e=Fa(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bR(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Z1(0),this.expirationTimes=Z1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z1(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bb(t,e,r,n,s,i,a,o,A){return t=new bR(t,e,r,o,A),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Fa(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ib(i),t}function BR(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function mN(t){if(!t)return Hl;t=t._reactInternals;e:{if(fu(t)!==t||t.tag!==1)throw Error(pt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(pt(171))}if(t.tag===1){var r=t.type;if(Hi(r))return mS(t,r,e)}return e}function wN(t,e,r,n,s,i,a,o,A){return t=bb(r,n,!0,t,s,i,a,o,A),t.context=mN(null),r=t.current,n=_i(),s=Tl(r),i=cA(n,s),i.callback=e??null,Nl(r,i,s),t.current.lanes=s,Tp(t,s,n),Vi(t,n),t}function Qw(t,e,r,n){var s=e.current,i=_i(),a=Tl(s);return r=mN(r),e.context===null?e.context=r:e.pendingContext=r,e=cA(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Nl(s,e,a),t!==null&&(eo(t,s,a,i),jg(t,s,a)),a}function Qm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function V_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Bb(t,e){V_(t,e),(t=t.alternate)&&V_(t,e)}function _R(){return null}var xN=typeof reportError=="function"?reportError:function(t){console.error(t)};function _b(t){this._internalRoot=t}Rw.prototype.render=_b.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(pt(409));Qw(t,e,null,null)};Rw.prototype.unmount=_b.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yc(function(){Qw(null,t,null,null)}),e[fA]=null}};function Rw(t){this._internalRoot=t}Rw.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jk();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Al.length&&e!==0&&e<Al[r].priority;r++);Al.splice(r,0,t),r===0&&Yk(t)}};function Cb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K_(){}function CR(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=Qm(a);i.call(c)}}var a=wN(e,n,t,0,null,!1,!1,"",K_);return t._reactRootContainer=a,t[fA]=a.current,tp(t.nodeType===8?t.parentNode:t),Yc(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=Qm(A);o.call(c)}}var A=bb(t,0,!1,null,null,!1,!1,"",K_);return t._reactRootContainer=A,t[fA]=A.current,tp(t.nodeType===8?t.parentNode:t),Yc(function(){Qw(e,A,r,n)}),A}function Dw(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var A=Qm(a);o.call(A)}}Qw(e,a,t,s)}else a=CR(r,e,t,s,n);return Qm(a)}qk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=af(e.pendingLanes);r!==0&&(Ky(e,r|1),Vi(e,ss()),!(jr&6)&&(Ud=ss()+500,nc()))}break;case 13:Yc(function(){var n=pA(t,1);if(n!==null){var s=_i();eo(n,t,1,s)}}),Bb(t,1)}};zy=function(t){if(t.tag===13){var e=pA(t,134217728);if(e!==null){var r=_i();eo(e,t,134217728,r)}Bb(t,134217728)}};Wk=function(t){if(t.tag===13){var e=Tl(t),r=pA(t,e);if(r!==null){var n=_i();eo(r,t,e,n)}Bb(t,e)}};Jk=function(){return Zr};Xk=function(t,e){var r=Zr;try{return Zr=t,e()}finally{Zr=r}};Rv=function(t,e,r){switch(e){case"input":if(Nv(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Sw(n);if(!s)throw Error(pt(90));kk(n),Nv(n,s)}}}break;case"textarea":Nk(t,r);break;case"select":e=r.value,e!=null&&ud(t,!!r.multiple,e,!1)}};Rk=wb;Pk=Yc;var IR={usingClientEntryPoint:!1,Events:[Lp,ed,Sw,jk,Qk,wb]},Hh={findFiberByHostInstance:Rc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ER={bundleType:Hh.bundleType,version:Hh.version,rendererPackageName:Hh.rendererPackageName,rendererConfig:Hh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ok(t),t===null?null:t.stateNode},findFiberByHostInstance:Hh.findFiberByHostInstance||_R,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var H0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!H0.isDisabled&&H0.supportsFiber)try{Cw=H0.inject(ER),So=H0}catch{}}ha.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IR;ha.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cb(e))throw Error(pt(200));return BR(t,e,null,r)};ha.createRoot=function(t,e){if(!Cb(t))throw Error(pt(299));var r=!1,n="",s=xN;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bb(t,1,!1,null,null,r,!1,n,s),t[fA]=e.current,tp(t.nodeType===8?t.parentNode:t),new _b(e)};ha.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pt(188)):(t=Object.keys(t).join(","),Error(pt(268,t)));return t=Ok(e),t=t===null?null:t.stateNode,t};ha.flushSync=function(t){return Yc(t)};ha.hydrate=function(t,e,r){if(!Pw(e))throw Error(pt(200));return Dw(null,t,e,!0,r)};ha.hydrateRoot=function(t,e,r){if(!Cb(t))throw Error(pt(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=xN;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=wN(e,null,t,1,r??null,s,!1,i,a),t[fA]=e.current,tp(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Rw(e)};ha.render=function(t,e,r){if(!Pw(e))throw Error(pt(200));return Dw(null,t,e,!1,r)};ha.unmountComponentAtNode=function(t){if(!Pw(t))throw Error(pt(40));return t._reactRootContainer?(Yc(function(){Dw(null,null,t,!1,function(){t._reactRootContainer=null,t[fA]=null})}),!0):!1};ha.unstable_batchedUpdates=wb;ha.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Pw(r))throw Error(pt(200));if(t==null||t._reactInternals===void 0)throw Error(pt(38));return Dw(t,e,r,!1,n)};ha.version="18.3.1-next-f1338f8080-20240426";function vN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vN)}catch(t){console.error(t)}}vN(),vk.exports=ha;var kR=vk.exports,z_=kR;Bv.createRoot=z_.createRoot,Bv.hydrateRoot=z_.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cp(){return cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cp.apply(this,arguments)}var xl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xl||(xl={}));const G_="popstate";function SR(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:o="",hash:A=""}=pu(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),g2("",{pathname:a,search:o,hash:A},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let a=s.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let A=s.location.href,c=A.indexOf("#");o=c===-1?A:A.slice(0,c)}return o+"#"+(typeof i=="string"?i:Rm(i))}function n(s,i){Mw(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return FR(e,r,n,t)}function Rn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NR(){return Math.random().toString(36).substr(2,8)}function $_(t,e){return{usr:t.state,key:t.key,idx:e}}function g2(t,e,r,n){return r===void 0&&(r=null),cp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?pu(e):e,{state:r,key:e&&e.key||n||NR()})}function Rm(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function pu(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function FR(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o=xl.Pop,A=null,c=u();c==null&&(c=0,a.replaceState(cp({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=xl.Pop;let k=u(),x=k==null?null:k-c;c=k,A&&A({action:o,location:y.location,delta:x})}function p(k,x){o=xl.Push;let I=g2(y.location,k,x);r&&r(I,k),c=u()+1;let N=$_(I,c),U=y.createHref(I);try{a.pushState(N,"",U)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(U)}i&&A&&A({action:o,location:y.location,delta:1})}function g(k,x){o=xl.Replace;let I=g2(y.location,k,x);r&&r(I,k),c=u();let N=$_(I,c),U=y.createHref(I);a.replaceState(N,"",U),i&&A&&A({action:o,location:y.location,delta:0})}function v(k){let x=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof k=="string"?k:Rm(k);return I=I.replace(/ $/,"%20"),Rn(x,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,x)}let y={get action(){return o},get location(){return t(s,a)},listen(k){if(A)throw new Error("A history only accepts one active listener");return s.addEventListener(G_,d),A=k,()=>{s.removeEventListener(G_,d),A=null}},createHref(k){return e(s,k)},createURL:v,encodeLocation(k){let x=v(k);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:g,go(k){return a.go(k)}};return y}var q_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(q_||(q_={}));function TR(t,e,r){return r===void 0&&(r="/"),UR(t,e,r)}function UR(t,e,r,n){let s=typeof e=="string"?pu(e):e,i=Ld(s.pathname||"/",r);if(i==null)return null;let a=yN(t);LR(a);let o=null;for(let A=0;o==null&&A<a.length;++A){let c=zR(i);o=VR(a[A],c)}return o}function yN(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,o)=>{let A={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};A.relativePath.startsWith("/")&&(Rn(A.relativePath.startsWith(n),'Absolute route path "'+A.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),A.relativePath=A.relativePath.slice(n.length));let c=Ll([n,A.relativePath]),u=r.concat(A);i.children&&i.children.length>0&&(Rn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),yN(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:OR(c,i.index),routesMeta:u})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let A of bN(i.path))s(i,a,A)}),e}function bN(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=bN(n.join("/")),o=[];return o.push(...a.map(A=>A===""?i:[i,A].join("/"))),s&&o.push(...a),o.map(A=>t.startsWith("/")&&A===""?"/":A)}function LR(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:HR(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const jR=/^:[\w-]+$/,QR=3,RR=2,PR=1,DR=10,MR=-2,W_=t=>t==="*";function OR(t,e){let r=t.split("/"),n=r.length;return r.some(W_)&&(n+=MR),e&&(n+=RR),r.filter(s=>!W_(s)).reduce((s,i)=>s+(jR.test(i)?QR:i===""?PR:DR),n)}function HR(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function VR(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let A=n[o],c=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=m2({path:A.relativePath,caseSensitive:A.caseSensitive,end:c},u),p=A.route;if(!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:Ll([i,d.pathname]),pathnameBase:JR(Ll([i,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(i=Ll([i,d.pathnameBase]))}return a}function m2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=KR(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,u,d)=>{let{paramName:p,isOptional:g}=u;if(p==="*"){let y=o[d]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const v=o[d];return g&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function KR(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Mw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,A)=>(n.push({paramName:o,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function zR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ld(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const GR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$R=t=>GR.test(t);function qR(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?pu(t):t,i;if(r)if($R(r))i=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),Mw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?i=J_(r.substring(1),"/"):i=J_(r,e)}else i=e;return{pathname:i,search:XR(n),hash:YR(s)}}function J_(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function vx(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WR(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Ib(t,e){let r=WR(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Eb(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=pu(t):(s=cp({},t),Rn(!s.pathname||!s.pathname.includes("?"),vx("?","pathname","search",s)),Rn(!s.pathname||!s.pathname.includes("#"),vx("#","pathname","hash",s)),Rn(!s.search||!s.search.includes("#"),vx("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let d=e.length-1;if(!n&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),d-=1;s.pathname=p.join("/")}o=d>=0?e[d]:"/"}let A=qR(s,o),c=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&r.endsWith("/");return!A.pathname.endsWith("/")&&(c||u)&&(A.pathname+="/"),A}const Ll=t=>t.join("/").replace(/\/\/+/g,"/"),JR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const BN=["post","put","patch","delete"];new Set(BN);const eP=["get",...BN];new Set(eP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},up.apply(this,arguments)}const Ow=z.createContext(null),_N=z.createContext(null),BA=z.createContext(null),Hw=z.createContext(null),_A=z.createContext({outlet:null,matches:[],isDataRoute:!1}),CN=z.createContext(null);function tP(t,e){let{relative:r}=e===void 0?{}:e;nh()||Rn(!1);let{basename:n,navigator:s}=z.useContext(BA),{hash:i,pathname:a,search:o}=Vw(t,{relative:r}),A=a;return n!=="/"&&(A=a==="/"?n:Ll([n,a])),s.createHref({pathname:A,search:o,hash:i})}function nh(){return z.useContext(Hw)!=null}function sc(){return nh()||Rn(!1),z.useContext(Hw).location}function IN(t){z.useContext(BA).static||z.useLayoutEffect(t)}function Qp(){let{isDataRoute:t}=z.useContext(_A);return t?gP():rP()}function rP(){nh()||Rn(!1);let t=z.useContext(Ow),{basename:e,future:r,navigator:n}=z.useContext(BA),{matches:s}=z.useContext(_A),{pathname:i}=sc(),a=JSON.stringify(Ib(s,r.v7_relativeSplatPath)),o=z.useRef(!1);return IN(()=>{o.current=!0}),z.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=Eb(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ll([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,a,i,t])}const nP=z.createContext(null);function sP(t){let e=z.useContext(_A).outlet;return e&&z.createElement(nP.Provider,{value:t},e)}function Vw(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=z.useContext(BA),{matches:s}=z.useContext(_A),{pathname:i}=sc(),a=JSON.stringify(Ib(s,n.v7_relativeSplatPath));return z.useMemo(()=>Eb(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function iP(t,e){return aP(t,e)}function aP(t,e,r,n){nh()||Rn(!1);let{navigator:s}=z.useContext(BA),{matches:i}=z.useContext(_A),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let A=a?a.pathnameBase:"/";a&&a.route;let c=sc(),u;if(e){var d;let k=typeof e=="string"?pu(e):e;A==="/"||(d=k.pathname)!=null&&d.startsWith(A)||Rn(!1),u=k}else u=c;let p=u.pathname||"/",g=p;if(A!=="/"){let k=A.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(k.length).join("/")}let v=TR(t,{pathname:g}),y=uP(v&&v.map(k=>Object.assign({},k,{params:Object.assign({},o,k.params),pathname:Ll([A,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?A:Ll([A,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,r,n);return e&&y?z.createElement(Hw.Provider,{value:{location:up({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:xl.Pop}},y):y}function oP(){let t=pP(),e=ZR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),r?z.createElement("pre",{style:s},r):null,null)}const AP=z.createElement(oP,null);class lP extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?z.createElement(_A.Provider,{value:this.props.routeContext},z.createElement(CN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cP(t){let{routeContext:e,match:r,children:n}=t,s=z.useContext(Ow);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),z.createElement(_A.Provider,{value:e},n)}function uP(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(s=r)==null?void 0:s.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||Rn(!1),a=a.slice(0,Math.min(a.length,u+1))}let A=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:p,errors:g}=r,v=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||v){A=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,p)=>{let g,v=!1,y=null,k=null;r&&(g=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||AP,A&&(c<0&&p===0?(mP("route-fallback"),v=!0,k=null):c===p&&(v=!0,k=d.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,p+1)),I=()=>{let N;return g?N=y:v?N=k:d.route.Component?N=z.createElement(d.route.Component,null):d.route.element?N=d.route.element:N=u,z.createElement(cP,{match:d,routeContext:{outlet:u,matches:x,isDataRoute:r!=null},children:N})};return r&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?z.createElement(lP,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:I(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):I()},null)}var EN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(EN||{}),kN=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kN||{});function dP(t){let e=z.useContext(Ow);return e||Rn(!1),e}function hP(t){let e=z.useContext(_N);return e||Rn(!1),e}function fP(t){let e=z.useContext(_A);return e||Rn(!1),e}function SN(t){let e=fP(),r=e.matches[e.matches.length-1];return r.route.id||Rn(!1),r.route.id}function pP(){var t;let e=z.useContext(CN),r=hP(),n=SN();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function gP(){let{router:t}=dP(EN.UseNavigateStable),e=SN(kN.UseNavigateStable),r=z.useRef(!1);return IN(()=>{r.current=!0}),z.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,up({fromRouteId:e},i)))},[t,e])}const X_={};function mP(t,e,r){X_[t]||(X_[t]=!0)}function wP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Pm(t){let{to:e,replace:r,state:n,relative:s}=t;nh()||Rn(!1);let{future:i,static:a}=z.useContext(BA),{matches:o}=z.useContext(_A),{pathname:A}=sc(),c=Qp(),u=Eb(e,Ib(o,i.v7_relativeSplatPath),A,s==="path"),d=JSON.stringify(u);return z.useEffect(()=>c(JSON.parse(d),{replace:r,state:n,relative:s}),[c,d,s,r,n]),null}function xP(t){return sP(t.context)}function Ai(t){Rn(!1)}function vP(t){let{basename:e="/",children:r=null,location:n,navigationType:s=xl.Pop,navigator:i,static:a=!1,future:o}=t;nh()&&Rn(!1);let A=e.replace(/^\/*/,"/"),c=z.useMemo(()=>({basename:A,navigator:i,static:a,future:up({v7_relativeSplatPath:!1},o)}),[A,o,i,a]);typeof n=="string"&&(n=pu(n));let{pathname:u="/",search:d="",hash:p="",state:g=null,key:v="default"}=n,y=z.useMemo(()=>{let k=Ld(u,A);return k==null?null:{location:{pathname:k,search:d,hash:p,state:g,key:v},navigationType:s}},[A,u,d,p,g,v,s]);return y==null?null:z.createElement(BA.Provider,{value:c},z.createElement(Hw.Provider,{children:r,value:y}))}function yP(t){let{children:e,location:r}=t;return iP(w2(e),r)}new Promise(()=>{});function w2(t,e){e===void 0&&(e=[]);let r=[];return z.Children.forEach(t,(n,s)=>{if(!z.isValidElement(n))return;let i=[...e,s];if(n.type===z.Fragment){r.push.apply(r,w2(n.props.children,i));return}n.type!==Ai&&Rn(!1),!n.props.index||!n.props.children||Rn(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=w2(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dm.apply(this,arguments)}function NN(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function bP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function BP(t,e){return t.button===0&&(!e||e==="_self")&&!bP(t)}function x2(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function _P(t,e){let r=x2(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}const CP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],EP="6";try{window.__reactRouterVersion=EP}catch{}const kP=z.createContext({isTransitioning:!1}),SP="startTransition",Y_=mj[SP];function NP(t){let{basename:e,children:r,future:n,window:s}=t,i=z.useRef();i.current==null&&(i.current=SR({window:s,v5Compat:!0}));let a=i.current,[o,A]=z.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},u=z.useCallback(d=>{c&&Y_?Y_(()=>A(d)):A(d)},[A,c]);return z.useLayoutEffect(()=>a.listen(u),[a,u]),z.useEffect(()=>wP(n),[n]),z.createElement(vP,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const FP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UP=z.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:o,target:A,to:c,preventScrollReset:u,viewTransition:d}=e,p=NN(e,CP),{basename:g}=z.useContext(BA),v,y=!1;if(typeof c=="string"&&TP.test(c)&&(v=c,FP))try{let N=new URL(window.location.href),U=c.startsWith("//")?new URL(N.protocol+c):new URL(c),D=Ld(U.pathname,g);U.origin===N.origin&&D!=null?c=D+U.search+U.hash:y=!0}catch{}let k=tP(c,{relative:s}),x=jP(c,{replace:a,state:o,target:A,preventScrollReset:u,relative:s,viewTransition:d});function I(N){n&&n(N),N.defaultPrevented||x(N)}return z.createElement("a",Dm({},p,{href:v||k,onClick:y||i?n:I,ref:r,target:A}))}),_o=z.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:a=!1,style:o,to:A,viewTransition:c,children:u}=e,d=NN(e,IP),p=Vw(A,{relative:d.relative}),g=sc(),v=z.useContext(_N),{navigator:y,basename:k}=z.useContext(BA),x=v!=null&&QP(p)&&c===!0,I=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,N=g.pathname,U=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(N=N.toLowerCase(),U=U?U.toLowerCase():null,I=I.toLowerCase()),U&&k&&(U=Ld(U,k)||U);const D=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let P=N===I||!a&&N.startsWith(I)&&N.charAt(D)==="/",E=U!=null&&(U===I||!a&&U.startsWith(I)&&U.charAt(I.length)==="/"),_={isActive:P,isPending:E,isTransitioning:x},B=P?n:void 0,j;typeof i=="function"?j=i(_):j=[i,P?"active":null,E?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let S=typeof o=="function"?o(_):o;return z.createElement(UP,Dm({},d,{"aria-current":B,className:j,ref:r,style:S,to:A,viewTransition:c}),typeof u=="function"?u(_):u)});var v2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(v2||(v2={}));var Z_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Z_||(Z_={}));function LP(t){let e=z.useContext(Ow);return e||Rn(!1),e}function jP(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,A=Qp(),c=sc(),u=Vw(t,{relative:a});return z.useCallback(d=>{if(BP(d,r)){d.preventDefault();let p=n!==void 0?n:Rm(c)===Rm(u);A(t,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,A,u,n,s,r,t,i,a,o])}function FN(t){let e=z.useRef(x2(t)),r=z.useRef(!1),n=sc(),s=z.useMemo(()=>_P(n.search,r.current?null:e.current),[n.search]),i=Qp(),a=z.useCallback((o,A)=>{const c=x2(typeof o=="function"?o(s):o);r.current=!0,i("?"+c,A)},[i,s]);return[s,a]}function QP(t,e){e===void 0&&(e={});let r=z.useContext(kP);r==null&&Rn(!1);let{basename:n}=LP(v2.useViewTransitionState),s=Vw(t,{relative:e.relative});if(!r.isTransitioning)return!1;let i=Ld(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=Ld(r.nextLocation.pathname,n)||r.nextLocation.pathname;return m2(s.pathname,a)!=null||m2(s.pathname,i)!=null}var et=(t=>(t.First="1 ",t.Second="2 ",t))(et||{}),ur=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(ur||{});const Lr=["","","","",""],Ks={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},eC=["","","/","","","",""," "],Mm=[{shift:et.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:et.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:et.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:et.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:et.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:et.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:et.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:et.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:et.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:et.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:et.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:et.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:et.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:et.Second,period:6,start:"18:50",end:"19:35",day:"default"}],RP=[{shift:et.First,period:1,start:"08:00",end:"08:35",day:"default"},{shift:et.First,period:2,start:"08:45",end:"09:20",day:"default"},{shift:et.First,period:3,start:"09:30",end:"10:05",day:"default"},{shift:et.First,period:4,start:"10:15",end:"10:50",day:"default"},{shift:et.First,period:5,start:"11:00",end:"11:35",day:"default"},{shift:et.First,period:6,start:"11:45",end:"12:20",day:"default"},{shift:et.First,period:7,start:"12:30",end:"13:05",day:"default"},{shift:et.Second,period:0,start:"12:30",end:"13:05",day:"default"},{shift:et.Second,period:1,start:"13:15",end:"13:50",day:"default"},{shift:et.Second,period:2,start:"14:00",end:"14:35",day:"default"},{shift:et.Second,period:3,start:"14:45",end:"15:20",day:"default"},{shift:et.Second,period:4,start:"15:30",end:"16:05",day:"default"},{shift:et.Second,period:5,start:"16:15",end:"16:50",day:"default"},{shift:et.Second,period:6,start:"17:00",end:"17:35",day:"default"}],Vh=(t,e)=>Array.from({length:e-t+1},(r,n)=>String(t+n)),TN=[{id:"zone_2floor_1",name:"  (28-38)",floor:"2 ",includedRooms:Vh(28,38),order:1},{id:"zone_2floor_2",name:"  (42-44)",floor:"2 ",includedRooms:Vh(42,44),order:2},{id:"zone_3floor_1",name:" (65-70)",floor:"3 ",includedRooms:Vh(65,70),order:3},{id:"zone_3floor_2",name:" (72-75)",floor:"3 ",includedRooms:Vh(72,75),order:4},{id:"zone_3floor_3",name:"  (78-86)",floor:"3 ",includedRooms:Vh(78,86),order:5}],Qi={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:et.First,studentsCount:25},{id:"c2",name:"6",shift:et.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2:[],substitutions:[],bellSchedule:Mm,dutyZones:TN,dutySchedule:[],nutritionRecords:[],absenteeismRecords:[],settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:"",weatherApiKey:"",weatherCity:"Minsk,BY",bellPresets:[{id:"preset_normal",name:" (45 )",bells:Mm},{id:"preset_short",name:" (35 )",bells:RP}],semesterConfig:{firstSemesterMonths:[8,9,10,11],secondSemesterMonths:[0,1,2,3,4]},telegramTemplates:{summary:` **  {{date}}** 

{{content}}`,teacherNotification:` **  !**
 {{date}}

{{content}}

,   .`,teacherSummary:` **   {{date}}**

{{content}},   .`},adminAnnouncement:{message:"",active:!1,lastUpdated:""}}},PP="modulepreload",DP=function(t){return"/zamenygymn/"+t},tC={},Hg=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(A=>{if(A=DP(A),A in tC)return;tC[A]=!0;const c=A.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":PP,c||(d.as="script"),d.crossOrigin="",d.href=A,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((p,g)=>{d.addEventListener("load",p),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${A}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};var rC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},MP=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],A=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(A>>10)),e[n++]=String.fromCharCode(56320+(A&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},LN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,A=s+2<t.length,c=A?t[s+2]:0,u=i>>2,d=(i&3)<<4|o>>4;let p=(o&15)<<2|c>>6,g=c&63;A||(g=64,a||(p=64)),n.push(r[u],r[d],r[p],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const d=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||d==null)throw new OP;const p=i<<2|o>>4;if(n.push(p),c!==64){const g=o<<4&240|c>>2;if(n.push(g),d!==64){const v=c<<6&192|d;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HP=function(t){const e=UN(t);return LN.encodeByteArray(e,!0)},Om=function(t){return HP(t).replace(/\./g,"")},jN=function(t){try{return LN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=()=>VP().__FIREBASE_DEFAULTS__,zP=()=>{if(typeof process>"u"||typeof rC>"u")return;const t=rC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jN(t[1]);return e&&JSON.parse(e)},Kw=()=>{try{return KP()||zP()||GP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QN=t=>{var e,r;return(r=(e=Kw())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},$P=t=>{const e=QN(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},RN=()=>{var t;return(t=Kw())===null||t===void 0?void 0:t.config},PN=t=>{var e;return(e=Kw())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Om(JSON.stringify(r)),Om(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bs())}function XP(){var t;const e=(t=Kw())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tD(){const t=bs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DN(){return!XP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MN(){try{return typeof indexedDB=="object"}catch{return!1}}function rD(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="FirebaseError";class CA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=nD,Object.setPrototypeOf(this,CA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rp.prototype.create)}}class Rp{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?sD(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new CA(s,o,n)}}function sD(t,e){return t.replace(iD,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const iD=/\{\$([^}]+)}/g;function aD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vl(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(nC(i)&&nC(a)){if(!Vl(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function nC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Af(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function lf(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function oD(t,e){const r=new AD(t,e);return r.subscribe.bind(r)}class AD{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");lD(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=yx),s.error===void 0&&(s.error=yx),s.complete===void 0&&(s.complete=yx);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lD(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function yx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t){return t&&t._delegate?t._delegate:t}class Zc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new qP;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dD(e))try{this.getOrInitializeService({instanceIdentifier:kc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=kc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kc){return this.instances.has(e)}getOptions(e=kc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:uD(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=kc){return this.component?this.component.multipleInstances?e:kc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uD(t){return t===kc?void 0:t}function dD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new cD(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Br;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Br||(Br={}));const fD={debug:Br.DEBUG,verbose:Br.VERBOSE,info:Br.INFO,warn:Br.WARN,error:Br.ERROR,silent:Br.SILENT},pD=Br.INFO,gD={[Br.DEBUG]:"log",[Br.VERBOSE]:"log",[Br.INFO]:"info",[Br.WARN]:"warn",[Br.ERROR]:"error"},mD=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=gD[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let kb=class{constructor(e){this.name=e,this._logLevel=pD,this._logHandler=mD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Br))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Br.DEBUG,...e),this._logHandler(this,Br.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Br.VERBOSE,...e),this._logHandler(this,Br.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Br.INFO,...e),this._logHandler(this,Br.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Br.WARN,...e),this._logHandler(this,Br.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Br.ERROR,...e),this._logHandler(this,Br.ERROR,...e)}};const wD=(t,e)=>e.some(r=>t instanceof r);let sC,iC;function xD(){return sC||(sC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vD(){return iC||(iC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ON=new WeakMap,y2=new WeakMap,HN=new WeakMap,bx=new WeakMap,Sb=new WeakMap;function yD(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(jl(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&ON.set(r,t)}).catch(()=>{}),Sb.set(e,t),e}function bD(t){if(y2.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});y2.set(t,e)}let b2={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return y2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HN.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return jl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BD(t){b2=t(b2)}function _D(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Bx(this),e,...r);return HN.set(n,e.sort?e.sort():[e]),jl(n)}:vD().includes(t)?function(...e){return t.apply(Bx(this),e),jl(ON.get(this))}:function(...e){return jl(t.apply(Bx(this),e))}}function CD(t){return typeof t=="function"?_D(t):(t instanceof IDBTransaction&&bD(t),wD(t,xD())?new Proxy(t,b2):t)}function jl(t){if(t instanceof IDBRequest)return yD(t);if(bx.has(t))return bx.get(t);const e=CD(t);return e!==t&&(bx.set(t,e),Sb.set(e,t)),e}const Bx=t=>Sb.get(t);function ID(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=jl(a);return n&&a.addEventListener("upgradeneeded",A=>{n(jl(a.result),A.oldVersion,A.newVersion,jl(a.transaction),A)}),r&&a.addEventListener("blocked",A=>r(A.oldVersion,A.newVersion,A)),o.then(A=>{i&&A.addEventListener("close",()=>i()),s&&A.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const ED=["get","getKey","getAll","getAllKeys","count"],kD=["put","add","delete","clear"],_x=new Map;function aC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_x.get(e))return _x.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=kD.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||ED.includes(r)))return;const i=async function(a,...o){const A=this.transaction(a,s?"readwrite":"readonly");let c=A.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&A.done]))[0]};return _x.set(e,i),i}BD(t=>({...t,get:(e,r,n)=>aC(e,r)||t.get(e,r,n),has:(e,r)=>!!aC(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(ND(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function ND(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const B2="@firebase/app",oC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new kb("@firebase/app"),FD="@firebase/app-compat",TD="@firebase/analytics-compat",UD="@firebase/analytics",LD="@firebase/app-check-compat",jD="@firebase/app-check",QD="@firebase/auth",RD="@firebase/auth-compat",PD="@firebase/database",DD="@firebase/data-connect",MD="@firebase/database-compat",OD="@firebase/functions",HD="@firebase/functions-compat",VD="@firebase/installations",KD="@firebase/installations-compat",zD="@firebase/messaging",GD="@firebase/messaging-compat",$D="@firebase/performance",qD="@firebase/performance-compat",WD="@firebase/remote-config",JD="@firebase/remote-config-compat",XD="@firebase/storage",YD="@firebase/storage-compat",ZD="@firebase/firestore",e8="@firebase/vertexai-preview",t8="@firebase/firestore-compat",r8="firebase",n8="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="[DEFAULT]",s8={[B2]:"fire-core",[FD]:"fire-core-compat",[UD]:"fire-analytics",[TD]:"fire-analytics-compat",[jD]:"fire-app-check",[LD]:"fire-app-check-compat",[QD]:"fire-auth",[RD]:"fire-auth-compat",[PD]:"fire-rtdb",[DD]:"fire-data-connect",[MD]:"fire-rtdb-compat",[OD]:"fire-fn",[HD]:"fire-fn-compat",[VD]:"fire-iid",[KD]:"fire-iid-compat",[zD]:"fire-fcm",[GD]:"fire-fcm-compat",[$D]:"fire-perf",[qD]:"fire-perf-compat",[WD]:"fire-rc",[JD]:"fire-rc-compat",[XD]:"fire-gcs",[YD]:"fire-gcs-compat",[ZD]:"fire-fst",[t8]:"fire-fst-compat",[e8]:"fire-vertex","fire-js":"fire-js",[r8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=new Map,i8=new Map,_2=new Map;function AC(t,e){try{t.container.addComponent(e)}catch(r){mA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function jd(t){const e=t.name;if(_2.has(e))return mA.debug(`There were multiple attempts to register component ${e}.`),!1;_2.set(e,t);for(const r of dp.values())AC(r,t);for(const r of i8.values())AC(r,t);return!0}function Dp(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function a8(t,e,r=Hm){Dp(t,e).clearInstance(r)}function iA(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ql=new Rp("app","Firebase",o8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Zc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ql.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=n8;function VN(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Hm,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Ql.create("bad-app-name",{appName:String(s)});if(r||(r=RN()),!r)throw Ql.create("no-options");const i=dp.get(s);if(i){if(Vl(r,i.options)&&Vl(n,i.config))return i;throw Ql.create("duplicate-app",{appName:s})}const a=new hD(s);for(const A of _2.values())a.addComponent(A);const o=new A8(r,n,a);return dp.set(s,o),o}function Nb(t=Hm){const e=dp.get(t);if(!e&&t===Hm&&RN())return VN();if(!e)throw Ql.create("no-app",{appName:t});return e}function l8(){return Array.from(dp.values())}function Rl(t,e,r){var n;let s=(n=s8[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mA.warn(o.join(" "));return}jd(new Zc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8="firebase-heartbeat-database",u8=1,hp="firebase-heartbeat-store";let Cx=null;function KN(){return Cx||(Cx=ID(c8,u8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hp)}catch(r){console.warn(r)}}}}).catch(t=>{throw Ql.create("idb-open",{originalErrorMessage:t.message})})),Cx}async function d8(t){try{const r=(await KN()).transaction(hp),n=await r.objectStore(hp).get(zN(t));return await r.done,n}catch(e){if(e instanceof CA)mA.warn(e.message);else{const r=Ql.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mA.warn(r.message)}}}async function lC(t,e){try{const n=(await KN()).transaction(hp,"readwrite");await n.objectStore(hp).put(e,zN(t)),await n.done}catch(r){if(r instanceof CA)mA.warn(r.message);else{const n=Ql.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});mA.warn(n.message)}}}function zN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=1024,f8=30*24*60*60*1e3;class p8{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new m8(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=f8}),this._storage.overwrite(this._heartbeatsCache))}catch(n){mA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=cC(),{heartbeatsToSend:n,unsentEntries:s}=g8(this._heartbeatsCache.heartbeats),i=Om(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return mA.warn(r),""}}}function cC(){return new Date().toISOString().substring(0,10)}function g8(t,e=h8){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),uC(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),uC(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class m8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MN()?rD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await d8(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return lC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return lC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function uC(t){return Om(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(t){jd(new Zc("platform-logger",e=>new SD(e),"PRIVATE")),jd(new Zc("heartbeat",e=>new p8(e),"PRIVATE")),Rl(B2,oC,t),Rl(B2,oC,"esm2017"),Rl("fire-js","")}w8("");var x8="firebase",v8="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rl(x8,v8,"app");var dC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vc,GN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function B(){}B.prototype=_.prototype,E.D=_.prototype,E.prototype=new B,E.prototype.constructor=E,E.C=function(j,S,L){for(var T=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)T[Z-2]=arguments[Z];return _.prototype[S].apply(j,T)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,_,B){B||(B=0);var j=Array(16);if(typeof _=="string")for(var S=0;16>S;++S)j[S]=_.charCodeAt(B++)|_.charCodeAt(B++)<<8|_.charCodeAt(B++)<<16|_.charCodeAt(B++)<<24;else for(S=0;16>S;++S)j[S]=_[B++]|_[B++]<<8|_[B++]<<16|_[B++]<<24;_=E.g[0],B=E.g[1],S=E.g[2];var L=E.g[3],T=_+(L^B&(S^L))+j[0]+3614090360&4294967295;_=B+(T<<7&4294967295|T>>>25),T=L+(S^_&(B^S))+j[1]+3905402710&4294967295,L=_+(T<<12&4294967295|T>>>20),T=S+(B^L&(_^B))+j[2]+606105819&4294967295,S=L+(T<<17&4294967295|T>>>15),T=B+(_^S&(L^_))+j[3]+3250441966&4294967295,B=S+(T<<22&4294967295|T>>>10),T=_+(L^B&(S^L))+j[4]+4118548399&4294967295,_=B+(T<<7&4294967295|T>>>25),T=L+(S^_&(B^S))+j[5]+1200080426&4294967295,L=_+(T<<12&4294967295|T>>>20),T=S+(B^L&(_^B))+j[6]+2821735955&4294967295,S=L+(T<<17&4294967295|T>>>15),T=B+(_^S&(L^_))+j[7]+4249261313&4294967295,B=S+(T<<22&4294967295|T>>>10),T=_+(L^B&(S^L))+j[8]+1770035416&4294967295,_=B+(T<<7&4294967295|T>>>25),T=L+(S^_&(B^S))+j[9]+2336552879&4294967295,L=_+(T<<12&4294967295|T>>>20),T=S+(B^L&(_^B))+j[10]+4294925233&4294967295,S=L+(T<<17&4294967295|T>>>15),T=B+(_^S&(L^_))+j[11]+2304563134&4294967295,B=S+(T<<22&4294967295|T>>>10),T=_+(L^B&(S^L))+j[12]+1804603682&4294967295,_=B+(T<<7&4294967295|T>>>25),T=L+(S^_&(B^S))+j[13]+4254626195&4294967295,L=_+(T<<12&4294967295|T>>>20),T=S+(B^L&(_^B))+j[14]+2792965006&4294967295,S=L+(T<<17&4294967295|T>>>15),T=B+(_^S&(L^_))+j[15]+1236535329&4294967295,B=S+(T<<22&4294967295|T>>>10),T=_+(S^L&(B^S))+j[1]+4129170786&4294967295,_=B+(T<<5&4294967295|T>>>27),T=L+(B^S&(_^B))+j[6]+3225465664&4294967295,L=_+(T<<9&4294967295|T>>>23),T=S+(_^B&(L^_))+j[11]+643717713&4294967295,S=L+(T<<14&4294967295|T>>>18),T=B+(L^_&(S^L))+j[0]+3921069994&4294967295,B=S+(T<<20&4294967295|T>>>12),T=_+(S^L&(B^S))+j[5]+3593408605&4294967295,_=B+(T<<5&4294967295|T>>>27),T=L+(B^S&(_^B))+j[10]+38016083&4294967295,L=_+(T<<9&4294967295|T>>>23),T=S+(_^B&(L^_))+j[15]+3634488961&4294967295,S=L+(T<<14&4294967295|T>>>18),T=B+(L^_&(S^L))+j[4]+3889429448&4294967295,B=S+(T<<20&4294967295|T>>>12),T=_+(S^L&(B^S))+j[9]+568446438&4294967295,_=B+(T<<5&4294967295|T>>>27),T=L+(B^S&(_^B))+j[14]+3275163606&4294967295,L=_+(T<<9&4294967295|T>>>23),T=S+(_^B&(L^_))+j[3]+4107603335&4294967295,S=L+(T<<14&4294967295|T>>>18),T=B+(L^_&(S^L))+j[8]+1163531501&4294967295,B=S+(T<<20&4294967295|T>>>12),T=_+(S^L&(B^S))+j[13]+2850285829&4294967295,_=B+(T<<5&4294967295|T>>>27),T=L+(B^S&(_^B))+j[2]+4243563512&4294967295,L=_+(T<<9&4294967295|T>>>23),T=S+(_^B&(L^_))+j[7]+1735328473&4294967295,S=L+(T<<14&4294967295|T>>>18),T=B+(L^_&(S^L))+j[12]+2368359562&4294967295,B=S+(T<<20&4294967295|T>>>12),T=_+(B^S^L)+j[5]+4294588738&4294967295,_=B+(T<<4&4294967295|T>>>28),T=L+(_^B^S)+j[8]+2272392833&4294967295,L=_+(T<<11&4294967295|T>>>21),T=S+(L^_^B)+j[11]+1839030562&4294967295,S=L+(T<<16&4294967295|T>>>16),T=B+(S^L^_)+j[14]+4259657740&4294967295,B=S+(T<<23&4294967295|T>>>9),T=_+(B^S^L)+j[1]+2763975236&4294967295,_=B+(T<<4&4294967295|T>>>28),T=L+(_^B^S)+j[4]+1272893353&4294967295,L=_+(T<<11&4294967295|T>>>21),T=S+(L^_^B)+j[7]+4139469664&4294967295,S=L+(T<<16&4294967295|T>>>16),T=B+(S^L^_)+j[10]+3200236656&4294967295,B=S+(T<<23&4294967295|T>>>9),T=_+(B^S^L)+j[13]+681279174&4294967295,_=B+(T<<4&4294967295|T>>>28),T=L+(_^B^S)+j[0]+3936430074&4294967295,L=_+(T<<11&4294967295|T>>>21),T=S+(L^_^B)+j[3]+3572445317&4294967295,S=L+(T<<16&4294967295|T>>>16),T=B+(S^L^_)+j[6]+76029189&4294967295,B=S+(T<<23&4294967295|T>>>9),T=_+(B^S^L)+j[9]+3654602809&4294967295,_=B+(T<<4&4294967295|T>>>28),T=L+(_^B^S)+j[12]+3873151461&4294967295,L=_+(T<<11&4294967295|T>>>21),T=S+(L^_^B)+j[15]+530742520&4294967295,S=L+(T<<16&4294967295|T>>>16),T=B+(S^L^_)+j[2]+3299628645&4294967295,B=S+(T<<23&4294967295|T>>>9),T=_+(S^(B|~L))+j[0]+4096336452&4294967295,_=B+(T<<6&4294967295|T>>>26),T=L+(B^(_|~S))+j[7]+1126891415&4294967295,L=_+(T<<10&4294967295|T>>>22),T=S+(_^(L|~B))+j[14]+2878612391&4294967295,S=L+(T<<15&4294967295|T>>>17),T=B+(L^(S|~_))+j[5]+4237533241&4294967295,B=S+(T<<21&4294967295|T>>>11),T=_+(S^(B|~L))+j[12]+1700485571&4294967295,_=B+(T<<6&4294967295|T>>>26),T=L+(B^(_|~S))+j[3]+2399980690&4294967295,L=_+(T<<10&4294967295|T>>>22),T=S+(_^(L|~B))+j[10]+4293915773&4294967295,S=L+(T<<15&4294967295|T>>>17),T=B+(L^(S|~_))+j[1]+2240044497&4294967295,B=S+(T<<21&4294967295|T>>>11),T=_+(S^(B|~L))+j[8]+1873313359&4294967295,_=B+(T<<6&4294967295|T>>>26),T=L+(B^(_|~S))+j[15]+4264355552&4294967295,L=_+(T<<10&4294967295|T>>>22),T=S+(_^(L|~B))+j[6]+2734768916&4294967295,S=L+(T<<15&4294967295|T>>>17),T=B+(L^(S|~_))+j[13]+1309151649&4294967295,B=S+(T<<21&4294967295|T>>>11),T=_+(S^(B|~L))+j[4]+4149444226&4294967295,_=B+(T<<6&4294967295|T>>>26),T=L+(B^(_|~S))+j[11]+3174756917&4294967295,L=_+(T<<10&4294967295|T>>>22),T=S+(_^(L|~B))+j[2]+718787259&4294967295,S=L+(T<<15&4294967295|T>>>17),T=B+(L^(S|~_))+j[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(S+(T<<21&4294967295|T>>>11))&4294967295,E.g[2]=E.g[2]+S&4294967295,E.g[3]=E.g[3]+L&4294967295}n.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var B=_-this.blockSize,j=this.B,S=this.h,L=0;L<_;){if(S==0)for(;L<=B;)s(this,E,L),L+=this.blockSize;if(typeof E=="string"){for(;L<_;)if(j[S++]=E.charCodeAt(L++),S==this.blockSize){s(this,j),S=0;break}}else for(;L<_;)if(j[S++]=E[L++],S==this.blockSize){s(this,j),S=0;break}}this.h=S,this.o+=_},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var B=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=B&255,B/=256;for(this.u(E),E=Array(16),_=B=0;4>_;++_)for(var j=0;32>j;j+=8)E[B++]=this.g[_]>>>j&255;return E};function i(E,_){var B=o;return Object.prototype.hasOwnProperty.call(B,E)?B[E]:B[E]=_(E)}function a(E,_){this.h=_;for(var B=[],j=!0,S=E.length-1;0<=S;S--){var L=E[S]|0;j&&L==_||(B[S]=L,j=!1)}this.g=B}var o={};function A(E){return-128<=E&&128>E?i(E,function(_){return new a([_|0],0>_?-1:0)}):new a([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return d;if(0>E)return k(c(-E));for(var _=[],B=1,j=0;E>=B;j++)_[j]=E/B|0,B*=4294967296;return new a(_,0)}function u(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return k(u(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=c(Math.pow(_,8)),j=d,S=0;S<E.length;S+=8){var L=Math.min(8,E.length-S),T=parseInt(E.substring(S,S+L),_);8>L?(L=c(Math.pow(_,L)),j=j.j(L).add(c(T))):(j=j.j(B),j=j.add(c(T)))}return j}var d=A(0),p=A(1),g=A(16777216);t=a.prototype,t.m=function(){if(y(this))return-k(this).m();for(var E=0,_=1,B=0;B<this.g.length;B++){var j=this.i(B);E+=(0<=j?j:4294967296+j)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(v(this))return"0";if(y(this))return"-"+k(this).toString(E);for(var _=c(Math.pow(E,6)),B=this,j="";;){var S=U(B,_).g;B=x(B,S.j(_));var L=((0<B.g.length?B.g[0]:B.h)>>>0).toString(E);if(B=S,v(B))return L+j;for(;6>L.length;)L="0"+L;j=L+j}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function v(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function y(E){return E.h==-1}t.l=function(E){return E=x(this,E),y(E)?-1:v(E)?0:1};function k(E){for(var _=E.g.length,B=[],j=0;j<_;j++)B[j]=~E.g[j];return new a(B,~E.h).add(p)}t.abs=function(){return y(this)?k(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],j=0,S=0;S<=_;S++){var L=j+(this.i(S)&65535)+(E.i(S)&65535),T=(L>>>16)+(this.i(S)>>>16)+(E.i(S)>>>16);j=T>>>16,L&=65535,T&=65535,B[S]=T<<16|L}return new a(B,B[B.length-1]&-2147483648?-1:0)};function x(E,_){return E.add(k(_))}t.j=function(E){if(v(this)||v(E))return d;if(y(this))return y(E)?k(this).j(k(E)):k(k(this).j(E));if(y(E))return k(this.j(k(E)));if(0>this.l(g)&&0>E.l(g))return c(this.m()*E.m());for(var _=this.g.length+E.g.length,B=[],j=0;j<2*_;j++)B[j]=0;for(j=0;j<this.g.length;j++)for(var S=0;S<E.g.length;S++){var L=this.i(j)>>>16,T=this.i(j)&65535,Z=E.i(S)>>>16,ye=E.i(S)&65535;B[2*j+2*S]+=T*ye,I(B,2*j+2*S),B[2*j+2*S+1]+=L*ye,I(B,2*j+2*S+1),B[2*j+2*S+1]+=T*Z,I(B,2*j+2*S+1),B[2*j+2*S+2]+=L*Z,I(B,2*j+2*S+2)}for(j=0;j<_;j++)B[j]=B[2*j+1]<<16|B[2*j];for(j=_;j<2*_;j++)B[j]=0;return new a(B,0)};function I(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function N(E,_){this.g=E,this.h=_}function U(E,_){if(v(_))throw Error("division by zero");if(v(E))return new N(d,d);if(y(E))return _=U(k(E),_),new N(k(_.g),k(_.h));if(y(_))return _=U(E,k(_)),new N(k(_.g),_.h);if(30<E.g.length){if(y(E)||y(_))throw Error("slowDivide_ only works with positive integers.");for(var B=p,j=_;0>=j.l(E);)B=D(B),j=D(j);var S=P(B,1),L=P(j,1);for(j=P(j,2),B=P(B,2);!v(j);){var T=L.add(j);0>=T.l(E)&&(S=S.add(B),L=T),j=P(j,1),B=P(B,1)}return _=x(E,S.j(_)),new N(S,_)}for(S=d;0<=E.l(_);){for(B=Math.max(1,Math.floor(E.m()/_.m())),j=Math.ceil(Math.log(B)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),L=c(B),T=L.j(_);y(T)||0<T.l(E);)B-=j,L=c(B),T=L.j(_);v(L)&&(L=p),S=S.add(L),E=x(E,T)}return new N(S,E)}t.A=function(E){return U(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],j=0;j<_;j++)B[j]=this.i(j)&E.i(j);return new a(B,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],j=0;j<_;j++)B[j]=this.i(j)|E.i(j);return new a(B,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],j=0;j<_;j++)B[j]=this.i(j)^E.i(j);return new a(B,this.h^E.h)};function D(E){for(var _=E.g.length+1,B=[],j=0;j<_;j++)B[j]=E.i(j)<<1|E.i(j-1)>>>31;return new a(B,E.h)}function P(E,_){var B=_>>5;_%=32;for(var j=E.g.length-B,S=[],L=0;L<j;L++)S[L]=0<_?E.i(L+B)>>>_|E.i(L+B+1)<<32-_:E.i(L+B);return new a(S,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,GN=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,Vc=a}).apply(typeof dC<"u"?dC:typeof self<"u"?self:typeof window<"u"?window:{});var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $N,cf,qN,Vg,C2,WN,JN,XN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,C,Q){return f==Array.prototype||f==Object.prototype||(f[C]=Q.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof V0=="object"&&V0];for(var C=0;C<f.length;++C){var Q=f[C];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}var n=r(this);function s(f,C){if(C)e:{var Q=n;f=f.split(".");for(var J=0;J<f.length-1;J++){var Ue=f[J];if(!(Ue in Q))break e;Q=Q[Ue]}f=f[f.length-1],J=Q[f],C=C(J),C!=J&&C!=null&&e(Q,f,{configurable:!0,writable:!0,value:C})}}function i(f,C){f instanceof String&&(f+="");var Q=0,J=!1,Ue={next:function(){if(!J&&Q<f.length){var Ke=Q++;return{value:C(Ke,f[Ke]),done:!1}}return J=!0,{done:!0,value:void 0}}};return Ue[Symbol.iterator]=function(){return Ue},Ue}s("Array.prototype.values",function(f){return f||function(){return i(this,function(C,Q){return Q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function A(f){var C=typeof f;return C=C!="object"?C:f?Array.isArray(f)?"array":C:"null",C=="array"||C=="object"&&typeof f.length=="number"}function c(f){var C=typeof f;return C=="object"&&f!=null||C=="function"}function u(f,C,Q){return f.call.apply(f.bind,arguments)}function d(f,C,Q){if(!f)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var Ue=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ue,J),f.apply(C,Ue)}}return function(){return f.apply(C,arguments)}}function p(f,C,Q){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,p.apply(null,arguments)}function g(f,C){var Q=Array.prototype.slice.call(arguments,1);return function(){var J=Q.slice();return J.push.apply(J,arguments),f.apply(this,J)}}function v(f,C){function Q(){}Q.prototype=C.prototype,f.aa=C.prototype,f.prototype=new Q,f.prototype.constructor=f,f.Qb=function(J,Ue,Ke){for(var xt=Array(arguments.length-2),kr=2;kr<arguments.length;kr++)xt[kr-2]=arguments[kr];return C.prototype[Ue].apply(J,xt)}}function y(f){const C=f.length;if(0<C){const Q=Array(C);for(let J=0;J<C;J++)Q[J]=f[J];return Q}return[]}function k(f,C){for(let Q=1;Q<arguments.length;Q++){const J=arguments[Q];if(A(J)){const Ue=f.length||0,Ke=J.length||0;f.length=Ue+Ke;for(let xt=0;xt<Ke;xt++)f[Ue+xt]=J[xt]}else f.push(J)}}class x{constructor(C,Q){this.i=C,this.j=Q,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function I(f){return/^[\s\xa0]*$/.test(f)}function N(){var f=o.navigator;return f&&(f=f.userAgent)?f:""}function U(f){return U[" "](f),f}U[" "]=function(){};var D=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function P(f,C,Q){for(const J in f)C.call(Q,f[J],J,f)}function E(f,C){for(const Q in f)C.call(void 0,f[Q],Q,f)}function _(f){const C={};for(const Q in f)C[Q]=f[Q];return C}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(f,C){let Q,J;for(let Ue=1;Ue<arguments.length;Ue++){J=arguments[Ue];for(Q in J)f[Q]=J[Q];for(let Ke=0;Ke<B.length;Ke++)Q=B[Ke],Object.prototype.hasOwnProperty.call(J,Q)&&(f[Q]=J[Q])}}function S(f){var C=1;f=f.split(":");const Q=[];for(;0<C&&f.length;)Q.push(f.shift()),C--;return f.length&&Q.push(f.join(":")),Q}function L(f){o.setTimeout(()=>{throw f},0)}function T(){var f=we;let C=null;return f.g&&(C=f.g,f.g=f.g.next,f.g||(f.h=null),C.next=null),C}class Z{constructor(){this.h=this.g=null}add(C,Q){const J=ye.get();J.set(C,Q),this.h?this.h.next=J:this.g=J,this.h=J}}var ye=new x(()=>new _e,f=>f.reset());class _e{constructor(){this.next=this.g=this.h=null}set(C,Q){this.h=C,this.g=Q,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,ie=!1,we=new Z,Pe=()=>{const f=o.Promise.resolve(void 0);Ce=()=>{f.then(Se)}};var Se=()=>{for(var f;f=T();){try{f.h.call(f.g)}catch(Q){L(Q)}var C=ye;C.j(f),100>C.h&&(C.h++,f.next=C.g,C.g=f)}ie=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(f,C){this.type=f,this.g=this.target=C,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,C=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const Q=()=>{};o.addEventListener("test",Q,C),o.removeEventListener("test",Q,C)}catch{}return f}();function ee(f,C){if(H.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var Q=this.type=f.type,J=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=C,C=f.relatedTarget){if(D){e:{try{U(C.nodeName);var Ue=!0;break e}catch{}Ue=!1}Ue||(C=null)}}else Q=="mouseover"?C=f.fromElement:Q=="mouseout"&&(C=f.toElement);this.relatedTarget=C,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:se[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ee.aa.h.call(this)}}v(ee,H);var se={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),Ae=0;function pe(f,C,Q,J,Ue){this.listener=f,this.proxy=null,this.src=C,this.type=Q,this.capture=!!J,this.ha=Ue,this.key=++Ae,this.da=this.fa=!1}function Ne(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Oe(f){this.src=f,this.g={},this.h=0}Oe.prototype.add=function(f,C,Q,J,Ue){var Ke=f.toString();f=this.g[Ke],f||(f=this.g[Ke]=[],this.h++);var xt=ke(f,C,J,Ue);return-1<xt?(C=f[xt],Q||(C.fa=!1)):(C=new pe(C,this.src,Ke,!!J,Ue),C.fa=Q,f.push(C)),C};function nt(f,C){var Q=C.type;if(Q in f.g){var J=f.g[Q],Ue=Array.prototype.indexOf.call(J,C,void 0),Ke;(Ke=0<=Ue)&&Array.prototype.splice.call(J,Ue,1),Ke&&(Ne(C),f.g[Q].length==0&&(delete f.g[Q],f.h--))}}function ke(f,C,Q,J){for(var Ue=0;Ue<f.length;++Ue){var Ke=f[Ue];if(!Ke.da&&Ke.listener==C&&Ke.capture==!!Q&&Ke.ha==J)return Ue}return-1}var ce="closure_lm_"+(1e6*Math.random()|0),R={};function Ee(f,C,Q,J,Ue){if(Array.isArray(C)){for(var Ke=0;Ke<C.length;Ke++)Ee(f,C[Ke],Q,J,Ue);return null}return Q=le(Q),f&&f[ue]?f.K(C,Q,c(J)?!!J.capture:!1,Ue):De(f,C,Q,!1,J,Ue)}function De(f,C,Q,J,Ue,Ke){if(!C)throw Error("Invalid event type");var xt=c(Ue)?!!Ue.capture:!!Ue,kr=Te(f);if(kr||(f[ce]=kr=new Oe(f)),Q=kr.add(C,Q,J,xt,Ke),Q.proxy)return Q;if(J=st(),Q.proxy=J,J.src=f,J.listener=Q,f.addEventListener)K||(Ue=xt),Ue===void 0&&(Ue=!1),f.addEventListener(C.toString(),J,Ue);else if(f.attachEvent)f.attachEvent(ve(C.toString()),J);else if(f.addListener&&f.removeListener)f.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return Q}function st(){function f(Q){return C.call(f.src,f.listener,Q)}const C=de;return f}function ge(f,C,Q,J,Ue){if(Array.isArray(C))for(var Ke=0;Ke<C.length;Ke++)ge(f,C[Ke],Q,J,Ue);else J=c(J)?!!J.capture:!!J,Q=le(Q),f&&f[ue]?(f=f.i,C=String(C).toString(),C in f.g&&(Ke=f.g[C],Q=ke(Ke,Q,J,Ue),-1<Q&&(Ne(Ke[Q]),Array.prototype.splice.call(Ke,Q,1),Ke.length==0&&(delete f.g[C],f.h--)))):f&&(f=Te(f))&&(C=f.g[C.toString()],f=-1,C&&(f=ke(C,Q,J,Ue)),(Q=-1<f?C[f]:null)&&Be(Q))}function Be(f){if(typeof f!="number"&&f&&!f.da){var C=f.src;if(C&&C[ue])nt(C.i,f);else{var Q=f.type,J=f.proxy;C.removeEventListener?C.removeEventListener(Q,J,f.capture):C.detachEvent?C.detachEvent(ve(Q),J):C.addListener&&C.removeListener&&C.removeListener(J),(Q=Te(C))?(nt(Q,f),Q.h==0&&(Q.src=null,C[ce]=null)):Ne(f)}}}function ve(f){return f in R?R[f]:R[f]="on"+f}function de(f,C){if(f.da)f=!0;else{C=new ee(C,this);var Q=f.listener,J=f.ha||f.src;f.fa&&Be(f),f=Q.call(J,C)}return f}function Te(f){return f=f[ce],f instanceof Oe?f:null}var q="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(f){return typeof f=="function"?f:(f[q]||(f[q]=function(C){return f.handleEvent(C)}),f[q])}function oe(){M.call(this),this.i=new Oe(this),this.M=this,this.F=null}v(oe,M),oe.prototype[ue]=!0,oe.prototype.removeEventListener=function(f,C,Q,J){ge(this,f,C,Q,J)};function he(f,C){var Q,J=f.F;if(J)for(Q=[];J;J=J.F)Q.push(J);if(f=f.M,J=C.type||C,typeof C=="string")C=new H(C,f);else if(C instanceof H)C.target=C.target||f;else{var Ue=C;C=new H(J,f),j(C,Ue)}if(Ue=!0,Q)for(var Ke=Q.length-1;0<=Ke;Ke--){var xt=C.g=Q[Ke];Ue=Le(xt,J,!0,C)&&Ue}if(xt=C.g=f,Ue=Le(xt,J,!0,C)&&Ue,Ue=Le(xt,J,!1,C)&&Ue,Q)for(Ke=0;Ke<Q.length;Ke++)xt=C.g=Q[Ke],Ue=Le(xt,J,!1,C)&&Ue}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var f=this.i,C;for(C in f.g){for(var Q=f.g[C],J=0;J<Q.length;J++)Ne(Q[J]);delete f.g[C],f.h--}}this.F=null},oe.prototype.K=function(f,C,Q,J){return this.i.add(String(f),C,!1,Q,J)},oe.prototype.L=function(f,C,Q,J){return this.i.add(String(f),C,!0,Q,J)};function Le(f,C,Q,J){if(C=f.i.g[String(C)],!C)return!0;C=C.concat();for(var Ue=!0,Ke=0;Ke<C.length;++Ke){var xt=C[Ke];if(xt&&!xt.da&&xt.capture==Q){var kr=xt.listener,Ln=xt.ha||xt.src;xt.fa&&nt(f.i,xt),Ue=kr.call(Ln,J)!==!1&&Ue}}return Ue&&!J.defaultPrevented}function Re(f,C,Q){if(typeof f=="function")Q&&(f=p(f,Q));else if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:o.setTimeout(f,C||0)}function $e(f){f.g=Re(()=>{f.g=null,f.i&&(f.i=!1,$e(f))},f.l);const C=f.h;f.h=null,f.m.apply(null,C)}class Ve extends M{constructor(C,Q){super(),this.m=C,this.l=Q,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:$e(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function St(f){M.call(this),this.h=f,this.g={}}v(St,M);var ft=[];function gt(f){P(f.g,function(C,Q){this.g.hasOwnProperty(Q)&&Be(C)},f),f.g={}}St.prototype.N=function(){St.aa.N.call(this),gt(this)},St.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=o.JSON.stringify,dt=o.JSON.parse,tt=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function Tt(){}Tt.prototype.h=null;function bt(f){return f.h||(f.h=f.i())}function It(){}var qt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ht(){H.call(this,"d")}v(Ht,H);function wt(){H.call(this,"c")}v(wt,H);var Kt={},zr=null;function Qr(){return zr=zr||new oe}Kt.La="serverreachability";function Hr(f){H.call(this,Kt.La,f)}v(Hr,H);function tr(f){const C=Qr();he(C,new Hr(C))}Kt.STAT_EVENT="statevent";function Dt(f,C){H.call(this,Kt.STAT_EVENT,f),this.stat=C}v(Dt,H);function jt(f){const C=Qr();he(C,new Dt(C,f))}Kt.Ma="timingevent";function dr(f,C){H.call(this,Kt.Ma,f),this.size=C}v(dr,H);function en(f,C){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},C)}function Mr(){this.g=!0}Mr.prototype.xa=function(){this.g=!1};function mr(f,C,Q,J,Ue,Ke){f.info(function(){if(f.g)if(Ke)for(var xt="",kr=Ke.split("&"),Ln=0;Ln<kr.length;Ln++){var wr=kr[Ln].split("=");if(1<wr.length){var Dr=wr[0];wr=wr[1];var dn=Dr.split("_");xt=2<=dn.length&&dn[1]=="type"?xt+(Dr+"="+wr+"&"):xt+(Dr+"=redacted&")}}else xt=null;else xt=Ke;return"XMLHTTP REQ ("+J+") [attempt "+Ue+"]: "+C+`
`+Q+`
`+xt})}function Rr(f,C,Q,J,Ue,Ke,xt){f.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+Ue+"]: "+C+`
`+Q+`
`+Ke+" "+xt})}function ae(f,C,Q,J){f.info(function(){return"XMLHTTP TEXT ("+C+"): "+vt(f,Q)+(J?" "+J:"")})}function qe(f,C){f.info(function(){return"TIMEOUT: "+C})}Mr.prototype.info=function(){};function vt(f,C){if(!f.g)return C;if(!C)return null;try{var Q=JSON.parse(C);if(Q){for(f=0;f<Q.length;f++)if(Array.isArray(Q[f])){var J=Q[f];if(!(2>J.length)){var Ue=J[1];if(Array.isArray(Ue)&&!(1>Ue.length)){var Ke=Ue[0];if(Ke!="noop"&&Ke!="stop"&&Ke!="close")for(var xt=1;xt<Ue.length;xt++)Ue[xt]=""}}}}return At(Q)}catch{return C}}var mt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},at;function yt(){}v(yt,Tt),yt.prototype.g=function(){return new XMLHttpRequest},yt.prototype.i=function(){return{}},at=new yt;function Et(f,C,Q,J){this.j=f,this.i=C,this.l=Q,this.R=J||1,this.U=new St(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ar}function ar(){this.i=null,this.g="",this.h=!1}var Tr={},Ir={};function js(f,C,Q){f.L=1,f.v=Zt(Ge(C)),f.m=Q,f.P=!0,Ei(f,null)}function Ei(f,C){f.F=Date.now(),Gi(f),f.A=Ge(f.v);var Q=f.A,J=f.R;Array.isArray(J)||(J=[String(J)]),$i(Q.i,"t",J),f.C=0,Q=f.j.J,f.h=new ar,f.g=On(f.j,Q?C:null,!f.m),0<f.O&&(f.M=new Ve(p(f.Y,f,f.g),f.O)),C=f.U,Q=f.g,J=f.ca;var Ue="readystatechange";Array.isArray(Ue)||(Ue&&(ft[0]=Ue.toString()),Ue=ft);for(var Ke=0;Ke<Ue.length;Ke++){var xt=Ee(Q,Ue[Ke],J||C.handleEvent,!1,C.h||C);if(!xt)break;C.g[xt.key]=xt}C=f.H?_(f.H):{},f.m?(f.u||(f.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,C)):(f.u="GET",f.g.ea(f.A,f.u,null,C)),tr(),mr(f.i,f.u,f.A,f.l,f.R,f.m)}Et.prototype.ca=function(f){f=f.target;const C=this.M;C&&mi(f)==3?C.j():this.Y(f)},Et.prototype.Y=function(f){try{if(f==this.g)e:{const dn=mi(this.g);var C=this.g.Ba();const Wi=this.g.Z();if(!(3>dn)&&(dn!=3||this.g&&(this.h.h||this.g.oa()||mc(this.g)))){this.J||dn!=4||C==7||(C==8||0>=Wi?tr(3):tr(2)),Ao(this);var Q=this.g.Z();this.X=Q;t:if(ki(this)){var J=mc(this.g);f="";var Ue=J.length,Ke=mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Js(this),cs(this);var xt="";break t}this.h.i=new o.TextDecoder}for(C=0;C<Ue;C++)this.h.h=!0,f+=this.h.i.decode(J[C],{stream:!(Ke&&C==Ue-1)});J.length=0,this.h.g+=f,this.C=0,xt=this.h.g}else xt=this.g.oa();if(this.o=Q==200,Rr(this.i,this.u,this.A,this.l,this.R,dn,Q),this.o){if(this.T&&!this.K){t:{if(this.g){var kr,Ln=this.g;if((kr=Ln.g?Ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(kr)){var wr=kr;break t}}wr=null}if(Q=wr)ae(this.i,this.l,Q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pa(this,Q);else{this.o=!1,this.s=3,jt(12),Js(this),cs(this);break e}}if(this.P){Q=!0;let Zs;for(;!this.J&&this.C<xt.length;)if(Zs=gi(this,xt),Zs==Ir){dn==4&&(this.s=4,jt(14),Q=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(Zs==Tr){this.s=4,jt(15),ae(this.i,this.l,xt,"[Invalid Chunk]"),Q=!1;break}else ae(this.i,this.l,Zs,null),Pa(this,Zs);if(ki(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dn!=4||xt.length!=0||this.h.h||(this.s=1,jt(16),Q=!1),this.o=this.o&&Q,!Q)ae(this.i,this.l,xt,"[Invalid Chunked Response]"),Js(this),cs(this);else if(0<xt.length&&!this.W){this.W=!0;var Dr=this.j;Dr.g==this&&Dr.ba&&!Dr.M&&(Dr.j.info("Great, no buffering proxy detected. Bytes received: "+xt.length),Qt(Dr),Dr.M=!0,jt(11))}}else ae(this.i,this.l,xt,null),Pa(this,xt);dn==4&&Js(this),this.o&&!this.J&&(dn==4?Ar(this.j,this):(this.o=!1,Gi(this)))}else Bu(this.g),Q==400&&0<xt.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),Js(this),cs(this)}}}catch{}finally{}};function ki(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function gi(f,C){var Q=f.C,J=C.indexOf(`
`,Q);return J==-1?Ir:(Q=Number(C.substring(Q,J)),isNaN(Q)?Tr:(J+=1,J+Q>C.length?Ir:(C=C.slice(J,J+Q),f.C=J+Q,C)))}Et.prototype.cancel=function(){this.J=!0,Js(this)};function Gi(f){f.S=Date.now()+f.I,Do(f,f.I)}function Do(f,C){if(f.B!=null)throw Error("WatchDog timer not null");f.B=en(p(f.ba,f),C)}function Ao(f){f.B&&(o.clearTimeout(f.B),f.B=null)}Et.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(qe(this.i,this.A),this.L!=2&&(tr(),jt(17)),Js(this),this.s=2,cs(this)):Do(this,this.S-f)};function cs(f){f.j.G==0||f.J||Ar(f.j,f)}function Js(f){Ao(f);var C=f.M;C&&typeof C.ma=="function"&&C.ma(),f.M=null,gt(f.U),f.g&&(C=f.g,f.g=null,C.abort(),C.ma())}function Pa(f,C){try{var Q=f.j;if(Q.G!=0&&(Q.g==f||Qs(Q.h,f))){if(!f.K&&Qs(Q.h,f)&&Q.G==3){try{var J=Q.Da.g.parse(C)}catch{J=null}if(Array.isArray(J)&&J.length==3){var Ue=J;if(Ue[0]==0){e:if(!Q.u){if(Q.g)if(Q.g.F+3e3<f.F)rr(Q),xa(Q);else break e;ot(Q),jt(18)}}else Q.za=Ue[1],0<Q.za-Q.T&&37500>Ue[2]&&Q.F&&Q.v==0&&!Q.C&&(Q.C=en(p(Q.Za,Q),6e3));if(1>=co(Q.h)&&Q.ca){try{Q.ca()}catch{}Q.ca=void 0}}else Or(Q,11)}else if((f.K||Q.g==f)&&rr(Q),!I(C))for(Ue=Q.Da.g.parse(C),C=0;C<Ue.length;C++){let wr=Ue[C];if(Q.T=wr[0],wr=wr[1],Q.G==2)if(wr[0]=="c"){Q.K=wr[1],Q.ia=wr[2];const Dr=wr[3];Dr!=null&&(Q.la=Dr,Q.j.info("VER="+Q.la));const dn=wr[4];dn!=null&&(Q.Aa=dn,Q.j.info("SVER="+Q.Aa));const Wi=wr[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(J=1.5*Wi,Q.L=J,Q.j.info("backChannelRequestTimeoutMs_="+J)),J=Q;const Zs=f.g;if(Zs){const Rs=Zs.g?Zs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rs){var Ke=J.h;Ke.g||Rs.indexOf("spdy")==-1&&Rs.indexOf("quic")==-1&&Rs.indexOf("h2")==-1||(Ke.j=Ke.l,Ke.g=new Set,Ke.h&&(pa(Ke,Ke.h),Ke.h=null))}if(J.D){const Ha=Zs.g?Zs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(J.ya=Ha,Ze(J.I,J.D,Ha))}}Q.G=3,Q.l&&Q.l.ua(),Q.ba&&(Q.R=Date.now()-f.F,Q.j.info("Handshake RTT: "+Q.R+"ms")),J=Q;var xt=f;if(J.qa=Gr(J,J.J?J.ia:null,J.W),xt.K){Mo(J.h,xt);var kr=xt,Ln=J.L;Ln&&(kr.I=Ln),kr.B&&(Ao(kr),Gi(kr)),J.g=xt}else Je(J);0<Q.i.length&&w(Q)}else wr[0]!="stop"&&wr[0]!="close"||Or(Q,7);else Q.G==3&&(wr[0]=="stop"||wr[0]=="close"?wr[0]=="stop"?Or(Q,7):QA(Q):wr[0]!="noop"&&Q.l&&Q.l.ta(wr),Q.v=0)}}tr(4)}catch{}}var Da=class{constructor(f,C){this.g=f,this.map=C}};function lo(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mn(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function co(f){return f.h?1:f.g?f.g.size:0}function Qs(f,C){return f.h?f.h==C:f.g?f.g.has(C):!1}function pa(f,C){f.g?f.g.add(C):f.h=C}function Mo(f,C){f.h&&f.h==C?f.h=null:f.g&&f.g.has(C)&&f.g.delete(C)}lo.prototype.cancel=function(){if(this.i=un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function un(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let C=f.i;for(const Q of f.g.values())C=C.concat(Q.D);return C}return y(f.i)}function Oo(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(A(f)){for(var C=[],Q=f.length,J=0;J<Q;J++)C.push(f[J]);return C}C=[],Q=0;for(J in f)C[Q++]=f[J];return C}function Si(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(A(f)||typeof f=="string"){var C=[];f=f.length;for(var Q=0;Q<f;Q++)C.push(Q);return C}C=[],Q=0;for(const J in f)C[Q++]=J;return C}}}function Ma(f,C){if(f.forEach&&typeof f.forEach=="function")f.forEach(C,void 0);else if(A(f)||typeof f=="string")Array.prototype.forEach.call(f,C,void 0);else for(var Q=Si(f),J=Oo(f),Ue=J.length,Ke=0;Ke<Ue;Ke++)C.call(void 0,J[Ke],Q&&Q[Ke],f)}var Ho=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y(f,C){if(f){f=f.split("&");for(var Q=0;Q<f.length;Q++){var J=f[Q].indexOf("="),Ue=null;if(0<=J){var Ke=f[Q].substring(0,J);Ue=f[Q].substring(J+1)}else Ke=f[Q];C(Ke,Ue?decodeURIComponent(Ue.replace(/\+/g," ")):"")}}}function xe(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof xe){this.h=f.h,Ye(this,f.j),this.o=f.o,this.g=f.g,it(this,f.s),this.l=f.l;var C=f.i,Q=new or;Q.i=C.i,C.g&&(Q.g=new Map(C.g),Q.h=C.h),Nt(this,Q),this.m=f.m}else f&&(C=String(f).match(Ho))?(this.h=!1,Ye(this,C[1]||"",!0),this.o=Yt(C[2]||""),this.g=Yt(C[3]||"",!0),it(this,C[4]),this.l=Yt(C[5]||"",!0),Nt(this,C[6]||"",!0),this.m=Yt(C[7]||"")):(this.h=!1,this.i=new or(null,this.h))}xe.prototype.toString=function(){var f=[],C=this.j;C&&f.push(hr(C,Pr,!0),":");var Q=this.g;return(Q||C=="file")&&(f.push("//"),(C=this.o)&&f.push(hr(C,Pr,!0),"@"),f.push(encodeURIComponent(String(Q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Q=this.s,Q!=null&&f.push(":",String(Q))),(Q=this.l)&&(this.g&&Q.charAt(0)!="/"&&f.push("/"),f.push(hr(Q,Q.charAt(0)=="/"?an:_s,!0))),(Q=this.i.toString())&&f.push("?",Q),(Q=this.m)&&f.push("#",hr(Q,Xs)),f.join("")};function Ge(f){return new xe(f)}function Ye(f,C,Q){f.j=Q?Yt(C,!0):C,f.j&&(f.j=f.j.replace(/:$/,""))}function it(f,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);f.s=C}else f.s=null}function Nt(f,C,Q){C instanceof or?(f.i=C,TA(f.i,f.h)):(Q||(C=hr(C,Mn)),f.i=new or(C,f.h))}function Ze(f,C,Q){f.i.set(C,Q)}function Zt(f){return Ze(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Yt(f,C){return f?C?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function hr(f,C,Q){return typeof f=="string"?(f=encodeURI(f).replace(C,Er),Q&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Er(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Pr=/[#\/\?@]/g,_s=/[#\?:]/g,an=/[#\?]/g,Mn=/[#\?@]/g,Xs=/#/g;function or(f,C){this.h=this.g=null,this.i=f||null,this.j=!!C}function er(f){f.g||(f.g=new Map,f.h=0,f.i&&Y(f.i,function(C,Q){f.add(decodeURIComponent(C.replace(/\+/g," ")),Q)}))}t=or.prototype,t.add=function(f,C){er(this),this.i=null,f=Xt(this,f);var Q=this.g.get(f);return Q||this.g.set(f,Q=[]),Q.push(C),this.h+=1,this};function Cs(f,C){er(f),C=Xt(f,C),f.g.has(C)&&(f.i=null,f.h-=f.g.get(C).length,f.g.delete(C))}function Is(f,C){return er(f),C=Xt(f,C),f.g.has(C)}t.forEach=function(f,C){er(this),this.g.forEach(function(Q,J){Q.forEach(function(Ue){f.call(C,Ue,J,this)},this)},this)},t.na=function(){er(this);const f=Array.from(this.g.values()),C=Array.from(this.g.keys()),Q=[];for(let J=0;J<C.length;J++){const Ue=f[J];for(let Ke=0;Ke<Ue.length;Ke++)Q.push(C[J])}return Q},t.V=function(f){er(this);let C=[];if(typeof f=="string")Is(this,f)&&(C=C.concat(this.g.get(Xt(this,f))));else{f=Array.from(this.g.values());for(let Q=0;Q<f.length;Q++)C=C.concat(f[Q])}return C},t.set=function(f,C){return er(this),this.i=null,f=Xt(this,f),Is(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[C]),this.h+=1,this},t.get=function(f,C){return f?(f=this.V(f),0<f.length?String(f[0]):C):C};function $i(f,C,Q){Cs(f,C),0<Q.length&&(f.i=null,f.g.set(Xt(f,C),y(Q)),f.h+=Q.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],C=Array.from(this.g.keys());for(var Q=0;Q<C.length;Q++){var J=C[Q];const Ke=encodeURIComponent(String(J)),xt=this.V(J);for(J=0;J<xt.length;J++){var Ue=Ke;xt[J]!==""&&(Ue+="="+encodeURIComponent(String(xt[J]))),f.push(Ue)}}return this.i=f.join("&")};function Xt(f,C){return C=String(C),f.j&&(C=C.toLowerCase()),C}function TA(f,C){C&&!f.j&&(er(f),f.i=null,f.g.forEach(function(Q,J){var Ue=J.toLowerCase();J!=Ue&&(Cs(this,J),$i(this,Ue,Q))},f)),f.j=C}function hc(f,C){const Q=new Mr;if(o.Image){const J=new Image;J.onload=g(Wn,Q,"TestLoadImage: loaded",!0,C,J),J.onerror=g(Wn,Q,"TestLoadImage: error",!1,C,J),J.onabort=g(Wn,Q,"TestLoadImage: abort",!1,C,J),J.ontimeout=g(Wn,Q,"TestLoadImage: timeout",!1,C,J),o.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=f}else C(!1)}function fc(f,C){const Q=new Mr,J=new AbortController,Ue=setTimeout(()=>{J.abort(),Wn(Q,"TestPingServer: timeout",!1,C)},1e4);fetch(f,{signal:J.signal}).then(Ke=>{clearTimeout(Ue),Ke.ok?Wn(Q,"TestPingServer: ok",!0,C):Wn(Q,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(Ue),Wn(Q,"TestPingServer: error",!1,C)})}function Wn(f,C,Q,J,Ue){try{Ue&&(Ue.onload=null,Ue.onerror=null,Ue.onabort=null,Ue.ontimeout=null),J(Q)}catch{}}function Ni(){this.g=new tt}function UA(f,C,Q){const J=Q||"";try{Ma(f,function(Ue,Ke){let xt=Ue;c(Ue)&&(xt=At(Ue)),C.push(J+Ke+"="+encodeURIComponent(xt))})}catch(Ue){throw C.push(J+"type="+encodeURIComponent("_badmap")),Ue}}function Ys(f){this.l=f.Ub||null,this.j=f.eb||!1}v(Ys,Tt),Ys.prototype.g=function(){return new Oa(this.l,this.j)},Ys.prototype.i=function(f){return function(){return f}}({});function Oa(f,C){oe.call(this),this.D=f,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Oa,oe),t=Oa.prototype,t.open=function(f,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=C,this.readyState=1,Vo(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(C.body=f),(this.D||o).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Vo(this)),this.g&&(this.readyState=3,Vo(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;LA(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function LA(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var C=f.value?f.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!f.done}))&&(this.response=this.responseText+=C)}f.done?qi(this):Vo(this),this.readyState==3&&LA(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,qi(this))},t.Qa=function(f){this.g&&(this.response=f,qi(this))},t.ga=function(){this.g&&qi(this)};function qi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Vo(f)}t.setRequestHeader=function(f,C){this.u.append(f,C)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],C=this.h.entries();for(var Q=C.next();!Q.done;)Q=Q.value,f.push(Q[0]+": "+Q[1]),Q=C.next();return f.join(`\r
`)};function Vo(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ga(f){let C="";return P(f,function(Q,J){C+=J,C+=":",C+=Q,C+=`\r
`}),C}function pc(f,C,Q){e:{for(J in Q){var J=!1;break e}J=!0}J||(Q=ga(Q),typeof f=="string"?Q!=null&&encodeURIComponent(String(Q)):Ze(f,C,Q))}function tn(f){oe.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(tn,oe);var gc=/^https?$/i,bu=["POST","PUT"];t=tn.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,C,Q,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);C=C?C.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():at.g(),this.v=this.o?bt(this.o):bt(at),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(C,String(f),!0),this.B=!1}catch(Ke){ma(this,Ke);return}if(f=Q||"",Q=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var Ue in J)Q.set(Ue,J[Ue]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const Ke of J.keys())Q.set(Ke,J.get(Ke));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(Q.keys()).find(Ke=>Ke.toLowerCase()=="content-type"),Ue=o.FormData&&f instanceof o.FormData,!(0<=Array.prototype.indexOf.call(bu,C,void 0))||J||Ue||Q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ke,xt]of Q)this.g.setRequestHeader(Ke,xt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ho(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ke){ma(this,Ke)}};function ma(f,C){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=C,f.m=5,jA(f),uo(f)}function jA(f){f.A||(f.A=!0,he(f,"complete"),he(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,he(this,"complete"),he(this,"abort"),uo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uo(this,!0)),tn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ko(this):this.bb())},t.bb=function(){Ko(this)};function Ko(f){if(f.h&&typeof a<"u"&&(!f.v[1]||mi(f)!=4||f.Z()!=2)){if(f.u&&mi(f)==4)Re(f.Ea,0,f);else if(he(f,"readystatechange"),mi(f)==4){f.h=!1;try{const xt=f.Z();e:switch(xt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var Q;if(!(Q=C)){var J;if(J=xt===0){var Ue=String(f.D).match(Ho)[1]||null;!Ue&&o.self&&o.self.location&&(Ue=o.self.location.protocol.slice(0,-1)),J=!gc.test(Ue?Ue.toLowerCase():"")}Q=J}if(Q)he(f,"complete"),he(f,"success");else{f.m=6;try{var Ke=2<mi(f)?f.g.statusText:""}catch{Ke=""}f.l=Ke+" ["+f.Z()+"]",jA(f)}}finally{uo(f)}}}}function uo(f,C){if(f.g){ho(f);const Q=f.g,J=f.v[0]?()=>{}:null;f.g=null,f.v=null,C||he(f,"ready");try{Q.onreadystatechange=J}catch{}}}function ho(f){f.I&&(o.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function mi(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<mi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var C=this.g.responseText;return f&&C.indexOf(f)==0&&(C=C.substring(f.length)),dt(C)}};function mc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Bu(f){const C={};f=(f.g&&2<=mi(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<f.length;J++){if(I(f[J]))continue;var Q=S(f[J]);const Ue=Q[0];if(Q=Q[1],typeof Q!="string")continue;Q=Q.trim();const Ke=C[Ue]||[];C[Ue]=Ke,Ke.push(Q)}E(C,function(J){return J.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(f,C,Q){return Q&&Q.internalChannelParams&&Q.internalChannelParams[f]||C}function wa(f){this.Aa=0,this.i=[],this.j=new Mr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wi("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wi("baseRetryDelayMs",5e3,f),this.cb=wi("retryDelaySeedMs",1e4,f),this.Wa=wi("forwardChannelMaxRetries",2,f),this.wa=wi("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new lo(f&&f.concurrentRequestLimit),this.Da=new Ni,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wa.prototype,t.la=8,t.G=1,t.connect=function(f,C,Q,J){jt(0),this.W=f,this.H=C||{},Q&&J!==void 0&&(this.H.OSID=Q,this.H.OAID=J),this.F=this.X,this.I=Gr(this,null,this.W),w(this)};function QA(f){if(wc(f),f.G==3){var C=f.U++,Q=Ge(f.I);if(Ze(Q,"SID",f.K),Ze(Q,"RID",C),Ze(Q,"TYPE","terminate"),fe(f,Q),C=new Et(f,f.j,C),C.L=2,C.v=Zt(Ge(Q)),Q=!1,o.navigator&&o.navigator.sendBeacon)try{Q=o.navigator.sendBeacon(C.v.toString(),"")}catch{}!Q&&o.Image&&(new Image().src=C.v,Q=!0),Q||(C.g=On(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Gi(C)}Fn(f)}function xa(f){f.g&&(Qt(f),f.g.cancel(),f.g=null)}function wc(f){xa(f),f.u&&(o.clearTimeout(f.u),f.u=null),rr(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&o.clearTimeout(f.s),f.s=null)}function w(f){if(!mn(f.h)&&!f.s){f.s=!0;var C=f.Ga;Ce||Pe(),ie||(Ce(),ie=!0),we.add(C,f),f.B=0}}function O(f,C){return co(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=C.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=en(p(f.Ga,f,C),yr(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Ue=new Et(this,this.j,f);let Ke=this.o;if(this.S&&(Ke?(Ke=_(Ke),j(Ke,this.S)):Ke=this.S),this.m!==null||this.O||(Ue.H=Ke,Ke=null),this.P)e:{for(var C=0,Q=0;Q<this.i.length;Q++){t:{var J=this.i[Q];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(C+=J,4096<C){C=Q;break e}if(C===4096||Q===this.i.length-1){C=Q+1;break e}}C=1e3}else C=1e3;C=Fe(this,Ue,C),Q=Ge(this.I),Ze(Q,"RID",f),Ze(Q,"CVER",22),this.D&&Ze(Q,"X-HTTP-Session-Id",this.D),fe(this,Q),Ke&&(this.O?C="headers="+encodeURIComponent(String(ga(Ke)))+"&"+C:this.m&&pc(Q,this.m,Ke)),pa(this.h,Ue),this.Ua&&Ze(Q,"TYPE","init"),this.P?(Ze(Q,"$req",C),Ze(Q,"SID","null"),Ue.T=!0,js(Ue,Q,null)):js(Ue,Q,C),this.G=2}}else this.G==3&&(f?te(this,f):this.i.length==0||mn(this.h)||te(this))};function te(f,C){var Q;C?Q=C.l:Q=f.U++;const J=Ge(f.I);Ze(J,"SID",f.K),Ze(J,"RID",Q),Ze(J,"AID",f.T),fe(f,J),f.m&&f.o&&pc(J,f.m,f.o),Q=new Et(f,f.j,Q,f.B+1),f.m===null&&(Q.H=f.o),C&&(f.i=C.D.concat(f.i)),C=Fe(f,Q,1e3),Q.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),pa(f.h,Q),js(Q,J,C)}function fe(f,C){f.H&&P(f.H,function(Q,J){Ze(C,J,Q)}),f.l&&Ma({},function(Q,J){Ze(C,J,Q)})}function Fe(f,C,Q){Q=Math.min(f.i.length,Q);var J=f.l?p(f.l.Na,f.l,f):null;e:{var Ue=f.i;let Ke=-1;for(;;){const xt=["count="+Q];Ke==-1?0<Q?(Ke=Ue[0].g,xt.push("ofs="+Ke)):Ke=0:xt.push("ofs="+Ke);let kr=!0;for(let Ln=0;Ln<Q;Ln++){let wr=Ue[Ln].g;const Dr=Ue[Ln].map;if(wr-=Ke,0>wr)Ke=Math.max(0,Ue[Ln].g-100),kr=!1;else try{UA(Dr,xt,"req"+wr+"_")}catch{J&&J(Dr)}}if(kr){J=xt.join("&");break e}}}return f=f.i.splice(0,Q),C.D=f,J}function Je(f){if(!f.g&&!f.u){f.Y=1;var C=f.Fa;Ce||Pe(),ie||(Ce(),ie=!0),we.add(C,f),f.v=0}}function ot(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=en(p(f.Fa,f),yr(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Vt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=en(p(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),xa(this),Vt(this))};function Qt(f){f.A!=null&&(o.clearTimeout(f.A),f.A=null)}function Vt(f){f.g=new Et(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var C=Ge(f.qa);Ze(C,"RID","rpc"),Ze(C,"SID",f.K),Ze(C,"AID",f.T),Ze(C,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ze(C,"TO",f.ja),Ze(C,"TYPE","xmlhttp"),fe(f,C),f.m&&f.o&&pc(C,f.m,f.o),f.L&&(f.g.I=f.L);var Q=f.g;f=f.ia,Q.L=1,Q.v=Zt(Ge(C)),Q.m=null,Q.P=!0,Ei(Q,f)}t.Za=function(){this.C!=null&&(this.C=null,xa(this),ot(this),jt(19))};function rr(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function Ar(f,C){var Q=null;if(f.g==C){rr(f),Qt(f),f.g=null;var J=2}else if(Qs(f.h,C))Q=C.D,Mo(f.h,C),J=1;else return;if(f.G!=0){if(C.o)if(J==1){Q=C.m?C.m.length:0,C=Date.now()-C.F;var Ue=f.B;J=Qr(),he(J,new dr(J,Q)),w(f)}else Je(f);else if(Ue=C.s,Ue==3||Ue==0&&0<C.X||!(J==1&&O(f,C)||J==2&&ot(f)))switch(Q&&0<Q.length&&(C=f.h,C.i=C.i.concat(Q)),Ue){case 1:Or(f,5);break;case 4:Or(f,10);break;case 3:Or(f,6);break;default:Or(f,2)}}}function yr(f,C){let Q=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(Q*=2),Q*C}function Or(f,C){if(f.j.info("Error code "+C),C==2){var Q=p(f.fb,f),J=f.Xa;const Ue=!J;J=new xe(J||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ye(J,"https"),Zt(J),Ue?hc(J.toString(),Q):fc(J.toString(),Q)}else jt(2);f.G=0,f.l&&f.l.sa(C),Fn(f),wc(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Fn(f){if(f.G=0,f.ka=[],f.l){const C=un(f.h);(C.length!=0||f.i.length!=0)&&(k(f.ka,C),k(f.ka,f.i),f.h.i.length=0,y(f.i),f.i.length=0),f.l.ra()}}function Gr(f,C,Q){var J=Q instanceof xe?Ge(Q):new xe(Q);if(J.g!="")C&&(J.g=C+"."+J.g),it(J,J.s);else{var Ue=o.location;J=Ue.protocol,C=C?C+"."+Ue.hostname:Ue.hostname,Ue=+Ue.port;var Ke=new xe(null);J&&Ye(Ke,J),C&&(Ke.g=C),Ue&&it(Ke,Ue),Q&&(Ke.l=Q),J=Ke}return Q=f.D,C=f.ya,Q&&C&&Ze(J,Q,C),Ze(J,"VER",f.la),fe(f,J),J}function On(f,C,Q){if(C&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=f.Ca&&!f.pa?new tn(new Ys({eb:Q})):new tn(f.pa),C.Ha(f.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tn(){}t=Tn.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hn(){}Hn.prototype.g=function(f,C){return new Un(f,C)};function Un(f,C){oe.call(this),this.g=new wa(C),this.l=f,this.h=C&&C.messageUrlParams||null,f=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(f?f["X-WebChannel-Content-Type"]=C.messageContentType:f={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(f?f["X-WebChannel-Client-Profile"]=C.va:f={"X-WebChannel-Client-Profile":C.va}),this.g.S=f,(f=C&&C.Sb)&&!I(f)&&(this.g.m=f),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!I(C)&&(this.g.D=C,f=this.h,f!==null&&C in f&&(f=this.h,C in f&&delete f[C])),this.j=new ya(this)}v(Un,oe),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){QA(this.g)},Un.prototype.o=function(f){var C=this.g;if(typeof f=="string"){var Q={};Q.__data__=f,f=Q}else this.u&&(Q={},Q.__data__=At(f),f=Q);C.i.push(new Da(C.Ya++,f)),C.G==3&&w(C)},Un.prototype.N=function(){this.g.l=null,delete this.j,QA(this.g),delete this.g,Un.aa.N.call(this)};function Fi(f){Ht.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var C=f.__sm__;if(C){e:{for(const Q in C){f=Q;break e}f=void 0}(this.i=f)&&(f=this.i,C=C!==null&&f in C?C[f]:void 0),this.data=C}else this.data=f}v(Fi,Ht);function va(){wt.call(this),this.status=1}v(va,wt);function ya(f){this.g=f}v(ya,Tn),ya.prototype.ua=function(){he(this.g,"a")},ya.prototype.ta=function(f){he(this.g,new Fi(f))},ya.prototype.sa=function(f){he(this.g,new va)},ya.prototype.ra=function(){he(this.g,"b")},Hn.prototype.createWebChannel=Hn.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,XN=function(){return new Hn},JN=function(){return Qr()},WN=Kt,C2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mt.NO_ERROR=0,mt.TIMEOUT=8,mt.HTTP_ERROR=6,Vg=mt,kt.COMPLETE="complete",qN=kt,It.EventType=qt,qt.OPEN="a",qt.CLOSE="b",qt.ERROR="c",qt.MESSAGE="d",oe.prototype.listen=oe.prototype.K,cf=It,tn.prototype.listenOnce=tn.prototype.L,tn.prototype.getLastError=tn.prototype.Ka,tn.prototype.getLastErrorCode=tn.prototype.Ba,tn.prototype.getStatus=tn.prototype.Z,tn.prototype.getResponseJson=tn.prototype.Oa,tn.prototype.getResponseText=tn.prototype.oa,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Ha,$N=tn}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});const hC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ns.UNAUTHENTICATED=new Ns(null),Ns.GOOGLE_CREDENTIALS=new Ns("google-credentials-uid"),Ns.FIRST_PARTY=new Ns("first-party-uid"),Ns.MOCK_USER=new Ns("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new kb("@firebase/firestore");function Ou(){return Kl.logLevel}function y8(t){Kl.setLogLevel(t)}function ut(t,...e){if(Kl.logLevel<=Br.DEBUG){const r=e.map(Fb);Kl.debug(`Firestore (${ih}): ${t}`,...r)}}function As(t,...e){if(Kl.logLevel<=Br.ERROR){const r=e.map(Fb);Kl.error(`Firestore (${ih}): ${t}`,...r)}}function ua(t,...e){if(Kl.logLevel<=Br.WARN){const r=e.map(Fb);Kl.warn(`Firestore (${ih}): ${t}`,...r)}}function Fb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t="Unexpected state"){const e=`FIRESTORE (${ih}) INTERNAL ASSERTION FAILED: `+t;throw As(e),new Error(e)}function Ot(t,e){t||Lt()}function b8(t,e){t||Lt()}function Bt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends CA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ns.UNAUTHENTICATED))}shutdown(){}}class B8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class _8{constructor(e){this.t=e,this.currentUser=Ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ot(this.o===void 0);let n=this.i;const s=A=>this.i!==n?(n=this.i,r(A)):Promise.resolve();let i=new Us;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Us,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const A=i;e.enqueueRetryable(async()=>{await A.promise,await s(this.currentUser)})},o=A=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(A=>o(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?o(A):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Us)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ot(typeof n.accessToken=="string"),new YN(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ot(e===null||typeof e=="string"),new Ns(e)}}class C8{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Ns.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class I8{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new C8(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Ns.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Ot(this.o===void 0);const n=i=>{i.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,ut("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ot(typeof r.token=="string"),this.R=r.token,new eF(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class k8{getToken(){return Promise.resolve(new eF(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=S8(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function ir(t,e){return t<e?-1:t>e?1:0}function Qd(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function tF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ct(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ct(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ct(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ct(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sn.fromMillis(Date.now())}static fromDate(e){return Sn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Sn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ir(this.nanoseconds,e.nanoseconds):ir(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $t(e)}static min(){return new $t(new Sn(0,0))}static max(){return new $t(new Sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,r,n){r===void 0?r=0:r>e.length&&Lt(),n===void 0?n=e.length-r:n>e.length-r&&Lt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return fp.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof fp?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class _r extends fp{construct(e,r,n){return new _r(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ct(ze.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new _r(r)}static emptyPath(){return new _r([])}}const N8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends fp{construct(e,r,n){return new yn(e,r,n)}static isValidIdentifier(e){return N8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yn(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new ct(ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new ct(ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[s+1];if(A!=="\\"&&A!=="."&&A!=="`")throw new ct(ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=A,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new ct(ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(r)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.path=e}static fromPath(e){return new Ct(_r.fromString(e))}static fromName(e){return new Ct(_r.fromString(e).popFirst(5))}static empty(){return new Ct(_r.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_r.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return _r.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ct(new _r(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function I2(t){return t.fields.find(e=>e.kind===2)}function Sc(t){return t.fields.filter(e=>e.kind!==2)}function F8(t,e){let r=ir(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=T8(t.fields[n],e.fields[n]),r!==0)return r;return ir(t.fields.length,e.fields.length)}Rd.UNKNOWN_ID=-1;class Kc{constructor(e,r){this.fieldPath=e,this.kind=r}}function T8(t,e){const r=yn.comparator(t.fieldPath,e.fieldPath);return r!==0?r:ir(t.kind,e.kind)}class Pd{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Pd(0,da.min())}}function rF(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=$t.fromTimestamp(n===1e9?new Sn(r+1,0):new Sn(r,n));return new da(s,Ct.empty(),e)}function nF(t){return new da(t.readTime,t.key,-1)}class da{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new da($t.min(),Ct.empty(),-1)}static max(){return new da($t.max(),Ct.empty(),-1)}}function Ub(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ct.comparator(t.documentKey,e.documentKey),r!==0?r:ir(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(t){if(t.code!==ze.FAILED_PRECONDITION||t.message!==sF)throw t;ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Qe((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Qe?r:Qe.resolve(r)}catch(r){return Qe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Qe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Qe.reject(r)}static resolve(e){return new Qe((r,n)=>{r(e)})}static reject(e){return new Qe((r,n)=>{n(e)})}static waitFor(e){return new Qe((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},A=>n(A))}),a=!0,i===s&&r()})}static or(e){let r=Qe.resolve(!1);for(const n of e)r=r.next(s=>s?Qe.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Qe((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let A=0;A<i;A++){const c=A;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Qe((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Us,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Tf(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Lb(n.target.error);this.V.reject(new Tf(e,s))}}static open(e,r,n,s){try{return new zw(r,e.transaction(s,n))}catch(i){throw new Tf(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ut("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new L8(r)}}class Fo{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Fo.S(bs())===12.2&&As("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ut("SimpleDb","Removing database:",e),Fc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!MN())return!1;if(Fo.v())return!0;const e=bs(),r=Fo.S(e),n=0<r&&r<10,s=aF(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ut("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new Tf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new ct(ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new ct(ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new Tf(e,a))},s.onupgradeneeded=i=>{ut("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{ut("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=zw.open(this.db,e,i?"readonly":"readwrite",n),A=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),Qe.reject(c))).toPromise();return A.catch(()=>{}),await o.m,A}catch(o){const A=o,c=A.name!=="FirebaseError"&&a<3;if(ut("SimpleDb","Transaction failed with error:",A.message,"Retrying:",c),this.close(),!c)return Promise.reject(A)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aF(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class U8{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Fc(this.B.delete())}}class Tf extends ct{constructor(e,r){super(ze.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ac(t){return t.name==="IndexedDbTransactionError"}class L8{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(ut("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(ut("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Fc(n)}add(e){return ut("SimpleDb","ADD",this.store.name,e,e),Fc(this.store.add(e))}get(e){return Fc(this.store.get(e)).next(r=>(r===void 0&&(r=null),ut("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return ut("SimpleDb","DELETE",this.store.name,e),Fc(this.store.delete(e))}count(){return ut("SimpleDb","COUNT",this.store.name),Fc(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new Qe((a,o)=>{i.onerror=A=>{o(A.target.error)},i.onsuccess=A=>{a(A.target.result)}})}{const i=this.cursor(n),a=[];return this.W(i,(o,A)=>{a.push(A)}).next(()=>a)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Qe((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}j(e,r){ut("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(i,a,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new Qe((n,s)=>{r.onerror=i=>{const a=Lb(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,r){const n=[];return new Qe((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const A=new U8(o),c=r(o.primaryKey,o.value,A);if(c instanceof Qe){const u=c.catch(d=>(A.done(),Qe.reject(d)));n.push(u)}A.isDone?s():A.K===null?o.continue():o.continue(A.K)}}).next(()=>Qe.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Fc(t){return new Qe((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Lb(n.target.error);r(s)}})}let fC=!1;function Lb(t){const e=Fo.S(bs());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new ct("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fC||(fC=!0,setTimeout(()=>{throw n},0)),n}}return t}class j8{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ut("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ut("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){ac(r)?ut("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await ic(r)}await this.X(6e4)})}}class Q8{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,i=!0;return Qe.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return ut("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(o=>{s-=o,n.add(a)});i=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(o=>(ut("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>a.size)}))}re(e,r){let n=e;return r.changes.forEach((s,i)=>{const a=nF(i);Ub(a,n)>0&&(n=a)}),new da(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Pi.oe=-1;function Mp(t){return t==null}function pp(t){return t===0&&1/t==-1/0}function oF(t){return typeof t=="number"&&Number.isInteger(t)&&!pp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=pC(e)),e=R8(t.get(r),e);return pC(e)}function R8(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function pC(t){return t+""}function Io(t){const e=t.length;if(Ot(e>=2),e===2)return Ot(t.charAt(0)===""&&t.charAt(1)===""),_r.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&Lt(),t.charAt(a+1)){case"":const o=t.substring(i,a);let A;s.length===0?A=o:(s+=o,A=s,s=""),n.push(A);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:Lt()}i=a+2}return new _r(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e){return[t,hi(e)]}function AF(t,e,r){return[t,hi(e),r]}const P8={},D8=["prefixPath","collectionGroup","readTime","documentId"],M8=["prefixPath","collectionGroup","documentId"],O8=["collectionGroup","readTime","prefixPath","documentId"],H8=["canonicalId","targetId"],V8=["targetId","path"],K8=["path","targetId"],z8=["collectionId","parent"],G8=["indexId","uid"],$8=["uid","sequenceNumber"],q8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],W8=["indexId","uid","orderedDocumentKey"],J8=["userId","collectionPath","documentId"],X8=["userId","collectionPath","largestBatchId"],Y8=["userId","collectionGroup","largestBatchId"],lF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Z8=[...lF,"documentOverlays"],cF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uF=cF,jb=[...uF,"indexConfiguration","indexState","indexEntries"],eM=jb,tM=[...jb,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2 extends iF{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Bs(t,e){const r=Bt(t);return Fo.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function oc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function dF(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function hF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,r){this.comparator=e,this.root=r||Vs.EMPTY}insert(e,r){return new gn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Vs.BLACK,null,null))}remove(e){return new gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vs.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new K0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new K0(this.root,e,this.comparator,!1)}getReverseIterator(){return new K0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new K0(this.root,e,this.comparator,!0)}}class K0{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vs{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??Vs.RED,this.left=s??Vs.EMPTY,this.right=i??Vs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new Vs(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Vs.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Lt();const e=this.left.check();if(e!==this.right.check())throw Lt();return e+(this.isRed()?0:1)}}Vs.EMPTY=null,Vs.RED=!0,Vs.BLACK=!1;Vs.EMPTY=new class{constructor(){this.size=0}get key(){throw Lt()}get value(){throw Lt()}get color(){throw Lt()}get left(){throw Lt()}get right(){throw Lt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new Vs(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new gn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new wC(this.data.getIterator())}getIteratorFrom(e){return new wC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new nn(this.comparator);return r.data=e,r}}class wC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ku(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Di([])}unionWith(e){let r=new nn(yn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Di(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Qd(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new fF("Invalid base64 string: "+i):i}}(e);return new Dn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Dn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ir(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const nM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wA(t){if(Ot(!!t),typeof t=="string"){let e=0;const r=nM.exec(t);if(Ot(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:In(t.seconds),nanos:In(t.nanos)}}function In(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xA(t){return typeof t=="string"?Dn.fromBase64String(t):Dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function $w(t){const e=t.mapValue.fields.__previous_value__;return Gw(e)?$w(e):e}function gp(t){const e=wA(t.mapValue.fields.__local_write_time__.timestampValue);return new Sn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,r,n,s,i,a,o,A,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=A,this.useFetchStreams=c}}class zl{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zg={nullValue:"NULL_VALUE"};function Gl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gw(t)?4:pF(t)?9007199254740991:qw(t)?10:11:Lt()}function jo(t,e){if(t===e)return!0;const r=Gl(t);if(r!==Gl(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gp(t).isEqual(gp(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=wA(s.timestampValue),o=wA(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return xA(s.bytesValue).isEqual(xA(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return In(s.geoPointValue.latitude)===In(i.geoPointValue.latitude)&&In(s.geoPointValue.longitude)===In(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return In(s.integerValue)===In(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=In(s.doubleValue),o=In(i.doubleValue);return a===o?pp(a)===pp(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Qd(t.arrayValue.values||[],e.arrayValue.values||[],jo);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(mC(a)!==mC(o))return!1;for(const A in a)if(a.hasOwnProperty(A)&&(o[A]===void 0||!jo(a[A],o[A])))return!1;return!0}(t,e);default:return Lt()}}function mp(t,e){return(t.values||[]).find(r=>jo(r,e))!==void 0}function $l(t,e){if(t===e)return 0;const r=Gl(t),n=Gl(e);if(r!==n)return ir(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ir(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=In(i.integerValue||i.doubleValue),A=In(a.integerValue||a.doubleValue);return o<A?-1:o>A?1:o===A?0:isNaN(o)?isNaN(A)?0:-1:1}(t,e);case 3:return xC(t.timestampValue,e.timestampValue);case 4:return xC(gp(t),gp(e));case 5:return ir(t.stringValue,e.stringValue);case 6:return function(i,a){const o=xA(i),A=xA(a);return o.compareTo(A)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),A=a.split("/");for(let c=0;c<o.length&&c<A.length;c++){const u=ir(o[c],A[c]);if(u!==0)return u}return ir(o.length,A.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=ir(In(i.latitude),In(a.latitude));return o!==0?o:ir(In(i.longitude),In(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vC(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,A,c,u;const d=i.fields||{},p=a.fields||{},g=(o=d.value)===null||o===void 0?void 0:o.arrayValue,v=(A=p.value)===null||A===void 0?void 0:A.arrayValue,y=ir(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:vC(g,v)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===vl.mapValue&&a===vl.mapValue)return 0;if(i===vl.mapValue)return 1;if(a===vl.mapValue)return-1;const o=i.fields||{},A=Object.keys(o),c=a.fields||{},u=Object.keys(c);A.sort(),u.sort();for(let d=0;d<A.length&&d<u.length;++d){const p=ir(A[d],u[d]);if(p!==0)return p;const g=$l(o[A[d]],c[u[d]]);if(g!==0)return g}return ir(A.length,u.length)}(t.mapValue,e.mapValue);default:throw Lt()}}function xC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ir(t,e);const r=wA(t),n=wA(e),s=ir(r.seconds,n.seconds);return s!==0?s:ir(r.nanos,n.nanos)}function vC(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=$l(r[s],n[s]);if(i)return i}return ir(r.length,n.length)}function Dd(t){return k2(t)}function k2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=wA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return xA(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ct.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=k2(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${k2(r.fields[a])}`;return s+"}"}(t.mapValue):Lt()}function Gg(t){switch(Gl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$w(t);return e?16+Gg(e):16;case 5:return 2*t.stringValue.length;case 6:return xA(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+Gg(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return oc(n.fields,(i,a)=>{s+=i.length+Gg(a)}),s}(t.mapValue);default:throw Lt()}}function eu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function S2(t){return!!t&&"integerValue"in t}function wp(t){return!!t&&"arrayValue"in t}function yC(t){return!!t&&"nullValue"in t}function bC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $g(t){return!!t&&"mapValue"in t}function qw(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Uf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return oc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Uf(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Uf(t.arrayValue.values[r]);return e}return Object.assign({},t)}function pF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const gF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function iM(t){return"nullValue"in t?zg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?eu(zl.empty(),Ct.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?qw(t)?gF:{mapValue:{}}:Lt()}function aM(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?eu(zl.empty(),Ct.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?gF:"mapValue"in t?qw(t)?{mapValue:{}}:vl:Lt()}function BC(t,e){const r=$l(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function _C(t,e){const r=$l(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.value=e}static empty(){return new zs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!$g(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uf(r)}setAll(e){let r=yn.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const A=this.getFieldsMap(r);this.applyChanges(A,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=Uf(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());$g(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return jo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];$g(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){oc(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new zs(Uf(this.value))}}function mF(t){const e=[];return oc(t.fields,(r,n)=>{const s=new yn([r]);if($g(n)){const i=mF(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new vn(e,0,$t.min(),$t.min(),$t.min(),zs.empty(),0)}static newFoundDocument(e,r,n,s){return new vn(e,1,r,$t.min(),n,s,0)}static newNoDocument(e,r){return new vn(e,2,r,$t.min(),$t.min(),zs.empty(),0)}static newUnknownDocument(e,r){return new vn(e,3,r,$t.min(),$t.min(),zs.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual($t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,r){this.position=e,this.inclusive=r}}function CC(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=Ct.comparator(Ct.fromName(a.referenceValue),r.key):n=$l(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function IC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!jo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,r="asc"){this.field=e,this.dir=r}}function oM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{}class Cr extends wF{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new AM(e,r,n):r==="array-contains"?new uM(e,n):r==="in"?new _F(e,n):r==="not-in"?new dM(e,n):r==="array-contains-any"?new hM(e,n):new Cr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new lM(e,n):new cM(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison($l(r,this.value)):r!==null&&Gl(this.value)===Gl(r)&&this.matchesComparison($l(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yr extends wF{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Yr(e,r)}matches(e){return Md(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Md(t){return t.op==="and"}function N2(t){return t.op==="or"}function Qb(t){return xF(t)&&Md(t)}function xF(t){for(const e of t.filters)if(e instanceof Yr)return!1;return!0}function F2(t){if(t instanceof Cr)return t.field.canonicalString()+t.op.toString()+Dd(t.value);if(Qb(t))return t.filters.map(e=>F2(e)).join(",");{const e=t.filters.map(r=>F2(r)).join(",");return`${t.op}(${e})`}}function vF(t,e){return t instanceof Cr?function(n,s){return s instanceof Cr&&n.op===s.op&&n.field.isEqual(s.field)&&jo(n.value,s.value)}(t,e):t instanceof Yr?function(n,s){return s instanceof Yr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&vF(a,s.filters[o]),!0):!1}(t,e):void Lt()}function yF(t,e){const r=t.filters.concat(e);return Yr.create(r,t.op)}function bF(t){return t instanceof Cr?function(r){return`${r.field.canonicalString()} ${r.op} ${Dd(r.value)}`}(t):t instanceof Yr?function(r){return r.op.toString()+" {"+r.getFilters().map(bF).join(" ,")+"}"}(t):"Filter"}class AM extends Cr{constructor(e,r,n){super(e,r,n),this.key=Ct.fromName(n.referenceValue)}matches(e){const r=Ct.comparator(e.key,this.key);return this.matchesComparison(r)}}class lM extends Cr{constructor(e,r){super(e,"in",r),this.keys=BF("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class cM extends Cr{constructor(e,r){super(e,"not-in",r),this.keys=BF("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function BF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ct.fromName(n.referenceValue))}class uM extends Cr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return wp(r)&&mp(r.arrayValue,this.value)}}class _F extends Cr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&mp(this.value.arrayValue,r)}}class dM extends Cr{constructor(e,r){super(e,"not-in",r)}matches(e){if(mp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!mp(this.value.arrayValue,r)}}class hM extends Cr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!wp(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>mp(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function T2(t,e=null,r=[],n=[],s=null,i=null,a=null){return new fM(t,e,r,n,s,i,a)}function tu(t){const e=Bt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>F2(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Mp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Dd(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Dd(n)).join(",")),e.ue=r}return e.ue}function Op(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!oM(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!vF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IC(t.startAt,e.startAt)&&IC(t.endAt,e.endAt)}function Vm(t){return Ct.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Km(t,e){return t.filters.filter(r=>r instanceof Cr&&r.field.isEqual(e))}function EC(t,e,r){let n=zg,s=!0;for(const i of Km(t,e)){let a=zg,o=!0;switch(i.op){case"<":case"<=":a=iM(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=zg}BC({value:n,inclusive:s},{value:a,inclusive:o})<0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];BC({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function kC(t,e,r){let n=vl,s=!0;for(const i of Km(t,e)){let a=vl,o=!0;switch(i.op){case">=":case">":a=aM(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=vl}_C({value:n,inclusive:s},{value:a,inclusive:o})>0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];_C({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,A=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=A,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function CF(t,e,r,n,s,i,a,o){return new IA(t,e,r,n,s,i,a,o)}function ah(t){return new IA(t)}function SC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Rb(t){return t.collectionGroup!==null}function md(t){const e=Bt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new nn(yn.comparator);return a.filters.forEach(A=>{A.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new xp(i,n))}),r.has(yn.keyField().canonicalString())||e.ce.push(new xp(yn.keyField(),n))}return e.ce}function fi(t){const e=Bt(t);return e.le||(e.le=EF(e,md(t))),e.le}function IF(t){const e=Bt(t);return e.he||(e.he=EF(e,t.explicitOrderBy)),e.he}function EF(t,e){if(t.limitType==="F")return T2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new xp(s.field,i)});const r=t.endAt?new ql(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new ql(t.startAt.position,t.startAt.inclusive):null;return T2(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function U2(t,e){const r=t.filters.concat([e]);return new IA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function zm(t,e,r){return new IA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Hp(t,e){return Op(fi(t),fi(e))&&t.limitType===e.limitType}function kF(t){return`${tu(fi(t))}|lt:${t.limitType}`}function Hu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>bF(s)).join(", ")}]`),Mp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Dd(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Dd(s)).join(",")),`Target(${n})`}(fi(t))}; limitType=${t.limitType})`}function Vp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ct.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of md(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,A){const c=CC(a,o,A);return a.inclusive?c<=0:c<0}(n.startAt,md(n),s)||n.endAt&&!function(a,o,A){const c=CC(a,o,A);return a.inclusive?c>=0:c>0}(n.endAt,md(n),s))}(t,e)}function SF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NF(t){return(e,r)=>{let n=!1;for(const s of md(t)){const i=pM(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function pM(t,e,r){const n=t.field.isKeyField()?Ct.comparator(e.key,r.key):function(i,a,o){const A=a.data.field(i),c=o.data.field(i);return A!==null&&c!==null?$l(A,c):Lt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Lt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){oc(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return hF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new gn(Ct.comparator);function Mi(){return gM}const FF=new gn(Ct.comparator);function uf(...t){let e=FF;for(const r of t)e=e.insert(r.key,r);return e}function TF(t){let e=FF;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Eo(){return Lf()}function UF(){return Lf()}function Lf(){return new EA(t=>t.toString(),(t,e)=>t.isEqual(e))}const mM=new gn(Ct.comparator),wM=new nn(Ct.comparator);function fr(...t){let e=wM;for(const r of t)e=e.add(r);return e}const xM=new nn(ir);function Pb(){return xM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pp(e)?"-0":e}}function LF(t){return{integerValue:""+t}}function jF(t,e){return oF(e)?LF(e):Db(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this._=void 0}}function vM(t,e,r){return t instanceof Od?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Gw(i)&&(i=$w(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof ru?RF(t,e):t instanceof nu?PF(t,e):function(s,i){const a=QF(s,i),o=NC(a)+NC(s.Pe);return S2(a)&&S2(s.Pe)?LF(o):Db(s.serializer,o)}(t,e)}function yM(t,e,r){return t instanceof ru?RF(t,e):t instanceof nu?PF(t,e):r}function QF(t,e){return t instanceof Hd?function(n){return S2(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Od extends Ww{}class ru extends Ww{constructor(e){super(),this.elements=e}}function RF(t,e){const r=DF(e);for(const n of t.elements)r.some(s=>jo(s,n))||r.push(n);return{arrayValue:{values:r}}}class nu extends Ww{constructor(e){super(),this.elements=e}}function PF(t,e){let r=DF(e);for(const n of t.elements)r=r.filter(s=>!jo(s,n));return{arrayValue:{values:r}}}class Hd extends Ww{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function NC(t){return In(t.integerValue||t.doubleValue)}function DF(t){return wp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,r){this.field=e,this.transform=r}}function bM(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof ru&&s instanceof ru||n instanceof nu&&s instanceof nu?Qd(n.elements,s.elements,jo):n instanceof Hd&&s instanceof Hd?jo(n.Pe,s.Pe):n instanceof Od&&s instanceof Od}(t.transform,e.transform)}class BM{constructor(e,r){this.version=e,this.transformResults=r}}class kn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jw{}function MF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ah(t.key,kn.none()):new oh(t.key,t.data,kn.none());{const r=t.data,n=zs.empty();let s=new nn(yn.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new kA(t.key,n,new Di(s.toArray()),kn.none())}}function _M(t,e,r){t instanceof oh?function(s,i,a){const o=s.value.clone(),A=TC(s.fieldTransforms,i,a.transformResults);o.setAll(A),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof kA?function(s,i,a){if(!qg(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=TC(s.fieldTransforms,i,a.transformResults),A=i.data;A.setAll(OF(s)),A.setAll(o),i.convertToFoundDocument(a.version,A).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function jf(t,e,r,n){return t instanceof oh?function(i,a,o,A){if(!qg(i.precondition,a))return o;const c=i.value.clone(),u=UC(i.fieldTransforms,A,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof kA?function(i,a,o,A){if(!qg(i.precondition,a))return o;const c=UC(i.fieldTransforms,A,a),u=a.data;return u.setAll(OF(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(i,a,o){return qg(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function CM(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=QF(n.transform,s||null);i!=null&&(r===null&&(r=zs.empty()),r.set(n.field,i))}return r||null}function FC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Qd(n,s,(i,a)=>bM(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oh extends Jw{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class kA extends Jw{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function OF(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function TC(t,e,r){const n=new Map;Ot(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,yM(a,o,r[s]))}return n}function UC(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,vM(i,a,e))}return n}class Ah extends Jw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mb extends Jw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&_M(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=jf(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=jf(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=UF();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const A=MF(a,o);A!==null&&n.set(s.key,A),a.isValidDocument()||a.convertToNoDocument($t.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),fr())}isEqual(e){return this.batchId===e.batchId&&Qd(this.mutations,e.mutations,(r,n)=>FC(r,n))&&Qd(this.baseMutations,e.baseMutations,(r,n)=>FC(r,n))}}class Hb{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Ot(e.mutations.length===n.length);let s=function(){return mM}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new Hb(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ds,Fr;function VF(t){switch(t){default:return Lt();case ze.CANCELLED:case ze.UNKNOWN:case ze.DEADLINE_EXCEEDED:case ze.RESOURCE_EXHAUSTED:case ze.INTERNAL:case ze.UNAVAILABLE:case ze.UNAUTHENTICATED:return!1;case ze.INVALID_ARGUMENT:case ze.NOT_FOUND:case ze.ALREADY_EXISTS:case ze.PERMISSION_DENIED:case ze.FAILED_PRECONDITION:case ze.ABORTED:case ze.OUT_OF_RANGE:case ze.UNIMPLEMENTED:case ze.DATA_LOSS:return!0}}function KF(t){if(t===void 0)return As("GRPC error has no .code"),ze.UNKNOWN;switch(t){case ds.OK:return ze.OK;case ds.CANCELLED:return ze.CANCELLED;case ds.UNKNOWN:return ze.UNKNOWN;case ds.DEADLINE_EXCEEDED:return ze.DEADLINE_EXCEEDED;case ds.RESOURCE_EXHAUSTED:return ze.RESOURCE_EXHAUSTED;case ds.INTERNAL:return ze.INTERNAL;case ds.UNAVAILABLE:return ze.UNAVAILABLE;case ds.UNAUTHENTICATED:return ze.UNAUTHENTICATED;case ds.INVALID_ARGUMENT:return ze.INVALID_ARGUMENT;case ds.NOT_FOUND:return ze.NOT_FOUND;case ds.ALREADY_EXISTS:return ze.ALREADY_EXISTS;case ds.PERMISSION_DENIED:return ze.PERMISSION_DENIED;case ds.FAILED_PRECONDITION:return ze.FAILED_PRECONDITION;case ds.ABORTED:return ze.ABORTED;case ds.OUT_OF_RANGE:return ze.OUT_OF_RANGE;case ds.UNIMPLEMENTED:return ze.UNIMPLEMENTED;case ds.DATA_LOSS:return ze.DATA_LOSS;default:return Lt()}}(Fr=ds||(ds={}))[Fr.OK=0]="OK",Fr[Fr.CANCELLED=1]="CANCELLED",Fr[Fr.UNKNOWN=2]="UNKNOWN",Fr[Fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fr[Fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fr[Fr.NOT_FOUND=5]="NOT_FOUND",Fr[Fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fr[Fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fr[Fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fr[Fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fr[Fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fr[Fr.ABORTED=10]="ABORTED",Fr[Fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fr[Fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fr[Fr.INTERNAL=13]="INTERNAL",Fr[Fr.UNAVAILABLE=14]="UNAVAILABLE",Fr[Fr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gm=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=new Vc([4294967295,4294967295],0);function LC(t){const e=zF().encode(t),r=new GN;return r.update(e),new Uint8Array(r.digest())}function jC(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Vc([r,n],0),new Vc([s,i],0)]}class Kb{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new df(`Invalid padding: ${r}`);if(n<0)throw new df(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new df(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new df(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Vc.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Vc.fromNumber(n)));return s.compare(EM)===1&&(s=new Vc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=LC(e),[n,s]=jC(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Kb(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=LC(e),[n,s]=jC(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class df extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Gp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new zp($t.min(),s,new gn(ir),Mi(),fr())}}class Gp{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Gp(n,r,fr(),fr(),fr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class GF{constructor(e,r){this.targetId=e,this.me=r}}class $F{constructor(e,r,n=Dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class QC{constructor(){this.fe=0,this.ge=PC(),this.pe=Dn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fr(),r=fr(),n=fr();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Lt()}}),new Gp(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=PC()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ot(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mi(),this.qe=RC(),this.Qe=new gn(ir)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Lt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Vm(i))if(n===0){const a=new Ct(i.path);this.Ue(r,a,vn.newNoDocument(a,$t.min()))}else Ot(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),A=o?this.Xe(o,e,a):1;if(A!==0){this.je(r);const c=A===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}Gm==null||Gm.et(function(u,d,p,g,v){var y,k,x,I,N,U;const D={localCacheCount:u,existenceFilterCount:d.count,databaseId:p.database,projectId:p.projectId},P=d.unchangedNames;return P&&(D.bloomFilter={applied:v===0,hashCount:(y=P==null?void 0:P.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(I=(x=(k=P==null?void 0:P.bits)===null||k===void 0?void 0:k.bitmap)===null||x===void 0?void 0:x.length)!==null&&I!==void 0?I:0,padding:(U=(N=P==null?void 0:P.bits)===null||N===void 0?void 0:N.padding)!==null&&U!==void 0?U:0,mightContain:E=>{var _;return(_=g==null?void 0:g.mightContain(E))!==null&&_!==void 0&&_}}),D}(a,e.me,this.Le.tt(),o,A))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=xA(n).toUint8Array()}catch(A){if(A instanceof fF)return ua("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw A}try{o=new Kb(a,s,i)}catch(A){return ua(A instanceof df?"BloomFilter error: ":"Applying bloom filter failed: ",A),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Vm(o.target)){const A=new Ct(o.target.path);this.ke.get(A)!==null||this.it(a,A)||this.Ue(a,A,vn.newNoDocument(A,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=fr();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(A=>{const c=this.Je(A);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new zp(e,r,this.Qe,this.ke,n);return this.ke=Mi(),this.qe=RC(),this.Qe=new gn(ir),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new QC,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new nn(ir),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ut("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new QC),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function RC(){return new gn(Ct.comparator)}function PC(){return new gn(Ct.comparator)}const SM={asc:"ASCENDING",desc:"DESCENDING"},NM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FM={and:"AND",or:"OR"};class TM{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function L2(t,e){return t.useProto3Json||Mp(e)?e:{value:e}}function Vd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UM(t,e){return Vd(t,e.toTimestamp())}function ls(t){return Ot(!!t),$t.fromTimestamp(function(r){const n=wA(r);return new Sn(n.seconds,n.nanos)}(t))}function zb(t,e){return j2(t,e).canonicalString()}function j2(t,e){const r=function(s){return new _r(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function WF(t){const e=_r.fromString(t);return Ot(iT(e)),e}function vp(t,e){return zb(t.databaseId,e.path)}function To(t,e){const r=WF(e);if(r.get(1)!==t.databaseId.projectId)throw new ct(ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ct(ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ct(YF(r))}function JF(t,e){return zb(t.databaseId,e)}function XF(t){const e=WF(t);return e.length===4?_r.emptyPath():YF(e)}function Q2(t){return new _r(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YF(t){return Ot(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function DC(t,e,r){return{name:vp(t,e),fields:r.value.mapValue.fields}}function ZF(t,e,r){const n=To(t,e.name),s=ls(e.updateTime),i=e.createTime?ls(e.createTime):$t.min(),a=new zs({mapValue:{fields:e.fields}}),o=vn.newFoundDocument(n,s,i,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function LM(t,e){return"found"in e?function(n,s){Ot(!!s.found),s.found.name,s.found.updateTime;const i=To(n,s.found.name),a=ls(s.found.updateTime),o=s.found.createTime?ls(s.found.createTime):$t.min(),A=new zs({mapValue:{fields:s.found.fields}});return vn.newFoundDocument(i,a,o,A)}(t,e):"missing"in e?function(n,s){Ot(!!s.missing),Ot(!!s.readTime);const i=To(n,s.missing),a=ls(s.readTime);return vn.newNoDocument(i,a)}(t,e):Lt()}function jM(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Lt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Ot(u===void 0||typeof u=="string"),Dn.fromBase64String(u||"")):(Ot(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Dn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?ze.UNKNOWN:KF(c.code);return new ct(u,c.message||"")}(a);r=new $F(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=To(t,n.document.name),i=ls(n.document.updateTime),a=n.document.createTime?ls(n.document.createTime):$t.min(),o=new zs({mapValue:{fields:n.document.fields}}),A=vn.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new Wg(c,u,A.key,A)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=To(t,n.document),i=n.readTime?ls(n.readTime):$t.min(),a=vn.newNoDocument(s,i),o=n.removedTargetIds||[];r=new Wg([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=To(t,n.document),i=n.removedTargetIds||[];r=new Wg([],i,s,null)}else{if(!("filter"in e))return Lt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new IM(s,i),o=n.targetId;r=new GF(o,a)}}return r}function yp(t,e){let r;if(e instanceof oh)r={update:DC(t,e.key,e.value)};else if(e instanceof Ah)r={delete:vp(t,e.key)};else if(e instanceof kA)r={update:DC(t,e.key,e.data),updateMask:OM(e.fieldMask)};else{if(!(e instanceof Mb))return Lt();r={verify:vp(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof Od)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ru)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof nu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Hd)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Lt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:UM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Lt()}(t,e.precondition)),r}function R2(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?kn.updateTime(ls(i.updateTime)):i.exists!==void 0?kn.exists(i.exists):kn.none()}(e.currentDocument):kn.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(a,o){let A=null;if("setToServerValue"in o)Ot(o.setToServerValue==="REQUEST_TIME"),A=new Od;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];A=new ru(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];A=new nu(u)}else"increment"in o?A=new Hd(a,o.increment):Lt();const c=yn.fromServerFormat(o.fieldPath);return new Kp(c,A)}(t,s)):[];if(e.update){e.update.name;const s=To(t,e.update.name),i=new zs({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(A){const c=A.fieldPaths||[];return new Di(c.map(u=>yn.fromServerFormat(u)))}(e.updateMask);return new kA(s,i,a,r,n)}return new oh(s,i,r,n)}if(e.delete){const s=To(t,e.delete);return new Ah(s,r)}if(e.verify){const s=To(t,e.verify);return new Mb(s,r)}return Lt()}function QM(t,e){return t&&t.length>0?(Ot(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?ls(s.updateTime):ls(i);return a.isEqual($t.min())&&(a=ls(i)),new BM(a,s.transformResults||[])}(r,e))):[]}function eT(t,e){return{documents:[JF(t,e.path)]}}function Xw(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=JF(t,s);const i=function(c){if(c.length!==0)return sT(Yr.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:cl(p.field),direction:PM(p.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=L2(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function tT(t,e,r,n){const{_t:s,parent:i}=Xw(t,e),a={},o=[];let A=0;return r.forEach(c=>{const u=n?c.alias:"aggregate_"+A++;a[u]=c.alias,c.aggregateType==="count"?o.push({alias:u,count:{}}):c.aggregateType==="avg"?o.push({alias:u,avg:{field:cl(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:u,sum:{field:cl(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:s.structuredQuery},parent:s.parent},ut:a,parent:i}}function rT(t){let e=XF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Ot(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(d){const p=nT(d);return p instanceof Yr&&Qb(p)?p.getFilters():[p]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(p=>function(v){return new xp(Vu(v.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(r.orderBy));let o=null;r.limit&&(o=function(d){let p;return p=typeof d=="object"?d.value:d,Mp(p)?null:p}(r.limit));let A=null;r.startAt&&(A=function(d){const p=!!d.before,g=d.values||[];return new ql(g,p)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new ql(g,p)}(r.endAt)),CF(e,s,a,i,o,"F",A,c)}function RM(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function nT(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Vu(r.unaryFilter.field);return Cr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Vu(r.unaryFilter.field);return Cr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vu(r.unaryFilter.field);return Cr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vu(r.unaryFilter.field);return Cr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Lt()}}(t):t.fieldFilter!==void 0?function(r){return Cr.create(Vu(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Lt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Yr.create(r.compositeFilter.filters.map(n=>nT(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Lt()}}(r.compositeFilter.op))}(t):Lt()}function PM(t){return SM[t]}function DM(t){return NM[t]}function MM(t){return FM[t]}function cl(t){return{fieldPath:t.canonicalString()}}function Vu(t){return yn.fromServerFormat(t.fieldPath)}function sT(t){return t instanceof Cr?function(r){if(r.op==="=="){if(bC(r.value))return{unaryFilter:{field:cl(r.field),op:"IS_NAN"}};if(yC(r.value))return{unaryFilter:{field:cl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(bC(r.value))return{unaryFilter:{field:cl(r.field),op:"IS_NOT_NAN"}};if(yC(r.value))return{unaryFilter:{field:cl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(r.field),op:DM(r.op),value:r.value}}}(t):t instanceof Yr?function(r){const n=r.getFilters().map(s=>sT(s));return n.length===1?n[0]:{compositeFilter:{op:MM(r.op),filters:n}}}(t):Lt()}function OM(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function iT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,r,n,s,i=$t.min(),a=$t.min(),o=Dn.EMPTY_BYTE_STRING,A=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=A}withSequenceNumber(e){return new aA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new aA(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new aA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new aA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.ct=e}}function HM(t,e){let r;if(e.document)r=ZF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Ct.fromSegments(e.noDocument.path),s=iu(e.noDocument.readTime);r=vn.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Lt();{const n=Ct.fromSegments(e.unknownDocument.path),s=iu(e.unknownDocument.version);r=vn.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new Sn(s[0],s[1]);return $t.fromTimestamp(i)}(e.readTime)),r}function MC(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:$m(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,a){return{name:vp(i,a.key),fields:a.data.value.mapValue.fields,updateTime:Vd(i,a.version.toTimestamp()),createTime:Vd(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:su(e.version)};else{if(!e.isUnknownDocument())return Lt();n.unknownDocument={path:r.path.toArray(),version:su(e.version)}}return n}function $m(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function su(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function iu(t){const e=new Sn(t.seconds,t.nanoseconds);return $t.fromTimestamp(e)}function Tc(t,e){const r=(e.baseMutations||[]).map(i=>R2(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>R2(t.ct,i)),s=Sn.fromMillis(e.localWriteTimeMs);return new Ob(e.batchId,s,r,n)}function hf(t){const e=iu(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?iu(t.lastLimboFreeSnapshotVersion):$t.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return Ot(i.documents.length===1),fi(ah(XF(i.documents[0])))}(t.query):function(i){return fi(rT(i))}(t.query),new aA(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Dn.fromBase64String(t.resumeToken))}function oT(t,e){const r=su(e.snapshotVersion),n=su(e.lastLimboFreeSnapshotVersion);let s;s=Vm(e.target)?eT(t.ct,e.target):Xw(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:tu(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function Gb(t){const e=rT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zm(e,e.limit,"L"):e}function Ix(t,e){return new Vb(e.largestBatchId,R2(t.ct,e.overlayMutation))}function OC(t,e){const r=e.path.lastSegment();return[t,hi(e.path.popLast()),r]}function HC(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:su(n.readTime),documentKey:hi(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{getBundleMetadata(e,r){return VC(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:iu(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return VC(e).put(function(s){return{bundleId:s.id,createTime:su(ls(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return KC(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:Gb(i.bundledQuery),readTime:iu(i.readTime)}}(n)})}saveNamedQuery(e,r){return KC(e).put(function(s){return{name:s.name,readTime:su(ls(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function VC(t){return Bs(t,"bundles")}function KC(t){return Bs(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Yw(e,n)}getOverlay(e,r){return Kh(e).get(OC(this.userId,r)).next(n=>n?Ix(this.serializer,n):null)}getOverlays(e,r){const n=Eo();return Qe.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,a)=>{const o=new Vb(r,a);s.push(this.ht(e,o))}),Qe.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(a=>s.add(hi(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(Kh(e).j("collectionPathOverlayIndex",o))}),Qe.waitFor(i)}getOverlaysForCollection(e,r,n){const s=Eo(),i=hi(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Kh(e).U("collectionPathOverlayIndex",a).next(o=>{for(const A of o){const c=Ix(this.serializer,A);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=Eo();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Kh(e).J({index:"collectionGroupOverlayIndex",range:o},(A,c,u)=>{const d=Ix(this.serializer,c);i.size()<s||d.largestBatchId===a?(i.set(d.getKey(),d),a=d.largestBatchId):u.done()}).next(()=>i)}ht(e,r){return Kh(e).put(function(s,i,a){const[o,A,c]=OC(i,a.mutation.key);return{userId:i,collectionPath:A,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:yp(s.ct,a.mutation)}}(this.serializer,this.userId,r))}}function Kh(t){return Bs(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{Pt(e){return Bs(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Dn.fromUint8Array(n):Dn.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(In(e.integerValue));else if("doubleValue"in e){const n=In(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),pp(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=wA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(xA(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?pF(e)?this.dt(r,Number.MAX_SAFE_INTEGER):qw(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Lt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",o=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(In(o)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),Ct.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Uc.vt=new Uc;function zM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function zC(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const a=zM(255&n[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class GM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=zC(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=zC(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class $M{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class qM{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class zh{constructor(){this.jt=new GM,this.Ht=new $M(this.jt),this.Jt=new qM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Lc(this.indexId,this.documentKey,this.arrayValue,n)}}function XA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=GC(t.arrayValue,e.arrayValue),r!==0?r:(r=GC(t.directionalValue,e.directionalValue),r!==0?r:Ct.comparator(t.documentKey,e.documentKey)))}function GC(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.Xt=new nn((r,n)=>yn.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Ot(e.collectionGroup===this.collectionId),this.nn)return!1;const r=I2(e);if(r!==void 0&&!this.sn(r))return!1;const n=Sc(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const A=n[i];if(!this.on(o,A)||!this._n(this.en[a++],A))return!1}++i}for(;i<n.length;++i){const o=n[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new nn(yn.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Kc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Kc(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Kc(n.field,n.dir==="asc"?0:1)));return new Rd(Rd.UNKNOWN_ID,this.collectionId,r,Pd.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t){var e,r;if(Ot(t instanceof Cr||t instanceof Yr),t instanceof Cr){if(t instanceof _F){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>Cr.create(t.field,"==",i)))||[];return Yr.create(s,"or")}return t}const n=t.filters.map(s=>AT(s));return Yr.create(n,t.op)}function WM(t){if(t.getFilters().length===0)return[];const e=M2(AT(t));return Ot(lT(e)),P2(e)||D2(e)?[e]:e.getFilters()}function P2(t){return t instanceof Cr}function D2(t){return t instanceof Yr&&Qb(t)}function lT(t){return P2(t)||D2(t)||function(r){if(r instanceof Yr&&N2(r)){for(const n of r.getFilters())if(!P2(n)&&!D2(n))return!1;return!0}return!1}(t)}function M2(t){if(Ot(t instanceof Cr||t instanceof Yr),t instanceof Cr)return t;if(t.filters.length===1)return M2(t.filters[0]);const e=t.filters.map(n=>M2(n));let r=Yr.create(e,t.op);return r=qm(r),lT(r)?r:(Ot(r instanceof Yr),Ot(Md(r)),Ot(r.filters.length>1),r.filters.reduce((n,s)=>$b(n,s)))}function $b(t,e){let r;return Ot(t instanceof Cr||t instanceof Yr),Ot(e instanceof Cr||e instanceof Yr),r=t instanceof Cr?e instanceof Cr?function(s,i){return Yr.create([s,i],"and")}(t,e):qC(t,e):e instanceof Cr?qC(e,t):function(s,i){if(Ot(s.filters.length>0&&i.filters.length>0),Md(s)&&Md(i))return yF(s,i.getFilters());const a=N2(s)?s:i,o=N2(s)?i:s,A=a.filters.map(c=>$b(c,o));return Yr.create(A,"or")}(t,e),qm(r)}function qC(t,e){if(Md(e))return yF(e,t.getFilters());{const r=e.filters.map(n=>$b(t,n));return Yr.create(r,"or")}}function qm(t){if(Ot(t instanceof Cr||t instanceof Yr),t instanceof Cr)return t;const e=t.getFilters();if(e.length===1)return qm(e[0]);if(xF(t))return t;const r=e.map(s=>qm(s)),n=[];return r.forEach(s=>{s instanceof Cr?n.push(s):s instanceof Yr&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Yr.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.un=new qb}addToCollectionParentIndex(e,r){return this.un.add(r),Qe.resolve()}getCollectionParents(e,r){return Qe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Qe.resolve()}deleteFieldIndex(e,r){return Qe.resolve()}deleteAllFieldIndexes(e){return Qe.resolve()}createTargetIndexes(e,r){return Qe.resolve()}getDocumentsMatchingTarget(e,r){return Qe.resolve(null)}getIndexType(e,r){return Qe.resolve(0)}getFieldIndexes(e,r){return Qe.resolve([])}getNextCollectionGroupToUpdate(e){return Qe.resolve(null)}getMinOffset(e,r){return Qe.resolve(da.min())}getMinOffsetFromCollectionGroup(e,r){return Qe.resolve(da.min())}updateCollectionGroup(e,r,n){return Qe.resolve()}updateIndexEntries(e,r){return Qe.resolve()}}class qb{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new nn(_r.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new nn(_r.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new Uint8Array(0);class XM{constructor(e,r){this.databaseId=r,this.cn=new qb,this.ln=new EA(n=>tu(n),(n,s)=>Op(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const i={collectionId:n,parent:hi(s)};return WC(e).put(i)}return Qe.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[tF(r),""],!1,!0);return WC(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==r)break;n.push(Io(a.parent))}return n})}addFieldIndex(e,r){const n=Gh(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(A=>[A.fieldPath.canonicalString(),A.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=Nu(e);return i.next(o=>{a.put(HC(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=Gh(e),s=Nu(e),i=Su(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Gh(e),n=Su(e),s=Nu(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return Qe.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new $C(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=Su(e);let s=!0;const i=new Map;return Qe.forEach(this.hn(r),a=>this.Pn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=fr();const o=[];return Qe.forEach(i,(A,c)=>{ut("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(A)} to execute ${tu(r)}`);const u=function(N,U){const D=I2(U);if(D===void 0)return null;for(const P of Km(N,D.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null}(c,A),d=function(N,U){const D=new Map;for(const P of Sc(U))for(const E of Km(N,P.fieldPath))switch(E.op){case"==":case"in":D.set(P.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return D.set(P.fieldPath.canonicalString(),E.value),Array.from(D.values())}return null}(c,A),p=function(N,U){const D=[];let P=!0;for(const E of Sc(U)){const _=E.kind===0?EC(N,E.fieldPath,N.startAt):kC(N,E.fieldPath,N.startAt);D.push(_.value),P&&(P=_.inclusive)}return new ql(D,P)}(c,A),g=function(N,U){const D=[];let P=!0;for(const E of Sc(U)){const _=E.kind===0?kC(N,E.fieldPath,N.endAt):EC(N,E.fieldPath,N.endAt);D.push(_.value),P&&(P=_.inclusive)}return new ql(D,P)}(c,A),v=this.In(A,c,p),y=this.In(A,c,g),k=this.Tn(A,c,d),x=this.En(A.indexId,u,v,p.inclusive,y,g.inclusive,k);return Qe.forEach(x,I=>n.G(I,r.limit).next(N=>{N.forEach(U=>{const D=Ct.fromSegments(U.documentKey);a.has(D)||(a=a.add(D),o.push(D))})}))}).next(()=>o)}return Qe.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=WM(Yr.create(e.filters,"and")).map(n=>T2(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,i,a,o){const A=(r!=null?r.length:1)*Math.max(n.length,i.length),c=A/(r!=null?r.length:1),u=[];for(let d=0;d<A;++d){const p=r?this.dn(r[d/c]):z0,g=this.An(e,p,n[d%c],s),v=this.Rn(e,p,i[d%c],a),y=o.map(k=>this.An(e,p,k,!0));u.push(...this.createRange(g,v,y))}return u}An(e,r,n,s){const i=new Lc(e,Ct.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new Lc(e,Ct.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new $C(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,r){let n=2;const s=this.hn(r);return Qe.forEach(s,i=>this.Pn(e,i).next(a=>{a?n!==0&&a.fields.length<function(A){let c=new nn(yn.comparator),u=!1;for(const d of A.filters)for(const p of d.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?u=!0:c=c.add(p.field));for(const d of A.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(i)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new zh;for(const s of Sc(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);Uc.vt.It(i,a)}return n.zt()}dn(e){const r=new zh;return Uc.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new zh;return Uc.vt.It(eu(this.databaseId,r),n.Yt(function(i){const a=Sc(i);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new zh);let i=0;for(const a of Sc(e)){const o=n[i++];for(const A of s)if(this.fn(r,a.fieldPath)&&wp(o))s=this.gn(s,a,o);else{const c=A.Yt(a.kind);Uc.vt.It(o,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const o of s){const A=new zh;A.seed(o.zt()),Uc.vt.It(a,A.Yt(r.kind)),i.push(A)}return i}fn(e,r){return!!e.filters.find(n=>n instanceof Cr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Gh(e),s=Nu(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(i=>{const a=[];return Qe.forEach(i,o=>s.get([o.indexId,this.uid]).next(A=>{a.push(function(u,d){const p=d?new Pd(d.sequenceNumber,new da(iu(d.readTime),new Ct(Io(d.documentKey)),d.largestBatchId)):Pd.empty(),g=u.fields.map(([v,y])=>new Kc(yn.fromServerFormat(v),y));return new Rd(u.indexId,u.collectionGroup,g,p)}(o,A))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ir(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=Gh(e),i=Nu(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>Qe.forEach(o,A=>i.put(HC(A.indexId,this.uid,a,n)))))}updateIndexEntries(e,r){const n=new Map;return Qe.forEach(r,(s,i)=>{const a=n.get(s.collectionGroup);return(a?Qe.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(n.set(s.collectionGroup,o),Qe.forEach(o,A=>this.wn(e,s,A).next(c=>{const u=this.Sn(i,A);return c.isEqual(u)?Qe.resolve():this.bn(e,i,A,c,u)}))))})}Dn(e,r,n,s){return Su(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return Su(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=Su(e);let i=new nn(XA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(a,o)=>{i=i.add(new Lc(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>i)}Sn(e,r){let n=new nn(XA);const s=this.Vn(r,e);if(s==null)return n;const i=I2(r);if(i!=null){const a=e.data.field(i.fieldPath);if(wp(a))for(const o of a.arrayValue.values||[])n=n.add(new Lc(r.indexId,e.key,this.dn(o),s))}else n=n.add(new Lc(r.indexId,e.key,z0,s));return n}bn(e,r,n,s,i){ut("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(A,c,u,d,p){const g=A.getIterator(),v=c.getIterator();let y=ku(g),k=ku(v);for(;y||k;){let x=!1,I=!1;if(y&&k){const N=u(y,k);N<0?I=!0:N>0&&(x=!0)}else y!=null?I=!0:x=!0;x?(d(k),k=ku(v)):I?(p(y),y=ku(g)):(y=ku(g),k=ku(v))}}(s,i,XA,o=>{a.push(this.Dn(e,r,n,o))},o=>{a.push(this.vn(e,r,n,o))}),Qe.waitFor(a)}yn(e){let r=1;return Nu(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,o)=>XA(a,o)).filter((a,o,A)=>!o||XA(a,A[o-1])!==0);const s=[];s.push(e);for(const a of n){const o=XA(a,e),A=XA(a,r);if(o===0)s[0]=e.Zt();else if(o>0&&A<0)s.push(a),s.push(a.Zt());else if(A>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,z0,[]],A=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,z0,[]];i.push(IDBKeyRange.bound(o,A))}return i}Cn(e,r){return XA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(JC)}getMinOffset(e,r){return Qe.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||Lt())).next(JC)}}function WC(t){return Bs(t,"collectionParents")}function Su(t){return Bs(t,"indexEntries")}function Gh(t){return Bs(t,"indexConfiguration")}function Nu(t){return Bs(t,"indexState")}function JC(t){Ot(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Ub(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new da(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ci{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ci(e,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let o=0;const A=n.J({range:a},(u,d,p)=>(o++,p.delete()));i.push(A.next(()=>{Ot(o===1)}));const c=[];for(const u of r.mutations){const d=AF(e,u.key.path,r.batchId);i.push(s.delete(d)),c.push(u.key)}return Qe.waitFor(i).next(()=>c)}function Wm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Lt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci.DEFAULT_COLLECTION_PERCENTILE=10,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ci.DEFAULT=new ci(41943040,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ci.DISABLED=new ci(-1,0,0);class Zw{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){Ot(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Zw(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return YA(e).J({index:"userMutationsIndex",range:n},(s,i,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=Ku(e),a=YA(e);return a.add({}).next(o=>{Ot(typeof o=="number");const A=new Ob(o,r,n,s),c=function(g,v,y){const k=y.baseMutations.map(I=>yp(g.ct,I)),x=y.mutations.map(I=>yp(g.ct,I));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:k,mutations:x}}(this.serializer,this.userId,A),u=[];let d=new nn((p,g)=>ir(p.canonicalString(),g.canonicalString()));for(const p of s){const g=AF(this.userId,p.key.path,o);d=d.add(p.key.path.popLast()),u.push(a.put(c)),u.push(i.put(g,P8))}return d.forEach(p=>{u.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[o]=A.keys()}),Qe.waitFor(u).next(()=>A)})}lookupMutationBatch(e,r){return YA(e).get(r).next(n=>n?(Ot(n.userId===this.userId),Tc(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Qe.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return YA(e).J({index:"userMutationsIndex",range:s},(a,o,A)=>{o.userId===this.userId&&(Ot(o.batchId>=n),i=Tc(this.serializer,o)),A.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return YA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,i,a)=>{n=i.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return YA(e).U("userMutationsIndex",r).next(n=>n.map(s=>Tc(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Kg(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return Ku(e).J({range:s},(a,o,A)=>{const[c,u,d]=a,p=Io(u);if(c===this.userId&&r.path.isEqual(p))return YA(e).get(d).next(g=>{if(!g)throw Lt();Ot(g.userId===this.userId),i.push(Tc(this.serializer,g))});A.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new nn(ir);const s=[];return r.forEach(i=>{const a=Kg(this.userId,i.path),o=IDBKeyRange.lowerBound(a),A=Ku(e).J({range:o},(c,u,d)=>{const[p,g,v]=c,y=Io(g);p===this.userId&&i.path.isEqual(y)?n=n.add(v):d.done()});s.push(A)}),Qe.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=Kg(this.userId,n),a=IDBKeyRange.lowerBound(i);let o=new nn(ir);return Ku(e).J({range:a},(A,c,u)=>{const[d,p,g]=A,v=Io(p);d===this.userId&&n.isPrefixOf(v)?v.length===s&&(o=o.add(g)):u.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(YA(e).get(i).next(a=>{if(a===null)throw Lt();Ot(a.userId===this.userId),n.push(Tc(this.serializer,a))}))}),Qe.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return cT(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Qe.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Qe.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return Ku(e).J({range:n},(i,a,o)=>{if(i[0]===this.userId){const A=Io(i[1]);s.push(A)}else o.done()}).next(()=>{Ot(s.length===0)})})}containsKey(e,r){return uT(e,this.userId,r)}Nn(e){return dT(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function uT(t,e,r){const n=Kg(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Ku(t).J({range:i,H:!0},(o,A,c)=>{const[u,d,p]=o;u===e&&d===s&&(a=!0),c.done()}).next(()=>a)}function YA(t){return Bs(t,"mutations")}function Ku(t){return Bs(t,"documentMutations")}function dT(t){return Bs(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new au(0)}static kn(){return new au(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new au(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>$t.fromTimestamp(new Sn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Fu(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Ot(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return Fu(e).J((a,o)=>{const A=hf(o);A.sequenceNumber<=r&&n.get(A.targetId)===null&&(s++,i.push(this.removeTargetData(e,A)))}).next(()=>Qe.waitFor(i)).next(()=>s)}forEachTarget(e,r){return Fu(e).J((n,s)=>{const i=hf(s);r(i)})}qn(e){return YC(e).get("targetGlobalKey").next(r=>(Ot(r!==null),r))}Qn(e,r){return YC(e).put("targetGlobalKey",r)}Kn(e,r){return Fu(e).put(oT(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=tu(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Fu(e).J({range:s,index:"queryTargetsIndex"},(a,o,A)=>{const c=hf(o);Op(r,c.target)&&(i=c,A.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=ul(e);return r.forEach(a=>{const o=hi(a.path);s.push(i.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,a))}),Qe.waitFor(s)}removeMatchingKeys(e,r,n){const s=ul(e);return Qe.forEach(r,i=>{const a=hi(i.path);return Qe.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=ul(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=ul(e);let i=fr();return s.J({range:n,H:!0},(a,o,A)=>{const c=Io(a[1]),u=new Ct(c);i=i.add(u)}).next(()=>i)}containsKey(e,r){const n=hi(r.path),s=IDBKeyRange.bound([n],[tF(n)],!1,!0);let i=0;return ul(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,o],A,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,r){return Fu(e).get(r).next(n=>n?hf(n):null)}}function Fu(t){return Bs(t,"targets")}function YC(t){return Bs(t,"targetGlobal")}function ul(t){return Bs(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC([t,e],[r,n]){const s=ir(t,r);return s===0?ir(e,n):s}class ZM{constructor(e){this.Un=e,this.buffer=new nn(ZC),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();ZC(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class hT{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ut("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ac(r)?ut("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await ic(r)}await this.Hn(3e5)})}}class eO{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Qe.resolve(Pi.oe);const n=new ZM(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ut("LruGarbageCollector","Garbage collection skipped; disabled"),Qe.resolve(XC)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XC):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,o,A,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,a=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(n=d,o=Date.now(),this.removeTargets(e,n,r))).next(d=>(i=d,A=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(c=Date.now(),Ou()<=Br.DEBUG&&ut("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(A-o)+`ms
	Removed ${d} documents in `+(c-A)+`ms
Total Duration: ${c-u}ms`),Qe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d})))}}function fT(t,e){return new eO(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,r){this.db=e,this.garbageCollector=fT(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return G0(e,n)}removeReference(e,r,n){return G0(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return G0(e,r)}nr(e,r){return function(s,i){let a=!1;return dT(s).Y(o=>uT(s,o,i).next(A=>(A&&(a=!0),Qe.resolve(!A)))).next(()=>a)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,o)=>{if(o<=r){const A=this.nr(e,a).next(c=>{if(!c)return i++,n.getEntry(e,a).next(()=>(n.removeEntry(a,$t.min()),ul(e).delete(function(d){return[0,hi(d.path)]}(a))))});s.push(A)}}).next(()=>Qe.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return G0(e,r)}tr(e,r){const n=ul(e);let s,i=Pi.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:A,sequenceNumber:c})=>{a===0?(i!==Pi.oe&&r(new Ct(Io(s)),i),i=c,s=A):i=Pi.oe}).next(()=>{i!==Pi.oe&&r(new Ct(Io(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function G0(t,e){return ul(t).put(function(n,s){return{targetId:0,path:hi(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.changes=new EA(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Qe.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Bc(e).put(n)}removeEntry(e,r,n){return Bc(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],$m(a),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=vn.newInvalidDocument(r);return Bc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($h(r))},(s,i)=>{n=this.ir(r,i)}).next(()=>n)}sr(e,r){let n={size:0,document:vn.newInvalidDocument(r)};return Bc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($h(r))},(s,i)=>{n={document:this.ir(r,i),size:Wm(i)}}).next(()=>n)}getEntries(e,r){let n=Mi();return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)}).next(()=>n)}ar(e,r){let n=Mi(),s=new gn(Ct.comparator);return this._r(e,r,(i,a)=>{const o=this.ir(i,a);n=n.insert(i,o),s=s.insert(i,Wm(a))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return Qe.resolve();let s=new nn(rI);r.forEach(A=>s=s.add(A));const i=IDBKeyRange.bound($h(s.first()),$h(s.last())),a=s.getIterator();let o=a.getNext();return Bc(e).J({index:"documentKeyIndex",range:i},(A,c,u)=>{const d=Ct.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&rI(o,d)<0;)n(o,null),o=a.getNext();o&&o.isEqual(d)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?u.$($h(o)):u.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),$m(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],A=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bc(e).U(IDBKeyRange.bound(o,A,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let u=Mi();for(const d of c){const p=this.ir(Ct.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);p.isFoundDocument()&&(Vp(r,p)||s.has(p.key))&&(u=u.insert(p.key,p))}return u})}getAllFromCollectionGroup(e,r,n,s){let i=Mi();const a=tI(r,n),o=tI(r,da.max());return Bc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(A,c,u)=>{const d=this.ir(Ct.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(d.key,d),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new nO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return eI(e).get("remoteDocumentGlobalKey").next(r=>(Ot(!!r),r))}rr(e,r){return eI(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=HM(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual($t.min())))return n}return vn.newInvalidDocument(e)}}function gT(t){return new rO(t)}class nO extends pT{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new EA(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new nn((i,a)=>ir(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const A=MC(this.cr.serializer,a);s=s.add(i.path.popLast());const c=Wm(A);n+=c-o.size,r.push(this.cr.addEntry(e,i,A))}else if(n-=o.size,this.trackRemovals){const A=MC(this.cr.serializer,a.convertToNoDocument($t.min()));r.push(this.cr.addEntry(e,i,A))}}),s.forEach(i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.cr.updateMetadata(e,n)),Qe.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})}),n))}}function eI(t){return Bs(t,"remoteDocumentGlobal")}function Bc(t){return Bs(t,"remoteDocumentsV14")}function $h(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tI(t,e){const r=e.documentKey.path.toArray();return[t,$m(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function rI(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=ir(r[i],n[i]),s)return s;return s=ir(r.length,n.length),s||(s=ir(r[r.length-2],n[n.length-2]),s||ir(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&jf(n.mutation,s,Di.empty(),Sn.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,fr()).next(()=>n))}getLocalViewOfDocuments(e,r,n=fr()){const s=Eo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=uf();return i.forEach((o,A)=>{a=a.insert(o,A.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Eo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,fr()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=Mi();const a=Lf(),o=function(){return Lf()}();return r.forEach((A,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof kA)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),jf(u.mutation,c,u.mutation.getFieldMask(),Sn.now())):a.set(c.key,Di.empty())}),this.recalculateAndSaveOverlays(e,i).next(A=>(A.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var d;return o.set(c,new sO(u,(d=a.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Lf();let s=new gn((a,o)=>a-o),i=fr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(A=>{const c=r.get(A);if(c===null)return;let u=n.get(A)||Di.empty();u=o.applyToLocalView(c,u),n.set(A,u);const d=(s.get(o.batchId)||fr()).add(A);s=s.insert(o.batchId,d)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const A=o.getNext(),c=A.key,u=A.value,d=UF();u.forEach(p=>{if(!i.has(p)){const g=MF(r.get(p),n.get(p));g!==null&&d.set(p,g),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Qe.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return Ct.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Rb(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Qe.resolve(Eo());let o=-1,A=i;return a.next(c=>Qe.forEach(c,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),i.get(u)?Qe.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{A=A.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,A,c,fr())).next(u=>({batchId:o,changes:TF(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ct(r)).next(n=>{let s=uf();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=uf();return this.indexManager.getCollectionParents(e,i).next(o=>Qe.forEach(o,A=>{const c=function(d,p){return new IA(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,A.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((d,p)=>{a=a.insert(d,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((A,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,vn.newInvalidDocument(u)))});let o=uf();return a.forEach((A,c)=>{const u=i.get(A);u!==void 0&&jf(u.mutation,c,Di.empty(),Sn.now()),Vp(r,c)&&(o=o.insert(A,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Qe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ls(s.createTime)}}(r)),Qe.resolve()}getNamedQuery(e,r){return Qe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:Gb(s.bundledQuery),readTime:ls(s.readTime)}}(r)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.overlays=new gn(Ct.comparator),this.Ir=new Map}getOverlay(e,r){return Qe.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Eo();return Qe.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Qe.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Qe.resolve()}getOverlaysForCollection(e,r,n){const s=Eo(),i=r.length+1,a=new Ct(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const A=o.getNext().value,c=A.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&A.largestBatchId>n&&s.set(A.getKey(),A)}return Qe.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new gn((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=Eo(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Eo(),A=i.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return Qe.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Vb(r,n));let i=this.Ir.get(r);i===void 0&&(i=fr(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(e){return Qe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Qe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.Tr=new nn(ks.Er),this.dr=new nn(ks.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new ks(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new ks(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Ct(new _r([])),n=new ks(r,e),s=new ks(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Ct(new _r([])),n=new ks(r,e),s=new ks(r,e+1);let i=fr();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new ks(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ks{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Ct.comparator(e.key,r.key)||ir(e.wr,r.wr)}static Ar(e,r){return ir(e.wr,r.wr)||Ct.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new nn(ks.Er)}checkEmpty(e){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Ob(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new ks(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Qe.resolve(a)}lookupMutationBatch(e,r){return Qe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Qe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ks(r,0),s=new ks(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Qe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new nn(ir);return r.forEach(s=>{const i=new ks(s,0),a=new ks(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Qe.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Ct.isDocumentKey(i)||(i=i.child(""));const a=new ks(new Ct(i),0);let o=new nn(ir);return this.br.forEachWhile(A=>{const c=A.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(A.wr)),!0)},a),Qe.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Ot(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Qe.forEach(r.mutations,s=>{const i=new ks(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new ks(r,0),s=this.br.firstAfterOrEqual(n);return Qe.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Qe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.Mr=e,this.docs=function(){return new gn(Ct.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Qe.resolve(n?n.document.mutableCopy():vn.newInvalidDocument(r))}getEntries(e,r){let n=Mi();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():vn.newInvalidDocument(s))}),Qe.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Mi();const a=r.path,o=new Ct(a.child("")),A=this.docs.getIteratorFrom(o);for(;A.hasNext();){const{key:c,value:{document:u}}=A.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Ub(nF(u),n)<=0||(s.has(u.key)||Vp(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Qe.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Lt()}Or(e,r){return Qe.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new cO(this)}getSize(e){return Qe.resolve(this.size)}}class cO extends pT{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Qe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.persistence=e,this.Nr=new EA(r=>tu(r),Op),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wb,this.targetCount=0,this.kr=au.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Qe.resolve()}getLastRemoteSnapshotVersion(e){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Qe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new au(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Qe.resolve()}updateTargetData(e,r){return this.Kn(r),Qe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Qe.waitFor(i).next(()=>s)}getTargetCount(e){return Qe.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Qe.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Qe.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Qe.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Qe.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Qe.resolve(n)}containsKey(e,r){return Qe.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Pi(0),this.Kr=!1,this.Kr=!0,this.$r=new oO,this.referenceDelegate=e(this),this.Ur=new uO(this),this.indexManager=new JM,this.remoteDocumentCache=function(s){return new lO(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new aT(r),this.Gr=new iO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new aO,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new AO(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ut("MemoryPersistence","Starting transaction:",e);const s=new dO(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Qe.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class dO extends iF{constructor(e){super(),this.currentSequenceNumber=e}}class e1{constructor(e){this.persistence=e,this.Jr=new Wb,this.Yr=null}static Zr(e){return new e1(e)}get Xr(){if(this.Yr)return this.Yr;throw Lt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Qe.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Qe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Qe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Xr,n=>{const s=Ct.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,$t.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Qe.or([()=>Qe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Jm{constructor(e,r){this.persistence=e,this.ti=new EA(n=>hi(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=fT(this,r)}static Zr(e,r){return new Jm(e,r)}zr(){}jr(e){return Qe.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return Qe.forEach(this.ti,(n,s)=>this.nr(e,n,s).next(i=>i?Qe.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Or(e,a=>this.nr(e,a,r).next(o=>{o||(n++,i.removeEntry(a,$t.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),Qe.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),Qe.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),Qe.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),Qe.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Gg(e.data.value)),r}nr(e,r,n){return Qe.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.ti.get(r);return Qe.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.serializer=e}O(e,r,n,s){const i=new zw("createOrUpgrade",r);n<1&&s>=1&&(function(A){A.createObjectStore("owner")}(e),function(A){A.createObjectStore("mutationQueues",{keyPath:"userId"}),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gC,{unique:!0}),A.createObjectStore("documentMutations")}(e),nI(e),function(A){A.createObjectStore("remoteDocuments")}(e));let a=Qe.resolve();return n<3&&s>=3&&(n!==0&&(function(A){A.deleteObjectStore("targetDocuments"),A.deleteObjectStore("targets"),A.deleteObjectStore("targetGlobal")}(e),nI(e)),a=a.next(()=>function(A){const c=A.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$t.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(i))),n<4&&s>=4&&(n!==0&&(a=a.next(()=>function(A,c){return c.store("mutations").U().next(u=>{A.deleteObjectStore("mutations"),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gC,{unique:!0});const d=c.store("mutations"),p=u.map(g=>d.put(g));return Qe.waitFor(p)})}(e,i))),a=a.next(()=>{(function(A){A.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(a=a.next(()=>this.ni(i))),n<6&&s>=6&&(a=a.next(()=>(function(A){A.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),n<7&&s>=7&&(a=a.next(()=>this.ii(i))),n<8&&s>=8&&(a=a.next(()=>this.si(e,i))),n<9&&s>=9&&(a=a.next(()=>{(function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(a=a.next(()=>this.oi(i))),n<11&&s>=11&&(a=a.next(()=>{(function(A){A.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(A){A.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(a=a.next(()=>{(function(A){const c=A.createObjectStore("documentOverlays",{keyPath:J8});c.createIndex("collectionPathOverlayIndex",X8,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Y8,{unique:!1})})(e)})),n<13&&s>=13&&(a=a.next(()=>function(A){const c=A.createObjectStore("remoteDocumentsV14",{keyPath:D8});c.createIndex("documentKeyIndex",M8),c.createIndex("collectionGroupIndex",O8)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),n<15&&s>=15&&(a=a.next(()=>function(A){A.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),A.createObjectStore("indexState",{keyPath:G8}).createIndex("sequenceNumberIndex",$8,{unique:!1}),A.createObjectStore("indexEntries",{keyPath:q8}).createIndex("documentKeyIndex",W8,{unique:!1})}(e))),n<16&&s>=16&&(a=a.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(a=a.next(()=>{(function(A){A.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=Wm(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>Qe.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>Qe.forEach(o,A=>{Ot(A.userId===i.userId);const c=Tc(this.serializer,A);return cT(e,i.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return n.J((a,o)=>{const A=new _r(a),c=function(d){return[0,hi(d)]}(A);i.push(r.get(c).next(u=>u?Qe.resolve():(d=>r.put({targetId:0,path:hi(d),sequenceNumber:s.highestListenSequenceNumber}))(A)))}).next(()=>Qe.waitFor(i))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:z8});const n=r.store("collectionParents"),s=new qb,i=a=>{if(s.add(a)){const o=a.lastSegment(),A=a.popLast();return n.put({collectionId:o,parent:hi(A)})}};return r.store("remoteDocuments").J({H:!0},(a,o)=>{const A=new _r(a);return i(A.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([a,o,A],c)=>{const u=Io(o);return i(u.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const i=hf(s),a=oT(this.serializer,i);return r.put(a)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((i,a)=>{const o=r.store("remoteDocumentsV14"),A=function(d){return d.document?new Ct(_r.fromString(d.document.name).popFirst(5)):d.noDocument?Ct.fromSegments(d.noDocument.path):d.unknownDocument?Ct.fromSegments(d.unknownDocument.path):Lt()}(a).path.toArray(),c={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))}).next(()=>Qe.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=gT(this.serializer),i=new Jb(e1.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(A=>{var c;let u=(c=o.get(A.userId))!==null&&c!==void 0?c:fr();Tc(this.serializer,A).keys().forEach(d=>u=u.add(d)),o.set(A.userId,u)}),Qe.forEach(o,(A,c)=>{const u=new Ns(c),d=Yw.lt(this.serializer,u),p=i.getIndexManager(u),g=Zw.lt(u,this.serializer,p,i.referenceDelegate);return new mT(s,g,d,p).recalculateAndSaveOverlaysForDocumentKeys(new E2(r,Pi.oe),A).next()})})}}function nI(t){t.createObjectStore("targetDocuments",{keyPath:V8}).createIndex("documentTargetsIndex",K8,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",H8,{unique:!0}),t.createObjectStore("targetGlobal")}const Ex="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Xb{constructor(e,r,n,s,i,a,o,A,c,u,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=o,this.ci=c,this.li=u,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!Xb.D())throw new ct(ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tO(this,s),this.Ai=r+"main",this.serializer=new aT(A),this.Ri=new Fo(this.Ai,this.hi,new hO(this.serializer)),this.$r=new KM,this.Ur=new YM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gT(this.serializer),this.Gr=new VM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&As("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ct(ze.FAILED_PRECONDITION,Ex);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Pi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(ac(e))return ut("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ut("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return qh(e).get("owner").next(r=>Qe.resolve(this.vi(r)))}Ci(e){return $0(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Bs(r,"clientMetadata");return n.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(o=>i.indexOf(o)===-1);return Qe.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Qe.resolve(!0):qh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new ct(ze.FAILED_PRECONDITION,Ex);return!1}}return!(!this.networkEnabled||!this.inForeground)||$0(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&ut("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new E2(e,Pi.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>$0(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Zw.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new XM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yw.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){ut("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(A){return A===17?tM:A===16?eM:A===15?jb:A===14?uF:A===13?cF:A===12?Z8:A===11?lF:void Lt()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,o=>(a=new E2(o,this.Qr?this.Qr.next():Pi.oe),r==="readwrite-primary"?this.wi(a).next(A=>!!A||this.Si(a)).next(A=>{if(!A)throw As(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ct(ze.FAILED_PRECONDITION,sF);return n(a)}).next(A=>this.Di(a).next(()=>A)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return qh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ct(ze.FAILED_PRECONDITION,Ex)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qh(e).put("owner",r)}static D(){return Fo.D()}bi(e){const r=qh(e);return r.get("owner").next(n=>this.vi(n)?(ut("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Qe.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(As(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;DN()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return ut("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return As("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){As("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qh(t){return Bs(t,"owner")}function $0(t){return Bs(t,"clientMetadata")}function Yb(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=fr(),s=fr();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Zb(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return DN()?8:aF(bs())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new fO;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Ou()<=Br.DEBUG&&ut("QueryEngine","SDK will not create cache indexes for query:",Hu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Qe.resolve()):(Ou()<=Br.DEBUG&&ut("QueryEngine","Query:",Hu(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Ou()<=Br.DEBUG&&ut("QueryEngine","The SDK decides to create cache indexes for query:",Hu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fi(r))):Qe.resolve())}Yi(e,r){if(SC(r))return Qe.resolve(null);let n=fi(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=zm(r,null,"F"),n=fi(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=fr(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(A=>{const c=this.ts(r,o);return this.ns(r,c,a,A.readTime)?this.Yi(e,zm(r,null,"F")):this.rs(e,c,r,A)}))})))}Zi(e,r,n,s){return SC(r)||s.isEqual($t.min())?Qe.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Qe.resolve(null):(Ou()<=Br.DEBUG&&ut("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Hu(r)),this.rs(e,a,r,rF(s,-1)).next(o=>o))})}ts(e,r){let n=new nn(NF(e));return r.forEach((s,i)=>{Vp(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Ou()<=Br.DEBUG&&ut("QueryEngine","Using full collection scan to execute query:",Hu(r)),this.Ji.getDocumentsMatchingQuery(e,r,da.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new gn(ir),this._s=new EA(i=>tu(i),Op),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function xT(t,e,r,n){return new pO(t,e,r,n)}async function vT(t,e){const r=Bt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let A=fr();for(const c of s){a.push(c.batchId);for(const u of c.mutations)A=A.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)A=A.add(u.key)}return r.localDocuments.getDocuments(n,A).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function gO(t,e){const r=Bt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,A,c,u){const d=c.batch,p=d.keys();let g=Qe.resolve();return p.forEach(v=>{g=g.next(()=>u.getEntry(A,v)).next(y=>{const k=c.docVersions.get(v);Ot(k!==null),y.version.compareTo(k)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(A,d))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let A=fr();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(A=A.add(o.batch.mutations[c].key));return A}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function yT(t){const e=Bt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function mO(t,e){const r=Bt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,d)=>{const p=s.get(d);if(!p)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,d).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,d)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Dn.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,n)),s=s.insert(d,g),function(y,k,x){return y.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,g,u)&&o.push(r.Ur.updateTargetData(i,g))});let A=Mi(),c=fr();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(bT(i,a,e.documentUpdates).next(u=>{A=u.Ps,c=u.Is})),!n.isEqual($t.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(d=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Qe.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,A,c)).next(()=>A)}).then(i=>(r.os=s,i))}function bT(t,e,r){let n=fr(),s=fr();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Mi();return r.forEach((o,A)=>{const c=i.get(o);A.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),A.isNoDocument()&&A.version.isEqual($t.min())?(e.removeEntry(o,A.readTime),a=a.insert(o,A)):!c.isValidDocument()||A.version.compareTo(c.version)>0||A.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(A),a=a.insert(o,A)):ut("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",A.version)}),{Ps:a,Is:s}})}function wO(t,e){const r=Bt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Kd(t,e){const r=Bt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Qe.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new aA(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function zd(t,e,r){const n=Bt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ac(a))throw a;ut("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function Xm(t,e,r){const n=Bt(t);let s=$t.min(),i=fr();return n.persistence.runTransaction("Execute query","readwrite",a=>function(A,c,u){const d=Bt(A),p=d._s.get(u);return p!==void 0?Qe.resolve(d.os.get(p)):d.Ur.getTargetData(c,u)}(n,a,fi(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(A=>{i=A})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:$t.min(),r?i:fr())).next(o=>(CT(n,SF(e),o),{documents:o,Ts:i})))}function BT(t,e){const r=Bt(t),n=Bt(r.Ur),s=r.os.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",i=>n.ot(i,e).next(a=>a?a.target:null))}function _T(t,e){const r=Bt(t),n=r.us.get(e)||$t.min();return r.persistence.runTransaction("Get new document changes","readonly",s=>r.cs.getAllFromCollectionGroup(s,e,rF(n,-1),Number.MAX_SAFE_INTEGER)).then(s=>(CT(r,e,s),s))}function CT(t,e,r){let n=t.us.get(e)||$t.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}async function xO(t,e,r,n){const s=Bt(t);let i=fr(),a=Mi();for(const c of r){const u=e.Es(c.metadata.name);c.document&&(i=i.add(u));const d=e.ds(c);d.setReadTime(e.As(c.metadata.readTime)),a=a.insert(u,d)}const o=s.cs.newChangeBuffer({trackRemovals:!0}),A=await Kd(s,function(u){return fi(ah(_r.fromString(`__bundle__/docs/${u}`)))}(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>bT(c,o,a).next(u=>(o.apply(c),u)).next(u=>s.Ur.removeMatchingKeysForTargetId(c,A.targetId).next(()=>s.Ur.addMatchingKeys(c,i,A.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,u.Ps,u.Is)).next(()=>u.Ps)))}async function vO(t,e,r=fr()){const n=await Kd(t,fi(Gb(e.bundledQuery))),s=Bt(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const a=ls(e.readTime);if(n.snapshotVersion.compareTo(a)>=0)return s.Gr.saveNamedQuery(i,e);const o=n.withResumeToken(Dn.EMPTY_BYTE_STRING,a);return s.os=s.os.insert(o.targetId,o),s.Ur.updateTargetData(i,o).next(()=>s.Ur.removeMatchingKeysForTargetId(i,n.targetId)).next(()=>s.Ur.addMatchingKeys(i,r,n.targetId)).next(()=>s.Gr.saveNamedQuery(i,e))})}function sI(t,e){return`firestore_clients_${t}_${e}`}function iI(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function kx(t,e){return`firestore_targets_${t}_${e}`}class Ym{constructor(e,r,n,s){this.user=e,this.batchId=r,this.state=n,this.error=s}static Rs(e,r,n){const s=JSON.parse(n);let i,a=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return a&&s.error&&(a=typeof s.error.message=="string"&&typeof s.error.code=="string",a&&(i=new ct(s.error.code,s.error.message))),a?new Ym(e,r,s.state,i):(As("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qf{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let s,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(s=new ct(n.error.code,n.error.message))),i?new Qf(e,n.state,s):(As("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zm{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,i=Pb();for(let a=0;s&&a<n.activeTargetIds.length;++a)s=oF(n.activeTargetIds[a]),i=i.add(n.activeTargetIds[a]);return s?new Zm(e,i):(As("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class eB{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new eB(r.clientId,r.onlineState):(As("SharedClientState",`Failed to parse online state: ${e}`),null)}}class O2{constructor(){this.activeTargetIds=Pb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sx{constructor(e,r,n,s,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new gn(ir),this.started=!1,this.bs=[];const a=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=sI(this.persistenceKey,this.ps),this.vs=function(A){return`firestore_sequence_number_${A}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new O2),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=function(A){return`firestore_online_state_${A}`}(this.persistenceKey),this.Os=function(A){return`firestore_bundle_loaded_v2_${A}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const s=this.getItem(sI(this.persistenceKey,n));if(s){const i=Zm.Rs(n,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,s)=>{s.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(kx(this.persistenceKey,e));if(s){const i=Qf.Rs(e,s);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kx(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(s=>{this.Qs(s)}),this.currentUser=e,n.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return ut("SharedClientState","READ",e,r),r}setItem(e,r){ut("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){ut("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(ut("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void As("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(i){let a=Pi.oe;if(i!=null)try{const o=JSON.parse(i);Ot(typeof o=="number"),a=o}catch(o){As("SharedClientState","Failed to read sequence number from WebStorage",o)}return a}(r.newValue);n!==Pi.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const s=new Ym(this.currentUser,e,r,n),i=iI(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const r=iI(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const s=kx(this.persistenceKey,e),i=new Qf(e,r,n);this.setItem(s,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Zm.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),s=Number(n[1]),i=n[2]!==void 0?n[2]:null;return Ym.Rs(new Ns(i),s,r)}Ys(e,r){const n=this.Ms.exec(e),s=Number(n[1]);return Qf.Rs(s,r)}Ls(e){return eB.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ut("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(n),a=[],o=[];return i.forEach(A=>{s.has(A)||a.push(A)}),s.forEach(A=>{i.has(A)||o.push(A)}),this.syncEngine.io(a,o).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=Pb();return e.forEach((n,s)=>{r=r.unionWith(s.activeTargetIds)}),r}}class IT{constructor(){this.so=new O2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new O2,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ut("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ut("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q0=null;function Nx(){return q0===null?q0=function(){return 268435456+Math.round(2147483648*Math.random())}():q0++,"0x"+q0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="WebChannelConnection";class _O extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=Nx(),A=this.xo(r,n.toUriEncodedString());ut("RestConnection",`Sending RPC '${r}' ${o}:`,A,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,A,c,s).then(u=>(ut("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw ua("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",A,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ih}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=bO[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=Nx();return new Promise((a,o)=>{const A=new $N;A.setWithCredentials(!0),A.listenOnce(qN.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case Vg.NO_ERROR:const u=A.getResponseJson();ut(ni,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case Vg.TIMEOUT:ut(ni,`RPC '${e}' ${i} timed out`),o(new ct(ze.DEADLINE_EXCEEDED,"Request time out"));break;case Vg.HTTP_ERROR:const d=A.getStatus();if(ut(ni,`RPC '${e}' ${i} failed with status:`,d,"response text:",A.getResponseText()),d>0){let p=A.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const v=function(k){const x=k.toLowerCase().replace(/_/g,"-");return Object.values(ze).indexOf(x)>=0?x:ze.UNKNOWN}(g.status);o(new ct(v,g.message))}else o(new ct(ze.UNKNOWN,"Server responded with status "+A.getStatus()))}else o(new ct(ze.UNAVAILABLE,"Connection failed."));break;default:Lt()}}finally{ut(ni,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ut(ni,`RPC '${e}' ${i} sending request:`,s),A.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=Nx(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=XN(),o=JN(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(A.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(A.useFetchStreams=!0),this.Oo(A.initMessageHeaders,r,n),A.encodeInitMessageHeaders=!0;const u=i.join("");ut(ni,`Creating RPC '${e}' stream ${s}: ${u}`,A);const d=a.createWebChannel(u,A);let p=!1,g=!1;const v=new BO({Io:k=>{g?ut(ni,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(p||(ut(ni,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),ut(ni,`RPC '${e}' stream ${s} sending:`,k),d.send(k))},To:()=>d.close()}),y=(k,x,I)=>{k.listen(x,N=>{try{I(N)}catch(U){setTimeout(()=>{throw U},0)}})};return y(d,cf.EventType.OPEN,()=>{g||(ut(ni,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),y(d,cf.EventType.CLOSE,()=>{g||(g=!0,ut(ni,`RPC '${e}' stream ${s} transport closed`),v.So())}),y(d,cf.EventType.ERROR,k=>{g||(g=!0,ua(ni,`RPC '${e}' stream ${s} transport errored:`,k),v.So(new ct(ze.UNAVAILABLE,"The operation could not be completed")))}),y(d,cf.EventType.MESSAGE,k=>{var x;if(!g){const I=k.data[0];Ot(!!I);const N=I,U=N.error||((x=N[0])===null||x===void 0?void 0:x.error);if(U){ut(ni,`RPC '${e}' stream ${s} received error:`,U);const D=U.status;let P=function(B){const j=ds[B];if(j!==void 0)return KF(j)}(D),E=U.message;P===void 0&&(P=ze.INTERNAL,E="Unknown error status: "+D+" with message "+U.message),g=!0,v.So(new ct(P,E)),d.close()}else ut(ni,`RPC '${e}' stream ${s} received:`,I),v.bo(I)}}),y(o,WN.STAT_EVENT,k=>{k.stat===C2.PROXY?ut(ni,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===C2.NOPROXY&&ut(ni,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(){return typeof window<"u"?window:null}function Jg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t){return new TM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ut("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,r,n,s,i,a,o,A){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=A,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tB(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===ze.RESOURCE_EXHAUSTED?(As(r.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===ze.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new ct(ze.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ut("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ut("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CO extends kT{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=jM(this.serializer,e),n=function(i){if(!("targetChange"in i))return $t.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?$t.min():a.readTime?ls(a.readTime):$t.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Q2(this.serializer),r.addTarget=function(i,a){let o;const A=a.target;if(o=Vm(A)?{documents:eT(i,A)}:{query:Xw(i,A)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=qF(i,a.resumeToken);const c=L2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo($t.min())>0){o.readTime=Vd(i,a.snapshotVersion.toTimestamp());const c=L2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=RM(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Q2(this.serializer),r.removeTarget=e,this.a_(r)}}class IO extends kT{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Ot(!!e.streamToken),this.lastStreamToken=e.streamToken,Ot(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=QM(e.writeResults,e.commitTime),n=ls(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Q2(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>yp(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ct(ze.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,j2(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ct(ze.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,j2(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ct(ze.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class kO{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(As(r),this.D_=!1):ut("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{Ac(this)&&(ut("RemoteStore","Restarting streams for network reachability change."),await async function(A){const c=Bt(A);c.L_.add(4),await lh(c),c.q_.set("Unknown"),c.L_.delete(4),await qp(c)}(this))})}),this.q_=new kO(n,s)}}async function qp(t){if(Ac(t))for(const e of t.B_)await e(!0)}async function lh(t){for(const e of t.B_)await e(!1)}function t1(t,e){const r=Bt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),sB(r)?nB(r):uh(r).r_()&&rB(r,e))}function Gd(t,e){const r=Bt(t),n=uh(r);r.N_.delete(e),n.r_()&&ST(r,e),r.N_.size===0&&(n.r_()?n.o_():Ac(r)&&r.q_.set("Unknown"))}function rB(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($t.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}uh(t).A_(e)}function ST(t,e){t.Q_.xe(e),uh(t).R_(e)}function nB(t){t.Q_=new kM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),uh(t).start(),t.q_.v_()}function sB(t){return Ac(t)&&!uh(t).n_()&&t.N_.size>0}function Ac(t){return Bt(t).L_.size===0}function NT(t){t.Q_=void 0}async function NO(t){t.q_.set("Online")}async function FO(t){t.N_.forEach((e,r)=>{rB(t,e)})}async function TO(t,e){NT(t),sB(t)?(t.q_.M_(e),nB(t)):t.q_.set("Unknown")}async function UO(t,e,r){if(t.q_.set("Online"),e instanceof $F&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){ut("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ew(t,n)}else if(e instanceof Wg?t.Q_.Ke(e):e instanceof GF?t.Q_.He(e):t.Q_.We(e),!r.isEqual($t.min()))try{const n=await yT(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((A,c)=>{if(A.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(A.resumeToken,a))}}),o.targetMismatches.forEach((A,c)=>{const u=i.N_.get(A);if(!u)return;i.N_.set(A,u.withResumeToken(Dn.EMPTY_BYTE_STRING,u.snapshotVersion)),ST(i,A);const d=new aA(u.target,A,c,u.sequenceNumber);rB(i,d)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){ut("RemoteStore","Failed to raise snapshot:",n),await ew(t,n)}}async function ew(t,e,r){if(!ac(e))throw e;t.L_.add(1),await lh(t),t.q_.set("Offline"),r||(r=()=>yT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ut("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await qp(t)})}function FT(t,e){return e().catch(r=>ew(t,r,e))}async function ch(t){const e=Bt(t),r=Wl(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;LO(e);)try{const s=await wO(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,jO(e,s)}catch(s){await ew(e,s)}TT(e)&&UT(e)}function LO(t){return Ac(t)&&t.O_.length<10}function jO(t,e){t.O_.push(e);const r=Wl(t);r.r_()&&r.V_&&r.m_(e.mutations)}function TT(t){return Ac(t)&&!Wl(t).n_()&&t.O_.length>0}function UT(t){Wl(t).start()}async function QO(t){Wl(t).p_()}async function RO(t){const e=Wl(t);for(const r of t.O_)e.m_(r.mutations)}async function PO(t,e,r){const n=t.O_.shift(),s=Hb.from(n,e,r);await FT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ch(t)}async function DO(t,e){e&&Wl(t).V_&&await async function(n,s){if(function(a){return VF(a)&&a!==ze.ABORTED}(s.code)){const i=n.O_.shift();Wl(n).s_(),await FT(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ch(n)}}(t,e),TT(t)&&UT(t)}async function oI(t,e){const r=Bt(t);r.asyncQueue.verifyOperationInProgress(),ut("RemoteStore","RemoteStore received new credentials");const n=Ac(r);r.L_.add(3),await lh(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await qp(r)}async function H2(t,e){const r=Bt(t);e?(r.L_.delete(2),await qp(r)):e||(r.L_.add(2),await lh(r),r.q_.set("Unknown"))}function uh(t){return t.K_||(t.K_=function(r,n,s){const i=Bt(r);return i.w_(),new CO(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:NO.bind(null,t),Ro:FO.bind(null,t),mo:TO.bind(null,t),d_:UO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),sB(t)?nB(t):t.q_.set("Unknown")):(await t.K_.stop(),NT(t))})),t.K_}function Wl(t){return t.U_||(t.U_=function(r,n,s){const i=Bt(r);return i.w_(),new IO(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:QO.bind(null,t),mo:DO.bind(null,t),f_:RO.bind(null,t),g_:PO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ch(t)):(await t.U_.stop(),t.O_.length>0&&(ut("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new iB(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dh(t,e){if(As("AsyncQueue",`${e}: ${t}`),ac(t))return new ct(ze.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ct.comparator(r.key,n.key):(r,n)=>Ct.comparator(r.key,n.key),this.keyedMap=uf(),this.sortedSet=new gn(this.comparator)}static emptySet(e){return new wd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof wd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new wd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.W_=new gn(Ct.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Lt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class $d{constructor(e,r,n,s,i,a,o,A,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=A,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new $d(e,r,wd.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class OO{constructor(){this.queries=lI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Bt(r),i=s.queries;s.queries=lI(),i.forEach((a,o)=>{for(const A of o.j_)A.onError(n)})})(this,new ct(ze.ABORTED,"Firestore shutting down"))}}function lI(){return new EA(t=>kF(t),Hp)}async function aB(t,e){const r=Bt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new MO,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=dh(a,`Initialization of query '${Hu(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&AB(r)}async function oB(t,e){const r=Bt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function HO(t,e){const r=Bt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&AB(r)}function VO(t,e,r){const n=Bt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function AB(t){t.Y_.forEach(e=>{e.next()})}var V2,cI;(cI=V2||(V2={})).ea="default",cI.Cache="cache";class lB{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new $d(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=$d.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==V2.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.serializer=e}Es(e){return To(this.serializer,e)}ds(e){return e.metadata.exists?ZF(this.serializer,e.document,!1):vn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ls(e)}}class zO{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=LT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=_r.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new uI(this.serializer);for(const s of e)if(s.metadata.queries){const i=n.Es(s.metadata.name);for(const a of s.metadata.queries){const o=(r.get(a)||fr()).add(i);r.set(a,o)}}return r}async complete(){const e=await xO(this.localStore,new uI(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await vO(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function LT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.key=e}}class QT{constructor(e){this.key=e}}class RT{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fr(),this.mutatedKeys=fr(),this.Aa=NF(e),this.Ra=new wd(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new AI,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const A=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const p=s.get(u),g=Vp(this.query,d)?d:null,v=!!p&&this.mutatedKeys.has(p.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;p&&g?p.data.isEqual(g.data)?v!==y&&(n.track({type:3,doc:g}),k=!0):this.ga(p,g)||(n.track({type:2,doc:g}),k=!0,(A&&this.Aa(g,A)>0||c&&this.Aa(g,c)<0)&&(o=!0)):!p&&g?(n.track({type:0,doc:g}),k=!0):p&&!g&&(n.track({type:1,doc:p}),k=!0,(A||c)&&(o=!0)),k&&(g?(a=a.add(g),i=y?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,d)=>function(g,v){const y=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lt()}};return y(g)-y(v)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],A=this.da.size===0&&this.current&&!s?1:0,c=A!==this.Ea;return this.Ea=A,a.length!==0||c?{snapshot:new $d(this.query,e.Ra,i,a,e.mutatedKeys,A===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new AI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fr(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new QT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new jT(n))}),r}ba(e){this.Ta=e.Ts,this.da=fr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return $d.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class GO{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class $O{constructor(e){this.key=e,this.va=!1}}class qO{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new EA(o=>kF(o),Hp),this.Ma=new Map,this.xa=new Set,this.Oa=new gn(Ct.comparator),this.Na=new Map,this.La=new Wb,this.Ba={},this.ka=new Map,this.qa=au.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function WO(t,e,r=!0){const n=r1(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await PT(n,e,r,!0),s}async function JO(t,e){const r=r1(t);await PT(r,e,!0,!1)}async function PT(t,e,r,n){const s=await Kd(t.localStore,fi(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await cB(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&t1(t.remoteStore,s),o}async function cB(t,e,r,n,s){t.Ka=(d,p,g)=>async function(y,k,x,I){let N=k.view.ma(x);N.ns&&(N=await Xm(y.localStore,k.query,!1).then(({documents:E})=>k.view.ma(E,N)));const U=I&&I.targetChanges.get(k.targetId),D=I&&I.targetMismatches.get(k.targetId)!=null,P=k.view.applyChanges(N,y.isPrimaryClient,U,D);return K2(y,k.targetId,P.wa),P.snapshot}(t,d,p,g);const i=await Xm(t.localStore,e,!0),a=new RT(e,i.Ts),o=a.ma(i.documents),A=Gp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,A);K2(t,r,c.wa);const u=new GO(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function XO(t,e,r){const n=Bt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Hp(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await zd(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Gd(n.remoteStore,s.targetId),qd(n,s.targetId)}).catch(ic)):(qd(n,s.targetId),await zd(n.localStore,s.targetId,!0))}async function YO(t,e){const r=Bt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Gd(r.remoteStore,n.targetId))}async function ZO(t,e,r){const n=fB(t);try{const s=await function(a,o){const A=Bt(a),c=Sn.now(),u=o.reduce((g,v)=>g.add(v.key),fr());let d,p;return A.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Mi(),y=fr();return A.cs.getEntries(g,u).next(k=>{v=k,v.forEach((x,I)=>{I.isValidDocument()||(y=y.add(x))})}).next(()=>A.localDocuments.getOverlayedDocuments(g,v)).next(k=>{d=k;const x=[];for(const I of o){const N=CM(I,d.get(I.key).overlayedDocument);N!=null&&x.push(new kA(I.key,N,mF(N.value.mapValue),kn.exists(!0)))}return A.mutationQueue.addMutationBatch(g,c,x,o)}).next(k=>{p=k;const x=k.applyToLocalDocumentSet(d,y);return A.documentOverlayCache.saveOverlays(g,k.batchId,x)})}).then(()=>({batchId:p.batchId,changes:TF(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,A){let c=a.Ba[a.currentUser.toKey()];c||(c=new gn(ir)),c=c.insert(o,A),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await SA(n,s.changes),await ch(n.remoteStore)}catch(s){const i=dh(s,"Failed to persist write");r.reject(i)}}async function DT(t,e){const r=Bt(t);try{const n=await mO(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(Ot(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Ot(a.va):s.removedDocuments.size>0&&(Ot(a.va),a.va=!1))}),await SA(r,n,e)}catch(n){await ic(n)}}function dI(t,e,r){const n=Bt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const A=Bt(a);A.onlineState=o;let c=!1;A.queries.forEach((u,d)=>{for(const p of d.j_)p.Z_(o)&&(c=!0)}),c&&AB(A)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function e7(t,e,r){const n=Bt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new gn(Ct.comparator);a=a.insert(i,vn.newNoDocument(i,$t.min()));const o=fr().add(i),A=new zp($t.min(),new Map,new gn(ir),a,o);await DT(n,A),n.Oa=n.Oa.remove(i),n.Na.delete(e),hB(n)}else await zd(n.localStore,e,!1).then(()=>qd(n,e,r)).catch(ic)}async function t7(t,e){const r=Bt(t),n=e.batch.batchId;try{const s=await gO(r.localStore,e);dB(r,n,null),uB(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await SA(r,s)}catch(s){await ic(s)}}async function r7(t,e,r){const n=Bt(t);try{const s=await function(a,o){const A=Bt(a);return A.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return A.mutationQueue.lookupMutationBatch(c,o).next(d=>(Ot(d!==null),u=d.keys(),A.mutationQueue.removeMutationBatch(c,d))).next(()=>A.mutationQueue.performConsistencyCheck(c)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>A.localDocuments.getDocuments(c,u))})}(n.localStore,e);dB(n,e,r),uB(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await SA(n,s)}catch(s){await ic(s)}}async function n7(t,e){const r=Bt(t);Ac(r.remoteStore)||ut("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(a){const o=Bt(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",A=>o.mutationQueue.getHighestUnacknowledgedBatchId(A))}(r.localStore);if(n===-1)return void e.resolve();const s=r.ka.get(n)||[];s.push(e),r.ka.set(n,s)}catch(n){const s=dh(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function uB(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function dB(t,e,r){const n=Bt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function qd(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||MT(t,n)})}function MT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Gd(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),hB(t))}function K2(t,e,r){for(const n of r)n instanceof jT?(t.La.addReference(n.key,e),s7(t,n)):n instanceof QT?(ut("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||MT(t,n.key)):Lt()}function s7(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ut("SyncEngine","New document in limbo: "+r),t.xa.add(n),hB(t))}function hB(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Ct(_r.fromString(e)),n=t.qa.next();t.Na.set(n,new $O(r)),t.Oa=t.Oa.insert(r,n),t1(t.remoteStore,new aA(fi(ah(r.path)),n,"TargetPurposeLimboResolution",Pi.oe))}}async function SA(t,e,r){const n=Bt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,A)=>{a.push(n.Ka(A,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const d=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(A.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(A.targetId,d?"current":"not-current")}if(c){s.push(c);const d=Zb.Wi(A.targetId,c);i.push(d)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(A,c){const u=Bt(A);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Qe.forEach(c,p=>Qe.forEach(p.$i,g=>u.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>Qe.forEach(p.Ui,g=>u.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!ac(d))throw d;ut("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=u.os.get(p),v=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(v);u.os=u.os.insert(p,y)}}}(n.localStore,i))}async function i7(t,e){const r=Bt(t);if(!r.currentUser.isEqual(e)){ut("SyncEngine","User change. New user:",e.toKey());const n=await vT(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(A=>{A.reject(new ct(ze.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await SA(r,n.hs)}}function a7(t,e){const r=Bt(t),n=r.Na.get(e);if(n&&n.va)return fr().add(n.key);{let s=fr();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}async function o7(t,e){const r=Bt(t),n=await Xm(r.localStore,e.query,!0),s=e.view.ba(n);return r.isPrimaryClient&&K2(r,e.targetId,s.wa),s}async function A7(t,e){const r=Bt(t);return _T(r.localStore,e).then(n=>SA(r,n))}async function l7(t,e,r,n){const s=Bt(t),i=await function(o,A){const c=Bt(o),u=Bt(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Mn(d,A).next(p=>p?c.localDocuments.getDocuments(d,p):Qe.resolve(null)))}(s.localStore,e);i!==null?(r==="pending"?await ch(s.remoteStore):r==="acknowledged"||r==="rejected"?(dB(s,e,n||null),uB(s,e),function(o,A){Bt(Bt(o).mutationQueue).On(A)}(s.localStore,e)):Lt(),await SA(s,i)):ut("SyncEngine","Cannot apply mutation batch with id: "+e)}async function c7(t,e){const r=Bt(t);if(r1(r),fB(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),s=await hI(r,n.toArray());r.Qa=!0,await H2(r.remoteStore,!0);for(const i of s)t1(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let s=Promise.resolve();r.Ma.forEach((i,a)=>{r.sharedClientState.isLocalQueryTarget(a)?n.push(a):s=s.then(()=>(qd(r,a),zd(r.localStore,a,!0))),Gd(r.remoteStore,a)}),await s,await hI(r,n),function(a){const o=Bt(a);o.Na.forEach((A,c)=>{Gd(o.remoteStore,c)}),o.La.pr(),o.Na=new Map,o.Oa=new gn(Ct.comparator)}(r),r.Qa=!1,await H2(r.remoteStore,!1)}}async function hI(t,e,r){const n=Bt(t),s=[],i=[];for(const a of e){let o;const A=n.Ma.get(a);if(A&&A.length!==0){o=await Kd(n.localStore,fi(A[0]));for(const c of A){const u=n.Fa.get(c),d=await o7(n,u);d.snapshot&&i.push(d.snapshot)}}else{const c=await BT(n.localStore,a);o=await Kd(n.localStore,c),await cB(n,OT(c),a,!1,o.resumeToken)}s.push(o)}return n.Ca.d_(i),s}function OT(t){return CF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function u7(t){return function(r){return Bt(Bt(r).persistence).Qi()}(Bt(t).localStore)}async function d7(t,e,r,n){const s=Bt(t);if(s.Qa)return void ut("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const a=await _T(s.localStore,SF(i[0])),o=zp.createSynthesizedRemoteEventForCurrentChange(e,r==="current",Dn.EMPTY_BYTE_STRING);await SA(s,a,o);break}case"rejected":await zd(s.localStore,e,!0),qd(s,e,n);break;default:Lt()}}async function h7(t,e,r){const n=r1(t);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){ut("SyncEngine","Adding an already active target "+s);continue}const i=await BT(n.localStore,s),a=await Kd(n.localStore,i);await cB(n,OT(i),a.targetId,!1,a.resumeToken),t1(n.remoteStore,a)}for(const s of r)n.Ma.has(s)&&await zd(n.localStore,s,!1).then(()=>{Gd(n.remoteStore,s),qd(n,s)}).catch(ic)}}function r1(t){const e=Bt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e7.bind(null,e),e.Ca.d_=HO.bind(null,e.eventManager),e.Ca.$a=VO.bind(null,e.eventManager),e}function fB(t){const e=Bt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r7.bind(null,e),e}function f7(t,e,r){const n=Bt(t);(async function(i,a,o){try{const A=await a.getMetadata();if(await function(g,v){const y=Bt(g),k=ls(v.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",x=>y.Gr.getBundleMetadata(x,v.id)).then(x=>!!x&&x.createTime.compareTo(k)>=0)}(i.localStore,A))return await a.close(),o._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(A)),Promise.resolve(new Set);o._updateProgress(LT(A));const c=new zO(A,i.localStore,a.serializer);let u=await a.Ua();for(;u;){const p=await c.la(u);p&&o._updateProgress(p),u=await a.Ua()}const d=await c.complete();return await SA(i,d.Ia,void 0),await function(g,v){const y=Bt(g);return y.persistence.runTransaction("Save bundle","readwrite",k=>y.Gr.saveBundleMetadata(k,v))}(i.localStore,A),o._completeWith(d.progress),Promise.resolve(d.Pa)}catch(A){return ua("SyncEngine",`Loading bundle failed with ${A}`),o._failWith(A),Promise.resolve(new Set)}})(n,e,r).then(s=>{n.sharedClientState.notifyBundleLoaded(s)})}class Jl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$p(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return xT(this.persistence,new wT,e.initialUser,this.serializer)}Ga(e){return new Jb(e1.Zr,this.serializer)}Wa(e){return new IT}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jl.provider={build:()=>new Jl};class p7 extends Jl{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){Ot(this.persistence.referenceDelegate instanceof Jm);const n=this.persistence.referenceDelegate.garbageCollector;return new hT(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?ci.withCacheSize(this.cacheSizeBytes):ci.DEFAULT;return new Jb(n=>Jm.Zr(n,r),this.serializer)}}class pB extends Jl{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await fB(this.Ja.syncEngine),await ch(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return xT(this.persistence,new wT,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new hT(n,e.asyncQueue,r)}Ha(e,r){const n=new Q8(r,this.persistence);return new j8(e.asyncQueue,n)}Ga(e){const r=Yb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ci.withCacheSize(this.cacheSizeBytes):ci.DEFAULT;return new Xb(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,ET(),Jg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new IT}}class HT extends pB{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof Sx&&(this.sharedClientState.syncEngine={no:l7.bind(null,r),ro:d7.bind(null,r),io:h7.bind(null,r),Qi:u7.bind(null,r),eo:A7.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await c7(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=ET();if(!Sx.D(r))throw new ct(ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Yb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Sx(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class Xl{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>dI(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=i7.bind(null,this.syncEngine),await H2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OO}()}createDatastore(e){const r=$p(e.databaseInfo.databaseId),n=function(i){return new _O(i)}(e.databaseInfo);return function(i,a,o,A){return new EO(i,a,o,A)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new SO(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>dI(this.syncEngine,r,0),function(){return aI.D()?new aI:new yO}())}createSyncEngine(e,r){return function(s,i,a,o,A,c,u){const d=new qO(s,i,a,o,A,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Bt(s);ut("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await lh(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Xl.provider={build:()=>new Xl};function fI(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):As("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Us,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const s=await this.iu(n);return new KO(JSON.parse(s),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ct(ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,i){const a=Bt(s),o={documents:i.map(d=>vp(a.serializer,d))},A=await a.Lo("BatchGetDocuments",a.serializer.databaseId,_r.emptyPath(),o,i.length),c=new Map;A.forEach(d=>{const p=LM(a.serializer,d);c.set(p.key.toString(),p)});const u=[];return i.forEach(d=>{const p=c.get(d.toString());Ot(!!p),u.push(p)}),u}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ah(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=Ct.fromPath(n);this.mutations.push(new Mb(s,this.precondition(s)))}),await async function(n,s){const i=Bt(n),a={writes:s.map(o=>yp(i.serializer,o))};await i.Mo("Commit",i.serializer.databaseId,_r.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Lt();r=$t.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new ct(ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual($t.min())?kn.exists(!1):kn.updateTime(r):kn.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual($t.min()))throw new ct(ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kn.updateTime(r)}return kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e,r,n,s,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=i,this._u=n.maxAttempts,this.t_=new tB(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new m7(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Mp(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!VF(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Ns.UNAUTHENTICATED,this.clientId=Tb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{ut("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(ut("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=dh(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Fx(t,e){t.asyncQueue.verifyOperationInProgress(),ut("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await vT(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pI(t,e){t.asyncQueue.verifyOperationInProgress();const r=await gB(t);ut("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>oI(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>oI(e.remoteStore,s)),t._onlineComponents=e}async function gB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ut("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fx(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===ze.FAILED_PRECONDITION||s.code===ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;ua("Error using user provided cache. Falling back to memory cache: "+r),await Fx(t,new Jl)}}else ut("FirestoreClient","Using default OfflineComponentProvider"),await Fx(t,new Jl);return t._offlineComponents}async function s1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ut("FirestoreClient","Using user provided OnlineComponentProvider"),await pI(t,t._uninitializedComponentsProvider._online)):(ut("FirestoreClient","Using default OnlineComponentProvider"),await pI(t,new Xl))),t._onlineComponents}function VT(t){return gB(t).then(e=>e.persistence)}function hh(t){return gB(t).then(e=>e.localStore)}function KT(t){return s1(t).then(e=>e.remoteStore)}function mB(t){return s1(t).then(e=>e.syncEngine)}function zT(t){return s1(t).then(e=>e.datastore)}async function Wd(t){const e=await s1(t),r=e.eventManager;return r.onListen=WO.bind(null,e.syncEngine),r.onUnlisten=XO.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=JO.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=YO.bind(null,e.syncEngine),r}function v7(t){return t.asyncQueue.enqueue(async()=>{const e=await VT(t),r=await KT(t);return e.setNetworkEnabled(!0),function(s){const i=Bt(s);return i.L_.delete(0),qp(i)}(r)})}function y7(t){return t.asyncQueue.enqueue(async()=>{const e=await VT(t),r=await KT(t);return e.setNetworkEnabled(!1),async function(s){const i=Bt(s);i.L_.add(0),await lh(i),i.q_.set("Offline")}(r)})}function b7(t,e){const r=new Us;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,a){try{const o=await function(c,u){const d=Bt(c);return d.persistence.runTransaction("read document","readonly",p=>d.localDocuments.getDocument(p,u))}(s,i);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new ct(ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const A=dh(o,`Failed to get document '${i} from cache`);a.reject(A)}}(await hh(t),e,r)),r.promise}function GT(t,e,r={}){const n=new Us;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const u=new n1({next:p=>{u.Za(),a.enqueueAndForget(()=>oB(i,d));const g=p.docs.has(o);!g&&p.fromCache?c.reject(new ct(ze.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&A&&A.source==="server"?c.reject(new ct(ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new lB(ah(o.path),u,{includeMetadataChanges:!0,_a:!0});return aB(i,d)}(await Wd(t),t.asyncQueue,e,r,n)),n.promise}function B7(t,e){const r=new Us;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,a){try{const o=await Xm(s,i,!0),A=new RT(i,o.Ts),c=A.ma(o.documents),u=A.applyChanges(c,!1);a.resolve(u.snapshot)}catch(o){const A=dh(o,`Failed to execute query '${i} against cache`);a.reject(A)}}(await hh(t),e,r)),r.promise}function $T(t,e,r={}){const n=new Us;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const u=new n1({next:p=>{u.Za(),a.enqueueAndForget(()=>oB(i,d)),p.fromCache&&A.source==="server"?c.reject(new ct(ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new lB(o,u,{includeMetadataChanges:!0,_a:!0});return aB(i,d)}(await Wd(t),t.asyncQueue,e,r,n)),n.promise}function _7(t,e,r){const n=new Us;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await zT(t);n.resolve(async function(a,o,A){var c;const u=Bt(a),{request:d,ut:p,parent:g}=tT(u.serializer,IF(o),A);u.connection.Fo||delete d.parent;const v=(await u.Lo("RunAggregationQuery",u.serializer.databaseId,g,d,1)).filter(k=>!!k.result);Ot(v.length===1);const y=(c=v[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(y).reduce((k,x)=>(k[p[x]]=y[x],k),{})}(s,e,r))}catch(s){n.reject(s)}}),n.promise}function C7(t,e){const r=new n1(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){Bt(s).Y_.add(i),i.next()}(await Wd(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){Bt(s).Y_.delete(i)}(await Wd(t),r))}}function I7(t,e,r,n){const s=function(a,o){let A;return A=typeof a=="string"?zF().encode(a):a,function(u,d){return new g7(u,d)}(function(u,d){if(u instanceof Uint8Array)return fI(u,d);if(u instanceof ArrayBuffer)return fI(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(A),o)}(r,$p(e));t.asyncQueue.enqueueAndForget(async()=>{f7(await mB(t),s,n)})}function E7(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){const i=Bt(n);return i.persistence.runTransaction("Get named query","readonly",a=>i.Gr.getNamedQuery(a,s))}(await hh(t),e))}function k7(t,e){return t.asyncQueue.enqueue(async()=>async function(n,s){const i=Bt(n),a=i.indexManager,o=[];return i.persistence.runTransaction("Configure indexes","readwrite",A=>a.getFieldIndexes(A).next(c=>function(d,p,g,v,y){d=[...d],p=[...p],d.sort(g),p.sort(g);const k=d.length,x=p.length;let I=0,N=0;for(;I<x&&N<k;){const U=g(d[N],p[I]);U<0?y(d[N++]):U>0?v(p[I++]):(I++,N++)}for(;I<x;)v(p[I++]);for(;N<k;)y(d[N++])}(c,s,F8,u=>{o.push(a.addFieldIndex(A,u))},u=>{o.push(a.deleteFieldIndex(A,u))})).next(()=>Qe.waitFor(o)))}(await hh(t),e))}function S7(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){Bt(n).ss.zi=s}(await hh(t),e))}function N7(t){return t.asyncQueue.enqueue(async()=>function(r){const n=Bt(r),s=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",i=>s.deleteAllFieldIndexes(i))}(await hh(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t,e,r){if(!r)throw new ct(ze.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WT(t,e,r,n){if(e===!0&&n===!0)throw new ct(ze.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function mI(t){if(!Ct.isDocumentKey(t))throw new ct(ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wI(t){if(Ct.isDocumentKey(t))throw new ct(ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function i1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Lt()}function xr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ct(ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=i1(t);throw new ct(ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function JT(t,e){if(e<=0)throw new ct(ze.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ct(ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ct(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ct(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ct(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ct(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wp{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ct(ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xI(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new ZN;switch(n.type){case"firstParty":return new I8(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ct(ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=gI.get(r);n&&(ut("ComponentProvider","Removing Datastore"),gI.delete(r),n.terminate())}(this),Promise.resolve()}}function XT(t,e,r,n={}){var s;const i=(t=xr(t,Wp))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&ua("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,A;if(typeof n.mockUserToken=="string")o=n.mockUserToken,A=Ns.MOCK_USER;else{o=WP(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new ct(ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Ns(c)}t._authCredentials=new B8(new YN(o,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ls(this.firestore,e,this._query)}}class qn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new to(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class to extends Ls{constructor(e,r,n){super(e,r,ah(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Ct(e))}withConverter(e){return new to(this.firestore,e,this._path)}}function z2(t,e,...r){if(t=cn(t),wB("collection","path",e),t instanceof Wp){const n=_r.fromString(e,...r);return wI(n),new to(t,null,n)}{if(!(t instanceof qn||t instanceof to))throw new ct(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(_r.fromString(e,...r));return wI(n),new to(t.firestore,null,n)}}function F7(t,e){if(t=xr(t,Wp),wB("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ct(ze.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ls(t,null,function(n){return new IA(_r.emptyPath(),n)}(e))}function Wa(t,e,...r){if(t=cn(t),arguments.length===1&&(e=Tb.newId()),wB("doc","path",e),t instanceof Wp){const n=_r.fromString(e,...r);return mI(n),new qn(t,null,new Ct(n))}{if(!(t instanceof qn||t instanceof to))throw new ct(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(_r.fromString(e,...r));return mI(n),new qn(t.firestore,t instanceof to?t.converter:null,new Ct(n))}}function T7(t,e){return t=cn(t),e=cn(e),(t instanceof qn||t instanceof to)&&(e instanceof qn||e instanceof to)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function xB(t,e){return t=cn(t),e=cn(e),t instanceof Ls&&e instanceof Ls&&t.firestore===e.firestore&&Hp(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tB(this,"async_queue_retry"),this.Vu=()=>{const n=Jg();n&&ut("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Jg();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Jg();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Us;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ac(e))throw e;ut("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw As("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=iB.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Lt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function G2(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class YT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Us,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7=-1;class sn extends Wp{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new vI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vI(e),this._firestoreClient=void 0,await e}}}function L7(t,e,r){r||(r="(default)");const n=Dp(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Vl(i,e))return s;throw new ct(ze.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ct(ze.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ct(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function ZT(t,e){const r=typeof t=="object"?t:Nb(),n=typeof t=="string"?t:e||"(default)",s=Dp(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=$P("firestore");i&&XT(s,...i)}return s}function Nn(t){if(t._terminated)throw new ct(ze.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||e3(t),t._firestoreClient}function e3(t){var e,r,n;const s=t._freezeSettings(),i=function(o,A,c,u){return new sM(o,A,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,qT(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new x7(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const A=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(A),_online:A}}(t._componentsProvider))}function j7(t,e){ua("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return t3(t,Xl.provider,{build:n=>new pB(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Q7(t){ua("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();t3(t,Xl.provider,{build:r=>new HT(r,e.cacheSizeBytes)})}function t3(t,e,r){if((t=xr(t,sn))._firestoreClient||t._terminated)throw new ct(ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ct(ze.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},e3(t)}function R7(t){if(t._initialized&&!t._terminated)throw new ct(ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Us;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Fo.D())return Promise.resolve();const s=n+"main";await Fo.delete(s)}(Yb(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function P7(t){return function(r){const n=new Us;return r.asyncQueue.enqueueAndForget(async()=>n7(await mB(r),n)),n.promise}(Nn(t=xr(t,sn)))}function D7(t){return v7(Nn(t=xr(t,sn)))}function M7(t){return y7(Nn(t=xr(t,sn)))}function O7(t){return a8(t.app,"firestore",t._databaseId.database),t._delete()}function H7(t,e){const r=Nn(t=xr(t,sn)),n=new YT;return I7(r,t._databaseId,e,n),n}function V7(t,e){return E7(Nn(t=xr(t,sn)),e).then(r=>r?new Ls(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class r3{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yl(Dn.fromBase64String(e))}catch(r){throw new ct(ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Yl(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ct(ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function K7(){return new lc("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ct(ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ct(ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ir(this._lat,e._lat)||ir(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7=/^__.*__$/;class G7{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new kA(e,this.data,this.fieldMask,r,this.fieldTransforms):new oh(e,this.data,r,this.fieldTransforms)}}class n3{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new kA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function s3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lt()}}class o1{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new o1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return tw(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(s3(this.Cu)&&z7.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class $7{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||$p(e)}Qu(e,r,n,s=!1){return new o1({Cu:e,methodName:r,qu:n,path:yn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gu(t){const e=t._freezeSettings(),r=$p(t._databaseId);return new $7(t._databaseId,!!e.ignoreUndefinedProperties,r)}function A1(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);IB("Data must be an object, but it was:",a,n);const o=o3(n,a);let A,c;if(i.merge)A=new Di(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const p=bp(e,d,r);if(!a.contains(p))throw new ct(ze.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);l3(u,p)||u.push(p)}A=new Di(u),c=a.fieldTransforms.filter(d=>A.covers(d.field))}else A=null,c=a.fieldTransforms;return new G7(new zs(o),A,c)}class Xp extends cc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xp}}function i3(t,e,r){return new o1({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vB extends cc{_toFieldTransform(e){return new Kp(e.path,new Od)}isEqual(e){return e instanceof vB}}class yB extends cc{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=i3(this,e,!0),n=this.Ku.map(i=>mu(i,r)),s=new ru(n);return new Kp(e.path,s)}isEqual(e){return e instanceof yB&&Vl(this.Ku,e.Ku)}}class bB extends cc{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=i3(this,e,!0),n=this.Ku.map(i=>mu(i,r)),s=new nu(n);return new Kp(e.path,s)}isEqual(e){return e instanceof bB&&Vl(this.Ku,e.Ku)}}class BB extends cc{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Hd(e.serializer,jF(e.serializer,this.$u));return new Kp(e.path,r)}isEqual(e){return e instanceof BB&&this.$u===e.$u}}function _B(t,e,r,n){const s=t.Qu(1,e,r);IB("Data must be an object, but it was:",s,n);const i=[],a=zs.empty();oc(n,(A,c)=>{const u=l1(e,A,r);c=cn(c);const d=s.Nu(u);if(c instanceof Xp)i.push(u);else{const p=mu(c,d);p!=null&&(i.push(u),a.set(u,p))}});const o=new Di(i);return new n3(a,o,s.fieldTransforms)}function CB(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[bp(e,n,r)],A=[s];if(i.length%2!=0)throw new ct(ze.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)o.push(bp(e,i[p])),A.push(i[p+1]);const c=[],u=zs.empty();for(let p=o.length-1;p>=0;--p)if(!l3(c,o[p])){const g=o[p];let v=A[p];v=cn(v);const y=a.Nu(g);if(v instanceof Xp)c.push(g);else{const k=mu(v,y);k!=null&&(c.push(g),u.set(g,k))}}const d=new Di(c);return new n3(u,d,a.fieldTransforms)}function a3(t,e,r,n=!1){return mu(r,t.Qu(n?4:3,e))}function mu(t,e){if(A3(t=cn(t)))return IB("Unsupported field value:",e,t),o3(t,e);if(t instanceof cc)return function(n,s){if(!s3(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let A=mu(o,s.Lu(a));A==null&&(A={nullValue:"NULL_VALUE"}),i.push(A),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=cn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return jF(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Sn.fromDate(n);return{timestampValue:Vd(s.serializer,i)}}if(n instanceof Sn){const i=new Sn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Vd(s.serializer,i)}}if(n instanceof a1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Yl)return{bytesValue:qF(s.serializer,n._byteString)};if(n instanceof qn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zb(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Jp)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(A=>{if(typeof A!="number")throw o.Bu("VectorValues must only contain numeric values.");return Db(o.serializer,A)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${i1(n)}`)}(t,e)}function o3(t,e){const r={};return hF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oc(t,(n,s)=>{const i=mu(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function A3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Sn||t instanceof a1||t instanceof Yl||t instanceof qn||t instanceof cc||t instanceof Jp)}function IB(t,e,r){if(!A3(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=i1(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function bp(t,e,r){if((e=cn(e))instanceof lc)return e._internalPath;if(typeof e=="string")return l1(t,e);throw tw("Field path arguments must be of type string or ",t,!1,void 0,r)}const q7=new RegExp("[~\\*/\\[\\]]");function l1(t,e,r){if(e.search(q7)>=0)throw tw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new lc(...e.split("."))._internalPath}catch{throw tw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function tw(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let A="";return(i||a)&&(A+=" (found",i&&(A+=` in field ${n}`),a&&(A+=` in document ${s}`),A+=")"),new ct(ze.INVALID_ARGUMENT,o+t+A)}function l3(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(c1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class W7 extends Bp{data(){return super.data()}}function c1(t,e){return typeof e=="string"?l1(t,e):e instanceof lc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ct(ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EB{}class fh extends EB{}function $2(t,e,...r){let n=[];e instanceof EB&&n.push(e),n=n.concat(r),function(i){const a=i.filter(A=>A instanceof wu).length,o=i.filter(A=>A instanceof ph).length;if(a>1||a>0&&o>0)throw new ct(ze.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class ph extends fh{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new ph(e,r,n)}_apply(e){const r=this._parse(e);return d3(e._query,r),new Ls(e.firestore,e.converter,U2(e._query,r))}_parse(e){const r=gu(e.firestore);return function(i,a,o,A,c,u,d){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ct(ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){bI(d,u);const g=[];for(const v of d)g.push(yI(A,i,v));p={arrayValue:{values:g}}}else p=yI(A,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||bI(d,u),p=a3(o,a,d,u==="in"||u==="not-in");return Cr.create(c,u,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function J7(t,e,r){const n=e,s=c1("where",t);return ph._create(s,n,r)}class wu extends EB{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new wu(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Yr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const A of o)d3(a,A),a=U2(a,A)}(e._query,r),new Ls(e.firestore,e.converter,U2(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function X7(...t){return t.forEach(e=>h3("or",e)),wu._create("or",t)}function Y7(...t){return t.forEach(e=>h3("and",e)),wu._create("and",t)}class u1 extends fh{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new u1(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new ct(ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ct(ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xp(i,a)}(e._query,this._field,this._direction);return new Ls(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new IA(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Z7(t,e="asc"){const r=e,n=c1("orderBy",t);return u1._create(n,r)}class Yp extends fh{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Yp(e,r,n)}_apply(e){return new Ls(e.firestore,e.converter,zm(e._query,this._limit,this._limitType))}}function eH(t){return JT("limit",t),Yp._create("limit",t,"F")}function tH(t){return JT("limitToLast",t),Yp._create("limitToLast",t,"L")}class Zp extends fh{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Zp(e,r,n)}_apply(e){const r=u3(e,this.type,this._docOrFields,this._inclusive);return new Ls(e.firestore,e.converter,function(s,i){return new IA(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function rH(...t){return Zp._create("startAt",t,!0)}function nH(...t){return Zp._create("startAfter",t,!1)}class e0 extends fh{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new e0(e,r,n)}_apply(e){const r=u3(e,this.type,this._docOrFields,this._inclusive);return new Ls(e.firestore,e.converter,function(s,i){return new IA(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,r))}}function sH(...t){return e0._create("endBefore",t,!1)}function iH(...t){return e0._create("endAt",t,!0)}function u3(t,e,r,n){if(r[0]=cn(r[0]),r[0]instanceof Bp)return function(i,a,o,A,c){if(!A)throw new ct(ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const d of md(i))if(d.field.isKeyField())u.push(eu(a,A.key));else{const p=A.data.field(d.field);if(Gw(p))throw new ct(ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const g=d.field.canonicalString();throw new ct(ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}u.push(p)}return new ql(u,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=gu(t.firestore);return function(a,o,A,c,u,d){const p=a.explicitOrderBy;if(u.length>p.length)throw new ct(ze.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let v=0;v<u.length;v++){const y=u[v];if(p[v].field.isKeyField()){if(typeof y!="string")throw new ct(ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!Rb(a)&&y.indexOf("/")!==-1)throw new ct(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const k=a.path.child(_r.fromString(y));if(!Ct.isDocumentKey(k))throw new ct(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const x=new Ct(k);g.push(eu(o,x))}else{const k=a3(A,c,y);g.push(k)}}return new ql(g,d)}(t._query,t.firestore._databaseId,s,e,r,n)}}function yI(t,e,r){if(typeof(r=cn(r))=="string"){if(r==="")throw new ct(ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rb(e)&&r.indexOf("/")!==-1)throw new ct(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(_r.fromString(r));if(!Ct.isDocumentKey(n))throw new ct(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return eu(t,new Ct(n))}if(r instanceof qn)return eu(t,r._key);throw new ct(ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${i1(r)}.`)}function bI(t,e){if(!Array.isArray(t)||t.length===0)throw new ct(ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function d3(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ct(ze.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ct(ze.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function h3(t,e){if(!(e instanceof ph||e instanceof wu))throw new ct(ze.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class kB{convertValue(e,r="none"){switch(Gl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return In(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(xA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Lt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return oc(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>In(a.doubleValue));return new Jp(i)}convertGeoPoint(e){return new a1(In(e.latitude),In(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=$w(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(gp(e));default:return null}}convertTimestamp(e){const r=wA(e);return new Sn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=_r.fromString(e);Ot(iT(n));const s=new zl(n.get(1),n.get(3)),i=new Ct(n.popFirst(5));return s.isEqual(r)||As(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class aH extends kB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t){return new Jd("sum",bp("sum",t))}function AH(t){return new Jd("avg",bp("average",t))}function f3(){return new Jd("count")}function lH(t,e){var r,n;return t instanceof Jd&&e instanceof Jd&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function cH(t,e){return xB(t.query,e.query)&&Vl(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ou extends Bp{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(c1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Rf extends ou{data(e={}){return super.data(e)}}class Au{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new yl(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Rf(this._firestore,this._userDataWriter,n.key,n,new yl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ct(ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const A=new Rf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new yl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:A,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const A=new Rf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new yl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:uH(o.type),doc:A,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function uH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lt()}}function dH(t,e){return t instanceof ou&&e instanceof ou?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Au&&e instanceof Au&&t._firestore===e._firestore&&xB(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hH(t){t=xr(t,qn);const e=xr(t.firestore,sn);return GT(Nn(e),t._key).then(r=>SB(e,t,r))}class uc extends kB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,r)}}function fH(t){t=xr(t,qn);const e=xr(t.firestore,sn),r=Nn(e),n=new uc(e);return b7(r,t._key).then(s=>new ou(e,n,t._key,s,new yl(s!==null&&s.hasLocalMutations,!0),t.converter))}function pH(t){t=xr(t,qn);const e=xr(t.firestore,sn);return GT(Nn(e),t._key,{source:"server"}).then(r=>SB(e,t,r))}function p3(t){t=xr(t,Ls);const e=xr(t.firestore,sn),r=Nn(e),n=new uc(e);return c3(t._query),$T(r,t._query).then(s=>new Au(e,n,t,s))}function gH(t){t=xr(t,Ls);const e=xr(t.firestore,sn),r=Nn(e),n=new uc(e);return B7(r,t._query).then(s=>new Au(e,n,t,s))}function mH(t){t=xr(t,Ls);const e=xr(t.firestore,sn),r=Nn(e),n=new uc(e);return $T(r,t._query,{source:"server"}).then(s=>new Au(e,n,t,s))}function Xg(t,e,r){t=xr(t,qn);const n=xr(t.firestore,sn),s=d1(t.converter,e,r);return gh(n,[A1(gu(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,kn.none())])}function wH(t,e,r,...n){t=xr(t,qn);const s=xr(t.firestore,sn),i=gu(s);let a;return a=typeof(e=cn(e))=="string"||e instanceof lc?CB(i,"updateDoc",t._key,e,r,n):_B(i,"updateDoc",t._key,e),gh(s,[a.toMutation(t._key,kn.exists(!0))])}function q2(t){return gh(xr(t.firestore,sn),[new Ah(t._key,kn.none())])}function xH(t,e){const r=xr(t.firestore,sn),n=Wa(t),s=d1(t.converter,e);return gh(r,[A1(gu(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,kn.exists(!1))]).then(()=>n)}function Yg(t,...e){var r,n,s;t=cn(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||G2(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(G2(e[a])){const d=e[a];e[a]=(r=d.next)===null||r===void 0?void 0:r.bind(d),e[a+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[a+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let A,c,u;if(t instanceof qn)c=xr(t.firestore,sn),u=ah(t._key.path),A={next:d=>{e[a]&&e[a](SB(c,t,d))},error:e[a+1],complete:e[a+2]};else{const d=xr(t,Ls);c=xr(d.firestore,sn),u=d._query;const p=new uc(c);A={next:g=>{e[a]&&e[a](new Au(c,p,d,g))},error:e[a+1],complete:e[a+2]},c3(t._query)}return function(p,g,v,y){const k=new n1(y),x=new lB(g,k,v);return p.asyncQueue.enqueueAndForget(async()=>aB(await Wd(p),x)),()=>{k.Za(),p.asyncQueue.enqueueAndForget(async()=>oB(await Wd(p),x))}}(Nn(c),u,o,A)}function vH(t,e){return C7(Nn(t=xr(t,sn)),G2(e)?e:{next:e})}function gh(t,e){return function(n,s){const i=new Us;return n.asyncQueue.enqueueAndForget(async()=>ZO(await mB(n),s,i)),i.promise}(Nn(t),e)}function SB(t,e,r){const n=r.docs.get(e._key),s=new uc(t);return new ou(t,s,e._key,n,new yl(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yH(t){return g3(t,{count:f3()})}function g3(t,e){const r=xr(t.firestore,sn),n=Nn(r),s=dF(e,(i,a)=>new HF(a,i.aggregateType,i._internalFieldPath));return _7(n,t._query,s).then(i=>function(o,A,c){const u=new uc(o);return new r3(A,u,c)}(r,t,i))}class bH{constructor(e){this.kind="memory",this._onlineComponentProvider=Xl.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Jl.provider}toJSON(){return{kind:this.kind}}}class BH{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=m3(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class _H{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Jl.provider}toJSON(){return{kind:this.kind}}}class CH{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new p7(e)}}toJSON(){return{kind:this.kind}}}function IH(){return new _H}function EH(t){return new CH(t==null?void 0:t.cacheSizeBytes)}function kH(t){return new bH(t)}function SH(t){return new BH(t)}class NH{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Xl.provider,this._offlineComponentProvider={build:r=>new pB(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class FH{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Xl.provider,this._offlineComponentProvider={build:r=>new HT(r,e==null?void 0:e.cacheSizeBytes)}}}function m3(t){return new NH(t==null?void 0:t.forceOwnership)}function TH(){return new FH}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UH={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=gu(e)}set(e,r,n){this._verifyNotCommitted();const s=dl(e,this._firestore),i=d1(s.converter,r,n),a=A1(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,kn.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=dl(e,this._firestore);let a;return a=typeof(r=cn(r))=="string"||r instanceof lc?CB(this._dataReader,"WriteBatch.update",i._key,r,n,s):_B(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=dl(e,this._firestore);return this._mutations=this._mutations.concat(new Ah(r._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ct(ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dl(t,e){if((t=cn(t)).firestore!==e)throw new ct(ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3 extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=gu(r)}get(r){const n=dl(r,this._firestore),s=new aH(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Lt();const a=i[0];if(a.isFoundDocument())return new Bp(this._firestore,s,a.key,a,n.converter);if(a.isNoDocument())return new Bp(this._firestore,s,n._key,null,n.converter);throw Lt()})}set(r,n,s){const i=dl(r,this._firestore),a=d1(i.converter,n,s),o=A1(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(r,n,s,...i){const a=dl(r,this._firestore);let o;return o=typeof(n=cn(n))=="string"||n instanceof lc?CB(this._dataReader,"Transaction.update",a._key,n,s,i):_B(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=dl(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=dl(e,this._firestore),n=new uc(this._firestore);return super.get(e).then(s=>new ou(this._firestore,n,r._key,s._document,new yl(!1,!1),r.converter))}}function LH(t,e,r){t=xr(t,sn);const n=Object.assign(Object.assign({},UH),r);return function(i){if(i.maxAttempts<1)throw new ct(ze.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,a,o){const A=new Us;return i.asyncQueue.enqueueAndForget(async()=>{const c=await zT(i);new w7(i.asyncQueue,c,o,a,A).au()}),A.promise}(Nn(t),s=>e(new x3(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(){return new Xp("deleteField")}function QH(){return new vB("serverTimestamp")}function RH(...t){return new yB("arrayUnion",t)}function PH(...t){return new bB("arrayRemove",t)}function DH(t){return new BB("increment",t)}function MH(t){return new Jp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t){return Nn(t=xr(t,sn)),new w3(t,e=>gh(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(t,e){const r=Nn(t=xr(t,sn));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return ua("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(i){const a=typeof i=="string"?function(c){try{return JSON.parse(c)}catch(u){throw new ct(ze.INVALID_ARGUMENT,"Failed to parse JSON: "+(u==null?void 0:u.message))}}(i):i,o=[];if(Array.isArray(a.indexes))for(const A of a.indexes){const c=BI(A,"collectionGroup"),u=[];if(Array.isArray(A.fields))for(const d of A.fields){const p=l1("setIndexConfiguration",BI(d,"fieldPath"));d.arrayConfig==="CONTAINS"?u.push(new Kc(p,2)):d.order==="ASCENDING"?u.push(new Kc(p,0)):d.order==="DESCENDING"&&u.push(new Kc(p,1))}o.push(new Rd(Rd.UNKNOWN_ID,c,u,Pd.empty()))}return o}(e);return k7(r,n)}function BI(t,e){if(typeof t[e]!="string")throw new ct(ze.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function HH(t){var e;t=xr(t,sn);const r=_I.get(t);if(r)return r;if(((e=Nn(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new y3(t);return _I.set(t,n),n}function VH(t){b3(t,!0)}function KH(t){b3(t,!1)}function zH(t){N7(Nn(t._firestore)).then(e=>ut("deleting all persistent cache indexes succeeded")).catch(e=>ua("deleting all persistent cache indexes failed",e))}function b3(t,e){S7(Nn(t._firestore),e).then(r=>ut(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>ua(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const _I=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GH(t){var e;const r=(e=Nn(xr(t.firestore,sn))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Xw(r,fi(t._query))._t}function $H(t,e){var r;const n=dF(e,(i,a)=>new HF(a,i.aggregateType,i._internalFieldPath)),s=(r=Nn(xr(t.firestore,sn))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return s===void 0?null:tT(s,IF(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return NB.instance.onExistenceFilterMismatch(e)}}class NB{constructor(){this.Uu=new Map}static get instance(){return W0||(W0=new NB,function(r){if(Gm)throw new Error("a TestingHooksSpi instance is already set");Gm=r}(W0)),W0}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let W0=null;(function(e,r=!0){(function(s){ih=s})(sh),jd(new Zc("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new sn(new _8(n.getProvider("auth-internal")),new E8(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ct(ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Rl(hC,"4.7.3",e),Rl(hC,"4.7.3","esm2017")})();const WH=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:kB,AggregateField:Jd,AggregateQuerySnapshot:r3,Bytes:Yl,CACHE_SIZE_UNLIMITED:U7,CollectionReference:to,DocumentReference:qn,DocumentSnapshot:ou,FieldPath:lc,FieldValue:cc,Firestore:sn,FirestoreError:ct,GeoPoint:a1,LoadBundleTask:YT,PersistentCacheIndexManager:y3,Query:Ls,QueryCompositeFilterConstraint:wu,QueryConstraint:fh,QueryDocumentSnapshot:Rf,QueryEndAtConstraint:e0,QueryFieldFilterConstraint:ph,QueryLimitConstraint:Yp,QueryOrderByConstraint:u1,QuerySnapshot:Au,QueryStartAtConstraint:Zp,SnapshotMetadata:yl,Timestamp:Sn,Transaction:x3,VectorValue:Jp,WriteBatch:w3,_AutoId:Tb,_ByteString:Dn,_DatabaseId:zl,_DocumentKey:Ct,_EmptyAppCheckTokenProvider:k8,_EmptyAuthCredentialsProvider:ZN,_FieldPath:yn,_TestingHooks:qH,_cast:xr,_debugAssert:b8,_internalAggregationQueryToProtoRunAggregationQueryRequest:$H,_internalQueryToProtoQueryTarget:GH,_isBase64Available:rM,_logWarn:ua,_validateIsNotUsedTogether:WT,addDoc:xH,aggregateFieldEqual:lH,aggregateQuerySnapshotEqual:cH,and:Y7,arrayRemove:PH,arrayUnion:RH,average:AH,clearIndexedDbPersistence:R7,collection:z2,collectionGroup:F7,connectFirestoreEmulator:XT,count:f3,deleteAllPersistentCacheIndexes:zH,deleteDoc:q2,deleteField:jH,disableNetwork:M7,disablePersistentCacheIndexAutoCreation:KH,doc:Wa,documentId:K7,enableIndexedDbPersistence:j7,enableMultiTabIndexedDbPersistence:Q7,enableNetwork:D7,enablePersistentCacheIndexAutoCreation:VH,endAt:iH,endBefore:sH,ensureFirestoreConfigured:Nn,executeWrite:gh,getAggregateFromServer:g3,getCountFromServer:yH,getDoc:hH,getDocFromCache:fH,getDocFromServer:pH,getDocs:p3,getDocsFromCache:gH,getDocsFromServer:mH,getFirestore:ZT,getPersistentCacheIndexManager:HH,increment:DH,initializeFirestore:L7,limit:eH,limitToLast:tH,loadBundle:H7,memoryEagerGarbageCollector:IH,memoryLocalCache:kH,memoryLruGarbageCollector:EH,namedQuery:V7,onSnapshot:Yg,onSnapshotsInSync:vH,or:X7,orderBy:Z7,persistentLocalCache:SH,persistentMultipleTabManager:TH,persistentSingleTabManager:m3,query:$2,queryEqual:xB,refEqual:T7,runTransaction:LH,serverTimestamp:QH,setDoc:Xg,setIndexConfiguration:OH,setLogLevel:y8,snapshotEqual:dH,startAfter:nH,startAt:rH,sum:oH,terminate:O7,updateDoc:wH,vector:MH,waitForPendingWrites:P7,where:J7,writeBatch:v3},Symbol.toStringTag,{value:"Module"}));function FB(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function B3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JH=B3,_3=new Rp("auth","Firebase",B3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new kb("@firebase/auth");function XH(t,...e){rw.logLevel<=Br.WARN&&rw.warn(`Auth (${sh}): ${t}`,...e)}function Zg(t,...e){rw.logLevel<=Br.ERROR&&rw.error(`Auth (${sh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t,...e){throw TB(t,...e)}function Uo(t,...e){return TB(t,...e)}function C3(t,e,r){const n=Object.assign(Object.assign({},JH()),{[e]:r});return new Rp("auth","Firebase",n).create(e,{appName:t.name})}function Pl(t){return C3(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TB(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return _3.create(t,...e)}function nr(t,e,...r){if(!t)throw TB(e,...r)}function oA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zg(e),new Error(e)}function vA(t,e){t||oA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function YH(){return CI()==="http:"||CI()==="https:"}function CI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YH()||ZP()||"connection"in navigator)?navigator.onLine:!0}function eV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,r){this.shortDelay=e,this.longDelay=r,vA(r>e,"Short delay should be less than long delay!"),this.isMobile=JP()||eD()}get(){return ZH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UB(t,e){vA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=new t0(3e4,6e4);function xu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function dc(t,e,r,n,s={}){return E3(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Pp(Object.assign({key:t.config.apiKey},a)).slice(1),A=await t._getAdditionalHeaders();A["Content-Type"]="application/json",t.languageCode&&(A["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:A},i);return YP()||(c.referrerPolicy="no-referrer"),I3.fetch()(k3(t,t.config.apiHost,r,o),c)})}async function E3(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},tV),e);try{const s=new sV(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw J0(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[A,c]=o.split(" : ");if(A==="FEDERATED_USER_ID_ALREADY_LINKED")throw J0(t,"credential-already-in-use",a);if(A==="EMAIL_EXISTS")throw J0(t,"email-already-in-use",a);if(A==="USER_DISABLED")throw J0(t,"user-disabled",a);const u=n[A]||A.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw C3(t,u,c);no(t,u)}}catch(s){if(s instanceof CA)throw s;no(t,"network-request-failed",{message:String(s)})}}async function h1(t,e,r,n,s={}){const i=await dc(t,e,r,n,s);return"mfaPendingCredential"in i&&no(t,"multi-factor-auth-required",{_serverResponse:i}),i}function k3(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?UB(t.config,s):`${t.config.apiScheme}://${s}`}function nV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Uo(this.auth,"network-request-failed")),rV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function J0(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Uo(t,e,n);return s.customData._tokenResponse=r,s}function II(t){return t!==void 0&&t.enterprise!==void 0}class iV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return nV(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function aV(t,e){return dc(t,"GET","/v2/recaptchaConfig",xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oV(t,e){return dc(t,"POST","/v1/accounts:delete",e)}async function S3(t,e){return dc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AV(t,e=!1){const r=cn(t),n=await r.getIdToken(e),s=LB(n);nr(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Pf(Tx(s.auth_time)),issuedAtTime:Pf(Tx(s.iat)),expirationTime:Pf(Tx(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Tx(t){return Number(t)*1e3}function LB(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Zg("JWT malformed, contained fewer than 3 sections"),null;try{const s=jN(r);return s?JSON.parse(s):(Zg("Failed to decode base64 JWT payload"),null)}catch(s){return Zg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function EI(t){const e=LB(t);return nr(e,"internal-error"),nr(typeof e.exp<"u","internal-error"),nr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _p(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof CA&&lV(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function lV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pf(this.lastLoginAt),this.creationTime=Pf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nw(t){var e;const r=t.auth,n=await t.getIdToken(),s=await _p(t,S3(r,{idToken:n}));nr(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?N3(i.providerUserInfo):[],o=dV(t.providerData,a),A=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=A?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new J2(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function uV(t){const e=cn(t);await nw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dV(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function N3(t){return t.map(e=>{var{providerId:r}=e,n=FB(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hV(t,e){const r=await E3(t,{},async()=>{const n=Pp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=k3(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",I3.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function fV(t,e){return dc(t,"POST","/v2/accounts:revokeToken",xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nr(e.idToken,"internal-error"),nr(typeof e.idToken<"u","internal-error"),nr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):EI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){nr(e.length!==0,"internal-error");const r=EI(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(nr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await hV(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new xd;return n&&(nr(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(nr(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(nr(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xd,this.toJSON())}_performRefresh(){return oA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e){nr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class AA{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=FB(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new J2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await _p(this,this.stsTokenManager.getToken(this.auth,e));return nr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return AV(this,e)}reload(){return uV(this)}_assign(e){this!==e&&(nr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new AA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){nr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await nw(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(iA(this.auth.app))return Promise.reject(Pl(this.auth));const e=await this.getIdToken();return await _p(this,oV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,A,c,u;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,p=(s=r.email)!==null&&s!==void 0?s:void 0,g=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,v=(a=r.photoURL)!==null&&a!==void 0?a:void 0,y=(o=r.tenantId)!==null&&o!==void 0?o:void 0,k=(A=r._redirectEventId)!==null&&A!==void 0?A:void 0,x=(c=r.createdAt)!==null&&c!==void 0?c:void 0,I=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:N,emailVerified:U,isAnonymous:D,providerData:P,stsTokenManager:E}=r;nr(N&&E,e,"internal-error");const _=xd.fromJSON(this.name,E);nr(typeof N=="string",e,"internal-error"),ZA(d,e.name),ZA(p,e.name),nr(typeof U=="boolean",e,"internal-error"),nr(typeof D=="boolean",e,"internal-error"),ZA(g,e.name),ZA(v,e.name),ZA(y,e.name),ZA(k,e.name),ZA(x,e.name),ZA(I,e.name);const B=new AA({uid:N,auth:e,email:p,emailVerified:U,displayName:d,isAnonymous:D,photoURL:v,phoneNumber:g,tenantId:y,stsTokenManager:_,createdAt:x,lastLoginAt:I});return P&&Array.isArray(P)&&(B.providerData=P.map(j=>Object.assign({},j))),k&&(B._redirectEventId=k),B}static async _fromIdTokenResponse(e,r,n=!1){const s=new xd;s.updateFromServerResponse(r);const i=new AA({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await nw(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];nr(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?N3(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new xd;o.updateFromIdToken(n);const A=new AA({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new J2(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(A,c),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=new Map;function lA(t){vA(t instanceof Function,"Expected a class definition");let e=kI.get(t);return e?(vA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}F3.type="NONE";const SI=F3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e,r){return`firebase:${t}:${e}:${r}`}class vd{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=em(this.userKey,s.apiKey,i),this.fullPersistenceKey=em("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?AA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new vd(lA(SI),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||lA(SI);const a=em(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const d=AA._fromJSON(e,u);c!==i&&(o=d),i=c;break}}catch{}const A=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!A.length?new vd(i,e,n):(i=A[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new vd(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(T3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R3(e))return"Blackberry";if(P3(e))return"Webos";if(U3(e))return"Safari";if((e.includes("chrome/")||L3(e))&&!e.includes("edge/"))return"Chrome";if(Q3(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function T3(t=bs()){return/firefox\//i.test(t)}function U3(t=bs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L3(t=bs()){return/crios\//i.test(t)}function j3(t=bs()){return/iemobile/i.test(t)}function Q3(t=bs()){return/android/i.test(t)}function R3(t=bs()){return/blackberry/i.test(t)}function P3(t=bs()){return/webos/i.test(t)}function jB(t=bs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pV(t=bs()){var e;return jB(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gV(){return tD()&&document.documentMode===10}function D3(t=bs()){return jB(t)||Q3(t)||P3(t)||R3(t)||/windows phone/i.test(t)||j3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t,e=[]){let r;switch(t){case"Browser":r=NI(bs());break;case"Worker":r=`${NI(bs())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${sh}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const A=e(i);a(A)}catch(A){o(A)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wV(t,e={}){return dc(t,"GET","/v2/passwordPolicy",xu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=6;class vV{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:xV,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const A={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,A),this.validatePasswordCharacterOptions(e,A),A.isValid&&(A.isValid=(r=A.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),A.isValid&&(A.isValid=(n=A.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),A.isValid&&(A.isValid=(s=A.containsLowercaseLetter)!==null&&s!==void 0?s:!0),A.isValid&&(A.isValid=(i=A.containsUppercaseLetter)!==null&&i!==void 0?i:!0),A.isValid&&(A.isValid=(a=A.containsNumericCharacter)!==null&&a!==void 0?a:!0),A.isValid&&(A.isValid=(o=A.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),A}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FI(this),this.idTokenSubscription=new FI(this),this.beforeStateQueue=new mV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=lA(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await vd.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await S3(this,{idToken:e}),n=await AA._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(iA(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,A=await this.tryRedirectSignIn(e);(!a||a===o)&&(A!=null&&A.user)&&(s=A.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return nr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await nw(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(iA(this.app))return Promise.reject(Pl(this));const r=e?cn(e):null;return r&&nr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&nr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return iA(this.app)?Promise.reject(Pl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return iA(this.app)?Promise.reject(Pl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wV(this),r=new vV(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rp("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await fV(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&lA(e)||this._popupRedirectResolver;nr(r,this,"argument-error"),this.redirectPersistenceManager=await vd.create(this,[lA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(nr(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const A=e.addObserver(r,n,s);return()=>{a=!0,A()}}else{const A=e.addObserver(r);return()=>{a=!0,A()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&XH(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function mh(t){return cn(t)}class FI{constructor(e){this.auth=e,this.observer=null,this.addObserver=oD(r=>this.observer=r)}get next(){return nr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bV(t){f1=t}function O3(t){return f1.loadJS(t)}function BV(){return f1.recaptchaEnterpriseScript}function _V(){return f1.gapiScript}function CV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const IV="recaptcha-enterprise",EV="NO_RECAPTCHA";class kV{constructor(e){this.type=IV,this.auth=mh(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{aV(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(A=>{if(A.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new iV(A);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(A=>{o(A)})})}function s(i,a,o){const A=window.grecaptcha;II(A)?A.enterprise.ready(()=>{A.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(EV)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&II(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let A=BV();A.length!==0&&(A+=o),O3(A).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function TI(t,e,r,n=!1){const s=new kV(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function UI(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await TI(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await TI(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t,e){const r=Dp(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(Vl(i,e??{}))return s;no(s,"already-initialized")}return r.initialize({options:e})}function NV(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(lA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function FV(t,e,r){const n=mh(t);nr(n._canInitEmulator,n,"emulator-config-failed"),nr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=H3(e),{host:a,port:o}=TV(e),A=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${A}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),UV()}function H3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TV(t){const e=H3(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:LI(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:LI(a)}}}function LI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UV(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return oA("not implemented")}_getIdTokenResponse(e){return oA("not implemented")}_linkToIdToken(e,r){return oA("not implemented")}_getReauthenticationResolver(e){return oA("not implemented")}}async function LV(t,e){return dc(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e){return h1(t,"POST","/v1/accounts:signInWithPassword",xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QV(t,e){return h1(t,"POST","/v1/accounts:signInWithEmailLink",xu(t,e))}async function RV(t,e){return h1(t,"POST","/v1/accounts:signInWithEmailLink",xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends QB{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Cp(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Cp(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return UI(e,r,"signInWithPassword",jV);case"emailLink":return QV(e,{email:this._email,oobCode:this._password});default:no(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return UI(e,n,"signUpPassword",LV);case"emailLink":return RV(e,{idToken:r,email:this._email,oobCode:this._password});default:no(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(t,e){return h1(t,"POST","/v1/accounts:signInWithIdp",xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV="http://localhost";class lu extends QB{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new lu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):no("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=FB(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new lu(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return yd(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,yd(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,yd(e,r)}buildRequest(){const e={requestUri:PV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Pp(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MV(t){const e=Af(lf(t)).link,r=e?Af(lf(e)).deep_link_id:null,n=Af(lf(t)).deep_link_id;return(n?Af(lf(n)).link:null)||n||r||e||t}class RB{constructor(e){var r,n,s,i,a,o;const A=Af(lf(e)),c=(r=A.apiKey)!==null&&r!==void 0?r:null,u=(n=A.oobCode)!==null&&n!==void 0?n:null,d=DV((s=A.mode)!==null&&s!==void 0?s:null);nr(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(i=A.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=A.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=A.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=MV(e);try{return new RB(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this.providerId=wh.PROVIDER_ID}static credential(e,r){return Cp._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=RB.parseLink(r);return nr(n,"argument-error"),Cp._fromEmailAndCode(e,n.code,n.tenantId)}}wh.PROVIDER_ID="password";wh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends V3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends r0{constructor(){super("facebook.com")}static credential(e){return lu._fromParams({providerId:hl.PROVIDER_ID,signInMethod:hl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hl.credentialFromTaggedObject(e)}static credentialFromError(e){return hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hl.credential(e.oauthAccessToken)}catch{return null}}}hl.FACEBOOK_SIGN_IN_METHOD="facebook.com";hl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends r0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return lu._fromParams({providerId:fl.PROVIDER_ID,signInMethod:fl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return fl.credentialFromTaggedObject(e)}static credentialFromError(e){return fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return fl.credential(r,n)}catch{return null}}}fl.GOOGLE_SIGN_IN_METHOD="google.com";fl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends r0{constructor(){super("github.com")}static credential(e){return lu._fromParams({providerId:pl.PROVIDER_ID,signInMethod:pl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pl.credentialFromTaggedObject(e)}static credentialFromError(e){return pl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pl.credential(e.oauthAccessToken)}catch{return null}}}pl.GITHUB_SIGN_IN_METHOD="github.com";pl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends r0{constructor(){super("twitter.com")}static credential(e,r){return lu._fromParams({providerId:gl.PROVIDER_ID,signInMethod:gl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return gl.credentialFromTaggedObject(e)}static credentialFromError(e){return gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return gl.credential(r,n)}catch{return null}}}gl.TWITTER_SIGN_IN_METHOD="twitter.com";gl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await AA._fromIdTokenResponse(e,n,s),a=jI(n);return new Xd({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=jI(n);return new Xd({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function jI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw extends CA{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,sw.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new sw(e,r,n,s)}}function K3(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?sw._fromErrorAndOperation(t,i,e,n):i})}async function OV(t,e,r=!1){const n=await _p(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Xd._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e,r=!1){const{auth:n}=t;if(iA(n.app))return Promise.reject(Pl(n));const s="reauthenticate";try{const i=await _p(t,K3(n,s,e,t),r);nr(i.idToken,n,"internal-error");const a=LB(i.idToken);nr(a,n,"internal-error");const{sub:o}=a;return nr(t.uid===o,n,"user-mismatch"),Xd._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&no(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(t,e,r=!1){if(iA(t.app))return Promise.reject(Pl(t));const n="signIn",s=await K3(t,n,e),i=await Xd._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function VV(t,e){return z3(mh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KV(t){const e=mh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function zV(t,e,r){return iA(t.app)?Promise.reject(Pl(t)):VV(cn(t),wh.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&KV(t),n})}function GV(t,e,r,n){return cn(t).onIdTokenChanged(e,r,n)}function $V(t,e,r){return cn(t).beforeAuthStateChanged(e,r)}function qV(t,e,r,n){return cn(t).onAuthStateChanged(e,r,n)}function WV(t){return cn(t).signOut()}const iw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(iw,"1"),this.storage.removeItem(iw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=1e3,XV=10;class $3 extends G3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=D3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,A)=>{this.notifyListeners(a,A)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);gV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,XV):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},JV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}$3.type="LOCAL";const YV=$3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3 extends G3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}q3.type="SESSION";const W3=q3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new p1(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),A=await ZV(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:A})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}p1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,A)=>{const c=PB("",20);s.port1.start();const u=setTimeout(()=>{A(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{A(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(p.data.response);break;default:clearTimeout(u),clearTimeout(i),A(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(){return window}function t9(t){Lo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(){return typeof Lo().WorkerGlobalScope<"u"&&typeof Lo().importScripts=="function"}async function r9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function s9(){return J3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3="firebaseLocalStorageDb",i9=1,aw="firebaseLocalStorage",Y3="fbase_key";class n0{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function g1(t,e){return t.transaction([aw],e?"readwrite":"readonly").objectStore(aw)}function a9(){const t=indexedDB.deleteDatabase(X3);return new n0(t).toPromise()}function X2(){const t=indexedDB.open(X3,i9);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(aw,{keyPath:Y3})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(aw)?e(n):(n.close(),await a9(),e(await X2()))})})}async function QI(t,e,r){const n=g1(t,!0).put({[Y3]:e,value:r});return new n0(n).toPromise()}async function o9(t,e){const r=g1(t,!1).get(e),n=await new n0(r).toPromise();return n===void 0?null:n.value}function RI(t,e){const r=g1(t,!0).delete(e);return new n0(r).toPromise()}const A9=800,l9=3;class Z3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await X2(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>l9)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=p1._getInstance(s9()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await r9(),!this.activeServiceWorker)return;this.sender=new e9(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||n9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await X2();return await QI(e,iw,"1"),await RI(e,iw),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>QI(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>o9(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>RI(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=g1(s,!1).getAll();return new n0(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Z3.type="LOCAL";const c9=Z3;new t0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(t,e){return e?lA(e):(nr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB extends QB{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yd(e,this._buildIdpRequest())}_linkToIdToken(e,r){return yd(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return yd(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function d9(t){return z3(t.auth,new DB(t),t.bypassAuthState)}function h9(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),HV(r,new DB(t),t.bypassAuthState)}async function f9(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),OV(r,new DB(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const A={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(A))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d9;case"linkViaPopup":case"linkViaRedirect":return f9;case"reauthViaPopup":case"reauthViaRedirect":return h9;default:no(this.auth,"internal-error")}}resolve(e){vA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=new t0(2e3,1e4);class od extends eU{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,od.currentPopupAction&&od.currentPopupAction.cancel(),od.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nr(e,this.auth,"internal-error"),e}async onExecution(){vA(this.filter.length===1,"Popup operations only handle one event");const e=PB();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Uo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Uo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,od.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Uo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,p9.get())};e()}}od.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9="pendingRedirect",tm=new Map;class m9 extends eU{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=tm.get(this.auth._key());if(!e){try{const n=await w9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}tm.set(this.auth._key(),e)}return this.bypassAuthState||tm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w9(t,e){const r=y9(e),n=v9(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function x9(t,e){tm.set(t._key(),e)}function v9(t){return lA(t._redirectPersistence)}function y9(t){return em(g9,t.config.apiKey,t.name)}async function b9(t,e,r=!1){if(iA(t.app))return Promise.reject(Pl(t));const n=mh(t),s=u9(n,e),a=await new m9(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=10*60*1e3;class _9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C9(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!tU(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Uo(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B9&&this.cachedEventUids.clear(),this.cachedEventUids.has(PI(e))}saveEventToCache(e){this.cachedEventUids.add(PI(e)),this.lastProcessedEventTime=Date.now()}}function PI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tU({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tU(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I9(t,e={}){return dc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k9=/^https?/;async function S9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await I9(t);for(const r of e)try{if(N9(r))return}catch{}no(t,"unauthorized-domain")}function N9(t){const e=W2(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!k9.test(r))return!1;if(E9.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=new t0(3e4,6e4);function DI(){const t=Lo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function T9(t){return new Promise((e,r)=>{var n,s,i;function a(){DI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DI(),r(Uo(t,"network-request-failed"))},timeout:F9.get()})}if(!((s=(n=Lo().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Lo().gapi)===null||i===void 0)&&i.load)a();else{const o=CV("iframefcb");return Lo()[o]=()=>{gapi.load?a():r(Uo(t,"network-request-failed"))},O3(`${_V()}?onload=${o}`).catch(A=>r(A))}}).catch(e=>{throw rm=null,e})}let rm=null;function U9(t){return rm=rm||T9(t),rm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=new t0(5e3,15e3),j9="__/auth/iframe",Q9="emulator/auth/iframe",R9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D9(t){const e=t.config;nr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?UB(e,Q9):`https://${t.config.authDomain}/${j9}`,n={apiKey:e.apiKey,appName:t.name,v:sh},s=P9.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Pp(n).slice(1)}`}async function M9(t){const e=await U9(t),r=Lo().gapi;return nr(r,t,"internal-error"),e.open({where:document.body,url:D9(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R9,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=Uo(t,"network-request-failed"),o=Lo().setTimeout(()=>{i(a)},L9.get());function A(){Lo().clearTimeout(o),s(n)}n.ping(A).then(A,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H9=500,V9=600,K9="_blank",z9="http://localhost";class MI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G9(t,e,r,n=H9,s=V9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const A=Object.assign(Object.assign({},O9),{width:n.toString(),height:s.toString(),top:i,left:a}),c=bs().toLowerCase();r&&(o=L3(c)?K9:r),T3(c)&&(e=e||z9,A.scrollbars="yes");const u=Object.entries(A).reduce((p,[g,v])=>`${p}${g}=${v},`,"");if(pV(c)&&o!=="_self")return $9(e||"",o),new MI(null);const d=window.open(e||"",o,u);nr(d,t,"popup-blocked");try{d.focus()}catch{}return new MI(d)}function $9(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="__/auth/handler",W9="emulator/auth/handler",J9=encodeURIComponent("fac");async function OI(t,e,r,n,s,i){nr(t.config.authDomain,t,"auth-domain-config-required"),nr(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:sh,eventId:s};if(e instanceof V3){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",aD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))a[u]=d}if(e instanceof r0){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const A=await t._getAppCheckToken(),c=A?`#${J9}=${encodeURIComponent(A)}`:"";return`${X9(t)}?${Pp(o).slice(1)}${c}`}function X9({config:t}){return t.emulator?UB(t,W9):`https://${t.authDomain}/${q9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="webStorageSupport";class Y9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=W3,this._completeRedirectFn=b9,this._overrideRedirectResult=x9}async _openPopup(e,r,n,s){var i;vA((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await OI(e,r,n,W2(),s);return G9(e,a,PB())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await OI(e,r,n,W2(),s);return t9(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(vA(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await M9(e),n=new _9(e);return r.register("authEvent",s=>(nr(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Ux,{type:Ux},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ux];a!==void 0&&r(!!a),no(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=S9(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return D3()||U3()||jB()}}const Z9=Y9;var HI="@firebase/auth",VI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){nr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rK(t){jd(new Zc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;nr(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const A={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M3(t)},c=new yV(n,s,i,A);return NV(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),jd(new Zc("auth-internal",e=>{const r=mh(e.getProvider("auth").getImmediate());return(n=>new eK(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rl(HI,VI,tK(t)),Rl(HI,VI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK=5*60,sK=PN("authIdTokenMaxAge")||nK;let KI=null;const iK=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>sK)return;const s=r==null?void 0:r.token;KI!==s&&(KI=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function aK(t=Nb()){const e=Dp(t,"auth");if(e.isInitialized())return e.getImmediate();const r=SV(t,{popupRedirectResolver:Z9,persistence:[c9,YV,W3]}),n=PN("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=iK(i.toString());$V(r,a,()=>a(r.currentUser)),GV(r,o=>a(o))}}const s=QN("auth");return s&&FV(r,`http://${s}`),r}function oK(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bV({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Uo("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",oK().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rK("Browser");const AK="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",lK="zameny-b6c3f.firebaseapp.com",cK="zameny-b6c3f",uK="zameny-b6c3f.firebasestorage.app",dK="323355347910",hK="1:323355347910:web:c81f2813dce5ee9373c0c7",rU={apiKey:AK,authDomain:lK,projectId:cK,storageBucket:uK,messagingSenderId:dK,appId:hK};let ow;l8().length?ow=Nb():ow=VN(rU);const us=ZT(ow),Sa=aK(ow);rU.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const Jr={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules",DUTY_ZONES:"duty_zones",DUTY_SCHEDULE:"duty_schedule",NUTRITION:"nutrition_records",ABSENTEEISM:"absenteeism_records"},_c=new Map,fK=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},Ad=t=>{if(t==null)return null;if(typeof t=="object"){if(Array.isArray(t))return t.map(r=>Ad(r)).filter(r=>r!==void 0);const e={};for(const[r,n]of Object.entries(t)){const s=Ad(n);s!==void 0&&(e[r]=s)}return e}return t},nU=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return t===e;if(typeof t!=typeof e)return!1;if(typeof t=="object"){const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r)if(!n.includes(s)||!nU(t[s],e[s]))return!1;return!0}return!1};async function pK(t,e={}){try{return await t()}catch(r){if(console.error("Firestore read error (likely quota):",r),e.throwOnError)throw r;return{docs:[]}}}const ns={deleteDocument:async(t,e)=>{if(us)try{await q2(Wa(us,t,e));const r=_c.get(t);r&&r.delete(e)}catch(r){throw console.error(`Failed to delete document ${t}/${e}:`,r),r}},syncCollection:async(t,e)=>{if(!us)return;let r=_c.get(t);r||(r=new Map,_c.set(t,r));const n=new Map;e.forEach(i=>{i&&i.id&&n.set(i.id,Ad(i))});const s=[];if(r.forEach((i,a)=>{n.has(a)||s.push({type:"delete",id:a})}),n.forEach((i,a)=>{const o=r.get(a);(!o||!nU(o,i))&&s.push({type:o?"update":"create",item:i,id:a})}),s.length!==0)try{const i=fK(s,450);for(const a of i){const o=v3(us);a.forEach(A=>{const c=Wa(us,t,A.id);A.type==="delete"?(o.delete(c),r.delete(A.id)):(o.set(c,A.item,{merge:!0}),r.set(A.id,A.item))}),await o.commit()}}catch(i){throw console.error(`Failed to sync ${t}:`,i),i}},syncCacheWithDatabase:async t=>{if(us){if(_c.has(t)&&_c.get(t).size>0){console.log(`Cache already exists for ${t}, skipping sync`);return}try{const e=$2(z2(us,t)),r=await pK(async()=>await p3(e),{throwOnError:!0}),n=new Map;r.docs.forEach(s=>{n.set(s.id,s.data())}),_c.set(t,n),console.log(`Cache synced for ${t} (${n.size} items)`)}catch(e){console.error(`Failed to sync cache for ${t}:`,e)}}},save:async(t,e)=>{if(!us||!(e||(Sa==null?void 0:Sa.currentUser)))return;const n=[];t.teachers&&n.push(ns.syncCollection(Jr.TEACHERS,t.teachers)),t.subjects&&n.push(ns.syncCollection(Jr.SUBJECTS,t.subjects)),t.classes&&n.push(ns.syncCollection(Jr.CLASSES,t.classes)),t.rooms&&n.push(ns.syncCollection(Jr.ROOMS,t.rooms)),t.schedule&&n.push(ns.syncCollection(Jr.SCHEDULE_1,t.schedule)),t.schedule2&&n.push(ns.syncCollection(Jr.SCHEDULE_2,t.schedule2)),t.substitutions&&n.push(ns.syncCollection(Jr.SUBSTITUTIONS,t.substitutions)),t.dutyZones&&n.push(ns.syncCollection(Jr.DUTY_ZONES,t.dutyZones)),t.dutySchedule&&n.push(ns.syncCollection(Jr.DUTY_SCHEDULE,t.dutySchedule)),t.nutritionRecords&&n.push(ns.syncCollection(Jr.NUTRITION,t.nutritionRecords)),t.absenteeismRecords&&n.push(ns.syncCollection(Jr.ABSENTEEISM,t.absenteeismRecords)),t.settings&&n.push(Xg(Wa(us,Jr.CONFIG,"settings"),Ad(t.settings),{merge:!0})),t.bellSchedule&&n.push(Xg(Wa(us,Jr.CONFIG,"bells"),Ad({items:t.bellSchedule}))),await Promise.all(n)},subscribe:(t,e)=>{if(!us)return()=>{};let r={},n=!0,s;const i=()=>{clearTimeout(s),s=setTimeout(async()=>{const A={...r};n&&(n=!1,console.log("Skipping initial cache synchronization to save Firestore quota")),t(A)},50)},a=[],o=(A,c)=>{const u=$2(z2(us,A));return Yg(u,d=>{const p=d.docs.map(v=>v.data()),g=new Map;p.forEach(v=>{v&&v.id&&g.set(v.id,v)}),_c.set(A,g),p.sort((v,y)=>{const k=typeof v.order=="number"?v.order:999999,x=typeof y.order=="number"?y.order:999999;return k-x}),r[c]=p,i()},d=>{console.warn(`Error reading ${A}:`,d)})};return a.push(o(Jr.TEACHERS,"teachers")),a.push(o(Jr.SUBJECTS,"subjects")),a.push(o(Jr.CLASSES,"classes")),a.push(o(Jr.ROOMS,"rooms")),a.push(o(Jr.SCHEDULE_1,"schedule")),a.push(o(Jr.SCHEDULE_2,"schedule2")),a.push(o(Jr.SUBSTITUTIONS,"substitutions")),a.push(o(Jr.DUTY_ZONES,"dutyZones")),a.push(o(Jr.DUTY_SCHEDULE,"dutySchedule")),a.push(o(Jr.NUTRITION,"nutritionRecords")),a.push(o(Jr.ABSENTEEISM,"absenteeismRecords")),a.push(Yg(Wa(us,Jr.CONFIG,"settings"),A=>{A.exists()&&(r.settings={...Qi.settings,...A.data()},i())})),a.push(Yg(Wa(us,Jr.CONFIG,"bells"),A=>{if(A.exists()){const c=A.data();r.bellSchedule=c.items||Qi.bellSchedule,i()}})),()=>{a.forEach(A=>A()),clearTimeout(s)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r;const s=(i=new Date)=>{const a=i.getFullYear(),o=String(i.getMonth()+1).padStart(2,"0"),A=String(i.getDate()).padStart(2,"0");return`${a}-${o}-${A}`};n.download=`gymnasium_backup_${s()}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!us)throw new Error("Database not initialized");const r=Sa==null?void 0:Sa.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects.map(i=>({id:i.id,name:i.name,color:i.color,difficulty:i.difficulty,requiredRoomType:i.requiredRoomType,order:i.order})),teachers:e.teachers.map(i=>({id:i.id,name:i.name,subjectIds:i.subjectIds,shifts:i.shifts,unavailableDates:[],telegramChatId:"",absenceReasons:void 0,birthDate:void 0,order:i.order})),classes:e.classes.map(i=>({id:i.id,name:i.name,shift:i.shift,studentsCount:i.studentsCount,order:i.order})),rooms:e.rooms,schedule:e.schedule,schedule2:e.schedule2,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId,bellPresets:e.settings.bellPresets,semesterConfig:e.settings.semesterConfig},dutyZones:e.dutyZones,dutySchedule:e.dutySchedule},s=Ad(n);await Xg(Wa(us,Jr.PUBLIC,t),s)},getPublicData:async t=>{if(!us)return null;try{const e=await Hg(()=>Promise.resolve().then(()=>WH),void 0).then(r=>r.getDoc(Wa(us,Jr.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{us&&await q2(Wa(us,Jr.PUBLIC,t))}},sU=z.createContext(void 0),gK="admin@gymnasium22.com",mK=({children:t})=>{const[e,r]=z.useState(null),[n,s]=z.useState(null),[i,a]=z.useState(!0);z.useEffect(()=>{if(!Sa){console.warn("Firebase Auth is not initialized."),a(!1);return}const c=qV(Sa,u=>{r(u),u?u.email===gK?s("admin"):u.email==="canteen@gymnasium22.com"?s("canteen"):u.email&&u.email.includes("@")?s("teacher"):s("guest"):s(null),a(!1)});return()=>c()},[]);const o=async()=>{Sa&&await WV(Sa),s(null)},A=()=>{s("guest"),a(!1)};return l.jsx(sU.Provider,{value:{user:e,role:n,loading:i,logout:o,setGuestRole:A},children:t})},NA=()=>{const t=z.useContext(sU);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Gs=()=>crypto.randomUUID(),s0=(t,e)=>{const r=t.getMonth(),n=e==null?void 0:e.semesterConfig;if(n){if(n.secondSemesterMonths.includes(r))return 2;if(n.firstSemesterMonths.includes(r))return 1}return r>=0&&r<=4?2:1},iU=(t,e)=>s0(t,e.settings)===2?e.schedule2||[]:e.schedule||[],uA=(t=new Date)=>{const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${n}`},wK=uA,aU=z.createContext(void 0),Wh="gym_data_local_backup_v2",zI="gym_sync_queue_backup",Jh=()=>{try{const t="__localStorage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}},ff=(t,e)=>{try{const r=new Blob([e]).size,n=4*1024*1024;return r>n?(console.warn("Data too large for localStorage, skipping backup"),!1):(localStorage.setItem(t,e),!0)}catch(r){return console.warn("Failed to save to localStorage:",r),!1}},oU=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},ts={items:[],isProcessing:!1,load:()=>{const t=oU(zI);if(t)try{const e=JSON.parse(t);Array.isArray(e)&&(ts.items=e,console.log(`Loaded ${e.length} pending items from sync queue`))}catch(e){console.warn("Failed to parse persistent sync queue",e)}},save:()=>{try{ff(zI,JSON.stringify(ts.items))}catch(t){console.warn("Failed to save sync queue",t)}},add:t=>{const e=Gs();ts.items.push({id:e,data:t,timestamp:Date.now(),retryCount:0}),ts.save(),console.log("   :",e)},process:async t=>{if(ts.isProcessing||!navigator.onLine)return;ts.isProcessing=!0;const e=[];try{for(const r of ts.items){if(!navigator.onLine)break;try{await ns.save(r.data,t),e.push(r.id),console.log(" :",r.id)}catch(n){if(r.retryCount++,(n==null?void 0:n.code)==="resource-exhausted"){console.warn("Quota exhausted, keeping item in queue:",r.id);break}r.retryCount>=10?(console.error("    10 :",r.id),e.push(r.id)):console.log(`   ${r.retryCount}/10:`,r.id)}}}finally{e.length>0&&(ts.items=ts.items.filter(r=>!e.includes(r.id)),ts.save()),ts.isProcessing=!1,ts.items.length>0&&navigator.onLine&&setTimeout(()=>ts.process(t),5e3)}}},el={log:(t,e)=>{console.error(t,e)},warn:(t,e)=>{console.warn(t,e)},alert:(t,e)=>{console.error(t,e),alert(` ${t}`)},firebase:(t,e)=>{const r=t==null?void 0:t.code;let n="  .";switch(r){case"resource-exhausted":n="     .";break;case"permission-denied":n="  .";break;case"unavailable":n="  .  .";break;case"deadline-exceeded":n="   .";break;default:n=` ${e}: ${(t==null?void 0:t.message)||" "}`}console.error(`Firebase ${e}:`,t),alert(n)},firebaseOffline:(t,e,r)=>{const n=window.innerWidth<768,s=n?" .     .":` ${e}.         .`;console.warn(`Firebase ${e} ():`,t),n||alert(s),ts.add(r)}},AU=({children:t,initialData:e})=>{const[r,n]=z.useState(Qi),[s,i]=z.useState(!0),[a,o]=z.useState(!1),[A,c]=z.useState([]),[u,d]=z.useState(-1),{user:p,role:g,loading:v}=NA();z.useEffect(()=>{if(ts.load(),e){n(e),c([e]),d(0),i(!1);return}if(v)return;let U=null;if(Jh()&&(U=oU(Wh),U))try{const _=JSON.parse(U);_&&_.teachers&&(n(B=>({...B,..._})),console.log("Loaded from local storage backup"))}catch(_){el.log("Error parsing local backup",_)}const D=p&&g!=="guest";if(!(p||g==="guest")){n(Qi),i(!1);return}if(!D){U||n(Qi),i(!1);return}i(!0);let E;try{E=ns.subscribe(_=>{n(B=>{const j={...B,..._};return j.teachers||(j.teachers=[]),j.teachers=j.teachers.map(S=>({telegramChatId:"",...S,shifts:S.shifts||[et.First,et.Second]})),j.schedule||(j.schedule=[]),j.schedule2||(j.schedule2=[]),j.substitutions||(j.substitutions=[]),j.bellSchedule||(j.bellSchedule=Mm),(!j.dutyZones||j.dutyZones.length===0)&&(j.dutyZones=TN),j.dutySchedule||(j.dutySchedule=[]),j.nutritionRecords||(j.nutritionRecords=[]),j.absenteeismRecords||(j.absenteeismRecords=[]),j.settings?j.settings={...Qi.settings,...j.settings}:j.settings=Qi.settings,ts.items.length>0&&(console.log(`Applying ${ts.items.length} pending changes to incoming data`),ts.items.forEach(S=>{Object.assign(j,S.data)})),Jh()&&ff(Wh,JSON.stringify(j)),c(S=>S.length===0?[j]:S),j}),i(!1)},_=>{el.log("Failed to subscribe to data:",_),i(!1)})}catch(_){el.log("Failed to initialize subscription:",_),i(!1),E=void 0}return()=>{E&&E()}},[e,p,g,v]);const y=z.useCallback(async(U,D=!0)=>{const P=g==="guest";o(!0);try{const E={...r,...U};if(n(E),Jh()&&ff(Wh,JSON.stringify(E)),!e&&p&&!P)try{await ns.save(U,p)}catch(_){el.firebaseOffline(_," ",U)}else P&&console.warn("       .");if(D){const _=A.slice(0,u+1);_.push(E);const B=50;if(_.length>B){const j=_.length-B;_.splice(0,j),d(B-1)}else d(_.length-1);c(_)}}finally{o(!1)}},[r,A,u,p,g,e]);z.useEffect(()=>{const U=()=>{ts.items.length>0&&p&&g!=="guest"&&!e&&(console.log(` .  ${ts.items.length} ...`),ts.process(p))};return window.addEventListener("online",U),()=>window.removeEventListener("online",U)},[p,g,e]);const k=z.useCallback(async()=>{d(U=>{if(U>0){const D=A[U-1];if(n(D),Jh()&&ff(Wh,JSON.stringify(D)),!e&&p)try{ns.save(D,p).catch(P=>el.firebase(P," "))}catch(P){el.firebase(P," ")}return U-1}return U})},[A,e,p]),x=z.useCallback(async()=>{d(U=>{if(U<A.length-1){const D=A[U+1];if(n(D),Jh()&&ff(Wh,JSON.stringify(D)),!e&&p)try{ns.save(D,p).catch(P=>el.firebase(P," "))}catch(P){el.firebase(P," ")}return U+1}return U})},[A,e,p]),I=z.useCallback(async()=>{await y(Qi)},[y]),N=z.useMemo(()=>({data:r,isLoading:s,isSaving:a,saveData:y,resetData:I,undo:k,redo:x,canUndo:u>0,canRedo:u<A.length-1}),[r,s,a,y,I,k,x,u]);return l.jsx(aU.Provider,{value:N,children:t})},m1=()=>{const t=z.useContext(aU);if(!t)throw new Error("useFullData must be used within DataProvider");return t},lU=z.createContext(void 0),cU=z.createContext(void 0),uU=({children:t})=>{const{data:e,saveData:r}=m1(),n=z.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings,dutyZones:e.dutyZones}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings,e.dutyZones]),s=z.useCallback(async(a,o)=>{await r(a,o)},[r]),i=z.useMemo(()=>({...n,saveStaticData:s}),[n,s]);return l.jsx(lU.Provider,{value:i,children:t})},dU=({children:t})=>{const{data:e,saveData:r}=m1(),i=s0(new Date,e.settings)===2?e.schedule2||[]:e.schedule||[],a=z.useCallback(async(u,d)=>{u===1?await r({schedule:d}):await r({schedule2:d})},[r]),o=z.useCallback(async(u,d)=>{await r(u,d)},[r]),A=z.useMemo(()=>({schedule:i,schedule1:e.schedule,schedule2:e.schedule2||[],substitutions:e.substitutions,dutySchedule:e.dutySchedule,nutritionRecords:e.nutritionRecords||[],absenteeismRecords:e.absenteeismRecords||[],saveSemesterSchedule:a,saveScheduleData:o}),[i,e.schedule,e.schedule2,e.substitutions,e.dutySchedule,e.nutritionRecords,e.absenteeismRecords,a,o]),c=z.useMemo(()=>({...A,saveScheduleData:o}),[A,o]);return l.jsx(cU.Provider,{value:c,children:t})},Ki=()=>{const t=z.useContext(lU);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=m1();return{...{...t,subjects:t.subjects||[],teachers:t.teachers||[],classes:t.classes||[],rooms:t.rooms||[],bellSchedule:t.bellSchedule||[],settings:t.settings||Qi.settings,dutyZones:t.dutyZones||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},FA=()=>{const t=z.useContext(cU);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=m1();return{...{...t,schedule:t.schedule||[],schedule1:t.schedule1||[],schedule2:t.schedule2||[],substitutions:t.substitutions||[],dutySchedule:t.dutySchedule||[],nutritionRecords:t.nutritionRecords||[],absenteeismRecords:t.absenteeismRecords||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},GI={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Snowflake:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),l.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),l.jsx("path",{d:"m20 16-4-4 4-4"}),l.jsx("path",{d:"m4 8 4 4-4 4"}),l.jsx("path",{d:"m16 4-4 4-4-4"}),l.jsx("path",{d:"m8 20 4-4 4 4"})]}),Shield:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Zap:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Coffee:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),l.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),l.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),l.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),Edit:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Info:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),l.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),WifiOff:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),l.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),l.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),l.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),l.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),l.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),l.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]}),Cloud:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17.5 19c0-1.7-1.3-3-3-3h-1.1c-.2-2.3-2.1-4-4.4-4-2.5 0-4.5 1.8-4.9 4.2-2.3.2-4.1 2.2-4.1 4.5 0 2.5 2 4.5 4.5 4.5h8.5c2.5 0 4.5-2 4.5-4.5z"})}),CloudRain:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"21"}),l.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"21"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"23"}),l.jsx("path",{d:"M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"})]}),Wind:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"})}),Droplets:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"}),l.jsx("path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"})]}),Thermometer:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"})})},me=({name:t,size:e=24,className:r="",...n})=>{const s=GI[t]||GI.Info;return l.jsx(s,{width:e,height:e,className:r,...n})},hU=z.createContext(void 0),xK=({children:t})=>{const[e,r]=z.useState([]),n=i=>{const a=Gs();r(o=>[...o,{...i,id:a}])},s=i=>{r(a=>a.filter(o=>o.id!==i))};return l.jsxs(hU.Provider,{value:{toasts:e,addToast:n,removeToast:s},children:[t,l.jsx(vK,{toasts:e,onRemoveToast:s})]})},w1=()=>{const t=z.useContext(hU);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},vK=({toasts:t,onRemoveToast:e})=>{const r=()=>{t.forEach(n=>e(n.id))};return t.length===0?null:l.jsxs("div",{className:"fixed top-4 right-4 z-[60] space-y-2",children:[t.length>1&&l.jsx("div",{className:"flex justify-end mb-2",children:l.jsxs("button",{onClick:r,className:"text-xs text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 underline transition-colors",children:["  (",t.length,")"]})}),t.map(n=>l.jsx(yK,{id:n.id,type:n.type,title:n.title,message:n.message,duration:n.duration,onClose:e},n.id))]})},$n=({isOpen:t,onClose:e,title:r,children:n,maxWidth:s="max-w-lg"})=>(z.useEffect(()=>{if(!t)return;const i=a=>{a.key==="Escape"&&e()};return document.addEventListener("keydown",i),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",i),document.body.style.overflow=""}},[t,e]),t?l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:i=>i.target===i.currentTarget&&e(),children:l.jsxs("div",{className:`bg-white/90 dark:bg-dark-800/90 rounded-3xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-200/50 dark:border-slate-700/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:l.jsx(me,{name:"X",size:20})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),yK=({id:t,type:e,title:r,message:n,duration:s=5e3,onClose:i})=>{const[a,o]=z.useState(!0),[A,c]=z.useState(!1),u=z.useRef(null);z.useEffect(()=>(u.current=setTimeout(()=>{d()},s),()=>{u.current&&clearTimeout(u.current)}),[]);const d=()=>{u.current&&(clearTimeout(u.current),u.current=null),c(!0),setTimeout(()=>{o(!1),i(t)},300)};if(!a)return null;const g=(()=>{switch(e){case"success":return{bg:"bg-success-50 dark:bg-success-900/20 border-success-200 dark:border-success-800",icon:"text-success-600 dark:text-success-400",title:"text-success-800 dark:text-success-200",message:"text-success-700 dark:text-success-300"};case"warning":return{bg:"bg-warning-50 dark:bg-warning-900/20 border-warning-200 dark:border-warning-800",icon:"text-warning-600 dark:text-warning-400",title:"text-warning-800 dark:text-warning-200",message:"text-warning-700 dark:text-warning-300"};case"danger":return{bg:"bg-danger-50 dark:bg-danger-900/20 border-danger-200 dark:border-danger-800",icon:"text-danger-600 dark:text-danger-400",title:"text-danger-800 dark:text-danger-200",message:"text-danger-700 dark:text-danger-300"};case"info":default:return{bg:"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800",icon:"text-primary-600 dark:text-primary-400",title:"text-primary-800 dark:text-primary-200",message:"text-primary-700 dark:text-primary-300"}}})(),v=e==="success"?"CheckCircle":e==="warning"?"AlertTriangle":e==="danger"?"XCircle":"Info";return l.jsx("div",{className:`max-w-sm w-full animate-slide-in ${A?"animate-fade-out":""}`,children:l.jsx("div",{className:`modern-card border p-4 ${g.bg}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`flex-shrink-0 ${g.icon}`,children:l.jsx(me,{name:v,size:20})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:`text-sm font-semibold ${g.title}`,children:r}),n&&l.jsx("p",{className:`text-sm mt-1 ${g.message}`,children:n})]}),l.jsx("button",{onClick:d,className:"flex-shrink-0 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors","aria-label":" ",children:l.jsx(me,{name:"X",size:16})})]})})})},bK=({x:t,y:e,onClose:r,actions:n})=>{const s=z.useRef(null);if(z.useEffect(()=>{if(t===null||e===null)return;const o=c=>{s.current&&!s.current.contains(c.target)&&r()},A=c=>{c.key==="Escape"&&r()};return window.addEventListener("click",o,!0),document.addEventListener("keydown",A),()=>{window.removeEventListener("click",o,!0),document.removeEventListener("keydown",A)}},[t,e,r]),t===null||e===null)return null;const i=window.innerWidth-t<200?t-200:t,a={top:e,left:i};return l.jsx("div",{ref:s,className:"fixed z-[100] bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-xl rounded-2xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:a,children:n.map(o=>l.jsxs("button",{onClick:A=>{A.stopPropagation(),o.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${o.color||"text-slate-700 dark:text-slate-200"}`,children:[o.icon&&l.jsx(me,{name:o.icon,size:16}),o.label]},o.id||o.label))})},BK=()=>{const{bellSchedule:t,isSaving:e}=Ki(),[r,n]=z.useState("..."),[s,i]=z.useState(""),[a,o]=z.useState(0),[A,c]=z.useState("bg-slate-500"),[u,d]=z.useState(""),[p,g]=z.useState(navigator.onLine);return z.useEffect(()=>{const v=()=>g(!0),y=()=>g(!1);return window.addEventListener("online",v),window.addEventListener("offline",y),()=>{window.removeEventListener("online",v),window.removeEventListener("offline",y)}},[]),z.useEffect(()=>{const v=()=>{const k=new Date,x=k.getDay(),N=[null,ur.Monday,ur.Tuesday,ur.Wednesday,ur.Thursday,ur.Friday,null][x];if(d(N||""),!N){n(" "),i(" "),c("bg-slate-400"),o(0);return}const U=B=>{const[j,S]=B.split(":").map(Number);return j*60+S},D=k.getHours()*60+k.getMinutes();let P=t.filter(B=>B.day===N);P.length===0&&(P=t.filter(B=>B.day==="default")),P.sort((B,j)=>U(B.start)-U(j.start));let E=null,_=null;for(let B=0;B<P.length;B++){const j=P[B],S=U(j.start),L=U(j.end);if(D>=S&&D<L){E={...j,duration:L-S,passed:D-S};break}if(B<P.length-1){const T=P[B+1],Z=U(T.start);if(D>=L&&D<Z){const ye=Z-L;if(ye>0&&ye<60){const _e=D-L,Ce=Z-D;_={nextLesson:T,duration:ye,passed:_e,remaining:Ce};break}}}}if(E){n(`${E.period} `);const B=Math.max(0,E.duration-E.passed);i(`${E.shift===et.First?"1 ":"2 "}  . ${B} `);const j=E.duration>0?E.passed/E.duration*100:0;o(Math.min(100,Math.max(0,j))),c("bg-indigo-600")}else if(_){n(""),i(` ${_.remaining}  ${_.nextLesson.period} `),c("bg-amber-500");const B=_.duration>0?_.passed/_.duration*100:0;o(Math.min(100,Math.max(0,B)))}else n(" "),i(" "),c("bg-slate-400"),o(0)};v();const y=setInterval(v,6e4);return()=>clearInterval(y)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-20 md:mb-4 p-4 rounded-2xl flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${A}`}),!p&&l.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-amber-500 text-white text-xs font-bold py-1 px-3 rounded-t-2xl text-center flex items-center justify-center gap-1",children:[l.jsx(me,{name:"WifiOff",size:12}),l.jsx("span",{children:"      "})]}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:u}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:r}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:s})]}),l.jsxs("div",{className:`w-8 h-8 rounded-full ${A} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center relative`,children:[e&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(me,{name:"Loader",size:16,className:"animate-spin text-indigo-600"})}),!p&&!e&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(me,{name:"WifiOff",size:16,className:"text-amber-500"})}),l.jsx(me,{name:e?"Loader":p?"Clock":"WifiOff",size:16,className:e?"text-indigo-600 animate-spin":p?A==="bg-indigo-600"?"text-indigo-600":A==="bg-amber-500"?"text-amber-500":"text-slate-400":"text-amber-500"})]})]}),a>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${A} transition-all duration-1000`,style:{width:`${a}%`}})})]})},Df=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:s})=>{var v;const[i,a]=z.useState(!1),[o,A]=z.useState(""),c=z.useRef(null);z.useEffect(()=>{const y=x=>{c.current&&!c.current.contains(x.target)&&a(!1)},k=x=>{x.key==="Escape"&&a(!1)};return document.addEventListener("mousedown",y),document.addEventListener("keydown",k),()=>{document.removeEventListener("mousedown",y),document.removeEventListener("keydown",k)}},[]);const d=((v=(s?t.flatMap(y=>y.options):t).find(y=>y.value===e))==null?void 0:v.label)||n,p=s?t.map(y=>({...y,options:y.options.filter(k=>k.label.toLowerCase().includes(o.toLowerCase()))})).filter(y=>y.options.length>0):null,g=s?null:t.filter(y=>y.label.toLowerCase().includes(o.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>a(!i),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:d}),l.jsx(me,{name:"Filter",size:14,className:"text-slate-400"})]}),i&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-96 overflow-auto custom-scrollbar",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800 z-10",children:l.jsx("input",{autoFocus:!0,value:o,onChange:y=>A(y.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s&&p?p.map(y=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50 sticky top-10 z-0",children:y.label}),y.options.map(k=>l.jsx("div",{onClick:()=>{r(k.value),a(!1),A("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===k.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:k.label},k.value))]},y.id||y.label)):g?g.map(y=>l.jsx("div",{onClick:()=>{r(y.value),a(!1),A("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===y.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:y.label},y.value)):null]})]})},X0=({children:t,className:e=""})=>{const r=Co.Children.toArray(t);return l.jsx("div",{className:e,children:r.map((n,s)=>{const i=Co.isValidElement(n)&&n.key?n.key:s;return l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:n},i)})})},Lx=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return l.jsx("div",{className:"space-y-3",children:t.map(s=>{const i=s.id??s.label,a=Math.min(100,Math.max(0,s.value/n*100));return l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:s.label,children:s.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${a}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:s.value})]},i)})})},_K=({onMenuClick:t,role:e})=>{const{settings:r}=Ki(),n=e==="admin",s=e==="teacher",i=e==="canteen",a=e==="guest",o=n||s,A=n||s||a,c=n||s||i,d=s0(new Date,r)===2?"/schedule2":"/schedule";return l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-t border-slate-200 dark:border-slate-700 z-40 pb-safe md:hidden transition-all duration-300 no-select",children:l.jsxs("div",{className:"flex justify-around items-center h-20",children:[o&&l.jsxs(_o,{to:"/dashboard",className:({isActive:p})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${p?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[l.jsx(me,{name:"Home",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),A&&l.jsxs(_o,{to:d,className:({isActive:p})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${p?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[l.jsx(me,{name:"Calendar",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),c&&l.jsxs(_o,{to:"/nutrition",className:({isActive:p})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${p?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[l.jsx(me,{name:"Coffee",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),n&&l.jsxs(_o,{to:"/substitutions",className:({isActive:p})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${p?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[l.jsx(me,{name:"Repeat",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),l.jsxs("button",{onClick:t,className:"flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 active:text-indigo-600 active:bg-indigo-50/50 dark:active:bg-indigo-900/20 transition-all duration-300 flex-1 h-full hover:bg-slate-100/50 dark:hover:bg-slate-700/30",children:[l.jsx(me,{name:"Menu",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]})]})})},CK=[{id:"search",label:"",visible:!0},{id:"substitutions",label:"",visible:!0},{id:"occupancy",label:"",visible:!0},{id:"conflicts",label:"",visible:!0},{id:"birthdays",label:"",visible:!0},{id:"notes",label:"",visible:!0}],IK=()=>{const{settings:t}=Ki(),[e,r]=z.useState(null),[n,s]=z.useState([]),[i,a]=z.useState(!0),[o,A]=z.useState(null),c=t.weatherApiKey,u=t.weatherCity||"Minsk,BY";if(z.useEffect(()=>{(async()=>{if(!c){a(!1);return}const v="gym_weather_cache",y=30*60*1e3,k=localStorage.getItem(v);if(k)try{const x=JSON.parse(k);if(Date.now()-x.timestamp<y){r(x.current),s(x.forecast),a(!1);return}}catch{console.warn("Weather cache invalid")}try{const x=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${u}&units=metric&lang=ru&appid=${c}`);if(!x.ok)throw new Error("Weather API Error");const I=await x.json(),N=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${u}&units=metric&lang=ru&appid=${c}`);if(!N.ok)throw new Error("Forecast API Error");const U=await N.json(),D=[],P=new Set,E=new Date().toISOString().split("T")[0];for(const _ of U.list){const B=_.dt_txt.split(" ")[0];if(B!==E&&!P.has(B)&&(D.push(_),P.add(B),D.length>=3))break}r(I),s(D),a(!1),localStorage.setItem(v,JSON.stringify({timestamp:Date.now(),current:I,forecast:D}))}catch(x){console.error(x),A("  "),a(!1)}})()},[c,u]),!c)return null;if(i)return l.jsx("div",{className:"h-32 w-full bg-slate-100 dark:bg-slate-800 rounded-3xl animate-pulse"});if(o||!e)return null;const d=g=>g.startsWith("01")?"Sun":g.startsWith("02")||g.startsWith("03")||g.startsWith("04")?"Cloud":g.startsWith("09")||g.startsWith("10")?"CloudRain":g.startsWith("11")?"Snowflake":g.startsWith("50")?"Wind":"Cloud",p=(()=>{const g=e.weather[0].icon;return g.endsWith("n")?"bg-gradient-to-br from-indigo-900 to-purple-900":g.startsWith("01")||g.startsWith("02")?"bg-gradient-to-br from-sky-400 to-blue-600":g.startsWith("09")||g.startsWith("10")||g.startsWith("11")?"bg-gradient-to-br from-slate-500 to-slate-700":"bg-gradient-to-br from-blue-300 to-slate-400"})();return l.jsxs("div",{className:`p-5 rounded-3xl relative overflow-hidden shadow-lg text-white ${p} flex flex-col justify-center h-full`,children:[l.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-white/10 rounded-full blur-2xl pointer-events-none"}),l.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-black",children:[Math.round(e.main.temp),""]}),l.jsx("div",{className:"text-xs opacity-90 font-medium",children:e.name})]}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx(me,{name:d(e.weather[0].icon),size:36,className:"text-white/90 drop-shadow-md mb-1"}),l.jsx("div",{className:"text-[10px] opacity-75 capitalize",children:e.weather[0].description})]})]}),l.jsx("div",{className:"mt-3 pt-2 border-t border-white/20 flex justify-between text-center relative z-10",children:n.slice(0,3).map((g,v)=>l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[9px] opacity-80 uppercase font-bold",children:new Date(g.dt*1e3).toLocaleDateString("ru-RU",{weekday:"short"})}),l.jsxs("span",{className:"text-xs font-bold",children:[Math.round(g.main.temp),""]})]},v))})]})},EK=()=>{var ke;const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:s,settings:i}=Ki(),{schedule:a,substitutions:o,nutritionRecords:A}=FA(),{role:c}=NA(),u=Qp(),{addToast:d}=w1(),[p,g]=z.useState(localStorage.getItem("gym_notes")||""),[v]=z.useState(new Date),[y,k]=z.useState(""),[x,I]=z.useState([]),[N,U]=z.useState(!1),[D,P]=z.useState(!1),[E,_]=z.useState(()=>{const ce=localStorage.getItem("gym_dashboard_widgets_v4");return ce?JSON.parse(ce):CK}),[B,j]=z.useState(!1),[S,L]=z.useState(!1),[T,Z]=z.useState(""),[ye,_e]=z.useState(!1),Ce=ce=>ce.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<[^>]*>/g,"").slice(0,1e4),ie=ce=>{const R=Ce(ce);g(R),P(!0)},we=()=>{localStorage.setItem("gym_notes",p),P(!1),d({type:"success",title:" ",message:"     ",duration:3e3})};z.useEffect(()=>{if(!D)return;const ce=setTimeout(()=>{localStorage.setItem("gym_notes",p),P(!1)},3e3);return()=>clearTimeout(ce)},[p,D]);const Pe=z.useMemo(()=>{const ce=v.getHours();return ce<5?" ":ce<12?" ":ce<18?" ":" "},[v]),Se=z.useMemo(()=>wK(v),[v]),M=z.useMemo(()=>{const ce=v.getDay();return ce===0||ce===6?null:Lr[ce-1]},[v]),H=z.useMemo(()=>{const ce=new Date,R=ce.getHours()*60+ce.getMinutes(),De=[null,ur.Monday,ur.Tuesday,ur.Wednesday,ur.Thursday,ur.Friday,null][ce.getDay()];if(!De)return{type:"weekend",label:""};let st=s.filter(Be=>Be.day===De);st.length===0&&(st=s.filter(Be=>Be.day==="default"));const ge=Be=>{const[ve,de]=Be.split(":").map(Number);return ve*60+de};st.sort((Be,ve)=>ge(Be.start)-ge(ve.start));for(let Be=0;Be<st.length;Be++){const ve=st[Be],de=ge(ve.start),Te=ge(ve.end);if(R>=de&&R<Te)return{type:"lesson",bell:ve,label:`${ve.period} `};if(Be<st.length-1){const q=st[Be+1],le=ge(q.start);if(R>=Te&&R<le)return{type:"break",nextBell:q,label:` (. ${q.period} )`}}}if(st.length>0){const Be=ge(st[0].start);return R<Be?{type:"before",label:" "}:{type:"after",label:" "}}return{type:"unknown",label:"  "}},[s,v]);z.useEffect(()=>{if(!y.trim()){I([]);return}const ce=y.toLowerCase(),R=[],Ee=H.type==="lesson",De=H.type==="lesson"?H.bell:null,st=(ge,Be,ve)=>{var le,oe;if(!ge)return{text:"",color:"blue",room:""};const de=o.find(he=>he.date===Se&&he.scheduleItemId===ge.id);if((de==null?void 0:de.replacementTeacherId)==="cancelled")return{text:" ",color:"red",room:""};const Te=((le=t.find(he=>he.id===ge.subjectId))==null?void 0:le.name)||"",q=((oe=n.find(he=>he.id===((de==null?void 0:de.replacementRoomId)||ge.roomId)))==null?void 0:oe.name)||(de==null?void 0:de.replacementRoomId)||ge.roomId||"?";return{text:`${Te} ${ve?"()":""}`,color:ve?"amber":"green",room:q}};e.forEach(ge=>{if(ge.name.toLowerCase().includes(ce)){let Be={type:"teacher",id:ge.id,name:ge.name,icon:"User",statusText:"",statusColor:"slate",isBusy:!1};if(ge.unavailableDates.includes(Se))Be.statusText="",Be.statusColor="red",Be.icon="UserX";else if(Ee&&De){const ve=a.find(le=>le.teacherId===ge.id&&le.period===De.period&&le.day===M&&le.shift===De.shift),de=o.find(le=>le.date===Se&&le.replacementTeacherId===ge.id);let Te=ve,q=!1;if(de){const le=a.find(oe=>oe.id===de.scheduleItemId);le&&le.period===De.period&&le.shift===De.shift&&(Te=le,q=!0)}else if(ve){const le=o.find(oe=>oe.date===Se&&oe.scheduleItemId===ve.id);le&&le.replacementTeacherId!==ge.id&&(Te=void 0)}if(Te){const le=st(Te,ge.id,q);Be.statusText=le.text,Be.location=`. ${le.room}`,Be.statusColor=le.color,Be.isBusy=!0}else Be.statusText="",Be.statusColor="blue",Be.isBusy=!1}else Be.statusText=H.label,Be.statusColor="slate";R.push(Be)}}),r.forEach(ge=>{var Be,ve;if(ge.name.toLowerCase().includes(ce)){let de={type:"class",id:ge.id,name:ge.name,icon:"GraduationCap",statusText:"",statusColor:"slate",isBusy:!1};if(Ee&&De){const Te=a.find(q=>q.classId===ge.id&&q.period===De.period&&q.day===M&&q.shift===De.shift);if(Te){const q=o.find(le=>le.date===Se&&le.scheduleItemId===Te.id);if((q==null?void 0:q.replacementTeacherId)==="cancelled")de.statusText=" ",de.statusColor="red";else{const le=(Be=t.find(he=>he.id===Te.subjectId))==null?void 0:Be.name,oe=((ve=n.find(he=>he.id===((q==null?void 0:q.replacementRoomId)||Te.roomId)))==null?void 0:ve.name)||(q==null?void 0:q.replacementRoomId)||Te.roomId;de.statusText=le||"",de.location=`. ${oe}`,de.statusColor="green",de.isBusy=!0}}else de.statusText=" ",de.statusColor="blue"}else de.statusText=H.label;R.push(de)}}),n.forEach(ge=>{var Be,ve;if(ge.name.toLowerCase().includes(ce)){let de={type:"room",id:ge.id,name:ge.name,subName:ge.type,icon:"DoorOpen",statusText:"",statusColor:"slate",isBusy:!1};if(Ee&&De){const Te=a.find(oe=>oe.roomId===ge.id&&oe.period===De.period&&oe.day===M&&oe.shift===De.shift),q=o.find(oe=>oe.date===Se&&oe.replacementRoomId===ge.id);let le=Te;if(q){const oe=a.find(he=>he.id===q.scheduleItemId);oe&&oe.period===De.period&&oe.shift===De.shift&&(le=oe)}if(Te&&o.find(he=>he.date===Se&&he.scheduleItemId===Te.id&&he.replacementRoomId&&he.replacementRoomId!==ge.id)&&(le=void 0),le){const oe=(Be=r.find(Le=>Le.id===le.classId))==null?void 0:Be.name,he=(ve=e.find(Le=>{var Re;return Le.id===(((Re=o.find($e=>$e.scheduleItemId===le.id&&$e.date===Se))==null?void 0:Re.replacementTeacherId)||le.teacherId)}))==null?void 0:ve.name;de.statusText="",de.location=`${oe}  ${he==null?void 0:he.split(" ")[0]}`,de.statusColor="green",de.isBusy=!0}else de.statusText="",de.statusColor="blue"}else de.statusText=H.label;R.push(de)}}),I(R.slice(0,5))},[y,e,r,n,a,o,H,Se,M,t]);const K=z.useMemo(()=>{const ce=new Date;return ce.setHours(0,0,0,0),e.filter(R=>R.birthDate).map(R=>{const Ee=new Date(R.birthDate);let De=new Date(ce.getFullYear(),Ee.getMonth(),Ee.getDate());De<ce&&De.setFullYear(ce.getFullYear()+1);const st=Math.ceil((De.getTime()-ce.getTime())/(1e3*60*60*24));return{...R,diff:st,age:ce.getFullYear()-Ee.getFullYear()}}).filter(R=>R.diff<=30).sort((R,Ee)=>R.diff-Ee.diff)},[e]),ee=z.useMemo(()=>{const ce=e.length,R=new Map;e.filter(de=>de.unavailableDates.includes(Se)).forEach(de=>{var le;const q=((le=de.absenceReasons)==null?void 0:le[Se])===" "?" ":"";R.set(de.id,{id:de.id,name:de.name,displayReason:q})});const Ee=o.filter(de=>de.date===Se&&de.replacementTeacherId!=="conducted"&&de.replacementTeacherId!==de.originalTeacherId),De=new Map;Ee.forEach(de=>{if(R.has(de.originalTeacherId))return;const Te=e.find(oe=>oe.id===de.originalTeacherId);if(!Te)return;const q=a.find(oe=>oe.id===de.scheduleItemId);if(!q)return;De.has(de.originalTeacherId)||De.set(de.originalTeacherId,{teacher:Te,lessons:[]}),De.get(de.originalTeacherId).lessons.push({period:q.period,reason:de.lessonAbsenceReason})});const st=Array.from(R.values());De.forEach((de,Te)=>{const q=de.lessons.sort((Le,Re)=>Le.period-Re.period),le=q.map(Le=>Le.period).join(", "),he=q.some(Le=>Le.reason===" ")?" ":"";st.push({id:Te,name:de.teacher.name,displayReason:`${le} : ${he}`})}),st.sort((de,Te)=>de.name.localeCompare(Te.name));const ge=st.length,Be=ce-ge;return{presentPercent:ce>0?Math.round(Be/ce*100):0,absentCount:ge,totalTeachers:ce,absentTeachersList:st}},[e,Se,o,a]),se=z.useMemo(()=>{const ce=new Date(v);for(ce.setDate(v.getDate()+1);ce.getDay()===0||ce.getDay()===6;)ce.setDate(ce.getDate()+1);const Ee=[null,"","","","","",null][ce.getDay()];if(!Ee)return[];const De=[];return r.filter(ge=>!ge.excludeFromReports).forEach(ge=>{const Be=a.filter(ve=>ve.classId===ge.id&&ve.day===Ee);Be.length===0?De.push({class:ge.name,issue:`   ${Ee}`}):Be.length<4&&De.push({class:ge.name,issue:`  (${Be.length})`}),Be.forEach(ve=>{if(a.some(Te=>Te.id!==ve.id&&Te.day===Ee&&Te.period===ve.period&&Te.shift===ve.shift&&Te.teacherId===ve.teacherId)&&De.push({class:ge.name,issue:`  (${ve.period} )`}),ve.roomId){const Te=n.find(q=>q.id===ve.roomId);Te&&Te.capacity<ge.studentsCount&&De.push({class:ge.name,issue:`: ${Te.name} (${ve.period} )`})}})}),De.filter((ge,Be,ve)=>ve.findIndex(de=>de.class===ge.class&&de.issue===ge.issue)===Be)},[a,r,e,n,v]),ue=z.useMemo(()=>{if(!M)return 0;let ce=0;const R=a.filter(Ee=>Ee.day===M);for(const Ee of R){const De=e.find(st=>st.id===Ee.teacherId);De&&De.unavailableDates.includes(Se)&&(o.find(ge=>ge.scheduleItemId===Ee.id&&ge.date===Se)||ce++)}return ce},[a,e,o,Se,M]);z.useMemo(()=>{if(c!=="canteen")return 0;const ce=A.filter(Ee=>Ee.date===Se),R=new Set(ce.map(Ee=>Ee.classId));return r.filter(Ee=>!R.has(Ee.id)).length},[c,A,Se,r]);const Ae=async()=>{if(!T.trim()){alert(",   .");return}if(!(i!=null&&i.telegramToken)||!(i!=null&&i.feedbackChatId)){alert("     .");return}_e(!0);const ce=` *   :*

${T}`;try{const Ee=await(await fetch(`https://api.telegram.org/bot${i.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:i.feedbackChatId,text:ce,parse_mode:"Markdown"})})).json();if(Ee.ok)alert("!   ."),L(!1),Z("");else throw new Error(Ee.description)}catch(R){console.error("   Telegram:",R),alert(`   . : ${R}`)}finally{_e(!1)}},pe=ce=>{const R=E.map(Ee=>Ee.id===ce?{...Ee,visible:!Ee.visible}:Ee);_(R)},Ne=(ce,R)=>{const Ee=E.findIndex(st=>st.id===ce);if(Ee===-1)return;const De=[...E];R==="up"&&Ee>0?[De[Ee],De[Ee-1]]=[De[Ee-1],De[Ee]]:R==="down"&&Ee<De.length-1&&([De[Ee],De[Ee+1]]=[De[Ee+1],De[Ee]]),_(De)},Oe=()=>{localStorage.setItem("gym_dashboard_widgets_v4",JSON.stringify(E)),j(!1)},nt=ce=>{if(!ce.visible)return null;switch(ce.id){case"search":return l.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full relative overflow-hidden card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-500/20",children:l.jsx(me,{name:"Search",size:22})}),l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:""})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx("input",{type:"text",inputMode:"search",placeholder:",   ...",value:y,onChange:R=>k(R.target.value),className:"w-full bg-slate-50/80 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-600 rounded-xl py-3.5 pl-11 pr-4 text-sm outline-none focus:ring-2 ring-indigo-500/50 dark:text-white transition-all placeholder:text-slate-400"}),l.jsx(me,{name:"Search",size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"})]}),x.length>0&&l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar -mr-2 pr-2 space-y-2",children:x.map(R=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white dark:bg-slate-700/50 border border-slate-100 dark:border-slate-600 hover:border-indigo-300 dark:hover:border-indigo-500 transition-colors cursor-pointer",onClick:()=>{const De=s0(new Date,i)===2?"/schedule2":"/schedule",st=M?`&day=${M}`:"";let ge="";if(R.type==="class"){const Be=r.find(ve=>ve.id===R.id);Be&&(ge=`&shift=${Be.shift===et.First?1:2}`)}R.type==="teacher"&&u(`${De}?view=teacher&id=${R.id}${st}`),R.type==="class"&&u(`${De}?view=class&id=${R.id}${st}${ge}`)},children:[l.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${R.isBusy?"bg-indigo-100 text-indigo-600":R.statusColor==="red"?"bg-red-100 text-red-600":"bg-slate-100 text-slate-500"}`,children:l.jsx(me,{name:R.icon,size:18})}),l.jsxs("div",{className:"min-w-0",children:[l.jsxs("div",{className:"font-bold text-slate-800 dark:text-white text-sm truncate",children:[R.name," ",R.subName&&l.jsx("span",{className:"text-slate-400 font-normal",children:R.subName})]}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:R.type==="room"?"":R.type==="class"?"":""})]})]}),l.jsxs("div",{className:"text-right shrink-0",children:[l.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-lg inline-block ${R.statusColor==="green"?"bg-emerald-100 text-emerald-700":R.statusColor==="red"?"bg-red-100 text-red-700":R.statusColor==="blue"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"}`,children:R.statusText}),R.location&&l.jsx("div",{className:"text-[10px] font-mono mt-1 text-slate-400",children:R.location})]})]},`${R.type}-${R.id}`))})]},ce.id);case"substitutions":return l.jsxs("div",{className:`p-6 rounded-3xl flex flex-col h-full card-hover relative overflow-hidden bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 ${ue>0?"ring-2 ring-red-500/20 dark:ring-red-500/30":""}`,children:[ue>0&&l.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500/10 blur-2xl -mr-10 -mt-10 rounded-full"}),l.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[l.jsx("div",{className:`p-3 rounded-2xl shadow-lg ${ue>0?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-red-500/30":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-emerald-500/30"}`,children:l.jsx(me,{name:ue>0?"AlertTriangle":"CheckCircle",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center relative z-10",children:ue>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-6xl font-black text-slate-800 dark:text-white mb-2 tracking-tighter",children:ue}),l.jsx("div",{className:"text-sm font-bold text-red-500 uppercase tracking-wider mb-6",children:" "}),l.jsxs("button",{onClick:()=>u("/substitutions"),className:"w-full py-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-2 group",children:[" ",l.jsx(me,{name:"ArrowRight",size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-slate-200 dark:text-slate-700 mb-4 transform scale-125 opacity-50",children:l.jsx(me,{name:"CheckCircle",size:64})}),l.jsx("p",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"  "})]})})]},ce.id);case"occupancy":return l.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white p-3 rounded-2xl shadow-lg shadow-blue-500/20",children:l.jsx(me,{name:"PieChart",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>U(!N),className:"p-2.5 text-slate-400 hover:text-indigo-600 bg-white dark:bg-slate-700/50 rounded-xl transition-all hover:shadow-md",title:N?" ":" ",children:l.jsx(me,{name:N?"PieChart":"List",size:20})})]}),N?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in -mr-2 pr-2",children:ee.absentTeachersList.length>0?l.jsx("div",{className:"space-y-3",children:ee.absentTeachersList.map(R=>l.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300 truncate pr-2",children:R.name}),l.jsx("span",{className:"text-[10px] uppercase font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:R.displayReason})]},R.id))}):l.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:l.jsx("p",{className:"text-sm font-medium",children:"   "})})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in px-2",children:[l.jsxs("div",{className:"relative w-28 h-28",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90 drop-shadow-md",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e2e8f0",strokeWidth:"3",className:"dark:stroke-slate-700",strokeLinecap:"round"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient)",strokeWidth:"3",strokeDasharray:`${ee.presentPercent}, 100`,strokeLinecap:"round"}),l.jsx("defs",{children:l.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[l.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),l.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),l.jsxs("span",{className:"text-2xl font-black text-slate-800 dark:text-white",children:[ee.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-4xl font-black text-slate-800 dark:text-white mb-1",children:ee.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]},ce.id);case"notes":return l.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full group card-hover relative bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:l.jsx(me,{name:"Edit2",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:we,disabled:!D,className:`p-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${D?"text-amber-500 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700 animate-pulse":"text-slate-400 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:D?" ":" ",children:l.jsx(me,{name:"Save",size:16})}),l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(p),d({type:"success",title:"",message:"    ",duration:2e3})},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx(me,{name:"Copy",size:16})}),l.jsx("button",{onClick:()=>{confirm(" ?")&&(g(""),localStorage.setItem("gym_notes",""),P(!1),d({type:"success",title:" ",duration:2e3}))},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx(me,{name:"Trash2",size:16})})]})]}),l.jsxs("div",{className:"relative flex-1 bg-yellow-50/50 dark:bg-slate-800/50 rounded-2xl p-1",children:[l.jsx("textarea",{inputMode:"text",className:"w-full h-full p-4 bg-transparent border-none outline-none font-medium text-slate-700 dark:text-slate-200 resize-none text-sm leading-relaxed",placeholder:" -...",value:p,onChange:R=>ie(R.target.value),maxLength:1e4}),D&&l.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] font-bold uppercase tracking-widest text-amber-600 animate-pulse flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded-full shadow-sm",children:[l.jsx(me,{name:"Clock",size:10}),"  "]})]})]},ce.id);case"conflicts":return l.jsxs("div",{className:"p-6 rounded-3xl h-full card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 p-2 rounded-xl",children:l.jsx(me,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:se.length?se.map(R=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:R.class}),l.jsx("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg",children:R.issue})]},`${R.class}-${R.issue}`)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]},ce.id);case"birthdays":return l.jsxs("div",{className:"p-6 rounded-3xl h-full card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 p-2 rounded-xl",children:l.jsx(me,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:K.length?K.map(R=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:R.name}),l.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${R.diff===0?"bg-rose-500 text-white shadow-md shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:R.diff===0?"!":` ${R.diff} .`})]},R.id)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]},ce.id);default:return null}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-20",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fade-in",children:[l.jsxs("div",{className:"lg:col-span-2 flex flex-col justify-end",children:[l.jsxs("h1",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tight mb-1 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400",children:[Pe,", ",c==="admin"?"":c==="canteen"?"":"","!"]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium mb-4",children:[" ",v.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",title:"  ",children:l.jsx(me,{name:"Settings",size:18})}),l.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",children:[l.jsx(me,{name:"Send",size:18}),"  "]})]}),((ke=i==null?void 0:i.adminAnnouncement)==null?void 0:ke.active)&&l.jsx("div",{className:"mt-6 bg-amber-100 dark:bg-amber-900/30 border-l-4 border-amber-500 p-4 rounded-r-xl shadow-sm",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"text-amber-600 dark:text-amber-400 shrink-0 mt-1",children:l.jsx(me,{name:"Bell",size:20})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-base text-amber-800 dark:text-amber-100 mb-1",children:""}),l.jsx("p",{className:"text-slate-800 dark:text-slate-200 text-sm whitespace-pre-wrap leading-relaxed",children:i.adminAnnouncement.message})]})]})})]}),l.jsx("div",{className:"hidden lg:block h-full min-h-[160px]",children:l.jsx(IK,{})})]}),c==="admin"&&ue>0&&l.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-4 animate-fade-in",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-amber-500 text-white p-2 rounded-xl",children:l.jsx(me,{name:"AlertTriangle",size:20})}),l.jsx("div",{className:"flex-1",children:l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white",children:[ue," ",ue===1?"":ue<5?"":"","  "]})}),l.jsx(_o,{to:"/substitutions",className:"px-4 py-2 bg-amber-500 text-white rounded-xl font-semibold hover:bg-amber-600 transition-colors text-sm",children:""})]})}),l.jsxs("div",{className:"md:hidden grid grid-cols-3 gap-3 animate-fade-in",children:[l.jsxs(_o,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 border border-blue-200 dark:border-blue-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-blue-500 text-white p-3 rounded-xl",children:l.jsx(me,{name:"Calendar",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="admin"&&l.jsxs(_o,{to:"/substitutions",className:"p-4 rounded-2xl bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 border border-orange-200 dark:border-orange-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-orange-500 text-white p-3 rounded-xl",children:l.jsx(me,{name:"Repeat",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="admin"&&l.jsxs(_o,{to:"/duty",className:"p-4 rounded-2xl bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 border border-purple-200 dark:border-purple-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-purple-500 text-white p-3 rounded-xl",children:l.jsx(me,{name:"Shield",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="guest"&&l.jsxs(_o,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/30 dark:to-emerald-800/30 border border-emerald-200 dark:border-emerald-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-emerald-500 text-white p-3 rounded-xl",children:l.jsx(me,{name:"Users",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:E.slice(0,4).map(ce=>nt(ce))}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:E.slice(4).map(ce=>nt(ce))}),l.jsx($n,{isOpen:S,onClose:()=>L(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !"}),l.jsx("textarea",{inputMode:"text",value:T,onChange:ce=>Z(ce.target.value),rows:5,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:Ae,disabled:ye,className:"btn-primary text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:[ye?l.jsx(me,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(me,{name:"Send",size:16}),ye?"...":""]})})]})}),l.jsx($n,{isOpen:B,onClose:()=>j(!1),title:"  ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      ."}),l.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:E.map((ce,R)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-xl border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"checkbox",checked:ce.visible,onChange:()=>pe(ce.id),className:"w-5 h-5 rounded text-indigo-600 focus:ring-indigo-500 cursor-pointer"}),l.jsx("span",{className:"font-bold text-slate-700 dark:text-white",children:ce.label})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>Ne(ce.id,"up"),disabled:R===0,className:"p-1.5 text-slate-400 hover:text-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(me,{name:"ArrowRight",className:"-rotate-90",size:16})}),l.jsx("button",{onClick:()=>Ne(ce.id,"down"),disabled:R===E.length-1,className:"p-1.5 text-slate-400 hover:text-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(me,{name:"ArrowRight",className:"rotate-90",size:16})})]})]},ce.id))}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:Oe,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})})]})})]})};var fU={},pU={},gU={},x1={};Object.defineProperty(x1,"__esModule",{value:!0});function kK(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}x1.default=kK;var MB={};Object.defineProperty(MB,"__esModule",{value:!0});var SK=x1,NK=" and ";function FK(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],s=SK.default(r),i=n;return typeof i=="boolean"?i?s:"not "+s:(typeof i=="number"&&/[height|width]$/.test(s)&&(i=i+"px"),"("+s+": "+i+")")}).join(NK)}MB.default=FK;var OB={};Object.defineProperty(OB,"__esModule",{value:!0});function TK(){}OB.default=TK;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=x1;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=MB;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=OB;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})(gU);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=z,r=gU;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(s){return!0}};var n=function(s){return function(i,a){a===void 0&&(a=!1);var o=e.useState(a),A=o[0],c=o[1],u=r.queryObjectToString(i);return s(function(){var d=!0,p=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(u),g=function(){d&&c(!!p.matches)};return p.addListener(g),c(p.matches),function(){d=!1,p.removeListener(g)}},[u]),A}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(pU);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=pU;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(fU);const mU=Ak(fU),wU=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:s,rooms:i}=Ki(),{schedule1:a,schedule2:o,saveSemesterSchedule:A,canUndo:c,canRedo:u,undo:d,redo:p}=FA(),g=e===2?o:a,v=async ae=>{await A(e,ae)},[y,k]=z.useState(et.First),[x,I]=z.useState(ur.Monday),[N,U]=z.useState(!1),[D,P]=z.useState({}),[E,_]=z.useState("class"),[B,j]=z.useState(""),[S,L]=z.useState(""),[T,Z]=z.useState(""),[ye,_e]=z.useState(!1),[Ce,ie]=z.useState({visible:!1,x:0,y:0,item:null,cell:null}),[we,Pe]=z.useState(null),[Se,M]=z.useState([]),[H,K]=z.useState(!1),[ee,se]=z.useState(null),[ue,Ae]=z.useState(null),[pe,Ne]=z.useState(null),Oe=mU({maxWidth:767}),[nt,ke]=z.useState(!0),[ce,R]=z.useState(!1),[Ee,De]=z.useState({isOpen:!1,type:"",day:"",classId:""}),[st,ge]=z.useState(ur.Monday),[Be,ve]=z.useState(""),[de]=FN();z.useEffect(()=>{const ae=de.get("view"),qe=de.get("id"),vt=de.get("day"),mt=de.get("shift");ae&&["class","teacher","subject","week"].includes(ae)&&(_(ae),qe&&j(qe),vt&&Lr.includes(vt)&&I(vt),mt&&(mt==="1"&&k(et.First),mt==="2"&&k(et.Second)))},[de]);const Te=Ks[y],q=z.useMemo(()=>E==="week"?Ks[y].map(ae=>({id:ae.toString(),name:`${ae} `})):E==="class"?B?s.filter(ae=>ae.id===B&&ae.shift===y):s.filter(ae=>ae.shift===y):E==="teacher"?B?n.filter(ae=>ae.id===B):n:E==="subject"?B?r.filter(ae=>ae.id===B):r:[],[E,B,s,n,r,y]),le=()=>q,[oe]=z.useState(()=>new Map);z.useEffect(()=>{oe.clear()},[g,oe]),z.useEffect(()=>{oe.size>500&&(oe.clear(),console.warn("Schedule cache cleared to prevent memory leak"))},[oe]);const he=z.useCallback((ae,qe)=>{const vt=`${E}-${ae}-${qe}-${y}-${x}-${B}-${S}-${T}`;if(oe.has(vt))return oe.get(vt);let mt=[];if(E==="week"){const kt=parseInt(ae);if(isNaN(kt))return[];const at=String(qe);mt=g.filter(yt=>yt.shift===y&&yt.period===kt&&yt.day===at),B&&(mt=mt.filter(yt=>yt.classId===B))}else{const kt=typeof qe=="string"?parseInt(qe):qe;if(isNaN(kt))return[];E==="class"&&(mt=g.filter(at=>at.classId===ae&&at.period===kt&&at.day===x&&at.shift===y)),E==="teacher"&&(mt=g.filter(at=>at.teacherId===ae&&at.period===kt&&at.day===x&&at.shift===y)),E==="subject"&&(mt=g.filter(at=>at.subjectId===ae&&at.period===kt&&at.day===x&&at.shift===y))}return S&&(mt=mt.filter(kt=>{if(!kt.roomId)return!1;const at=i.find(Et=>Et.id===kt.roomId);return((at?at.name:kt.roomId)||"").toLowerCase().includes(S.toLowerCase())})),T&&(mt=mt.filter(kt=>{var at;return(at=kt.direction)==null?void 0:at.toLowerCase().includes(T.toLowerCase())})),oe.set(vt,mt),mt},[E,g,y,x,B,S,T,i]),Le=ae=>{const qe=[],vt=g.filter(at=>at.id!==ae.id&&at.day===ae.day&&at.period===ae.period&&at.shift===ae.shift);return vt.find(at=>at.teacherId===ae.teacherId)&&qe.push("teacher"),vt.find(at=>!(at.classId!==ae.classId||at.direction&&ae.direction&&at.direction!==ae.direction))&&qe.push("class"),ae.roomId&&vt.find(yt=>yt.roomId===ae.roomId)&&qe.push("room"),qe},Re=ae=>{const qe=[],vt=g.filter(at=>at.id!==ae.id&&at.day===ae.day&&at.period===ae.period&&at.shift===ae.shift);return vt.filter(at=>at.teacherId===ae.teacherId).forEach(at=>{var ar,Tr;const yt=(ar=s.find(Ir=>Ir.id===at.classId))==null?void 0:ar.name,Et=((Tr=i.find(Ir=>Ir.id===at.roomId))==null?void 0:Tr.name)||at.roomId;qe.push({type:"",description:`   ${yt}  . ${Et||"?"}`})}),vt.filter(at=>!(at.classId!==ae.classId||at.direction&&ae.direction&&at.direction!==ae.direction)).forEach(at=>{var Et;const yt=(Et=r.find(ar=>ar.id===at.subjectId))==null?void 0:Et.name;qe.push({type:"",description:`   "${yt}"`})}),ae.roomId&&vt.filter(yt=>yt.roomId===ae.roomId).forEach(yt=>{var Tr,Ir;const Et=(Tr=n.find(js=>js.id===yt.teacherId))==null?void 0:Tr.name,ar=(Ir=s.find(js=>js.id===yt.classId))==null?void 0:Ir.name;qe.push({type:"",description:`: ${ar}, ${Et}`})}),qe},$e=(ae,qe)=>{ae.stopPropagation();const vt=Re(qe);se({item:qe,conflicts:vt}),K(!0)},Ve=(ae,qe,vt)=>{const mt=[],kt=s.find(Et=>Et.id===ae),at=r.find(Et=>Et.id===qe),yt=i.find(Et=>Et.id===vt);return yt&&(kt&&yt.capacity<kt.studentsCount&&mt.push(`  !   ${kt.studentsCount} .,     ${yt.capacity}.`),at&&at.requiredRoomType&&at.requiredRoomType!==""&&yt.type!==at.requiredRoomType&&mt.push(`   !   "${at.requiredRoomType}",   "${yt.type}".`)),mt},St=ae=>{if(!ae.classId||!ae.subjectId||!ae.roomId){M([]);return}const qe=Ve(ae.classId,ae.subjectId,ae.roomId);M(qe)},ft=ae=>{t||(P(ae),St(ae),U(!0))},gt=(ae,qe,vt=x)=>{if(t)return;const mt={period:qe,day:vt,shift:y,id:Gs()};E==="class"&&(mt.classId=ae),E==="teacher"&&(mt.teacherId=ae),E==="subject"&&(mt.subjectId=ae),E==="week"&&(mt.period=parseInt(ae),mt.day=vt,B&&s.find(kt=>kt.id===B)&&(mt.classId=B)),P(mt),M([]),U(!0)},At=async()=>{if(!D.subjectId||!D.teacherId||!D.classId)return;const ae=[];if(D.period!==void 0){const Et=D.shift||y;(Ks[Et]||[]).includes(D.period)||ae.push(` ${D.period}    "${Et}"`)}if(n.find(Et=>Et.id===D.teacherId)||ae.push("   "),r.find(Et=>Et.id===D.subjectId)||ae.push("   "),s.find(Et=>Et.id===D.classId)||ae.push("   "),D.roomId&&(i.find(ar=>ar.id===D.roomId)||ae.push("   ")),ae.length>0){alert(`  :

${ae.join(`
`)}`);return}const kt=Le(D);if(kt.length>0){const Et={teacher:"",class:"",room:""},ar=kt.map(Tr=>Et[Tr]).join(", ");if(!confirm(`  : ${ar}     .

   ?`))return}let at=[...g];const yt=at.findIndex(Et=>Et.id===D.id);yt>=0?at[yt]=D:at.push(D),await v(at),U(!1)},dt=async ae=>{const qe=g.filter(vt=>vt.id!==(ae||D.id));await v(qe),U(!1)},tt=(ae,qe,vt)=>{t||(ae.preventDefault(),ae.stopPropagation(),ie({visible:!0,x:ae.clientX,y:ae.clientY,item:qe,cell:vt}))},Tt=(ae,qe)=>{if(t)return;Ae(qe),ae.dataTransfer.effectAllowed="move";const vt=ae.currentTarget;setTimeout(()=>vt.classList.add("dragging"),0)},bt=ae=>{ae.currentTarget.classList.remove("dragging"),Ae(null),Ne(null)},It=(ae,qe)=>{ae.preventDefault(),!t&&Ne(`${qe.rowId}-${qe.colKey}`)},qt=async(ae,qe)=>{if(ae.preventDefault(),!ue||t)return;const vt={...ue};E==="week"?(vt.period=parseInt(qe.rowId),vt.day=qe.colKey):(vt.period=qe.colKey,vt.day=x,E==="class"&&(vt.classId=qe.rowId),E==="teacher"&&(vt.teacherId=qe.rowId),E==="subject"&&(vt.subjectId=qe.rowId));const mt=g.map(yt=>yt.id===vt.id?vt:yt),kt=Ht(mt,vt);if(kt.length>0){const yt=kt.map(Et=>{switch(Et.type){case"teacher":return` ${Et.entityName}     `;case"room":return` ${Et.entityName}     `;case"class":return` ${Et.entityName}      `;default:return"  "}});alert(`  :
${yt.join(`
`)}`),Ae(null),Ne(null);return}await v(mt),Ae(null),Ne(null)},Ht=(ae,qe)=>{const vt=[],mt=ae.filter(yt=>yt.id!==qe.id&&yt.day===qe.day&&yt.period===qe.period&&yt.shift===qe.shift);if(mt.find(yt=>yt.teacherId===qe.teacherId)){const yt=n.find(Et=>Et.id===qe.teacherId);vt.push({type:"teacher",entityName:(yt==null?void 0:yt.name)||qe.teacherId})}if(qe.roomId&&mt.find(Et=>Et.roomId===qe.roomId)){const Et=i.find(ar=>ar.id===qe.roomId);vt.push({type:"room",entityName:(Et==null?void 0:Et.name)||qe.roomId})}if(mt.find(yt=>yt.classId===qe.classId)){const yt=s.find(Et=>Et.id===qe.classId);vt.push({type:"class",entityName:(yt==null?void 0:yt.name)||qe.classId})}return vt},wt=[];if(Ce.item)wt.push({label:"",icon:"Copy",onClick:()=>Pe(Ce.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>dt(Ce.item.id)});else if(Ce.cell){const ae=Ce.cell;we&&wt.push({label:"",icon:"Clipboard",onClick:async()=>{const qe={...we,id:Gs(),day:x,shift:y,period:ae.colKey};E==="week"&&(qe.day=ae.colKey,qe.period=parseInt(ae.rowId)),E==="class"?qe.classId=ae.rowId:E==="teacher"?qe.teacherId=ae.rowId:E==="subject"&&(qe.subjectId=ae.rowId);let vt=[...g,qe];await v(vt),Pe(null)}}),wt.push({label:" ",icon:"Plus",onClick:()=>gt(ae.rowId||"",typeof ae.colKey=="number"?ae.colKey:parseInt(ae.rowId||"0"),E==="week"?ae.colKey:x)})}const Kt=D.subjectId?n.filter(ae=>ae.subjectIds&&ae.subjectIds.includes(D.subjectId)):[],zr=D.subjectId?n.filter(ae=>!ae.subjectIds||!ae.subjectIds.includes(D.subjectId)):n,Qr=z.useMemo(()=>{const ae=e===2?" (2- )":"";if(B){if(E==="teacher"){const qe=n.find(vt=>vt.id===B);return qe?qe.name+ae:""+ae}if(E==="class"){const qe=s.find(vt=>vt.id===B);return qe?qe.name+ae:""+ae}if(E==="subject"){const qe=r.find(vt=>vt.id===B);return qe?qe.name+ae:""+ae}if(E==="week"){const qe=s.find(vt=>vt.id===B);return qe?qe.name+ae:""+ae}}return`  ${x}`+ae},[B,E,n,s,r,x,e]),Hr=!!B,tr=z.useMemo(()=>Hr?Lr:Te,[Hr,Te]),Dt=z.useMemo(()=>Hr?Ks[y].map(ae=>({id:ae.toString(),name:`${ae} `})):le(),[Hr,y,le]),jt=(ae,qe)=>{if(Hr){const vt=parseInt(ae),mt=qe;let kt=g.filter(at=>at.shift===y&&at.period===vt&&at.day===mt);return E==="class"||E==="week"?kt=kt.filter(at=>at.classId===B):E==="teacher"?kt=kt.filter(at=>at.teacherId===B):E==="subject"&&(kt=kt.filter(at=>at.subjectId===B)),kt}else return he(ae,qe)},dr=E==="week"?Lr:Te,en=(ae,qe,vt)=>{De({isOpen:!0,type:ae,day:qe||"",classId:vt||""})},Mr=async()=>{let ae=[...g];Ee.type==="clearAll"?ae=[]:Ee.type==="clearDay"&&Ee.day?ae=ae.filter(qe=>qe.day!==Ee.day):Ee.type==="clearClass"&&Ee.classId&&(ae=ae.filter(qe=>qe.classId!==Ee.classId)),await v(ae),De({isOpen:!1,type:"",day:"",classId:""}),R(!1)},mr=(ae,qe,vt)=>t&&ae.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[ae.map(mt=>{const kt=r.find(Ir=>Ir.id===mt.subjectId),at=n.find(Ir=>Ir.id===mt.teacherId),yt=s.find(Ir=>Ir.id===mt.classId),Et=Le(mt),ar=i.find(Ir=>Ir.id===mt.roomId),Tr=ar?ar.name:mt.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:Ir=>Tt(Ir,mt),onDragEnd:t?void 0:bt,onClick:t?void 0:()=>ft(mt),onContextMenu:t?void 0:Ir=>tt(Ir,mt,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${Et.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:Et.length===0&&(kt!=null&&kt.color)?{backgroundColor:`${kt.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:E==="subject"||E==="week"?yt==null?void 0:yt.name:kt==null?void 0:kt.name}),mt.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:mt.direction})]}),E==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:kt==null?void 0:kt.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:at==null?void 0:at.name,children:[l.jsx(me,{name:E==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:E==="teacher"?yt==null?void 0:yt.name:at==null?void 0:at.name})]}),Tr&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:ar?`: ${ar.capacity}, : ${ar.type}`:"",children:Tr})]}),Et.length>0&&l.jsx("button",{onClick:Ir=>$e(Ir,mt),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-[10px] font-bold shadow-sm hover:bg-red-600 hover:scale-110 transition-all z-10",title:"   ",children:"!"})]},mt.id)}),!t&&ae.length<3&&l.jsx("button",{onClick:()=>gt(vt,typeof qe=="number"?qe:parseInt(vt),E==="week"?qe:x),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(me,{name:"Plus",size:16})})]}),Rr=()=>{if(!B)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const ae=g.filter(qe=>qe.day===x&&qe.shift===y&&(E==="class"&&qe.classId===B||E==="teacher"&&qe.teacherId===B||E==="subject"&&qe.subjectId===B)).sort((qe,vt)=>qe.period-vt.period);return ae.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",x,"  ",y,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:ae.map(qe=>{const vt=r.find(ar=>ar.id===qe.subjectId),mt=n.find(ar=>ar.id===qe.teacherId),kt=s.find(ar=>ar.id===qe.classId),at=i.find(ar=>ar.id===qe.roomId),yt=at?at.name:qe.roomId,Et=Le(qe);return l.jsxs("div",{onClick:t?void 0:()=>ft(qe),className:`rounded-xl p-4 shadow-sm border ${Et.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[qe.period," "]}),Et.length>0&&l.jsx("button",{onClick:ar=>$e(ar,qe),className:"bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow-sm",children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[vt==null?void 0:vt.name," ",qe.direction&&`(${qe.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[kt==null?void 0:kt.name,"  ",mt==null?void 0:mt.name]}),yt&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",yt]})]},qe.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),Ce.visible&&l.jsx(bK,{x:Ce.x,y:Ce.y,onClose:()=>ie({...Ce,visible:!1}),actions:wt}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>k(et.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===et.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>k(et.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===et.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),E!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Lr.map(ae=>l.jsx("button",{onClick:()=>I(ae),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${x===ae?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:ae},ae))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:d,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(me,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:p,disabled:!u,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(me,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{_("class"),j("")},className:`p-2 rounded-md ${E==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(me,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{_("teacher"),j("")},className:`p-2 rounded-md ${E==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(me,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{_("subject"),j("")},className:`p-2 rounded-md ${E==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(me,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var ae;_("week"),j(((ae=s[0])==null?void 0:ae.id)||"")},className:`p-2 rounded-md ${E==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(me,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(me,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:B,onChange:ae=>j(ae.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",E==="class"?"":E==="teacher"?"":E==="week"?" ()":""]}),(E==="class"||E==="week")&&s.filter(ae=>ae.shift===y).map(ae=>l.jsx("option",{value:ae.id,children:ae.name},ae.id)),E==="teacher"&&n.map(ae=>l.jsx("option",{value:ae.id,children:ae.name},ae.id)),E==="subject"&&r.map(ae=>l.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),l.jsx("input",{placeholder:"...",value:S,onChange:ae=>L(ae.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:T,onChange:ae=>Z(ae.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(me,{name:"List",size:16})," . ."]}),(B||E==="week")&&l.jsx("button",{onClick:()=>_e(!0),className:"btn-primary btn-ripple text-sm flex items-center gap-2",children:l.jsx(me,{name:"Printer",size:16})})]})]}),Oe&&!t&&B&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>ke(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${nt?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(me,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>ke(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${nt?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(me,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:Oe&&nt&&!t&&B?Rr():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:E==="week"?"":E==="class"?"":E==="teacher"?"":""}),dr.map(ae=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:E==="week"?ae:`${ae} `},ae))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:q.length>0?q.map(ae=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:ae.name}),dr.map(qe=>{const vt=he(ae.id,qe),mt=`${ae.id}-${qe}`,kt={rowId:ae.id,colKey:qe};return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${pe===mt?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:at=>tt(at,null,kt),onDragOver:t?void 0:at=>It(at,kt),onDrop:t?void 0:at=>qt(at,kt),children:mr(vt,qe,ae.id)},qe)})]},ae.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx($n,{isOpen:N,onClose:()=>U(!1),title:D.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",D.day]}),l.jsxs("span",{children:[": ",D.period]}),l.jsxs("span",{children:[": ",D.shift===et.First?"1 ":"2 "]})]}),Se.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:Se.map(ae=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(me,{name:"AlertTriangle",size:14}),ae]},ae))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Df,{options:s.filter(ae=>ae.shift===y).map(ae=>({value:ae.id,label:ae.name})),value:D.classId||null,onChange:ae=>{P({...D,classId:ae}),St({...D,classId:ae})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Df,{options:r.map(ae=>({value:ae.id,label:ae.name})),value:D.subjectId||null,onChange:ae=>{P({...D,subjectId:ae}),St({...D,subjectId:ae})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Df,{options:[{label:"",options:Kt.map(ae=>({value:ae.id,label:ae.name}))},{label:"",options:zr.map(ae=>({value:ae.id,label:ae.name}))}],value:D.teacherId||null,onChange:ae=>P({...D,teacherId:ae}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:D.direction||"",onChange:ae=>P({...D,direction:ae.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:D.roomId||"",onChange:ae=>{P({...D,roomId:ae.target.value}),St({...D,roomId:ae.target.value})},children:[l.jsx("option",{value:"",children:" "}),i.map(ae=>l.jsxs("option",{value:ae.id,children:[ae.name," (",ae.capacity," )"]},ae.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[D.id&&l.jsx("button",{onClick:()=>dt(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:At,className:"btn-primary btn-ripple",children:""})]})]})}),l.jsx($n,{isOpen:ce,onClose:()=>R(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>en("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:st,onChange:ae=>ge(ae.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Lr.map(ae=>l.jsx("option",{value:ae,children:ae},ae))})}),l.jsxs("button",{onClick:()=>en("clearDay",st),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",st]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:Be,onChange:ae=>ve(ae.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),s.map(ae=>l.jsx("option",{value:ae.id,children:ae.name},ae.id))]})}),l.jsx("button",{onClick:()=>{Be&&en("clearClass",void 0,Be)},disabled:!Be,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs($n,{isOpen:Ee.isOpen,onClose:()=>De({...Ee,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>De({...Ee,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:Mr,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),l.jsx($n,{isOpen:H,onClose:()=>K(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"     :"}),l.jsx("div",{className:"space-y-3",children:ee&&ee.conflicts.length>0?ee.conflicts.map((ae,qe)=>l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-3 flex items-start gap-3",children:[l.jsx(me,{name:"AlertTriangle",className:"text-red-500 shrink-0 mt-0.5",size:18}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-red-700 dark:text-red-300 text-sm mb-1",children:ae.type}),l.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:ae.description})]})]},qe)):l.jsx("p",{className:"text-center text-slate-400 py-4",children:" "})}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:()=>K(!1),className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-bold hover:bg-slate-300 transition text-sm",children:""})})]})}),ye&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(me,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>_e(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:Qr}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:Hr||E==="week"?"":E==="class"?"":E==="teacher"?"":""}),tr.map(ae=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:Hr||E==="week"?ae:`${ae} `},ae))]})}),l.jsx("tbody",{children:Dt.map(ae=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:ae.name}),tr.map(qe=>{const vt=jt(ae.id,qe);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:vt.map(mt=>{const kt=r.find(gi=>gi.id===mt.subjectId),at=n.find(gi=>gi.id===mt.teacherId),yt=s.find(gi=>gi.id===mt.classId),Et=i.find(gi=>gi.id===mt.roomId),ar=Et?Et.name:mt.roomId,Tr=E==="teacher",Ei=E==="subject"||E==="week"||Hr&&Tr?yt==null?void 0:yt.name:kt==null?void 0:kt.name,ki=Tr?yt==null?void 0:yt.name:at==null?void 0:at.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Ei,mt.direction&&` (${mt.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:ki}),ar&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:ar})]})]},mt.id)})},qe)})]},ae.id))})]})]})})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y2=function(t,e){return Y2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Y2(t,e)};function io(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Y2(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Z2=function(){return Z2=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Z2.apply(this,arguments)};function bi(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function A(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,A)}c((n=n.apply(t,[])).next())})}function li(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return A([c,u])}}function A(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Y0(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||e)}var yA=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),v1=function(t,e){return yA.fromClientRect(t,e.getBoundingClientRect())},UK=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new yA(0,0,n,s)},y1=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},rs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},$I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",LK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Z0=0;Z0<$I.length;Z0++)LK[$I.charCodeAt(Z0)]=Z0;var qI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var eg=0;eg<qI.length;eg++)pf[qI.charCodeAt(eg)]=eg;var jK=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=pf[t.charCodeAt(n)],a=pf[t.charCodeAt(n+1)],o=pf[t.charCodeAt(n+2)],A=pf[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|A&63;return c},QK=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},RK=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},zc=5,HB=11,jx=2,PK=HB-zc,xU=65536>>zc,DK=1<<zc,Qx=DK-1,MK=1024>>zc,OK=xU+MK,HK=OK,VK=32,KK=HK+VK,zK=65536>>HB,GK=1<<PK,$K=GK-1,WI=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},qK=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},WK=function(t,e){var r=jK(t),n=Array.isArray(r)?RK(r):new Uint32Array(r),s=Array.isArray(r)?QK(r):new Uint16Array(r),i=24,a=WI(s,i/2,n[4]/2),o=n[5]===2?WI(s,(i+n[4])/2):qK(n,Math.ceil((i+n[4])/4));return new JK(n[0],n[1],n[2],n[3],a,o)},JK=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>zc],r=(r<<jx)+(e&Qx),this.data[r];if(e<=65535)return r=this.index[xU+(e-55296>>zc)],r=(r<<jx)+(e&Qx),this.data[r];if(e<this.highStart)return r=KK-zK+(e>>HB),r=this.index[r],r+=e>>zc&$K,r=this.index[r],r=(r<<jx)+(e&Qx),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),JI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",XK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tg=0;tg<JI.length;tg++)XK[JI.charCodeAt(tg)]=tg;var YK="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",XI=50,ZK=1,vU=2,yU=3,ez=4,tz=5,YI=7,bU=8,ZI=9,bl=10,ey=11,eE=12,ty=13,rz=14,gf=15,ry=16,rg=17,Xh=18,nz=19,tE=20,ny=21,Yh=22,Rx=23,Tu=24,ia=25,mf=26,wf=27,Uu=28,sz=29,jc=30,iz=31,ng=32,sg=33,sy=34,iy=35,ay=36,Ip=37,oy=38,nm=39,sm=40,Px=41,BU=42,az=43,oz=[9001,65288],_U="!",br="",ig="",Ay=WK(YK),Jo=[jc,ay],ly=[ZK,vU,yU,tz],CU=[bl,bU],rE=[wf,mf],Az=ly.concat(CU),nE=[oy,nm,sm,sy,iy],lz=[gf,ty],cz=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(i,a){var o=Ay.get(i);if(o>XI?(s.push(!0),o-=XI):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(a),r.push(ry);if(o===ez||o===ey){if(a===0)return n.push(a),r.push(jc);var A=r[a-1];return Az.indexOf(A)===-1?(n.push(n[a-1]),r.push(A)):(n.push(a),r.push(jc))}if(n.push(a),o===iz)return r.push(e==="strict"?ny:Ip);if(o===BU||o===sz)return r.push(jc);if(o===az)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(Ip):r.push(jc);r.push(o)}),[n,r,s]},Dx=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=r;i<=n.length;){i++;var a=n[i];if(a===e)return!0;if(a!==bl)break}if(s===bl)for(var i=r;i>0;){i--;var o=n[i];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var A=r;A<=n.length;){A++;var a=n[A];if(a===e)return!0;if(a!==bl)break}if(o!==bl)break}return!1},sE=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===bl)r--;else return n}return 0},uz=function(t,e,r,n,s){if(r[n]===0)return br;var i=n-1;if(Array.isArray(s)&&s[i]===!0)return br;var a=i-1,o=i+1,A=e[i],c=a>=0?e[a]:0,u=e[o];if(A===vU&&u===yU)return br;if(ly.indexOf(A)!==-1)return _U;if(ly.indexOf(u)!==-1||CU.indexOf(u)!==-1)return br;if(sE(i,e)===bU)return ig;if(Ay.get(t[i])===ey||(A===ng||A===sg)&&Ay.get(t[o])===ey||A===YI||u===YI||A===ZI||[bl,ty,gf].indexOf(A)===-1&&u===ZI||[rg,Xh,nz,Tu,Uu].indexOf(u)!==-1||sE(i,e)===Yh||Dx(Rx,Yh,i,e)||Dx([rg,Xh],ny,i,e)||Dx(eE,eE,i,e))return br;if(A===bl)return ig;if(A===Rx||u===Rx)return br;if(u===ry||A===ry)return ig;if([ty,gf,ny].indexOf(u)!==-1||A===rz||c===ay&&lz.indexOf(A)!==-1||A===Uu&&u===ay||u===tE||Jo.indexOf(u)!==-1&&A===ia||Jo.indexOf(A)!==-1&&u===ia||A===wf&&[Ip,ng,sg].indexOf(u)!==-1||[Ip,ng,sg].indexOf(A)!==-1&&u===mf||Jo.indexOf(A)!==-1&&rE.indexOf(u)!==-1||rE.indexOf(A)!==-1&&Jo.indexOf(u)!==-1||[wf,mf].indexOf(A)!==-1&&(u===ia||[Yh,gf].indexOf(u)!==-1&&e[o+1]===ia)||[Yh,gf].indexOf(A)!==-1&&u===ia||A===ia&&[ia,Uu,Tu].indexOf(u)!==-1)return br;if([ia,Uu,Tu,rg,Xh].indexOf(u)!==-1)for(var d=i;d>=0;){var p=e[d];if(p===ia)return br;if([Uu,Tu].indexOf(p)!==-1)d--;else break}if([wf,mf].indexOf(u)!==-1)for(var d=[rg,Xh].indexOf(A)!==-1?a:i;d>=0;){var p=e[d];if(p===ia)return br;if([Uu,Tu].indexOf(p)!==-1)d--;else break}if(oy===A&&[oy,nm,sy,iy].indexOf(u)!==-1||[nm,sy].indexOf(A)!==-1&&[nm,sm].indexOf(u)!==-1||[sm,iy].indexOf(A)!==-1&&u===sm||nE.indexOf(A)!==-1&&[tE,mf].indexOf(u)!==-1||nE.indexOf(u)!==-1&&A===wf||Jo.indexOf(A)!==-1&&Jo.indexOf(u)!==-1||A===Tu&&Jo.indexOf(u)!==-1||Jo.concat(ia).indexOf(A)!==-1&&u===Yh&&oz.indexOf(t[o])===-1||Jo.concat(ia).indexOf(u)!==-1&&A===Xh)return br;if(A===Px&&u===Px){for(var g=r[i],v=1;g>0&&(g--,e[g]===Px);)v++;if(v%2!==0)return br}return A===ng&&u===sg?br:ig},dz=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=cz(t,e.lineBreak),n=r[0],s=r[1],i=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[ia,jc,BU].indexOf(o)!==-1?Ip:o}));var a=e.wordBreak==="keep-all"?i.map(function(o,A){return o&&t[A]>=19968&&t[A]<=40959}):void 0;return[n,s,a]},hz=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===_U,this.start=n,this.end=s}return t.prototype.slice=function(){return rs.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),fz=function(t,e){var r=y1(t),n=dz(r,e),s=n[0],i=n[1],a=n[2],o=r.length,A=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=br;c<o&&(u=uz(r,i,s,++c,a))===br;);if(u!==br||c===o){var d=new hz(r,u,A,c);return A=c,{value:d,done:!1}}return{done:!0,value:null}}}},pz=1,gz=2,i0=4,iE=8,Aw=10,aE=47,Mf=92,mz=9,wz=32,ag=34,Zh=61,xz=35,vz=36,yz=37,og=39,Ag=40,ef=41,bz=95,Li=45,Bz=33,_z=60,Cz=62,Iz=64,Ez=91,kz=93,Sz=61,Nz=123,lg=63,Fz=125,oE=124,Tz=126,Uz=128,AE=65533,Mx=42,Mc=43,Lz=44,jz=58,Qz=59,Ep=46,Rz=0,Pz=8,Dz=11,Mz=14,Oz=31,Hz=127,wo=-1,IU=48,EU=97,kU=101,Vz=102,Kz=117,zz=122,SU=65,NU=69,FU=70,Gz=85,$z=90,ui=function(t){return t>=IU&&t<=57},qz=function(t){return t>=55296&&t<=57343},Lu=function(t){return ui(t)||t>=SU&&t<=FU||t>=EU&&t<=Vz},Wz=function(t){return t>=EU&&t<=zz},Jz=function(t){return t>=SU&&t<=$z},Xz=function(t){return Wz(t)||Jz(t)},Yz=function(t){return t>=Uz},cg=function(t){return t===Aw||t===mz||t===wz},lw=function(t){return Xz(t)||Yz(t)||t===bz},lE=function(t){return lw(t)||ui(t)||t===Li},Zz=function(t){return t>=Rz&&t<=Pz||t===Dz||t>=Mz&&t<=Oz||t===Hz},ol=function(t,e){return t!==Mf?!1:e!==Aw},ug=function(t,e,r){return t===Li?lw(e)||ol(e,r):lw(t)?!0:!!(t===Mf&&ol(t,e))},Ox=function(t,e,r){return t===Mc||t===Li?ui(e)?!0:e===Ep&&ui(r):ui(t===Ep?e:t)},eG=function(t){var e=0,r=1;(t[e]===Mc||t[e]===Li)&&(t[e]===Li&&(r=-1),e++);for(var n=[];ui(t[e]);)n.push(t[e++]);var s=n.length?parseInt(rs.apply(void 0,n),10):0;t[e]===Ep&&e++;for(var i=[];ui(t[e]);)i.push(t[e++]);var a=i.length,o=a?parseInt(rs.apply(void 0,i),10):0;(t[e]===NU||t[e]===kU)&&e++;var A=1;(t[e]===Mc||t[e]===Li)&&(t[e]===Li&&(A=-1),e++);for(var c=[];ui(t[e]);)c.push(t[e++]);var u=c.length?parseInt(rs.apply(void 0,c),10):0;return r*(s+o*Math.pow(10,-a))*Math.pow(10,A*u)},tG={type:2},rG={type:3},nG={type:4},sG={type:13},iG={type:8},aG={type:21},oG={type:9},AG={type:10},lG={type:11},cG={type:12},uG={type:14},dg={type:23},dG={type:1},hG={type:25},fG={type:24},pG={type:26},gG={type:27},mG={type:28},wG={type:29},xG={type:31},cy={type:32},TU=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(y1(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==cy;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ag:return this.consumeStringToken(ag);case xz:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(lE(r)||ol(n,s)){var i=ug(r,n,s)?gz:pz,a=this.consumeName();return{type:5,value:a,flags:i}}break;case vz:if(this.peekCodePoint(0)===Zh)return this.consumeCodePoint(),sG;break;case og:return this.consumeStringToken(og);case Ag:return tG;case ef:return rG;case Mx:if(this.peekCodePoint(0)===Zh)return this.consumeCodePoint(),uG;break;case Mc:if(Ox(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Lz:return nG;case Li:var o=e,A=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Ox(o,A,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(ug(o,A,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===Li&&c===Cz)return this.consumeCodePoint(),this.consumeCodePoint(),fG;break;case Ep:if(Ox(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case aE:if(this.peekCodePoint(0)===Mx)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Mx&&(u=this.consumeCodePoint(),u===aE))return this.consumeToken();if(u===wo)return this.consumeToken()}break;case jz:return pG;case Qz:return gG;case _z:if(this.peekCodePoint(0)===Bz&&this.peekCodePoint(1)===Li&&this.peekCodePoint(2)===Li)return this.consumeCodePoint(),this.consumeCodePoint(),hG;break;case Iz:var d=this.peekCodePoint(0),p=this.peekCodePoint(1),g=this.peekCodePoint(2);if(ug(d,p,g)){var a=this.consumeName();return{type:7,value:a}}break;case Ez:return mG;case Mf:if(ol(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case kz:return wG;case Sz:if(this.peekCodePoint(0)===Zh)return this.consumeCodePoint(),iG;break;case Nz:return lG;case Fz:return cG;case Kz:case Gz:var v=this.peekCodePoint(0),y=this.peekCodePoint(1);return v===Mc&&(Lu(y)||y===lg)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case oE:if(this.peekCodePoint(0)===Zh)return this.consumeCodePoint(),oG;if(this.peekCodePoint(0)===oE)return this.consumeCodePoint(),aG;break;case Tz:if(this.peekCodePoint(0)===Zh)return this.consumeCodePoint(),AG;break;case wo:return cy}return cg(e)?(this.consumeWhiteSpace(),xG):ui(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):lw(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:rs(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Lu(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===lg&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(rs.apply(void 0,e.map(function(A){return A===lg?IU:A})),16),i=parseInt(rs.apply(void 0,e.map(function(A){return A===lg?FU:A})),16);return{type:30,start:s,end:i}}var a=parseInt(rs.apply(void 0,e),16);if(this.peekCodePoint(0)===Li&&Lu(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Lu(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var i=parseInt(rs.apply(void 0,o),16);return{type:30,start:a,end:i}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Ag?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ag?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===wo)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===og||r===ag){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===wo||this.peekCodePoint(0)===ef)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),dg)}for(;;){var s=this.consumeCodePoint();if(s===wo||s===ef)return{type:22,value:rs.apply(void 0,e)};if(cg(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===wo||this.peekCodePoint(0)===ef?(this.consumeCodePoint(),{type:22,value:rs.apply(void 0,e)}):(this.consumeBadUrlRemnants(),dg);if(s===ag||s===og||s===Ag||Zz(s))return this.consumeBadUrlRemnants(),dg;if(s===Mf)if(ol(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),dg;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;cg(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ef||e===wo)return;ol(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=rs.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===wo||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===Aw)return this._value.splice(0,n),dG;if(s===Mf){var i=this._value[n+1];i!==wo&&i!==void 0&&(i===Aw?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):ol(s,i)&&(r+=this.consumeStringSlice(n),r+=rs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=i0,n=this.peekCodePoint(0);for((n===Mc||n===Li)&&e.push(this.consumeCodePoint());ui(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===Ep&&ui(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=iE;ui(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===NU||n===kU)&&((s===Mc||s===Li)&&ui(i)||ui(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=iE;ui(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[eG(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(ug(s,i,a)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===yz?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Lu(e)){for(var r=rs(e);Lu(this.peekCodePoint(0))&&r.length<6;)r+=rs(this.consumeCodePoint());cg(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||qz(n)||n>1114111?AE:n}return e===wo?AE:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(lE(r))e+=rs(r);else if(ol(r,this.peekCodePoint(0)))e+=rs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),UU=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new TU;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||yG(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?cy:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),a0=function(t){return t.type===15},xh=function(t){return t.type===17},rn=function(t){return t.type===20},vG=function(t){return t.type===0},uy=function(t,e){return rn(t)&&t.value===e},LU=function(t){return t.type!==31},Yd=function(t){return t.type!==31&&t.type!==4},Qo=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},yG=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Zl=function(t){return t.type===17||t.type===15},hs=function(t){return t.type===16||Zl(t)},jU=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},$s={type:17,number:0,flags:i0},VB={type:16,number:50,flags:i0},Bl={type:16,number:100,flags:i0},xf=function(t,e,r){var n=t[0],s=t[1];return[fn(n,e),fn(typeof s<"u"?s:n,r)]},fn=function(t,e){if(t.type===16)return t.number/100*e;if(a0(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},QU="deg",RU="grad",PU="rad",DU="turn",b1={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case QU:return Math.PI*e.number/180;case RU:return Math.PI/200*e.number;case PU:return e.number;case DU:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},MU=function(t){return t.type===15&&(t.unit===QU||t.unit===RU||t.unit===PU||t.unit===DU)},OU=function(t){var e=t.filter(rn).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[$s,$s];case"to top":case"bottom":return Ta(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[$s,Bl];case"to right":case"left":return Ta(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Bl,Bl];case"to bottom":case"top":return Ta(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Bl,$s];case"to left":case"right":return Ta(270)}return 0},Ta=function(t){return Math.PI*t/180},Dl={name:"color",parse:function(t,e){if(e.type===18){var r=bG[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return _l(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),a=e.value.substring(3,4);return _l(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return _l(parseInt(n,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),a=e.value.substring(6,8);return _l(parseInt(n,16),parseInt(s,16),parseInt(i,16),parseInt(a,16)/255)}}if(e.type===20){var o=dA[e.value.toUpperCase()];if(typeof o<"u")return o}return dA.TRANSPARENT}},Ml=function(t){return(255&t)===0},Es=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},_l=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},cE=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},uE=function(t,e){var r=e.filter(Yd);if(r.length===3){var n=r.map(cE),s=n[0],i=n[1],a=n[2];return _l(s,i,a,1)}if(r.length===4){var o=r.map(cE),s=o[0],i=o[1],a=o[2],A=o[3];return _l(s,i,a,A)}return 0};function Hx(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var dE=function(t,e){var r=e.filter(Yd),n=r[0],s=r[1],i=r[2],a=r[3],o=(n.type===17?Ta(n.number):b1.parse(t,n))/(Math.PI*2),A=hs(s)?s.number/100:0,c=hs(i)?i.number/100:0,u=typeof a<"u"&&hs(a)?fn(a,1):1;if(A===0)return _l(c*255,c*255,c*255,1);var d=c<=.5?c*(A+1):c+A-c*A,p=c*2-d,g=Hx(p,d,o+1/3),v=Hx(p,d,o),y=Hx(p,d,o-1/3);return _l(g*255,v*255,y*255,u)},bG={hsl:dE,hsla:dE,rgb:uE,rgba:uE},Of=function(t,e){return Dl.parse(t,UU.create(e).parseComponentValue())},dA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},BG={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(rn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},_G={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},B1=function(t,e){var r=Dl.parse(t,e[0]),n=e[1];return n&&hs(n)?{color:r,stop:n}:{color:r,stop:null}},hE=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=$s),n.stop===null&&(n.stop=Bl);for(var s=[],i=0,a=0;a<t.length;a++){var o=t[a].stop;if(o!==null){var A=fn(o,e);A>i?s.push(A):s.push(i),i=A}else s.push(null)}for(var c=null,a=0;a<s.length;a++){var u=s[a];if(u===null)c===null&&(c=a);else if(c!==null){for(var d=a-c,p=s[c-1],g=(u-p)/(d+1),v=1;v<=d;v++)s[c+v-1]=g*v;c=null}}return t.map(function(y,k){var x=y.color;return{color:x,stop:Math.max(Math.min(1,s[k]/e),0)}})},CG=function(t,e,r){var n=e/2,s=r/2,i=fn(t[0],e)-n,a=s-fn(t[1],r);return(Math.atan2(a,i)+Math.PI*2)%(Math.PI*2)},IG=function(t,e,r){var n=typeof t=="number"?t:CG(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),i=e/2,a=r/2,o=s/2,A=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[s,i-c,i+c,a-A,a+A]},qa=function(t,e){return Math.sqrt(t*t+e*e)},fE=function(t,e,r,n,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(a,o){var A=o[0],c=o[1],u=qa(r-A,n-c);return(s?u<a.optimumDistance:u>a.optimumDistance)?{optimumCorner:o,optimumDistance:u}:a},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},EG=function(t,e,r,n,s){var i=0,a=0;switch(t.size){case 0:t.shape===0?i=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)i=a=Math.min(qa(e,r),qa(e,r-s),qa(e-n,r),qa(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),A=fE(n,s,e,r,!0),c=A[0],u=A[1];i=qa(c-e,(u-r)/o),a=o*i}break;case 1:t.shape===0?i=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)i=a=Math.max(qa(e,r),qa(e,r-s),qa(e-n,r),qa(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),d=fE(n,s,e,r,!1),c=d[0],u=d[1];i=qa(c-e,(u-r)/o),a=o*i}break}return Array.isArray(t.size)&&(i=fn(t.size[0],n),a=t.size.length===2?fn(t.size[1],s):i),[i,a]},kG=function(t,e){var r=Ta(180),n=[];return Qo(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&a.value==="to"){r=OU(s);return}else if(MU(a)){r=b1.parse(t,a);return}}var o=B1(t,s);n.push(o)}),{angle:r,stops:n,type:1}},hg=function(t,e){var r=Ta(180),n=[];return Qo(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){r=OU(s);return}else if(MU(a)){r=(b1.parse(t,a)+Ta(270))%Ta(360);return}}var o=B1(t,s);n.push(o)}),{angle:r,stops:n,type:1}},SG=function(t,e){var r=Ta(180),n=[],s=1,i=0,a=3,o=[];return Qo(e).forEach(function(A,c){var u=A[0];if(c===0){if(rn(u)&&u.value==="linear"){s=1;return}else if(rn(u)&&u.value==="radial"){s=2;return}}if(u.type===18){if(u.name==="from"){var d=Dl.parse(t,u.values[0]);n.push({stop:$s,color:d})}else if(u.name==="to"){var d=Dl.parse(t,u.values[0]);n.push({stop:Bl,color:d})}else if(u.name==="color-stop"){var p=u.values.filter(Yd);if(p.length===2){var d=Dl.parse(t,p[1]),g=p[0];xh(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:d})}}}}),s===1?{angle:(r+Ta(180))%Ta(360),stops:n,type:s}:{size:a,shape:i,stops:n,position:o,type:s}},HU="closest-side",VU="farthest-side",KU="closest-corner",zU="farthest-corner",GU="circle",$U="ellipse",qU="cover",WU="contain",NG=function(t,e){var r=0,n=3,s=[],i=[];return Qo(e).forEach(function(a,o){var A=!0;if(o===0){var c=!1;A=a.reduce(function(d,p){if(c)if(rn(p))switch(p.value){case"center":return i.push(VB),d;case"top":case"left":return i.push($s),d;case"right":case"bottom":return i.push(Bl),d}else(hs(p)||Zl(p))&&i.push(p);else if(rn(p))switch(p.value){case GU:return r=0,!1;case $U:return r=1,!1;case"at":return c=!0,!1;case HU:return n=0,!1;case qU:case VU:return n=1,!1;case WU:case KU:return n=2,!1;case zU:return n=3,!1}else if(Zl(p)||hs(p))return Array.isArray(n)||(n=[]),n.push(p),!1;return d},A)}if(A){var u=B1(t,a);s.push(u)}}),{size:n,shape:r,stops:s,position:i,type:2}},fg=function(t,e){var r=0,n=3,s=[],i=[];return Qo(e).forEach(function(a,o){var A=!0;if(o===0?A=a.reduce(function(u,d){if(rn(d))switch(d.value){case"center":return i.push(VB),!1;case"top":case"left":return i.push($s),!1;case"right":case"bottom":return i.push(Bl),!1}else if(hs(d)||Zl(d))return i.push(d),!1;return u},A):o===1&&(A=a.reduce(function(u,d){if(rn(d))switch(d.value){case GU:return r=0,!1;case $U:return r=1,!1;case WU:case HU:return n=0,!1;case VU:return n=1,!1;case KU:return n=2,!1;case qU:case zU:return n=3,!1}else if(Zl(d)||hs(d))return Array.isArray(n)||(n=[]),n.push(d),!1;return u},A)),A){var c=B1(t,a);s.push(c)}}),{size:n,shape:r,stops:s,position:i,type:2}},FG=function(t){return t.type===1},TG=function(t){return t.type===2},KB={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=JU[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function UG(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!JU[t.name])}var JU={"linear-gradient":kG,"-moz-linear-gradient":hg,"-ms-linear-gradient":hg,"-o-linear-gradient":hg,"-webkit-linear-gradient":hg,"radial-gradient":NG,"-moz-radial-gradient":fg,"-ms-radial-gradient":fg,"-o-radial-gradient":fg,"-webkit-radial-gradient":fg,"-webkit-gradient":SG},LG={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Yd(n)&&UG(n)}).map(function(n){return KB.parse(t,n)})}},jG={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(rn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},QG={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Qo(e).map(function(r){return r.filter(hs)}).map(jU)}},RG={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Qo(e).map(function(r){return r.filter(rn).map(function(n){return n.value}).join(" ")}).map(PG)}},PG=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},bd;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(bd||(bd={}));var DG={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Qo(e).map(function(r){return r.filter(MG)})}},MG=function(t){return rn(t)||hs(t)},_1=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},OG=_1("top"),HG=_1("right"),VG=_1("bottom"),KG=_1("left"),C1=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return jU(r.filter(hs))}}},zG=C1("top-left"),GG=C1("top-right"),$G=C1("bottom-right"),qG=C1("bottom-left"),I1=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},WG=I1("top"),JG=I1("right"),XG=I1("bottom"),YG=I1("left"),E1=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return a0(r)?r.number:0}}},ZG=E1("top"),e$=E1("right"),t$=E1("bottom"),r$=E1("left"),n$={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},s$={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},i$={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(rn).reduce(function(r,n){return r|a$(n.value)},0)}},a$=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},o$={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},A$={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},cw;(function(t){t.NORMAL="normal",t.STRICT="strict"})(cw||(cw={}));var l$={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return cw.STRICT;case"normal":default:return cw.NORMAL}}},c$={name:"line-height",initialValue:"normal",prefix:!1,type:4},pE=function(t,e){return rn(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:hs(t)?fn(t,e):e},u$={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:KB.parse(t,e)}},d$={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},dy={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},k1=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},h$=k1("top"),f$=k1("right"),p$=k1("bottom"),g$=k1("left"),m$={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(rn).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},w$={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},S1=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},x$=S1("top"),v$=S1("right"),y$=S1("bottom"),b$=S1("left"),B$={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},_$={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},C$={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&uy(e[0],"none")?[]:Qo(e).map(function(r){for(var n={color:dA.TRANSPARENT,offsetX:$s,offsetY:$s,blur:$s},s=0,i=0;i<r.length;i++){var a=r[i];Zl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:n.blur=a,s++):n.color=Dl.parse(t,a)}return n})}},I$={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},E$={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=N$[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},k$=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},S$=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,i,a,o]:null},N$={matrix:k$,matrix3d:S$},gE={type:16,number:50,flags:i0},F$=[gE,gE],T$={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(hs);return r.length!==2?F$:[r[0],r[1]]}},U$={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Hf;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Hf||(Hf={}));var L$={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Hf.BREAK_ALL;case"keep-all":return Hf.KEEP_ALL;case"normal":default:return Hf.NORMAL}}},j$={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(xh(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},XU={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Q$={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return xh(e)?e.number:1}},R$={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},P$={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(rn).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},D$={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},M$={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},O$={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(xh(e))return e.number;if(rn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},H$={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(rn).map(function(r){return r.value})}},V$={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},vs=function(t,e){return(t&e)!==0},K$={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},z$={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(LU),i=0;i<s.length;i++){var a=s[i],o=s[i+1];if(a.type===20){var A=o&&xh(o)?o.number:1;n.push({counter:a.value,increment:A})}}return n}},G$={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(LU),s=0;s<n.length;s++){var i=n[s],a=n[s+1];if(rn(i)&&i.value!=="none"){var o=a&&xh(a)?a.number:0;r.push({counter:i.value,reset:o})}}return r}},$$={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(a0).map(function(r){return XU.parse(t,r)})}},q$={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(vG);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var a=s[i].value,o=s[i+1].value;n.push({open:a,close:o})}return n}},mE=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},W$={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&uy(e[0],"none")?[]:Qo(e).map(function(r){for(var n={color:255,offsetX:$s,offsetY:$s,blur:$s,spread:$s,inset:!1},s=0,i=0;i<r.length;i++){var a=r[i];uy(a,"inset")?n.inset=!0:Zl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:s===2?n.blur=a:n.spread=a,s++):n.color=Dl.parse(t,a)}return n})}},J$={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(rn).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},X$={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Y$={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return a0(e)?e.number:0}},Z$=function(){function t(e,r){var n,s;this.animationDuration=Ut(e,$$,r.animationDuration),this.backgroundClip=Ut(e,BG,r.backgroundClip),this.backgroundColor=Ut(e,_G,r.backgroundColor),this.backgroundImage=Ut(e,LG,r.backgroundImage),this.backgroundOrigin=Ut(e,jG,r.backgroundOrigin),this.backgroundPosition=Ut(e,QG,r.backgroundPosition),this.backgroundRepeat=Ut(e,RG,r.backgroundRepeat),this.backgroundSize=Ut(e,DG,r.backgroundSize),this.borderTopColor=Ut(e,OG,r.borderTopColor),this.borderRightColor=Ut(e,HG,r.borderRightColor),this.borderBottomColor=Ut(e,VG,r.borderBottomColor),this.borderLeftColor=Ut(e,KG,r.borderLeftColor),this.borderTopLeftRadius=Ut(e,zG,r.borderTopLeftRadius),this.borderTopRightRadius=Ut(e,GG,r.borderTopRightRadius),this.borderBottomRightRadius=Ut(e,$G,r.borderBottomRightRadius),this.borderBottomLeftRadius=Ut(e,qG,r.borderBottomLeftRadius),this.borderTopStyle=Ut(e,WG,r.borderTopStyle),this.borderRightStyle=Ut(e,JG,r.borderRightStyle),this.borderBottomStyle=Ut(e,XG,r.borderBottomStyle),this.borderLeftStyle=Ut(e,YG,r.borderLeftStyle),this.borderTopWidth=Ut(e,ZG,r.borderTopWidth),this.borderRightWidth=Ut(e,e$,r.borderRightWidth),this.borderBottomWidth=Ut(e,t$,r.borderBottomWidth),this.borderLeftWidth=Ut(e,r$,r.borderLeftWidth),this.boxShadow=Ut(e,W$,r.boxShadow),this.color=Ut(e,n$,r.color),this.direction=Ut(e,s$,r.direction),this.display=Ut(e,i$,r.display),this.float=Ut(e,o$,r.cssFloat),this.fontFamily=Ut(e,D$,r.fontFamily),this.fontSize=Ut(e,M$,r.fontSize),this.fontStyle=Ut(e,V$,r.fontStyle),this.fontVariant=Ut(e,H$,r.fontVariant),this.fontWeight=Ut(e,O$,r.fontWeight),this.letterSpacing=Ut(e,A$,r.letterSpacing),this.lineBreak=Ut(e,l$,r.lineBreak),this.lineHeight=Ut(e,c$,r.lineHeight),this.listStyleImage=Ut(e,u$,r.listStyleImage),this.listStylePosition=Ut(e,d$,r.listStylePosition),this.listStyleType=Ut(e,dy,r.listStyleType),this.marginTop=Ut(e,h$,r.marginTop),this.marginRight=Ut(e,f$,r.marginRight),this.marginBottom=Ut(e,p$,r.marginBottom),this.marginLeft=Ut(e,g$,r.marginLeft),this.opacity=Ut(e,Q$,r.opacity);var i=Ut(e,m$,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Ut(e,w$,r.overflowWrap),this.paddingTop=Ut(e,x$,r.paddingTop),this.paddingRight=Ut(e,v$,r.paddingRight),this.paddingBottom=Ut(e,y$,r.paddingBottom),this.paddingLeft=Ut(e,b$,r.paddingLeft),this.paintOrder=Ut(e,J$,r.paintOrder),this.position=Ut(e,_$,r.position),this.textAlign=Ut(e,B$,r.textAlign),this.textDecorationColor=Ut(e,R$,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Ut(e,P$,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=Ut(e,C$,r.textShadow),this.textTransform=Ut(e,I$,r.textTransform),this.transform=Ut(e,E$,r.transform),this.transformOrigin=Ut(e,T$,r.transformOrigin),this.visibility=Ut(e,U$,r.visibility),this.webkitTextStrokeColor=Ut(e,X$,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ut(e,Y$,r.webkitTextStrokeWidth),this.wordBreak=Ut(e,L$,r.wordBreak),this.zIndex=Ut(e,j$,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Ml(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return vs(this.display,4)||vs(this.display,33554432)||vs(this.display,268435456)||vs(this.display,536870912)||vs(this.display,67108864)||vs(this.display,134217728)},t}(),eq=function(){function t(e,r){this.content=Ut(e,K$,r.content),this.quotes=Ut(e,q$,r.quotes)}return t}(),wE=function(){function t(e,r){this.counterIncrement=Ut(e,z$,r.counterIncrement),this.counterReset=Ut(e,G$,r.counterReset)}return t}(),Ut=function(t,e,r){var n=new TU,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var i=new UU(n.read());switch(e.type){case 2:var a=i.parseComponentValue();return e.parse(t,rn(a)?a.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return b1.parse(t,i.parseComponentValue());case"color":return Dl.parse(t,i.parseComponentValue());case"image":return KB.parse(t,i.parseComponentValue());case"length":var o=i.parseComponentValue();return Zl(o)?o:$s;case"length-percentage":var A=i.parseComponentValue();return hs(A)?A:$s;case"time":return XU.parse(t,i.parseComponentValue())}break}},tq="data-html2canvas-debug",rq=function(t){var e=t.getAttribute(tq);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},hy=function(t,e){var r=rq(t);return r===1||e===r},Ro=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,hy(r,3))debugger;this.styles=new Z$(e,window.getComputedStyle(r,null)),gy(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=v1(this.context,r),hy(r,4)&&(this.flags|=16)}return t}(),nq="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",xE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var pg=0;pg<xE.length;pg++)vf[xE.charCodeAt(pg)]=pg;var sq=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=vf[t.charCodeAt(n)],a=vf[t.charCodeAt(n+1)],o=vf[t.charCodeAt(n+2)],A=vf[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|A&63;return c},iq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},aq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Gc=5,zB=11,Vx=2,oq=zB-Gc,YU=65536>>Gc,Aq=1<<Gc,Kx=Aq-1,lq=1024>>Gc,cq=YU+lq,uq=cq,dq=32,hq=uq+dq,fq=65536>>zB,pq=1<<oq,gq=pq-1,vE=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},mq=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},wq=function(t,e){var r=sq(t),n=Array.isArray(r)?aq(r):new Uint32Array(r),s=Array.isArray(r)?iq(r):new Uint16Array(r),i=24,a=vE(s,i/2,n[4]/2),o=n[5]===2?vE(s,(i+n[4])/2):mq(n,Math.ceil((i+n[4])/4));return new xq(n[0],n[1],n[2],n[3],a,o)},xq=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Gc],r=(r<<Vx)+(e&Kx),this.data[r];if(e<=65535)return r=this.index[YU+(e-55296>>Gc)],r=(r<<Vx)+(e&Kx),this.data[r];if(e<this.highStart)return r=hq-fq+(e>>zB),r=this.index[r],r+=e>>Gc&gq,r=this.index[r],r=(r<<Vx)+(e&Kx),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),yE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vq=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gg=0;gg<yE.length;gg++)vq[yE.charCodeAt(gg)]=gg;var yq=1,zx=2,Gx=3,bE=4,BE=5,bq=7,_E=8,$x=9,qx=10,CE=11,IE=12,EE=13,kE=14,Wx=15,Bq=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},_q=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Cq=wq(nq),Ia="",Jx="",Iq=function(t){return Cq.get(t)},Eq=function(t,e,r){var n=r-2,s=e[n],i=e[r-1],a=e[r];if(i===zx&&a===Gx)return Ia;if(i===zx||i===Gx||i===bE||a===zx||a===Gx||a===bE)return Jx;if(i===_E&&[_E,$x,CE,IE].indexOf(a)!==-1||(i===CE||i===$x)&&(a===$x||a===qx)||(i===IE||i===qx)&&a===qx||a===EE||a===BE||a===bq||i===yq)return Ia;if(i===EE&&a===kE){for(;s===BE;)s=e[--n];if(s===kE)return Ia}if(i===Wx&&a===Wx){for(var o=0;s===Wx;)o++,s=e[--n];if(o%2===0)return Ia}return Jx},kq=function(t){var e=Bq(t),r=e.length,n=0,s=0,i=e.map(Iq);return{next:function(){if(n>=r)return{done:!0,value:null};for(var a=Ia;n<r&&(a=Eq(e,i,++n))===Ia;);if(a!==Ia||n===r){var o=_q.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},Sq=function(t){for(var e=kq(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Nq=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(n),i===e)return!0}}return!1},Fq=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=y1(n.data).map(function(A){return rs(A)}),i=0,a={},o=s.every(function(A,c){r.setStart(n,i),r.setEnd(n,i+A.length);var u=r.getBoundingClientRect();i+=A.length;var d=u.x>a.x||u.y>a.y;return a=u,c===0?!0:d});return t.body.removeChild(e),o},Tq=function(){return typeof new Image().crossOrigin<"u"},Uq=function(){return typeof new XMLHttpRequest().responseType=="string"},Lq=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},SE=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},jq=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,i=e.toDataURL();s.src=i;var a=fy(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),NE(a).then(function(o){n.drawImage(o,0,0);var A=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=r+"px",SE(A)?NE(fy(r,r,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),SE(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},fy=function(t,e,r,n,s){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(s),a},NE=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Hs={get SUPPORT_RANGE_BOUNDS(){var t=Nq(document);return Object.defineProperty(Hs,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Hs.SUPPORT_RANGE_BOUNDS&&Fq(document);return Object.defineProperty(Hs,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Lq(document);return Object.defineProperty(Hs,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?jq(document):Promise.resolve(!1);return Object.defineProperty(Hs,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Tq();return Object.defineProperty(Hs,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Uq();return Object.defineProperty(Hs,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Hs,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Hs,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Vf=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Qq=function(t,e,r,n){var s=Dq(e,r),i=[],a=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(Hs.SUPPORT_RANGE_BOUNDS){var A=FE(n,a,o.length).getClientRects();if(A.length>1){var c=GB(o),u=0;c.forEach(function(p){i.push(new Vf(p,yA.fromDOMRectList(t,FE(n,u+a,p.length).getClientRects()))),u+=p.length})}else i.push(new Vf(o,yA.fromDOMRectList(t,A)))}else{var d=n.splitText(o.length);i.push(new Vf(o,Rq(t,n))),n=d}else Hs.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),i},Rq=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var i=v1(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),i}}return yA.EMPTY},FE=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},GB=function(t){if(Hs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Sq(t)},Pq=function(t,e){if(Hs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Oq(t,e)},Dq=function(t,e){return e.letterSpacing!==0?GB(t):Pq(t,e)},Mq=[32,160,4961,65792,65793,4153,4241],Oq=function(t,e){for(var r=fz(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,i=function(){if(s.value){var a=s.value.slice(),o=y1(a),A="";o.forEach(function(c){Mq.indexOf(c)===-1?A+=rs(c):(A.length&&n.push(A),n.push(rs(c)),A="")}),A.length&&n.push(A)}};!(s=r.next()).done;)i();return n},Hq=function(){function t(e,r,n){this.text=Vq(r.data,n.textTransform),this.textBounds=Qq(e,this.text,n,r)}return t}(),Vq=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Kq,zq);case 2:return t.toUpperCase();default:return t}},Kq=/(^|\s|:|-|\(|\))([a-z])/g,zq=function(t,e,r){return t.length>0?e+r.toUpperCase():t},ZU=function(t){io(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Ro),eL=function(t){io(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Ro),tL=function(t){io(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=new XMLSerializer,a=v1(r,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Ro),rL=function(t){io(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ro),py=function(t){io(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Ro),Gq=[{type:15,flags:0,unit:"px",number:3}],$q=[{type:16,flags:0,number:50}],qq=function(t){return t.width>t.height?new yA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new yA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Wq=function(t){var e=t.type===Jq?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},uw="checkbox",dw="radio",Jq="password",TE=707406591,$B=function(t){io(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=Wq(n),(s.type===uw||s.type===dw)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=qq(s.bounds)),s.type){case uw:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Gq;break;case dw:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=$q;break}return s}return e}(Ro),nL=function(t){io(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=n.options[n.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(Ro),sL=function(t){io(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ro),iL=function(t){io(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=oL(r,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Of(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):dA.TRANSPARENT,a=n.contentWindow.document.body?Of(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):dA.TRANSPARENT;s.backgroundColor=Ml(i)?Ml(a)?s.styles.backgroundColor:a:i}}catch{}return s}return e}(Ro),Xq=["OL","UL","MENU"],im=function(t,e,r,n){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,AL(s)&&s.data.trim().length>0)r.textNodes.push(new Hq(t,s,r.styles));else if(ld(s))if(dL(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return im(t,o,r,n)});else{var a=aL(t,s);a.styles.isVisible()&&(Yq(s,a,n)?a.flags|=4:Zq(a.styles)&&(a.flags|=2),Xq.indexOf(s.tagName)!==-1&&(a.flags|=8),r.elements.push(a),s.slot,s.shadowRoot?im(t,s.shadowRoot,a,n):!hw(s)&&!lL(s)&&!fw(s)&&im(t,s,a,n))}},aL=function(t,e){return my(e)?new ZU(t,e):cL(e)?new eL(t,e):lL(e)?new tL(t,e):eW(e)?new rL(t,e):tW(e)?new py(t,e):rW(e)?new $B(t,e):fw(e)?new nL(t,e):hw(e)?new sL(t,e):uL(e)?new iL(t,e):new Ro(t,e)},oL=function(t,e){var r=aL(t,e);return r.flags|=4,im(t,e,r,r),r},Yq=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||qB(t)&&r.styles.isTransparent()},Zq=function(t){return t.isPositioned()||t.isFloating()},AL=function(t){return t.nodeType===Node.TEXT_NODE},ld=function(t){return t.nodeType===Node.ELEMENT_NODE},gy=function(t){return ld(t)&&typeof t.style<"u"&&!am(t)},am=function(t){return typeof t.className=="object"},eW=function(t){return t.tagName==="LI"},tW=function(t){return t.tagName==="OL"},rW=function(t){return t.tagName==="INPUT"},nW=function(t){return t.tagName==="HTML"},lL=function(t){return t.tagName==="svg"},qB=function(t){return t.tagName==="BODY"},cL=function(t){return t.tagName==="CANVAS"},UE=function(t){return t.tagName==="VIDEO"},my=function(t){return t.tagName==="IMG"},uL=function(t){return t.tagName==="IFRAME"},LE=function(t){return t.tagName==="STYLE"},sW=function(t){return t.tagName==="SCRIPT"},hw=function(t){return t.tagName==="TEXTAREA"},fw=function(t){return t.tagName==="SELECT"},dL=function(t){return t.tagName==="SLOT"},jE=function(t){return t.tagName.indexOf("-")>0},iW=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,i=!0;n!==null&&n.forEach(function(o){var A=r.counters[o.counter];A&&o.increment!==0&&(i=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=o.increment)});var a=[];return i&&s.forEach(function(o){var A=r.counters[o.counter];a.push(o.counter),A||(A=r.counters[o.counter]=[]),A.push(o.reset)}),a},t}(),QE={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},RE={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},oW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ju=function(t,e,r,n,s,i){return t<e||t>r?kp(t,s,i.length>0):n.integers.reduce(function(a,o,A){for(;t>=o;)t-=o,a+=n.values[A];return a},"")+i},hL=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},es=function(t,e,r,n,s){var i=r-e+1;return(t<0?"-":"")+(hL(Math.abs(t),i,n,function(a){return rs(Math.floor(a%i)+e)})+s)},Cc=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return hL(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},zu=1,nl=2,sl=4,yf=8,Xo=function(t,e,r,n,s,i){if(t<-9999||t>9999)return kp(t,4,s.length>0);var a=Math.abs(t),o=s;if(a===0)return e[0]+o;for(var A=0;a>0&&A<=4;A++){var c=a%10;c===0&&vs(i,zu)&&o!==""?o=e[c]+o:c>1||c===1&&A===0||c===1&&A===1&&vs(i,nl)||c===1&&A===1&&vs(i,sl)&&t>100||c===1&&A>1&&vs(i,yf)?o=e[c]+(A>0?r[A-1]:"")+o:c===1&&A>0&&(o=r[A-1]+o),a=Math.floor(a/10)}return(t<0?n:"")+o},PE="",DE="",ME="",Xx="",kp=function(t,e,r){var n=r?". ":"",s=r?"":"",i=r?", ":"",a=r?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var o=es(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Cc(t,"",s);case 6:return ju(t,1,3999,QE,3,n).toLowerCase();case 7:return ju(t,1,3999,QE,3,n);case 8:return es(t,945,969,!1,n);case 9:return es(t,97,122,!1,n);case 10:return es(t,65,90,!1,n);case 11:return es(t,1632,1641,!0,n);case 12:case 49:return ju(t,1,9999,RE,3,n);case 35:return ju(t,1,9999,RE,3,n).toLowerCase();case 13:return es(t,2534,2543,!0,n);case 14:case 30:return es(t,6112,6121,!0,n);case 15:return Cc(t,"",s);case 16:return Cc(t,"",s);case 17:case 48:return Xo(t,"",PE,"",s,nl|sl|yf);case 47:return Xo(t,"",DE,"",s,zu|nl|sl|yf);case 42:return Xo(t,"",PE,"",s,nl|sl|yf);case 41:return Xo(t,"",DE,"",s,zu|nl|sl|yf);case 26:return Xo(t,"","",ME,s,0);case 25:return Xo(t,"","",ME,s,zu|nl|sl);case 31:return Xo(t,"","",Xx,i,zu|nl|sl);case 33:return Xo(t,"","",Xx,i,0);case 32:return Xo(t,"","",Xx,i,zu|nl|sl);case 18:return es(t,2406,2415,!0,n);case 20:return ju(t,1,19999,oW,3,n);case 21:return es(t,2790,2799,!0,n);case 22:return es(t,2662,2671,!0,n);case 22:return ju(t,1,10999,aW,3,n);case 23:return Cc(t,"");case 24:return Cc(t,"");case 27:return es(t,3302,3311,!0,n);case 28:return Cc(t,"",s);case 29:return Cc(t,"",s);case 34:return es(t,3792,3801,!0,n);case 37:return es(t,6160,6169,!0,n);case 38:return es(t,4160,4169,!0,n);case 39:return es(t,2918,2927,!0,n);case 40:return es(t,1776,1785,!0,n);case 43:return es(t,3046,3055,!0,n);case 44:return es(t,3174,3183,!0,n);case 45:return es(t,3664,3673,!0,n);case 46:return es(t,3872,3881,!0,n);case 3:default:return es(t,48,57,!0,n)}},fL="data-html2canvas-ignore",OE=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new iW,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=AW(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=s.contentWindow,A=o.document,c=uW(s).then(function(){return bi(n,void 0,void 0,function(){var u,d;return li(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(pW),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),u=this.options.onclone,d=this.clonedReferenceElement,typeof d>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,cW(A)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(A,d)}).then(function(){return s})]:[2,s]}})})});return A.open(),A.write(hW(document.doctype)+"<html></html>"),fW(this.referenceElement.ownerDocument,i,a),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),c},t.prototype.createElementClone=function(e){if(hy(e,2))debugger;if(cL(e))return this.createCanvasClone(e);if(UE(e))return this.createVideoClone(e);if(LE(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return my(r)&&(my(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),jE(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Yx(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(i,a){return a&&typeof a.cssText=="string"?i+a.cssText:i},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),a=s.getContext("2d");if(a)if(!this.options.allowTaint&&i)a.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var A=o.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!ld(r)||!sW(r)&&!r.hasAttribute(fL)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!ld(r)||!LE(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(ld(i)&&dL(i)&&typeof i.assignedNodes=="function"){var a=i.assignedNodes();a.length&&a.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,i,n)},t.prototype.cloneNode=function(e,r){if(AL(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&ld(e)&&(gy(e)||am(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&gy(s)&&(this.clonedReferenceElement=s),qB(s)&&wW(s);var A=this.counters.parse(new wE(this.context,i)),c=this.resolvePseudoContent(e,s,a,Kf.BEFORE);jE(e)&&(r=!0),UE(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var u=this.resolvePseudoContent(e,s,o,Kf.AFTER);return u&&s.appendChild(u),this.counters.pop(A),(i&&(this.options.copyStyles||am(e))&&!uL(e)||r)&&Yx(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(hw(e)||fw(e))&&(hw(s)||fw(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var i=this;if(n){var a=n.content,o=r.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||n.display==="none")){this.counters.parse(new wE(this.context,n));var A=new eq(this.context,n),c=o.createElement("html2canvaspseudoelement");Yx(n,c),A.content.forEach(function(d){if(d.type===0)c.appendChild(o.createTextNode(d.value));else if(d.type===22){var p=o.createElement("img");p.src=d.value,p.style.opacity="1",c.appendChild(p)}else if(d.type===18){if(d.name==="attr"){var g=d.values.filter(rn);g.length&&c.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(d.name==="counter"){var v=d.values.filter(Yd),y=v[0],k=v[1];if(y&&rn(y)){var x=i.counters.getCounterValue(y.value),I=k&&rn(k)?dy.parse(i.context,k.value):3;c.appendChild(o.createTextNode(kp(x,I,!1)))}}else if(d.name==="counters"){var N=d.values.filter(Yd),y=N[0],U=N[1],k=N[2];if(y&&rn(y)){var D=i.counters.getCounterValues(y.value),P=k&&rn(k)?dy.parse(i.context,k.value):3,E=U&&U.type===0?U.value:"",_=D.map(function(S){return kp(S,P,!1)}).join(E);c.appendChild(o.createTextNode(_))}}}else if(d.type===20)switch(d.value){case"open-quote":c.appendChild(o.createTextNode(mE(A.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(mE(A.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(d.value))}}),c.className=wy+" "+xy;var u=s===Kf.BEFORE?" "+wy:" "+xy;return am(r)?r.className.baseValue+=u:r.className+=u,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Kf;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Kf||(Kf={}));var AW=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(fL,"true"),t.body.appendChild(r),r},lW=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},cW=function(t){return Promise.all([].slice.call(t.images,0).map(lW))},uW=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},dW=["all","d","content"],Yx=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);dW.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},hW=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},fW=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},pW=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},gW=":before",mW=":after",wy="___html2canvas___pseudoelement_before",xy="___html2canvas___pseudoelement_after",HE=`{
    content: "" !important;
    display: none !important;
}`,wW=function(t){xW(t,"."+wy+gW+HE+`
         .`+xy+mW+HE)},xW=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},pL=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),vW=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(ev(e)||_W(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return bi(this,void 0,void 0,function(){var r,n,s,i,a=this;return li(this,function(o){switch(o.label){case 0:return r=pL.isSameOrigin(e),n=!Zx(e)&&this._options.useCORS===!0&&Hs.SUPPORT_CORS_IMAGES&&!r,s=!Zx(e)&&!r&&!ev(e)&&typeof this._options.proxy=="string"&&Hs.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Zx(e)&&!ev(e)&&!s&&!n?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(A,c){var u=new Image;u.onload=function(){return A(u)},u.onerror=c,(CW(i)||n)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return A(u)},500),a._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,a){var o=Hs.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(o==="text")i(A.response);else{var d=new FileReader;d.addEventListener("load",function(){return i(d.result)},!1),d.addEventListener("error",function(p){return a(p)},!1),d.readAsDataURL(A.response)}else a("Failed to proxy resource "+s+" with status code "+A.status)},A.onerror=a;var c=n.indexOf("?")>-1?"&":"?";if(A.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=o),r._options.imageTimeout){var u=r._options.imageTimeout;A.timeout=u,A.ontimeout=function(){return a("Timed out ("+u+"ms) proxying "+s)}}A.send()})},t}(),yW=/^data:image\/svg\+xml/i,bW=/^data:image\/.*;base64,/i,BW=/^data:image\/.*/i,_W=function(t){return Hs.SUPPORT_SVG_DRAWING||!IW(t)},Zx=function(t){return BW.test(t)},CW=function(t){return bW.test(t)},ev=function(t){return t.substr(0,4)==="blob"},IW=function(t){return t.substr(-3).toLowerCase()==="svg"||yW.test(t)},Ft=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Qu=function(t,e,r){return new Ft(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},mg=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Qu(this.start,this.startControl,e),s=Qu(this.startControl,this.endControl,e),i=Qu(this.endControl,this.end,e),a=Qu(n,s,e),o=Qu(s,i,e),A=Qu(a,o,e);return r?new t(this.start,n,a,A):new t(A,o,i,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Na=function(t){return t.type===1},EW=function(){function t(e){var r=e.styles,n=e.bounds,s=xf(r.borderTopLeftRadius,n.width,n.height),i=s[0],a=s[1],o=xf(r.borderTopRightRadius,n.width,n.height),A=o[0],c=o[1],u=xf(r.borderBottomRightRadius,n.width,n.height),d=u[0],p=u[1],g=xf(r.borderBottomLeftRadius,n.width,n.height),v=g[0],y=g[1],k=[];k.push((i+A)/n.width),k.push((v+d)/n.width),k.push((a+y)/n.height),k.push((c+p)/n.height);var x=Math.max.apply(Math,k);x>1&&(i/=x,a/=x,A/=x,c/=x,d/=x,p/=x,v/=x,y/=x);var I=n.width-A,N=n.height-p,U=n.width-d,D=n.height-y,P=r.borderTopWidth,E=r.borderRightWidth,_=r.borderBottomWidth,B=r.borderLeftWidth,j=fn(r.paddingTop,e.bounds.width),S=fn(r.paddingRight,e.bounds.width),L=fn(r.paddingBottom,e.bounds.width),T=fn(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?_n(n.left+B/3,n.top+P/3,i-B/3,a-P/3,Kr.TOP_LEFT):new Ft(n.left+B/3,n.top+P/3),this.topRightBorderDoubleOuterBox=i>0||a>0?_n(n.left+I,n.top+P/3,A-E/3,c-P/3,Kr.TOP_RIGHT):new Ft(n.left+n.width-E/3,n.top+P/3),this.bottomRightBorderDoubleOuterBox=d>0||p>0?_n(n.left+U,n.top+N,d-E/3,p-_/3,Kr.BOTTOM_RIGHT):new Ft(n.left+n.width-E/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=v>0||y>0?_n(n.left+B/3,n.top+D,v-B/3,y-_/3,Kr.BOTTOM_LEFT):new Ft(n.left+B/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?_n(n.left+B*2/3,n.top+P*2/3,i-B*2/3,a-P*2/3,Kr.TOP_LEFT):new Ft(n.left+B*2/3,n.top+P*2/3),this.topRightBorderDoubleInnerBox=i>0||a>0?_n(n.left+I,n.top+P*2/3,A-E*2/3,c-P*2/3,Kr.TOP_RIGHT):new Ft(n.left+n.width-E*2/3,n.top+P*2/3),this.bottomRightBorderDoubleInnerBox=d>0||p>0?_n(n.left+U,n.top+N,d-E*2/3,p-_*2/3,Kr.BOTTOM_RIGHT):new Ft(n.left+n.width-E*2/3,n.top+n.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||y>0?_n(n.left+B*2/3,n.top+D,v-B*2/3,y-_*2/3,Kr.BOTTOM_LEFT):new Ft(n.left+B*2/3,n.top+n.height-_*2/3),this.topLeftBorderStroke=i>0||a>0?_n(n.left+B/2,n.top+P/2,i-B/2,a-P/2,Kr.TOP_LEFT):new Ft(n.left+B/2,n.top+P/2),this.topRightBorderStroke=i>0||a>0?_n(n.left+I,n.top+P/2,A-E/2,c-P/2,Kr.TOP_RIGHT):new Ft(n.left+n.width-E/2,n.top+P/2),this.bottomRightBorderStroke=d>0||p>0?_n(n.left+U,n.top+N,d-E/2,p-_/2,Kr.BOTTOM_RIGHT):new Ft(n.left+n.width-E/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=v>0||y>0?_n(n.left+B/2,n.top+D,v-B/2,y-_/2,Kr.BOTTOM_LEFT):new Ft(n.left+B/2,n.top+n.height-_/2),this.topLeftBorderBox=i>0||a>0?_n(n.left,n.top,i,a,Kr.TOP_LEFT):new Ft(n.left,n.top),this.topRightBorderBox=A>0||c>0?_n(n.left+I,n.top,A,c,Kr.TOP_RIGHT):new Ft(n.left+n.width,n.top),this.bottomRightBorderBox=d>0||p>0?_n(n.left+U,n.top+N,d,p,Kr.BOTTOM_RIGHT):new Ft(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=v>0||y>0?_n(n.left,n.top+D,v,y,Kr.BOTTOM_LEFT):new Ft(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||a>0?_n(n.left+B,n.top+P,Math.max(0,i-B),Math.max(0,a-P),Kr.TOP_LEFT):new Ft(n.left+B,n.top+P),this.topRightPaddingBox=A>0||c>0?_n(n.left+Math.min(I,n.width-E),n.top+P,I>n.width+E?0:Math.max(0,A-E),Math.max(0,c-P),Kr.TOP_RIGHT):new Ft(n.left+n.width-E,n.top+P),this.bottomRightPaddingBox=d>0||p>0?_n(n.left+Math.min(U,n.width-B),n.top+Math.min(N,n.height-_),Math.max(0,d-E),Math.max(0,p-_),Kr.BOTTOM_RIGHT):new Ft(n.left+n.width-E,n.top+n.height-_),this.bottomLeftPaddingBox=v>0||y>0?_n(n.left+B,n.top+Math.min(D,n.height-_),Math.max(0,v-B),Math.max(0,y-_),Kr.BOTTOM_LEFT):new Ft(n.left+B,n.top+n.height-_),this.topLeftContentBox=i>0||a>0?_n(n.left+B+T,n.top+P+j,Math.max(0,i-(B+T)),Math.max(0,a-(P+j)),Kr.TOP_LEFT):new Ft(n.left+B+T,n.top+P+j),this.topRightContentBox=A>0||c>0?_n(n.left+Math.min(I,n.width+B+T),n.top+P+j,I>n.width+B+T?0:A-B+T,c-(P+j),Kr.TOP_RIGHT):new Ft(n.left+n.width-(E+S),n.top+P+j),this.bottomRightContentBox=d>0||p>0?_n(n.left+Math.min(U,n.width-(B+T)),n.top+Math.min(N,n.height+P+j),Math.max(0,d-(E+S)),p-(_+L),Kr.BOTTOM_RIGHT):new Ft(n.left+n.width-(E+S),n.top+n.height-(_+L)),this.bottomLeftContentBox=v>0||y>0?_n(n.left+B+T,n.top+D,Math.max(0,v-(B+T)),y-(_+L),Kr.BOTTOM_LEFT):new Ft(n.left+B+T,n.top+n.height-(_+L))}return t}(),Kr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Kr||(Kr={}));var _n=function(t,e,r,n,s){var i=4*((Math.sqrt(2)-1)/3),a=r*i,o=n*i,A=t+r,c=e+n;switch(s){case Kr.TOP_LEFT:return new mg(new Ft(t,c),new Ft(t,c-o),new Ft(A-a,e),new Ft(A,e));case Kr.TOP_RIGHT:return new mg(new Ft(t,e),new Ft(t+a,e),new Ft(A,c-o),new Ft(A,c));case Kr.BOTTOM_RIGHT:return new mg(new Ft(A,e),new Ft(A,e+o),new Ft(t+a,c),new Ft(t,c));case Kr.BOTTOM_LEFT:default:return new mg(new Ft(A,c),new Ft(A-a,c),new Ft(t,e+o),new Ft(t,e))}},pw=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},kW=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},gw=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},SW=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),wg=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),NW=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),FW=function(t){return t.type===0},gL=function(t){return t.type===1},TW=function(t){return t.type===2},VE=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},UW=function(t,e,r,n,s){return t.map(function(i,a){switch(a){case 0:return i.add(e,r);case 1:return i.add(e+n,r);case 2:return i.add(e+n,r+s);case 3:return i.add(e,r+s)}return i})},mL=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),wL=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new EW(this.container),this.container.styles.opacity<1&&this.effects.push(new NW(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new SW(n,s,i))}if(this.container.styles.overflowX!==0){var a=pw(this.curves),o=gw(this.curves);VE(a,o)?this.effects.push(new wg(a,6)):(this.effects.push(new wg(a,2)),this.effects.push(new wg(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var i=n.effects.filter(function(A){return!gL(A)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,i),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=pw(n.curves),o=gw(n.curves);VE(a,o)||s.unshift(new wg(o,6))}}else s.unshift.apply(s,i);n=n.parent}return s.filter(function(A){return vs(A.target,e)})},t}(),vy=function(t,e,r,n){t.container.elements.forEach(function(s){var i=vs(s.flags,4),a=vs(s.flags,2),o=new wL(s,t);vs(s.styles.display,2048)&&n.push(o);var A=vs(s.flags,8)?[]:n;if(i||a){var c=i||s.styles.isPositioned()?r:e,u=new mL(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var d=s.styles.zIndex.order;if(d<0){var p=0;c.negativeZIndex.some(function(v,y){return d>v.element.container.styles.zIndex.order?(p=y,!1):p>0}),c.negativeZIndex.splice(p,0,u)}else if(d>0){var g=0;c.positiveZIndex.some(function(v,y){return d>=v.element.container.styles.zIndex.order?(g=y+1,!1):g>0}),c.positiveZIndex.splice(g,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else s.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);vy(o,u,i?u:r,A)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),vy(o,e,r,A);vs(s.flags,8)&&xL(s,A)})},xL=function(t,e){for(var r=t instanceof py?t.start:1,n=t instanceof py?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof rL&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=kp(r,i.container.styles.listStyleType,!0),r+=n?-1:1}},LW=function(t){var e=new wL(t,null),r=new mL(e),n=[];return vy(e,r,r,n),xL(e.container,n),r},KE=function(t,e){switch(e){case 0:return Ua(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ua(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ua(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ua(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},jW=function(t,e){switch(e){case 0:return Ua(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ua(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ua(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ua(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},QW=function(t,e){switch(e){case 0:return Ua(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ua(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ua(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ua(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},RW=function(t,e){switch(e){case 0:return xg(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return xg(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return xg(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return xg(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},xg=function(t,e){var r=[];return Na(t)?r.push(t.subdivide(.5,!1)):r.push(t),Na(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Ua=function(t,e,r,n){var s=[];return Na(t)?s.push(t.subdivide(.5,!1)):s.push(t),Na(r)?s.push(r.subdivide(.5,!0)):s.push(r),Na(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Na(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},vL=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},mw=function(t){var e=t.styles,r=t.bounds,n=fn(e.paddingLeft,r.width),s=fn(e.paddingRight,r.width),i=fn(e.paddingTop,r.width),a=fn(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+i+a))},PW=function(t,e){return t===0?e.bounds:t===2?mw(e):vL(e)},DW=function(t,e){return t===0?e.bounds:t===2?mw(e):vL(e)},tv=function(t,e,r){var n=PW(Gu(t.styles.backgroundOrigin,e),t),s=DW(Gu(t.styles.backgroundClip,e),t),i=MW(Gu(t.styles.backgroundSize,e),r,n),a=i[0],o=i[1],A=xf(Gu(t.styles.backgroundPosition,e),n.width-a,n.height-o),c=OW(Gu(t.styles.backgroundRepeat,e),A,i,n,s),u=Math.round(n.left+A[0]),d=Math.round(n.top+A[1]);return[c,u,d,a,o]},Ru=function(t){return rn(t)&&t.value===bd.AUTO},vg=function(t){return typeof t=="number"},MW=function(t,e,r){var n=e[0],s=e[1],i=e[2],a=t[0],o=t[1];if(!a)return[0,0];if(hs(a)&&o&&hs(o))return[fn(a,r.width),fn(o,r.height)];var A=vg(i);if(rn(a)&&(a.value===bd.CONTAIN||a.value===bd.COVER)){if(vg(i)){var c=r.width/r.height;return c<i!=(a.value===bd.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var u=vg(n),d=vg(s),p=u||d;if(Ru(a)&&(!o||Ru(o))){if(u&&d)return[n,s];if(!A&&!p)return[r.width,r.height];if(p&&A){var g=u?n:s*i,v=d?s:n/i;return[g,v]}var y=u?n:r.width,k=d?s:r.height;return[y,k]}if(A){var x=0,I=0;return hs(a)?x=fn(a,r.width):hs(o)&&(I=fn(o,r.height)),Ru(a)?x=I*i:(!o||Ru(o))&&(I=x/i),[x,I]}var N=null,U=null;if(hs(a)?N=fn(a,r.width):o&&hs(o)&&(U=fn(o,r.height)),N!==null&&(!o||Ru(o))&&(U=u&&d?N/n*s:r.height),U!==null&&Ru(a)&&(N=u&&d?U/s*n:r.width),N!==null&&U!==null)return[N,U];throw new Error("Unable to calculate background-size for element")},Gu=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},OW=function(t,e,r,n,s){var i=e[0],a=e[1],o=r[0],A=r[1];switch(t){case 2:return[new Ft(Math.round(n.left),Math.round(n.top+a)),new Ft(Math.round(n.left+n.width),Math.round(n.top+a)),new Ft(Math.round(n.left+n.width),Math.round(A+n.top+a)),new Ft(Math.round(n.left),Math.round(A+n.top+a))];case 3:return[new Ft(Math.round(n.left+i),Math.round(n.top)),new Ft(Math.round(n.left+i+o),Math.round(n.top)),new Ft(Math.round(n.left+i+o),Math.round(n.height+n.top)),new Ft(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new Ft(Math.round(n.left+i),Math.round(n.top+a)),new Ft(Math.round(n.left+i+o),Math.round(n.top+a)),new Ft(Math.round(n.left+i+o),Math.round(n.top+a+A)),new Ft(Math.round(n.left+i),Math.round(n.top+a+A))];default:return[new Ft(Math.round(s.left),Math.round(s.top)),new Ft(Math.round(s.left+s.width),Math.round(s.top)),new Ft(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Ft(Math.round(s.left),Math.round(s.height+s.top))]}},HW="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",zE="Hidden Text",VW=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),s.src=HW,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(zE)),n.appendChild(i),n.appendChild(s);var o=s.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(zE)),n.style.lineHeight="normal",s.style.verticalAlign="super";var A=s.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:A}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),yL=function(){function t(e,r){this.context=e,this.options=r}return t}(),KW=1e4,zW=function(t){io(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new VW(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),TW(r)&&(this.ctx.globalAlpha=r.opacity),FW(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),gL(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return bi(this,void 0,void 0,function(){var n;return li(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return bi(this,void 0,void 0,function(){return li(this,function(n){switch(n.label){case 0:if(vs(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var i=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var a=GB(r.text);a.reduce(function(o,A){return i.ctx.fillText(A,o,r.bounds.top+s),o+i.ctx.measureText(A).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),s=JW(r.fontFamily).join(", "),i=a0(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(r,n){return bi(this,void 0,void 0,function(){var s,i,a,o,A,c,u,d,p=this;return li(this,function(g){return s=this.createFontStyle(n),i=s[0],a=s[1],o=s[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(a,o),c=A.baseline,u=A.middle,d=n.paintOrder,r.textBounds.forEach(function(v){d.forEach(function(y){switch(y){case 0:p.ctx.fillStyle=Es(n.color),p.renderTextWithLetterSpacing(v,n.letterSpacing,c);var k=n.textShadow;k.length&&v.text.trim().length&&(k.slice(0).reverse().forEach(function(x){p.ctx.shadowColor=Es(x.color),p.ctx.shadowOffsetX=x.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=x.offsetY.number*p.options.scale,p.ctx.shadowBlur=x.blur.number,p.renderTextWithLetterSpacing(v,n.letterSpacing,c)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),n.textDecorationLine.length&&(p.ctx.fillStyle=Es(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:p.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+c),v.bounds.width,1);break;case 2:p.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:p.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+u),v.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&v.text.trim().length&&(p.ctx.strokeStyle=Es(n.webkitTextStrokeColor),p.ctx.lineWidth=n.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+c)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=mw(r),a=gw(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return bi(this,void 0,void 0,function(){var n,s,i,a,o,A,I,I,c,u,d,p,U,g,v,D,y,k,x,I,N,U,D;return li(this,function(P){switch(P.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,i=n.styles,a=0,o=n.textNodes,P.label=1;case 1:return a<o.length?(A=o[a],[4,this.renderTextNode(A,i)]):[3,4];case 2:P.sent(),P.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof ZU))return[3,8];P.label=5;case 5:return P.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return I=P.sent(),this.renderReplacedElement(n,s,I),[3,8];case 7:return P.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof eL&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof tL))return[3,12];P.label=9;case 9:return P.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return I=P.sent(),this.renderReplacedElement(n,s,I),[3,12];case 11:return P.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof iL&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:u=P.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),P.label=14;case 14:if(n instanceof $B&&(d=Math.min(n.bounds.width,n.bounds.height),n.type===uw?n.checked&&(this.ctx.save(),this.path([new Ft(n.bounds.left+d*.39363,n.bounds.top+d*.79),new Ft(n.bounds.left+d*.16,n.bounds.top+d*.5549),new Ft(n.bounds.left+d*.27347,n.bounds.top+d*.44071),new Ft(n.bounds.left+d*.39694,n.bounds.top+d*.5649),new Ft(n.bounds.left+d*.72983,n.bounds.top+d*.23),new Ft(n.bounds.left+d*.84,n.bounds.top+d*.34085),new Ft(n.bounds.left+d*.39363,n.bounds.top+d*.79)]),this.ctx.fillStyle=Es(TE),this.ctx.fill(),this.ctx.restore()):n.type===dw&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+d/2,n.bounds.top+d/2,d/4,0,Math.PI*2,!0),this.ctx.fillStyle=Es(TE),this.ctx.fill(),this.ctx.restore())),GW(n)&&n.value.length){switch(p=this.createFontStyle(i),U=p[0],g=p[1],v=this.fontMetrics.getMetrics(U,g).baseline,this.ctx.font=U,this.ctx.fillStyle=Es(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=qW(n.styles.textAlign),D=mw(n),y=0,n.styles.textAlign){case 1:y+=D.width/2;break;case 2:y+=D.width;break}k=D.add(y,0,0,-D.height/2+1),this.ctx.save(),this.path([new Ft(D.left,D.top),new Ft(D.left+D.width,D.top),new Ft(D.left+D.width,D.top+D.height),new Ft(D.left,D.top+D.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Vf(n.value,k),i.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!vs(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];I=void 0,N=x.url,P.label=15;case 15:return P.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return I=P.sent(),this.ctx.drawImage(I,n.bounds.left-(I.width+10),n.bounds.top),[3,18];case 17:return P.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(U=this.createFontStyle(i)[0],this.ctx.font=U,this.ctx.fillStyle=Es(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",D=new yA(n.bounds.left,n.bounds.top+fn(n.styles.paddingTop,n.bounds.width),n.bounds.width,pE(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Vf(r.listValue,D),i.letterSpacing,pE(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),P.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return bi(this,void 0,void 0,function(){var n,s,x,i,a,x,o,A,x,c,u,x,d,p,x,g,v,x,y,k,x;return li(this,function(I){switch(I.label){case 0:if(vs(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:I.sent(),n=0,s=r.negativeZIndex,I.label=2;case 2:return n<s.length?(x=s[n],[4,this.renderStack(x)]):[3,5];case 3:I.sent(),I.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:I.sent(),i=0,a=r.nonInlineLevel,I.label=7;case 7:return i<a.length?(x=a[i],[4,this.renderNode(x)]):[3,10];case 8:I.sent(),I.label=9;case 9:return i++,[3,7];case 10:o=0,A=r.nonPositionedFloats,I.label=11;case 11:return o<A.length?(x=A[o],[4,this.renderStack(x)]):[3,14];case 12:I.sent(),I.label=13;case 13:return o++,[3,11];case 14:c=0,u=r.nonPositionedInlineLevel,I.label=15;case 15:return c<u.length?(x=u[c],[4,this.renderStack(x)]):[3,18];case 16:I.sent(),I.label=17;case 17:return c++,[3,15];case 18:d=0,p=r.inlineLevel,I.label=19;case 19:return d<p.length?(x=p[d],[4,this.renderNode(x)]):[3,22];case 20:I.sent(),I.label=21;case 21:return d++,[3,19];case 22:g=0,v=r.zeroOrAutoZIndexOrTransformedOrOpacity,I.label=23;case 23:return g<v.length?(x=v[g],[4,this.renderStack(x)]):[3,26];case 24:I.sent(),I.label=25;case 25:return g++,[3,23];case 26:y=0,k=r.positiveZIndex,I.label=27;case 27:return y<k.length?(x=k[y],[4,this.renderStack(x)]):[3,30];case 28:I.sent(),I.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,i){var a=Na(s)?s.start:s;i===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),Na(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,i){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(r,n,s){var i;if(r.width===n&&r.height===s)return r;var a=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var A=o.getContext("2d");return A.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return bi(this,void 0,void 0,function(){var n,s,i,a,o,A;return li(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(u){var d,p,g,j,_e,Ce,T,Z,_,v,j,_e,Ce,T,Z,y,k,x,I,N,U,D,P,E,_,B,j,S,L,T,Z,ye,_e,Ce,ie,we,Pe,Se,M,H,K,ee;return li(this,function(se){switch(se.label){case 0:if(u.type!==0)return[3,5];d=void 0,p=u.url,se.label=1;case 1:return se.trys.push([1,3,,4]),[4,i.context.cache.match(p)];case 2:return d=se.sent(),[3,4];case 3:return se.sent(),i.context.logger.error("Error loading background-image "+p),[3,4];case 4:return d&&(g=tv(r,n,[d.width,d.height,d.width/d.height]),j=g[0],_e=g[1],Ce=g[2],T=g[3],Z=g[4],_=i.ctx.createPattern(i.resizeImage(d,T,Z),"repeat"),i.renderRepeat(j,_,_e,Ce)),[3,6];case 5:FG(u)?(v=tv(r,n,[null,null,null]),j=v[0],_e=v[1],Ce=v[2],T=v[3],Z=v[4],y=IG(u.angle,T,Z),k=y[0],x=y[1],I=y[2],N=y[3],U=y[4],D=document.createElement("canvas"),D.width=T,D.height=Z,P=D.getContext("2d"),E=P.createLinearGradient(x,N,I,U),hE(u.stops,k).forEach(function(ue){return E.addColorStop(ue.stop,Es(ue.color))}),P.fillStyle=E,P.fillRect(0,0,T,Z),T>0&&Z>0&&(_=i.ctx.createPattern(D,"repeat"),i.renderRepeat(j,_,_e,Ce))):TG(u)&&(B=tv(r,n,[null,null,null]),j=B[0],S=B[1],L=B[2],T=B[3],Z=B[4],ye=u.position.length===0?[VB]:u.position,_e=fn(ye[0],T),Ce=fn(ye[ye.length-1],Z),ie=EG(u,_e,Ce,T,Z),we=ie[0],Pe=ie[1],we>0&&Pe>0&&(Se=i.ctx.createRadialGradient(S+_e,L+Ce,0,S+_e,L+Ce,we),hE(u.stops,we*2).forEach(function(ue){return Se.addColorStop(ue.stop,Es(ue.color))}),i.path(j),i.ctx.fillStyle=Se,we!==Pe?(M=r.bounds.left+.5*r.bounds.width,H=r.bounds.top+.5*r.bounds.height,K=Pe/we,ee=1/K,i.ctx.save(),i.ctx.translate(M,H),i.ctx.transform(1,0,0,K,0,0),i.ctx.translate(-M,-H),i.ctx.fillRect(S,ee*(L-H)+H,T,Z*ee),i.ctx.restore()):i.ctx.fill())),se.label=6;case 6:return n--,[2]}})},i=this,a=0,o=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<o.length?(A=o[a],[5,s(A)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return bi(this,void 0,void 0,function(){return li(this,function(i){return this.path(KE(s,n)),this.ctx.fillStyle=Es(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,i){return bi(this,void 0,void 0,function(){var a,o;return li(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,i)]:[3,2];case 1:return A.sent(),[2];case 2:return a=jW(i,s),this.path(a),this.ctx.fillStyle=Es(r),this.ctx.fill(),o=QW(i,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return bi(this,void 0,void 0,function(){var n,s,i,a,o,A,c,u,d=this;return li(this,function(p){switch(p.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!Ml(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=$W(Gu(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),Ml(n.backgroundColor)||(this.ctx.fillStyle=Es(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){d.ctx.save();var v=pw(r.curves),y=g.inset?0:KW,k=UW(v,-y+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(d.path(v),d.ctx.clip(),d.mask(k)):(d.mask(v),d.ctx.clip(),d.path(k)),d.ctx.shadowOffsetX=g.offsetX.number+y,d.ctx.shadowOffsetY=g.offsetY.number,d.ctx.shadowColor=Es(g.color),d.ctx.shadowBlur=g.blur.number,d.ctx.fillStyle=g.inset?Es(g.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()}),p.label=2;case 2:o=0,A=0,c=i,p.label=3;case 3:return A<c.length?(u=c[A],u.style!==0&&!Ml(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,3)];case 6:return p.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,r.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,r.curves)];case 10:p.sent(),p.label=11;case 11:o++,p.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,i,a){return bi(this,void 0,void 0,function(){var o,A,c,u,d,p,g,v,y,k,x,I,N,U,D,P,D,P;return li(this,function(E){return this.ctx.save(),o=RW(i,s),A=KE(i,s),a===2&&(this.path(A),this.ctx.clip()),Na(A[0])?(c=A[0].start.x,u=A[0].start.y):(c=A[0].x,u=A[0].y),Na(A[1])?(d=A[1].end.x,p=A[1].end.y):(d=A[1].x,p=A[1].y),s===0||s===2?g=Math.abs(c-d):g=Math.abs(u-p),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(A.slice(0,2)),v=n<3?n*3:n*2,y=n<3?n*2:n,a===3&&(v=n,y=n),k=!0,g<=v*2?k=!1:g<=v*2+y?(x=g/(2*v+y),v*=x,y*=x):(I=Math.floor((g+y)/(v+y)),N=(g-I*v)/(I-1),U=(g-(I+1)*v)/I,y=U<=0||Math.abs(y-N)<Math.abs(y-U)?N:U),k&&(a===3?this.ctx.setLineDash([0,v+y]):this.ctx.setLineDash([v,y])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Es(r),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(Na(A[0])&&(D=A[3],P=A[0],this.ctx.beginPath(),this.formatPath([new Ft(D.end.x,D.end.y),new Ft(P.start.x,P.start.y)]),this.ctx.stroke()),Na(A[1])&&(D=A[1],P=A[2],this.ctx.beginPath(),this.formatPath([new Ft(D.end.x,D.end.y),new Ft(P.start.x,P.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return bi(this,void 0,void 0,function(){var n;return li(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Es(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=LW(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(yL),GW=function(t){return t instanceof sL||t instanceof nL?!0:t instanceof $B&&t.type!==dw&&t.type!==uw},$W=function(t,e){switch(t){case 0:return pw(e);case 2:return kW(e);case 1:default:return gw(e)}},qW=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},WW=["-apple-system","system-ui"],JW=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return WW.indexOf(e)===-1}):t},XW=function(t){io(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return bi(this,void 0,void 0,function(){var n,s;return li(this,function(i){switch(i.label){case 0:return n=fy(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,YW(n)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Es(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(yL),YW=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ZW=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Y0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Y0([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Y0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Y0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),eJ=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new ZW({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new vW(this,e)}return t.instanceCount=1,t}(),Zd=function(t,e){return e===void 0&&(e={}),tJ(t,e)};typeof window<"u"&&pL.setContext(window);var tJ=function(t,e){return bi(void 0,void 0,void 0,function(){var r,n,s,i,a,o,A,c,u,d,p,g,v,y,k,x,I,N,U,D,E,P,E,_,B,j,S,L,T,Z,ye,_e,Ce,ie,we,Pe,Se,M,H,K;return li(this,function(ee){switch(ee.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(_=e.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(B=e.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:e.proxy,useCORS:(j=e.useCORS)!==null&&j!==void 0?j:!1},i=Z2({logging:(S=e.logging)!==null&&S!==void 0?S:!0,cache:e.cache},s),a={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:n.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:n.innerHeight,scrollX:(Z=e.scrollX)!==null&&Z!==void 0?Z:n.pageXOffset,scrollY:(ye=e.scrollY)!==null&&ye!==void 0?ye:n.pageYOffset},o=new yA(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),A=new eJ(i,o),c=(_e=e.foreignObjectRendering)!==null&&_e!==void 0?_e:!1,u={allowTaint:(Ce=e.allowTaint)!==null&&Ce!==void 0?Ce:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},A.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),d=new OE(A,t,u),p=d.clonedReferenceElement,p?[4,d.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=ee.sent(),v=qB(p)||nW(p)?UK(p.ownerDocument):v1(A,p),y=v.width,k=v.height,x=v.left,I=v.top,N=rJ(A,p,e.backgroundColor),U={canvas:e.canvas,backgroundColor:N,scale:(we=(ie=e.scale)!==null&&ie!==void 0?ie:n.devicePixelRatio)!==null&&we!==void 0?we:1,x:((Pe=e.x)!==null&&Pe!==void 0?Pe:0)+x,y:((Se=e.y)!==null&&Se!==void 0?Se:0)+I,width:(M=e.width)!==null&&M!==void 0?M:Math.ceil(y),height:(H=e.height)!==null&&H!==void 0?H:Math.ceil(k)},c?(A.logger.debug("Document cloned, using foreign object rendering"),E=new XW(A,U),[4,E.render(p)]):[3,3];case 2:return D=ee.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+x+","+I+" with size "+y+"x"+k+" using computed rendering"),A.logger.debug("Starting DOM parsing"),P=oL(A,p),N===P.styles.backgroundColor&&(P.styles.backgroundColor=dA.TRANSPARENT),A.logger.debug("Starting renderer for element at "+U.x+","+U.y+" with size "+U.width+"x"+U.height),E=new zW(A,U),[4,E.render(P)];case 4:D=ee.sent(),ee.label=5;case 5:return(!((K=e.removeContainer)!==null&&K!==void 0)||K)&&(OE.destroy(g)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,D]}})})},rJ=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?Of(t,getComputedStyle(n.documentElement).backgroundColor):dA.TRANSPARENT,i=n.body?Of(t,getComputedStyle(n.body).backgroundColor):dA.TRANSPARENT,a=typeof r=="string"?Of(t,r):r===null?dA.TRANSPARENT:4294967295;return e===n.documentElement?Ml(s)?Ml(i)?a:i:s:a};const nJ=Object.freeze(Object.defineProperty({__proto__:null,default:Zd},Symbol.toStringTag,{value:"Module"}));function Xr(t){"@babel/helpers - typeof";return Xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr(t)}var so=Uint8Array,Aa=Uint16Array,WB=Int32Array,JB=new so([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),XB=new so([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),GE=new so([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bL=function(t,e){for(var r=new Aa(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new WB(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},BL=bL(JB,2),sJ=BL.b,yy=BL.r;sJ[28]=258,yy[258]=28;var iJ=bL(XB,0),$E=iJ.r,by=new Aa(32768);for(var bn=0;bn<32768;++bn){var tl=(bn&43690)>>1|(bn&21845)<<1;tl=(tl&52428)>>2|(tl&13107)<<2,tl=(tl&61680)>>4|(tl&3855)<<4,by[bn]=((tl&65280)>>8|(tl&255)<<8)>>1}var zf=function(t,e,r){for(var n=t.length,s=0,i=new Aa(e);s<n;++s)t[s]&&++i[t[s]-1];var a=new Aa(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(r){o=new Aa(1<<e);var A=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],d=a[t[s]-1]++<<u,p=d|(1<<u)-1;d<=p;++d)o[by[d]>>A]=c}else for(o=new Aa(n),s=0;s<n;++s)t[s]&&(o[s]=by[a[t[s]-1]++]>>15-t[s]);return o},cu=new so(288);for(var bn=0;bn<144;++bn)cu[bn]=8;for(var bn=144;bn<256;++bn)cu[bn]=9;for(var bn=256;bn<280;++bn)cu[bn]=7;for(var bn=280;bn<288;++bn)cu[bn]=8;var ww=new so(32);for(var bn=0;bn<32;++bn)ww[bn]=5;var aJ=zf(cu,9,0),oJ=zf(ww,5,0),_L=function(t){return(t+7)/8|0},AJ=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new so(t.subarray(e,r))},Yo=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},tf=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},rv=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:IL,l:0};if(s==1){var a=new so(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(D,P){return D.f-P.f}),r.push({s:-1,f:25001});var o=r[0],A=r[1],c=0,u=1,d=2;for(r[0]={s:-1,f:o.f+A.f,l:o,r:A};u!=s-1;)o=r[r[c].f<r[d].f?c++:d++],A=r[c!=u&&r[c].f<r[d].f?c++:d++],r[u++]={s:-1,f:o.f+A.f,l:o,r:A};for(var p=i[0].s,n=1;n<s;++n)i[n].s>p&&(p=i[n].s);var g=new Aa(p+1),v=By(r[u-1],g,0);if(v>e){var n=0,y=0,k=v-e,x=1<<k;for(i.sort(function(P,E){return g[E.s]-g[P.s]||P.f-E.f});n<s;++n){var I=i[n].s;if(g[I]>e)y+=x-(1<<v-g[I]),g[I]=e;else break}for(y>>=k;y>0;){var N=i[n].s;g[N]<e?y-=1<<e-g[N]++-1:++n}for(;n>=0&&y;--n){var U=i[n].s;g[U]==e&&(--g[U],++y)}v=e}return{t:new so(g),l:v}},By=function(t,e,r){return t.s==-1?Math.max(By(t.l,e,r+1),By(t.r,e,r+1)):e[t.s]=r},qE=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Aa(++e),n=0,s=t[0],i=1,a=function(A){r[n++]=A},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:r.subarray(0,n),n:e}},rf=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},CL=function(t,e,r){var n=r.length,s=_L(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},WE=function(t,e,r,n,s,i,a,o,A,c,u){Yo(e,u++,r),++s[256];for(var d=rv(s,15),p=d.t,g=d.l,v=rv(i,15),y=v.t,k=v.l,x=qE(p),I=x.c,N=x.n,U=qE(y),D=U.c,P=U.n,E=new Aa(19),_=0;_<I.length;++_)++E[I[_]&31];for(var _=0;_<D.length;++_)++E[D[_]&31];for(var B=rv(E,7),j=B.t,S=B.l,L=19;L>4&&!j[GE[L-1]];--L);var T=c+5<<3,Z=rf(s,cu)+rf(i,ww)+a,ye=rf(s,p)+rf(i,y)+a+14+3*L+rf(E,j)+2*E[16]+3*E[17]+7*E[18];if(A>=0&&T<=Z&&T<=ye)return CL(e,u,t.subarray(A,A+c));var _e,Ce,ie,we;if(Yo(e,u,1+(ye<Z)),u+=2,ye<Z){_e=zf(p,g,0),Ce=p,ie=zf(y,k,0),we=y;var Pe=zf(j,S,0);Yo(e,u,N-257),Yo(e,u+5,P-1),Yo(e,u+10,L-4),u+=14;for(var _=0;_<L;++_)Yo(e,u+3*_,j[GE[_]]);u+=3*L;for(var Se=[I,D],M=0;M<2;++M)for(var H=Se[M],_=0;_<H.length;++_){var K=H[_]&31;Yo(e,u,Pe[K]),u+=j[K],K>15&&(Yo(e,u,H[_]>>5&127),u+=H[_]>>12)}}else _e=aJ,Ce=cu,ie=oJ,we=ww;for(var _=0;_<o;++_){var ee=n[_];if(ee>255){var K=ee>>18&31;tf(e,u,_e[K+257]),u+=Ce[K+257],K>7&&(Yo(e,u,ee>>23&31),u+=JB[K]);var se=ee&31;tf(e,u,ie[se]),u+=we[se],se>3&&(tf(e,u,ee>>5&8191),u+=XB[se])}else tf(e,u,_e[ee]),u+=Ce[ee]}return tf(e,u,_e[256]),u+Ce[256]},lJ=new WB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),IL=new so(0),cJ=function(t,e,r,n,s,i){var a=i.z||t.length,o=new so(n+a+5*(1+Math.ceil(a/7e3))+s),A=o.subarray(n,o.length-s),c=i.l,u=(i.r||0)&7;if(e){u&&(A[0]=i.r>>3);for(var d=lJ[e-1],p=d>>13,g=d&8191,v=(1<<r)-1,y=i.p||new Aa(32768),k=i.h||new Aa(v+1),x=Math.ceil(r/3),I=2*x,N=function(ce){return(t[ce]^t[ce+1]<<x^t[ce+2]<<I)&v},U=new WB(25e3),D=new Aa(288),P=new Aa(32),E=0,_=0,B=i.i||0,j=0,S=i.w||0,L=0;B+2<a;++B){var T=N(B),Z=B&32767,ye=k[T];if(y[Z]=ye,k[T]=Z,S<=B){var _e=a-B;if((E>7e3||j>24576)&&(_e>423||!c)){u=WE(t,A,0,U,D,P,_,j,L,B-L,u),j=E=_=0,L=B;for(var Ce=0;Ce<286;++Ce)D[Ce]=0;for(var Ce=0;Ce<30;++Ce)P[Ce]=0}var ie=2,we=0,Pe=g,Se=Z-ye&32767;if(_e>2&&T==N(B-Se))for(var M=Math.min(p,_e)-1,H=Math.min(32767,B),K=Math.min(258,_e);Se<=H&&--Pe&&Z!=ye;){if(t[B+ie]==t[B+ie-Se]){for(var ee=0;ee<K&&t[B+ee]==t[B+ee-Se];++ee);if(ee>ie){if(ie=ee,we=Se,ee>M)break;for(var se=Math.min(Se,ee-2),ue=0,Ce=0;Ce<se;++Ce){var Ae=B-Se+Ce&32767,pe=y[Ae],Ne=Ae-pe&32767;Ne>ue&&(ue=Ne,ye=Ae)}}}Z=ye,ye=y[Z],Se+=Z-ye&32767}if(we){U[j++]=268435456|yy[ie]<<18|$E[we];var Oe=yy[ie]&31,nt=$E[we]&31;_+=JB[Oe]+XB[nt],++D[257+Oe],++P[nt],S=B+ie,++E}else U[j++]=t[B],++D[t[B]]}}for(B=Math.max(B,S);B<a;++B)U[j++]=t[B],++D[t[B]];u=WE(t,A,c,U,D,P,_,j,L,B-L,u),c||(i.r=u&7|A[u/8|0]<<3,u-=7,i.h=k,i.p=y,i.i=B,i.w=S)}else{for(var B=i.w||0;B<a+c;B+=65535){var ke=B+65535;ke>=a&&(A[u/8|0]=c,ke=a),u=CL(A,u+1,t.subarray(B,ke))}i.i=a}return AJ(o,0,n+_L(u)+s)},EL=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=n+=r[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},uJ=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new so(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return cJ(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},kL=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},dJ=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=EL();s.p(e.dictionary),kL(t,2,s.d())}};function _y(t,e){e||(e={});var r=EL();r.p(t);var n=uJ(t,e,e.dictionary?6:2,4);return dJ(n,e),kL(n,n.length-4,r.d()),n}var hJ=typeof TextDecoder<"u"&&new TextDecoder,fJ=0;try{hJ.decode(IL,{stream:!0}),fJ=1}catch{}function pJ(t){if(Array.isArray(t))return t}function gJ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,o=[],A=!0,c=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(A=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);A=!0);}catch(u){c=!0,s=u}finally{try{if(!A&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}function JE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function mJ(t,e){if(t){if(typeof t=="string")return JE(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?JE(t,e):void 0}}function wJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XE(t,e){return pJ(t)||gJ(t,e)||mJ(t,e)||wJ()}function YE(t,e="utf8"){return new TextDecoder(e).decode(t)}const xJ=new TextEncoder;function vJ(t){return xJ.encode(t)}const yJ=1024*8,bJ=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),nv={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class YB{constructor(e=yJ,r={}){Wr(this,"buffer");Wr(this,"byteLength");Wr(this,"byteOffset");Wr(this,"length");Wr(this,"offset");Wr(this,"lastWrittenByte");Wr(this,"littleEndian");Wr(this,"_data");Wr(this,"_mark");Wr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const s=r.offset?r.offset>>>0:0,i=e.byteLength-s;let a=s;(ArrayBuffer.isView(e)||e instanceof YB)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+s),e=e.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=nv[r].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+n);if(this.littleEndian===bJ&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(s,s+n));o.reverse();const A=new nv[r](o.buffer);return this.offset+=n,A.reverse(),A}const a=new nv[r](i);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return YE(this.readBytes(e))}decodeText(e=1,r="utf8"){return YE(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(vJ(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function vh(t){let e=t.length;for(;--e>=0;)t[e]=0}const BJ=3,_J=258,SL=29,CJ=256,IJ=CJ+1+SL,NL=30,EJ=512,kJ=new Array((IJ+2)*2);vh(kJ);const SJ=new Array(NL*2);vh(SJ);const NJ=new Array(EJ);vh(NJ);const FJ=new Array(_J-BJ+1);vh(FJ);const TJ=new Array(SL);vh(TJ);const UJ=new Array(NL);vh(UJ);const LJ=(t,e,r,n)=>{let s=t&65535|0,i=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do s=s+e[n++]|0,i=i+s|0;while(--a);s%=65521,i%=65521}return s|i<<16|0};var Cy=LJ;const jJ=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},QJ=new Uint32Array(jJ()),RJ=(t,e,r,n)=>{const s=QJ,i=n+r;t^=-1;for(let a=n;a<i;a++)t=t>>>8^s[(t^e[a])&255];return t^-1};var xo=RJ,Iy={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},FL={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const PJ=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var DJ=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)PJ(r,n)&&(t[n]=r[n])}}return t},MJ=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,s=0,i=t.length;n<i;n++){let a=t[n];r.set(a,s),s+=a.length}return r},TL={assign:DJ,flattenChunks:MJ};let UL=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{UL=!1}const Sp=new Uint8Array(256);for(let t=0;t<256;t++)Sp[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Sp[254]=Sp[254]=1;var OJ=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,i,a=t.length,o=0;for(s=0;s<a;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),i=0,s=0;i<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e};const HJ=(t,e)=>{if(e<65534&&t.subarray&&UL)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var VJ=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s;const i=new Array(r*2);for(s=0,n=0;n<r;){let a=t[n++];if(a<128){i[s++]=a;continue}let o=Sp[a];if(o>4){i[s++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<r;)a=a<<6|t[n++]&63,o--;if(o>1){i[s++]=65533;continue}a<65536?i[s++]=a:(a-=65536,i[s++]=55296|a>>10&1023,i[s++]=56320|a&1023)}return HJ(i,s)},KJ=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Sp[t[r]]>e?r:e},Ey={string2buf:OJ,buf2string:VJ,utf8border:KJ};function zJ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var GJ=zJ;const yg=16209,$J=16191;var qJ=function(e,r){let n,s,i,a,o,A,c,u,d,p,g,v,y,k,x,I,N,U,D,P,E,_,B,j;const S=e.state;n=e.next_in,B=e.input,s=n+(e.avail_in-5),i=e.next_out,j=e.output,a=i-(r-e.avail_out),o=i+(e.avail_out-257),A=S.dmax,c=S.wsize,u=S.whave,d=S.wnext,p=S.window,g=S.hold,v=S.bits,y=S.lencode,k=S.distcode,x=(1<<S.lenbits)-1,I=(1<<S.distbits)-1;e:do{v<15&&(g+=B[n++]<<v,v+=8,g+=B[n++]<<v,v+=8),N=y[g&x];t:for(;;){if(U=N>>>24,g>>>=U,v-=U,U=N>>>16&255,U===0)j[i++]=N&65535;else if(U&16){D=N&65535,U&=15,U&&(v<U&&(g+=B[n++]<<v,v+=8),D+=g&(1<<U)-1,g>>>=U,v-=U),v<15&&(g+=B[n++]<<v,v+=8,g+=B[n++]<<v,v+=8),N=k[g&I];r:for(;;){if(U=N>>>24,g>>>=U,v-=U,U=N>>>16&255,U&16){if(P=N&65535,U&=15,v<U&&(g+=B[n++]<<v,v+=8,v<U&&(g+=B[n++]<<v,v+=8)),P+=g&(1<<U)-1,P>A){e.msg="invalid distance too far back",S.mode=yg;break e}if(g>>>=U,v-=U,U=i-a,P>U){if(U=P-U,U>u&&S.sane){e.msg="invalid distance too far back",S.mode=yg;break e}if(E=0,_=p,d===0){if(E+=c-U,U<D){D-=U;do j[i++]=p[E++];while(--U);E=i-P,_=j}}else if(d<U){if(E+=c+d-U,U-=d,U<D){D-=U;do j[i++]=p[E++];while(--U);if(E=0,d<D){U=d,D-=U;do j[i++]=p[E++];while(--U);E=i-P,_=j}}}else if(E+=d-U,U<D){D-=U;do j[i++]=p[E++];while(--U);E=i-P,_=j}for(;D>2;)j[i++]=_[E++],j[i++]=_[E++],j[i++]=_[E++],D-=3;D&&(j[i++]=_[E++],D>1&&(j[i++]=_[E++]))}else{E=i-P;do j[i++]=j[E++],j[i++]=j[E++],j[i++]=j[E++],D-=3;while(D>2);D&&(j[i++]=j[E++],D>1&&(j[i++]=j[E++]))}}else if(U&64){e.msg="invalid distance code",S.mode=yg;break e}else{N=k[(N&65535)+(g&(1<<U)-1)];continue r}break}}else if(U&64)if(U&32){S.mode=$J;break e}else{e.msg="invalid literal/length code",S.mode=yg;break e}else{N=y[(N&65535)+(g&(1<<U)-1)];continue t}break}}while(n<s&&i<o);D=v>>3,n-=D,v-=D<<3,g&=(1<<v)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<o?257+(o-i):257-(i-o),S.hold=g,S.bits=v};const Pu=15,ZE=852,e4=592,t4=0,sv=1,r4=2,WJ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),JJ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),XJ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),YJ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ZJ=(t,e,r,n,s,i,a,o)=>{const A=o.bits;let c=0,u=0,d=0,p=0,g=0,v=0,y=0,k=0,x=0,I=0,N,U,D,P,E,_=null,B;const j=new Uint16Array(Pu+1),S=new Uint16Array(Pu+1);let L=null,T,Z,ye;for(c=0;c<=Pu;c++)j[c]=0;for(u=0;u<n;u++)j[e[r+u]]++;for(g=A,p=Pu;p>=1&&j[p]===0;p--);if(g>p&&(g=p),p===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,o.bits=1,0;for(d=1;d<p&&j[d]===0;d++);for(g<d&&(g=d),k=1,c=1;c<=Pu;c++)if(k<<=1,k-=j[c],k<0)return-1;if(k>0&&(t===t4||p!==1))return-1;for(S[1]=0,c=1;c<Pu;c++)S[c+1]=S[c]+j[c];for(u=0;u<n;u++)e[r+u]!==0&&(a[S[e[r+u]]++]=u);if(t===t4?(_=L=a,B=20):t===sv?(_=WJ,L=JJ,B=257):(_=XJ,L=YJ,B=0),I=0,u=0,c=d,E=i,v=g,y=0,D=-1,x=1<<g,P=x-1,t===sv&&x>ZE||t===r4&&x>e4)return 1;for(;;){T=c-y,a[u]+1<B?(Z=0,ye=a[u]):a[u]>=B?(Z=L[a[u]-B],ye=_[a[u]-B]):(Z=96,ye=0),N=1<<c-y,U=1<<v,d=U;do U-=N,s[E+(I>>y)+U]=T<<24|Z<<16|ye|0;while(U!==0);for(N=1<<c-1;I&N;)N>>=1;if(N!==0?(I&=N-1,I+=N):I=0,u++,--j[c]===0){if(c===p)break;c=e[r+a[u]]}if(c>g&&(I&P)!==D){for(y===0&&(y=g),E+=d,v=c-y,k=1<<v;v+y<p&&(k-=j[v+y],!(k<=0));)v++,k<<=1;if(x+=1<<v,t===sv&&x>ZE||t===r4&&x>e4)return 1;D=I&P,s[D]=g<<24|v<<16|E-i|0}}return I!==0&&(s[E+I]=c-y<<24|64<<16|0),o.bits=g,0};var Gf=ZJ;const eX=0,LL=1,jL=2,{Z_FINISH:n4,Z_BLOCK:tX,Z_TREES:bg,Z_OK:uu,Z_STREAM_END:rX,Z_NEED_DICT:nX,Z_STREAM_ERROR:Ra,Z_DATA_ERROR:QL,Z_MEM_ERROR:RL,Z_BUF_ERROR:sX,Z_DEFLATED:s4}=FL,N1=16180,i4=16181,a4=16182,o4=16183,A4=16184,l4=16185,c4=16186,u4=16187,d4=16188,h4=16189,xw=16190,Zo=16191,iv=16192,f4=16193,av=16194,p4=16195,g4=16196,m4=16197,w4=16198,Bg=16199,_g=16200,x4=16201,v4=16202,y4=16203,b4=16204,B4=16205,ov=16206,_4=16207,C4=16208,Cn=16209,PL=16210,DL=16211,iX=852,aX=592,oX=15,AX=oX,I4=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function lX(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const vu=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<N1||e.mode>DL?1:0},ML=t=>{if(vu(t))return Ra;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=N1,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(iX),e.distcode=e.distdyn=new Int32Array(aX),e.sane=1,e.back=-1,uu},OL=t=>{if(vu(t))return Ra;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ML(t)},HL=(t,e)=>{let r;if(vu(t))return Ra;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ra:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,OL(t))},VL=(t,e)=>{if(!t)return Ra;const r=new lX;t.state=r,r.strm=t,r.window=null,r.mode=N1;const n=HL(t,e);return n!==uu&&(t.state=null),n},cX=t=>VL(t,AX);let E4=!0,Av,lv;const uX=t=>{if(E4){Av=new Int32Array(512),lv=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Gf(LL,t.lens,0,288,Av,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Gf(jL,t.lens,0,32,lv,0,t.work,{bits:5}),E4=!1}t.lencode=Av,t.lenbits=9,t.distcode=lv,t.distbits=5},KL=(t,e,r,n)=>{let s;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},dX=(t,e)=>{let r,n,s,i,a,o,A,c,u,d,p,g,v,y,k=0,x,I,N,U,D,P,E,_;const B=new Uint8Array(4);let j,S;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(vu(t)||!t.output||!t.input&&t.avail_in!==0)return Ra;r=t.state,r.mode===Zo&&(r.mode=iv),a=t.next_out,s=t.output,A=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,c=r.hold,u=r.bits,d=o,p=A,_=uu;e:for(;;)switch(r.mode){case N1:if(r.wrap===0){r.mode=iv;break}for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,B[0]=c&255,B[1]=c>>>8&255,r.check=xo(r.check,B,2,0),c=0,u=0,r.mode=i4;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=Cn;break}if((c&15)!==s4){t.msg="unknown compression method",r.mode=Cn;break}if(c>>>=4,u-=4,E=(c&15)+8,r.wbits===0&&(r.wbits=E),E>15||E>r.wbits){t.msg="invalid window size",r.mode=Cn;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?h4:Zo,c=0,u=0;break;case i4:for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.flags=c,(r.flags&255)!==s4){t.msg="unknown compression method",r.mode=Cn;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Cn;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(B[0]=c&255,B[1]=c>>>8&255,r.check=xo(r.check,B,2,0)),c=0,u=0,r.mode=a4;case a4:for(;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(B[0]=c&255,B[1]=c>>>8&255,B[2]=c>>>16&255,B[3]=c>>>24&255,r.check=xo(r.check,B,4,0)),c=0,u=0,r.mode=o4;case o4:for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(B[0]=c&255,B[1]=c>>>8&255,r.check=xo(r.check,B,2,0)),c=0,u=0,r.mode=A4;case A4:if(r.flags&1024){for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(B[0]=c&255,B[1]=c>>>8&255,r.check=xo(r.check,B,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=l4;case l4:if(r.flags&1024&&(g=r.length,g>o&&(g=o),g&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+g),E)),r.flags&512&&r.wrap&4&&(r.check=xo(r.check,n,g,i)),o-=g,i+=g,r.length-=g),r.length))break e;r.length=0,r.mode=c4;case c4:if(r.flags&2048){if(o===0)break e;g=0;do E=n[i+g++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E));while(E&&g<o);if(r.flags&512&&r.wrap&4&&(r.check=xo(r.check,n,g,i)),o-=g,i+=g,E)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=u4;case u4:if(r.flags&4096){if(o===0)break e;g=0;do E=n[i+g++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E));while(E&&g<o);if(r.flags&512&&r.wrap&4&&(r.check=xo(r.check,n,g,i)),o-=g,i+=g,E)break e}else r.head&&(r.head.comment=null);r.mode=d4;case d4:if(r.flags&512){for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Cn;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Zo;break;case h4:for(;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}t.adler=r.check=I4(c),c=0,u=0,r.mode=xw;case xw:if(r.havedict===0)return t.next_out=a,t.avail_out=A,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=u,nX;t.adler=r.check=1,r.mode=Zo;case Zo:if(e===tX||e===bg)break e;case iv:if(r.last){c>>>=u&7,u-=u&7,r.mode=ov;break}for(;u<3;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}switch(r.last=c&1,c>>>=1,u-=1,c&3){case 0:r.mode=f4;break;case 1:if(uX(r),r.mode=Bg,e===bg){c>>>=2,u-=2;break e}break;case 2:r.mode=g4;break;case 3:t.msg="invalid block type",r.mode=Cn}c>>>=2,u-=2;break;case f4:for(c>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Cn;break}if(r.length=c&65535,c=0,u=0,r.mode=av,e===bg)break e;case av:r.mode=p4;case p4:if(g=r.length,g){if(g>o&&(g=o),g>A&&(g=A),g===0)break e;s.set(n.subarray(i,i+g),a),o-=g,i+=g,A-=g,a+=g,r.length-=g;break}r.mode=Zo;break;case g4:for(;u<14;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.nlen=(c&31)+257,c>>>=5,u-=5,r.ndist=(c&31)+1,c>>>=5,u-=5,r.ncode=(c&15)+4,c>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Cn;break}r.have=0,r.mode=m4;case m4:for(;r.have<r.ncode;){for(;u<3;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.lens[L[r.have++]]=c&7,c>>>=3,u-=3}for(;r.have<19;)r.lens[L[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,j={bits:r.lenbits},_=Gf(eX,r.lens,0,19,r.lencode,0,r.work,j),r.lenbits=j.bits,_){t.msg="invalid code lengths set",r.mode=Cn;break}r.have=0,r.mode=w4;case w4:for(;r.have<r.nlen+r.ndist;){for(;k=r.lencode[c&(1<<r.lenbits)-1],x=k>>>24,I=k>>>16&255,N=k&65535,!(x<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(N<16)c>>>=x,u-=x,r.lens[r.have++]=N;else{if(N===16){for(S=x+2;u<S;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(c>>>=x,u-=x,r.have===0){t.msg="invalid bit length repeat",r.mode=Cn;break}E=r.lens[r.have-1],g=3+(c&3),c>>>=2,u-=2}else if(N===17){for(S=x+3;u<S;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=x,u-=x,E=0,g=3+(c&7),c>>>=3,u-=3}else{for(S=x+7;u<S;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=x,u-=x,E=0,g=11+(c&127),c>>>=7,u-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Cn;break}for(;g--;)r.lens[r.have++]=E}}if(r.mode===Cn)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Cn;break}if(r.lenbits=9,j={bits:r.lenbits},_=Gf(LL,r.lens,0,r.nlen,r.lencode,0,r.work,j),r.lenbits=j.bits,_){t.msg="invalid literal/lengths set",r.mode=Cn;break}if(r.distbits=6,r.distcode=r.distdyn,j={bits:r.distbits},_=Gf(jL,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,j),r.distbits=j.bits,_){t.msg="invalid distances set",r.mode=Cn;break}if(r.mode=Bg,e===bg)break e;case Bg:r.mode=_g;case _g:if(o>=6&&A>=258){t.next_out=a,t.avail_out=A,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=u,qJ(t,p),a=t.next_out,s=t.output,A=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,c=r.hold,u=r.bits,r.mode===Zo&&(r.back=-1);break}for(r.back=0;k=r.lencode[c&(1<<r.lenbits)-1],x=k>>>24,I=k>>>16&255,N=k&65535,!(x<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(I&&!(I&240)){for(U=x,D=I,P=N;k=r.lencode[P+((c&(1<<U+D)-1)>>U)],x=k>>>24,I=k>>>16&255,N=k&65535,!(U+x<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=U,u-=U,r.back+=U}if(c>>>=x,u-=x,r.back+=x,r.length=N,I===0){r.mode=B4;break}if(I&32){r.back=-1,r.mode=Zo;break}if(I&64){t.msg="invalid literal/length code",r.mode=Cn;break}r.extra=I&15,r.mode=x4;case x4:if(r.extra){for(S=r.extra;u<S;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=v4;case v4:for(;k=r.distcode[c&(1<<r.distbits)-1],x=k>>>24,I=k>>>16&255,N=k&65535,!(x<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(!(I&240)){for(U=x,D=I,P=N;k=r.distcode[P+((c&(1<<U+D)-1)>>U)],x=k>>>24,I=k>>>16&255,N=k&65535,!(U+x<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=U,u-=U,r.back+=U}if(c>>>=x,u-=x,r.back+=x,I&64){t.msg="invalid distance code",r.mode=Cn;break}r.offset=N,r.extra=I&15,r.mode=y4;case y4:if(r.extra){for(S=r.extra;u<S;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Cn;break}r.mode=b4;case b4:if(A===0)break e;if(g=p-A,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Cn;break}g>r.wnext?(g-=r.wnext,v=r.wsize-g):v=r.wnext-g,g>r.length&&(g=r.length),y=r.window}else y=s,v=a-r.offset,g=r.length;g>A&&(g=A),A-=g,r.length-=g;do s[a++]=y[v++];while(--g);r.length===0&&(r.mode=_g);break;case B4:if(A===0)break e;s[a++]=r.length,A--,r.mode=_g;break;case ov:if(r.wrap){for(;u<32;){if(o===0)break e;o--,c|=n[i++]<<u,u+=8}if(p-=A,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?xo(r.check,s,p,a-p):Cy(r.check,s,p,a-p)),p=A,r.wrap&4&&(r.flags?c:I4(c))!==r.check){t.msg="incorrect data check",r.mode=Cn;break}c=0,u=0}r.mode=_4;case _4:if(r.wrap&&r.flags){for(;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Cn;break}c=0,u=0}r.mode=C4;case C4:_=rX;break e;case Cn:_=QL;break e;case PL:return RL;case DL:default:return Ra}return t.next_out=a,t.avail_out=A,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=u,(r.wsize||p!==t.avail_out&&r.mode<Cn&&(r.mode<ov||e!==n4))&&KL(t,t.output,t.next_out,p-t.avail_out),d-=t.avail_in,p-=t.avail_out,t.total_in+=d,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?xo(r.check,s,p,t.next_out-p):Cy(r.check,s,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Zo?128:0)+(r.mode===Bg||r.mode===av?256:0),(d===0&&p===0||e===n4)&&_===uu&&(_=sX),_},hX=t=>{if(vu(t))return Ra;let e=t.state;return e.window&&(e.window=null),t.state=null,uu},fX=(t,e)=>{if(vu(t))return Ra;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,uu):Ra},pX=(t,e)=>{const r=e.length;let n,s,i;return vu(t)||(n=t.state,n.wrap!==0&&n.mode!==xw)?Ra:n.mode===xw&&(s=1,s=Cy(s,e,r,0),s!==n.check)?QL:(i=KL(t,e,r,r),i?(n.mode=PL,RL):(n.havedict=1,uu))};var gX=OL,mX=HL,wX=ML,xX=cX,vX=VL,yX=dX,bX=hX,BX=fX,_X=pX,CX="pako inflate (from Nodeca project)",rA={inflateReset:gX,inflateReset2:mX,inflateResetKeep:wX,inflateInit:xX,inflateInit2:vX,inflate:yX,inflateEnd:bX,inflateGetHeader:BX,inflateSetDictionary:_X,inflateInfo:CX};function IX(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var EX=IX;const zL=Object.prototype.toString,{Z_NO_FLUSH:kX,Z_FINISH:SX,Z_OK:Np,Z_STREAM_END:cv,Z_NEED_DICT:uv,Z_STREAM_ERROR:NX,Z_DATA_ERROR:k4,Z_MEM_ERROR:FX}=FL;function o0(t){this.options=TL.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new GJ,this.strm.avail_out=0;let r=rA.inflateInit2(this.strm,e.windowBits);if(r!==Np)throw new Error(Iy[r]);if(this.header=new EX,rA.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Ey.string2buf(e.dictionary):zL.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=rA.inflateSetDictionary(this.strm,e.dictionary),r!==Np)))throw new Error(Iy[r])}o0.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let i,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?SX:kX,zL.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=rA.inflate(r,a),i===uv&&s&&(i=rA.inflateSetDictionary(r,s),i===Np?i=rA.inflate(r,a):i===k4&&(i=uv));r.avail_in>0&&i===cv&&r.state.wrap>0&&t[r.next_in]!==0;)rA.inflateReset(r),i=rA.inflate(r,a);switch(i){case NX:case k4:case uv:case FX:return this.onEnd(i),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||i===cv))if(this.options.to==="string"){let A=Ey.utf8border(r.output,r.next_out),c=r.next_out-A,u=Ey.buf2string(r.output,A);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(A,A+c),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Np&&o===0)){if(i===cv)return i=rA.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};o0.prototype.onData=function(t){this.chunks.push(t)};o0.prototype.onEnd=function(t){t===Np&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=TL.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function TX(t,e){const r=new o0(e);if(r.push(t),r.err)throw r.msg||Iy[r.err];return r.result}var UX=o0,LX=TX,jX={Inflate:UX,inflate:LX};const{Inflate:QX,inflate:RX}=jX;var S4=QX,PX=RX;const GL=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;GL[t]=e}const N4=4294967295;function DX(t,e,r){let n=t;for(let s=0;s<r;s++)n=GL[(n^e[s])&255]^n>>>8;return n}function MX(t,e){return(DX(N4,t,e)^N4)>>>0}function F4(t,e,r){const n=t.readUint32(),s=MX(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(s!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${s}`)}function $L(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function qL(t,e,r,n){let s=0;for(;s<n;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-n]&255}function WL(t,e,r,n){let s=0;if(r.length===0)for(;s<n;s++)e[s]=t[s];else for(;s<n;s++)e[s]=t[s]+r[s]&255}function JL(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+(e[i-s]>>1)&255}else{for(;i<s;i++)e[i]=t[i]+(r[i]>>1)&255;for(;i<n;i++)e[i]=t[i]+(e[i-s]+r[i]>>1)&255}}function XL(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-s]&255}else{for(;i<s;i++)e[i]=t[i]+r[i]&255;for(;i<n;i++)e[i]=t[i]+OX(e[i-s],r[i],r[i-s])&255}}function OX(t,e,r){const n=t+e-r,s=Math.abs(n-t),i=Math.abs(n-e),a=Math.abs(n-r);return s<=i&&s<=a?t:i<=a?e:r}function HX(t,e,r,n,s,i){switch(t){case 0:$L(e,r,s);break;case 1:qL(e,r,s,i);break;case 2:WL(e,r,n,s);break;case 3:JL(e,r,n,s,i);break;case 4:XL(e,r,n,s,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const VX=new Uint16Array([255]),KX=new Uint8Array(VX.buffer),zX=KX[0]===255;function GX(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*s,A=new Uint8Array(n*r*o);let c=0;for(let u=0;u<7;u++){const d=a[u],p=Math.ceil((r-d.x)/d.xStep),g=Math.ceil((n-d.y)/d.yStep);if(p<=0||g<=0)continue;const v=p*o,y=new Uint8Array(v);for(let k=0;k<g;k++){const x=e[c++],I=e.subarray(c,c+v);c+=v;const N=new Uint8Array(v);HX(x,I,N,y,v,o),y.set(N);for(let U=0;U<p;U++){const D=d.x+U*d.xStep,P=d.y+k*d.yStep;if(!(D>=r||P>=n))for(let E=0;E<o;E++)A[(P*r+D)*o+E]=N[U*o+E]}}}if(i===16){const u=new Uint16Array(A.buffer);if(zX)for(let d=0;d<u.length;d++)u[d]=$X(u[d]);return u}else return A}function $X(t){return(t&255)<<8|t>>8&255}const qX=new Uint16Array([255]),WX=new Uint8Array(qX.buffer),JX=WX[0]===255,XX=new Uint8Array(0);function T4(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,a=Math.ceil(i/8)*s,o=Math.ceil(i/8*s*r),A=new Uint8Array(n*o);let c=XX,u=0,d,p;for(let g=0;g<n;g++){switch(d=e.subarray(u+1,u+1+o),p=A.subarray(g*o,(g+1)*o),e[u]){case 0:$L(d,p,o);break;case 1:qL(d,p,o,a);break;case 2:WL(d,p,c,o);break;case 3:JL(d,p,c,o,a);break;case 4:XL(d,p,c,o,a);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}c=p,u+=o+1}if(i===16){const g=new Uint16Array(A.buffer);if(JX)for(let v=0;v<g.length;v++)g[v]=YX(g[v]);return g}else return A}function YX(t){return(t&255)<<8|t>>8&255}const om=Uint8Array.of(137,80,78,71,13,10,26,10);function U4(t){if(!ZX(t.readBytes(om.length)))throw new Error("wrong PNG signature")}function ZX(t){if(t.length<om.length)return!1;for(let e=0;e<om.length;e++)if(t[e]!==om[e])return!1;return!0}const eY="tEXt",tY=0,YL=new TextDecoder("latin1");function rY(t){if(sY(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const nY=/^[\u0000-\u00FF]*$/;function sY(t){if(!nY.test(t))throw new Error("invalid latin1 text")}function iY(t,e,r){const n=ZL(e);t[n]=aY(e,r-n.length-1)}function ZL(t){for(t.mark();t.readByte()!==tY;);const e=t.offset;t.reset();const r=YL.decode(t.readBytes(e-t.offset-1));return t.skip(1),rY(r),r}function aY(t,e){return YL.decode(t.readBytes(e))}const sa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},dv={UNKNOWN:-1,DEFLATE:0},L4={UNKNOWN:-1,ADAPTIVE:0},hv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Cg={NONE:0,BACKGROUND:1,PREVIOUS:2},fv={SOURCE:0,OVER:1};class oY extends YB{constructor(r,n={}){super(r);Wr(this,"_checkCrc");Wr(this,"_inflator");Wr(this,"_png");Wr(this,"_apng");Wr(this,"_end");Wr(this,"_hasPalette");Wr(this,"_palette");Wr(this,"_hasTransparency");Wr(this,"_transparency");Wr(this,"_compressionMethod");Wr(this,"_filterMethod");Wr(this,"_interlaceMethod");Wr(this,"_colorType");Wr(this,"_isAnimated");Wr(this,"_numberOfFrames");Wr(this,"_numberOfPlays");Wr(this,"_frames");Wr(this,"_writingDataChunks");const{checkCrc:s=!1}=n;this._checkCrc=s,this._inflator=new S4,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=dv.UNKNOWN,this._filterMethod=L4.UNKNOWN,this._interlaceMethod=hv.UNKNOWN,this._colorType=sa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(U4(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(U4(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const s=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case eY:iY(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?F4(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const s=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=s+r;break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?F4(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=AY(this.readUint8());const n=this.readUint8();this._colorType=n;let s;switch(n){case sa.GREYSCALE:s=1;break;case sa.TRUECOLOUR:s=3;break;case sa.INDEXED_COLOUR:s=1;break;case sa.GREYSCALE_ALPHA:s=2;break;case sa.TRUECOLOUR_ALPHA:s=4;break;case sa.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==dv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<n;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,s=this.offset+this.byteOffset;if(s+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case sa.GREYSCALE:case sa.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case sa.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const s=this.readByte();this._palette[n].push(s)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case sa.UNKNOWN:case sa.GREYSCALE_ALPHA:case sa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=ZL(this),s=this.readUint8();if(s!==dv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:PX(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),s=this.readByte();this._png.resolution={x:r,y:n,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(r);if(s){if(s.data=T4({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)n.data=s.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(s,i,n),this.addFrameDataToCanvas(n,s)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,s){switch(r.disposeOp){case Cg.NONE:break;case Cg.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let a=0;a<this._png.width;a++){const o=(i*r.width+a)*this._png.channels;for(let A=0;A<this._png.channels;A++)s.data[o+A]=0}break;case Cg.PREVIOUS:s.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const s=1<<this._png.depth,i=(a,o)=>{const A=((a+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,c=(a*n.width+o)*this._png.channels;return{index:A,frameIndex:c}};switch(n.blendOp){case fv.SOURCE:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:A,frameIndex:c}=i(a,o);for(let u=0;u<this._png.channels;u++)r.data[A+u]=n.data[c+u]}break;case fv.OVER:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:A,frameIndex:c}=i(a,o);for(let u=0;u<this._png.channels;u++){const d=n.data[c+this._png.channels-1]/s,p=u%(this._png.channels-1)===0?1:n.data[c+u],g=Math.floor(d*p+(1-d)*r.data[A+u]);r.data[A+u]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==L4.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===hv.NO_INTERLACE)this._png.data=T4({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===hv.ADAM7)this._png.data=GX({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Cg.NONE,blendOp:fv.SOURCE,data:r}),this._inflator=new S4,this._writingDataChunks=!1}}function AY(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var j4;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(j4||(j4={}));function lY(t,e){return new oY(t,e).decode()}var sr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function pv(){sr.console&&typeof sr.console.log=="function"&&sr.console.log.apply(sr.console,arguments)}var ln={log:pv,warn:function(t){sr.console&&(typeof sr.console.warn=="function"?sr.console.warn.apply(sr.console,arguments):pv.call(null,arguments))},error:function(t){sr.console&&(typeof sr.console.error=="function"?sr.console.error.apply(sr.console,arguments):pv(t))}};function gv(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Nc(n.response,e,r)},n.onerror=function(){ln.error("could not download file")},n.send()}function Q4(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ig(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Nc=sr.saveAs||((typeof window>"u"?"undefined":Xr(window))!=="object"||window!==sr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=sr.URL||sr.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?Q4(s.href)?gv(t,e,r):Ig(s,s.target="_blank"):Ig(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){Ig(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(Q4(t))gv(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Ig(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Xr(i)!=="object"&&(ln.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return gv(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(sr.HTMLElement)||sr.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":Xr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(t)}else{var A=sr.URL||sr.webkitURL,c=A.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){A.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function e6(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),A=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),A.length==1&&(A="0"+A),c.length==1&&(c="0"+c),"#"+o+A+c}}var Am=sr.atob.bind(sr),R4=sr.btoa.bind(sr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function mv(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=si(r,n,s,i,e[0],7,-680876936),i=si(i,r,n,s,e[1],12,-389564586),s=si(s,i,r,n,e[2],17,606105819),n=si(n,s,i,r,e[3],22,-1044525330),r=si(r,n,s,i,e[4],7,-176418897),i=si(i,r,n,s,e[5],12,1200080426),s=si(s,i,r,n,e[6],17,-1473231341),n=si(n,s,i,r,e[7],22,-45705983),r=si(r,n,s,i,e[8],7,1770035416),i=si(i,r,n,s,e[9],12,-1958414417),s=si(s,i,r,n,e[10],17,-42063),n=si(n,s,i,r,e[11],22,-1990404162),r=si(r,n,s,i,e[12],7,1804603682),i=si(i,r,n,s,e[13],12,-40341101),s=si(s,i,r,n,e[14],17,-1502002290),r=ii(r,n=si(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=ii(i,r,n,s,e[6],9,-1069501632),s=ii(s,i,r,n,e[11],14,643717713),n=ii(n,s,i,r,e[0],20,-373897302),r=ii(r,n,s,i,e[5],5,-701558691),i=ii(i,r,n,s,e[10],9,38016083),s=ii(s,i,r,n,e[15],14,-660478335),n=ii(n,s,i,r,e[4],20,-405537848),r=ii(r,n,s,i,e[9],5,568446438),i=ii(i,r,n,s,e[14],9,-1019803690),s=ii(s,i,r,n,e[3],14,-187363961),n=ii(n,s,i,r,e[8],20,1163531501),r=ii(r,n,s,i,e[13],5,-1444681467),i=ii(i,r,n,s,e[2],9,-51403784),s=ii(s,i,r,n,e[7],14,1735328473),r=ai(r,n=ii(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=ai(i,r,n,s,e[8],11,-2022574463),s=ai(s,i,r,n,e[11],16,1839030562),n=ai(n,s,i,r,e[14],23,-35309556),r=ai(r,n,s,i,e[1],4,-1530992060),i=ai(i,r,n,s,e[4],11,1272893353),s=ai(s,i,r,n,e[7],16,-155497632),n=ai(n,s,i,r,e[10],23,-1094730640),r=ai(r,n,s,i,e[13],4,681279174),i=ai(i,r,n,s,e[0],11,-358537222),s=ai(s,i,r,n,e[3],16,-722521979),n=ai(n,s,i,r,e[6],23,76029189),r=ai(r,n,s,i,e[9],4,-640364487),i=ai(i,r,n,s,e[12],11,-421815835),s=ai(s,i,r,n,e[15],16,530742520),r=oi(r,n=ai(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=oi(i,r,n,s,e[7],10,1126891415),s=oi(s,i,r,n,e[14],15,-1416354905),n=oi(n,s,i,r,e[5],21,-57434055),r=oi(r,n,s,i,e[12],6,1700485571),i=oi(i,r,n,s,e[3],10,-1894986606),s=oi(s,i,r,n,e[10],15,-1051523),n=oi(n,s,i,r,e[1],21,-2054922799),r=oi(r,n,s,i,e[8],6,1873313359),i=oi(i,r,n,s,e[15],10,-30611744),s=oi(s,i,r,n,e[6],15,-1560198380),n=oi(n,s,i,r,e[13],21,1309151649),r=oi(r,n,s,i,e[4],6,-145523070),i=oi(i,r,n,s,e[11],10,-1120210379),s=oi(s,i,r,n,e[2],15,718787259),n=oi(n,s,i,r,e[9],21,-343485551),t[0]=Cl(r,t[0]),t[1]=Cl(n,t[1]),t[2]=Cl(s,t[2]),t[3]=Cl(i,t[3])}function F1(t,e,r,n,s,i){return e=Cl(Cl(e,t),Cl(n,i)),Cl(e<<s|e>>>32-s,r)}function si(t,e,r,n,s,i,a){return F1(e&r|~e&n,t,e,s,i,a)}function ii(t,e,r,n,s,i,a){return F1(e&n|r&~n,t,e,s,i,a)}function ai(t,e,r,n,s,i,a){return F1(e^r^n,t,e,s,i,a)}function oi(t,e,r,n,s,i,a){return F1(r^(e|~n),t,e,s,i,a)}function t6(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)mv(n,cY(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(mv(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,mv(n,s),n}function cY(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var P4="0123456789abcdef".split("");function uY(t){for(var e="",r=0;r<4;r++)e+=P4[t>>8*r+4&15]+P4[t>>8*r&15];return e}function dY(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function ky(t){return t6(t).map(dY).join("")}var hY=function(t){for(var e=0;e<t.length;e++)t[e]=uY(t[e]);return t.join("")}(t6("hello"))!="5d41402abc4b2a76b9719d911017c592";function Cl(t,e){if(hY){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Sy(t,e){var r,n,s,i;if(t!==r){for(var a=(s=t,i=1+(256/t.length|0),new Array(i+1).join(s)),o=[],A=0;A<256;A++)o[A]=A;var c=0;for(A=0;A<256;A++){var u=o[A];c=(c+u+a.charCodeAt(A))%256,o[A]=o[c],o[c]=u}r=t,n=o}else o=n;var d=e.length,p=0,g=0,v="";for(A=0;A<d;A++)g=(g+(u=o[p=(p+1)%256]))%256,o[p]=o[g],o[g]=u,a=o[(o[p]+o[g])%256],v+=String.fromCharCode(e.charCodeAt(A)^a);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var D4={print:4,modify:8,copy:16,"annot-forms":32};function $u(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(D4.perm!==void 0)throw new Error("Invalid permission: "+o);s+=D4[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=ky(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Sy(this.encryptionKey,this.padding)}function qu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):t[n]}return e}function M4(t){if(Xr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var a=e[r][i];try{a[0].apply(t,n)}catch(o){sr.console&&ln.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function vw(t){if(!(this instanceof vw))return new vw(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function r6(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Qc(t,e,r,n,s){if(!(this instanceof Qc))return new Qc(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,r6.call(this,n,s)}function cd(t,e,r,n,s){if(!(this instanceof cd))return new cd(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,r6.call(this,n,s)}function Jt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,A=16,c="S",u=null;Xr(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(A=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=M4;var v="1.3",y=g.__private__.getPdfVersion=function(){return v};g.__private__.setPdfVersion=function(w){v=w};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return k};var x=g.__private__.getPageFormat=function(w){return k[w]};s=s||"a4";var I="compat",N="advanced",U=I;function D(){this.saveGraphicsState(),R(new Dt($e,0,0,-$e,0,xa()*$e).toString()+" cm"),this.setFontSize(this.getFontSize()/$e),c="n",U=N}function P(){this.restoreGraphicsState(),c="S",U=I}var E=g.__private__.combineFontStyleAndFontWeight=function(w,O){if(w=="bold"&&O=="normal"||w=="bold"&&O==400||w=="normal"&&O=="italic"||w=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(w=O==400||O==="normal"?w==="italic"?"italic":"normal":O!=700&&O!=="bold"||w!=="normal"?(O==700?"bold":O)+""+w:"bold"),w};g.advancedAPI=function(w){var O=U===I;return O&&D.call(this),typeof w!="function"||(w(this),O&&P.call(this)),this},g.compatAPI=function(w){var O=U===N;return O&&P.call(this),typeof w!="function"||(w(this),O&&D.call(this)),this},g.isAdvancedAPI=function(){return U===N};var _,B=function(w){if(U!==N)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=g.roundToPrecision=g.__private__.roundToPrecision=function(w,O){var te=e||O;if(isNaN(w)||isNaN(te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(te).replace(/0+$/,"")};_=g.hpf=g.__private__.hpf=typeof A=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return j(w,A)}:A==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return j(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return j(w,16)};var S=g.f2=g.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return j(w,2)},L=g.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return j(w,3)},T=g.scale=g.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return U===I?w*$e:U===N?w:void 0},Z=function(w){return T(function(O){return U===I?xa()-O:U===N?O:void 0}(w))};g.__private__.setPrecision=g.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(e=parseInt(w,10))};var ye,_e="00000000000000000000000000000000",Ce=g.__private__.getFileId=function(){return _e},ie=g.__private__.setFileId=function(w){return _e=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():_e.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(xe=new $u(u.userPermissions,u.userPassword,u.ownerPassword,_e)),_e};g.setFileId=function(w){return ie(w),this},g.getFileId=function(){return Ce()};var we=g.__private__.convertDateToPDFDate=function(w){var O=w.getTimezoneOffset(),te=O<0?"+":"-",fe=Math.floor(Math.abs(O/60)),Fe=Math.abs(O%60),Je=[te,K(fe),"'",K(Fe),"'"].join("");return["D:",w.getFullYear(),K(w.getMonth()+1),K(w.getDate()),K(w.getHours()),K(w.getMinutes()),K(w.getSeconds()),Je].join("")},Pe=g.__private__.convertPDFDateToDate=function(w){var O=parseInt(w.substr(2,4),10),te=parseInt(w.substr(6,2),10)-1,fe=parseInt(w.substr(8,2),10),Fe=parseInt(w.substr(10,2),10),Je=parseInt(w.substr(12,2),10),ot=parseInt(w.substr(14,2),10);return new Date(O,te,fe,Fe,Je,ot,0)},Se=g.__private__.setCreationDate=function(w){var O;if(w===void 0&&(w=new Date),w instanceof Date)O=we(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=w}return ye=O},M=g.__private__.getCreationDate=function(w){var O=ye;return w==="jsDate"&&(O=Pe(ye)),O};g.setCreationDate=function(w){return Se(w),this},g.getCreationDate=function(w){return M(w)};var H,K=g.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},ee=g.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},se=0,ue=[],Ae=[],pe=0,Ne=[],Oe=[],nt=!1,ke=Ae;g.__private__.setCustomOutputDestination=function(w){nt=!0,ke=w};var ce=function(w){nt||(ke=w)};g.__private__.resetCustomOutputDestination=function(){nt=!1,ke=Ae};var R=g.__private__.out=function(w){return w=w.toString(),pe+=w.length+1,ke.push(w),ke},Ee=g.__private__.write=function(w){return R(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},De=g.__private__.getArrayBuffer=function(w){for(var O=w.length,te=new ArrayBuffer(O),fe=new Uint8Array(te);O--;)fe[O]=w.charCodeAt(O);return te},st=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return st};var ge=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(w){return ge=U===N?w/$e:w,this};var Be,ve=g.__private__.getFontSize=g.getFontSize=function(){return U===I?ge:ge*$e},de=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(w){return de=w,this},g.__private__.getR2L=g.getR2L=function(){return de};var Te,q=g.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))Be=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');Be=w}else Be=parseInt(w,10)};g.__private__.getZoomMode=function(){return Be};var le,oe=g.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');Te=w};g.__private__.getPageMode=function(){return Te};var he=g.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');le=w};g.__private__.getLayoutMode=function(){return le},g.__private__.setDisplayMode=g.setDisplayMode=function(w,O,te){return q(w),he(O),oe(te),this};var Le={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(w){if(Object.keys(Le).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Le[w]},g.__private__.getDocumentProperties=function(){return Le},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(w){for(var O in Le)Le.hasOwnProperty(O)&&w[O]&&(Le[O]=w[O]);return this},g.__private__.setDocumentProperty=function(w,O){if(Object.keys(Le).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Le[w]=O};var Re,$e,Ve,St,ft,gt={},At={},dt=[],tt={},Tt={},bt={},It={},qt=null,Ht=0,wt=[],Kt=new M4(g),zr=t.hotfixes||[],Qr={},Hr={},tr=[],Dt=function w(O,te,fe,Fe,Je,ot){if(!(this instanceof w))return new w(O,te,fe,Fe,Je,ot);isNaN(O)&&(O=1),isNaN(te)&&(te=0),isNaN(fe)&&(fe=0),isNaN(Fe)&&(Fe=1),isNaN(Je)&&(Je=0),isNaN(ot)&&(ot=0),this._matrix=[O,te,fe,Fe,Je,ot]};Object.defineProperty(Dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Dt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Dt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(w)},Dt.prototype.multiply=function(w){var O=w.sx*this.sx+w.shy*this.shx,te=w.sx*this.shy+w.shy*this.sy,fe=w.shx*this.sx+w.sy*this.shx,Fe=w.shx*this.shy+w.sy*this.sy,Je=w.tx*this.sx+w.ty*this.shx+this.tx,ot=w.tx*this.shy+w.ty*this.sy+this.ty;return new Dt(O,te,fe,Fe,Je,ot)},Dt.prototype.decompose=function(){var w=this.sx,O=this.shy,te=this.shx,fe=this.sy,Fe=this.tx,Je=this.ty,ot=Math.sqrt(w*w+O*O),Qt=(w/=ot)*te+(O/=ot)*fe;te-=w*Qt,fe-=O*Qt;var Vt=Math.sqrt(te*te+fe*fe);return Qt/=Vt,w*(fe/=Vt)<O*(te/=Vt)&&(w=-w,O=-O,Qt=-Qt,ot=-ot),{scale:new Dt(ot,0,0,Vt,0,0),translate:new Dt(1,0,0,1,Fe,Je),rotate:new Dt(w,O,-O,w,0,0),skew:new Dt(1,0,Qt,1,0,0)}},Dt.prototype.toString=function(w){return this.join(" ")},Dt.prototype.inversed=function(){var w=this.sx,O=this.shy,te=this.shx,fe=this.sy,Fe=this.tx,Je=this.ty,ot=1/(w*fe-O*te),Qt=fe*ot,Vt=-O*ot,rr=-te*ot,Ar=w*ot;return new Dt(Qt,Vt,rr,Ar,-Qt*Fe-rr*Je,-Vt*Fe-Ar*Je)},Dt.prototype.applyToPoint=function(w){var O=w.x*this.sx+w.y*this.shx+this.tx,te=w.x*this.shy+w.y*this.sy+this.ty;return new ma(O,te)},Dt.prototype.applyToRectangle=function(w){var O=this.applyToPoint(w),te=this.applyToPoint(new ma(w.x+w.w,w.y+w.h));return new jA(O.x,O.y,te.x-O.x,te.y-O.y)},Dt.prototype.clone=function(){var w=this.sx,O=this.shy,te=this.shx,fe=this.sy,Fe=this.tx,Je=this.ty;return new Dt(w,O,te,fe,Fe,Je)},g.Matrix=Dt;var jt=g.matrixMult=function(w,O){return O.multiply(w)},dr=new Dt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=dr;var en=function(w,O){if(!Tt[w]){var te=(O instanceof Qc?"Sh":"P")+(Object.keys(tt).length+1).toString(10);O.id=te,Tt[w]=te,tt[te]=O,Kt.publish("addPattern",O)}};g.ShadingPattern=Qc,g.TilingPattern=cd,g.addShadingPattern=function(w,O){return B("addShadingPattern()"),en(w,O),this},g.beginTilingPattern=function(w){B("beginTilingPattern()"),uo(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},g.endTilingPattern=function(w,O){B("endTilingPattern()"),O.stream=Oe[H].join(`
`),en(w,O),Kt.publish("endTilingPattern",O),tr.pop().restore()};var Mr,mr=g.__private__.newObject=function(){var w=Rr();return ae(w,!0),w},Rr=g.__private__.newObjectDeferred=function(){return se++,ue[se]=function(){return pe},se},ae=function(w,O){return O=typeof O=="boolean"&&O,ue[w]=pe,O&&R(w+" 0 obj"),w},qe=g.__private__.newAdditionalObject=function(){var w={objId:Rr(),content:""};return Ne.push(w),w},vt=Rr(),mt=Rr(),kt=g.__private__.decodeColorString=function(w){var O=w.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length!==5||O[4]!=="k"&&O[4]!=="K"||(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var te=parseFloat(O[0]);O=[te,te,te,"r"]}for(var fe="#",Fe=0;Fe<3;Fe++)fe+=("0"+Math.floor(255*parseFloat(O[Fe])).toString(16)).slice(-2);return fe},at=g.__private__.encodeColorString=function(w){var O;typeof w=="string"&&(w={ch1:w});var te=w.ch1,fe=w.ch2,Fe=w.ch3,Je=w.ch4,ot=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof te=="string"&&te.charAt(0)!=="#"){var Qt=new e6(te);if(Qt.ok)te=Qt.toHex();else if(!/^\d*\.?\d*$/.test(te))throw new Error('Invalid color "'+te+'" passed to jsPDF.encodeColorString.')}if(typeof te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(te)&&(te="#"+te[1]+te[1]+te[2]+te[2]+te[3]+te[3]),typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te)){var Vt=parseInt(te.substr(1),16);te=Vt>>16&255,fe=Vt>>8&255,Fe=255&Vt}if(fe===void 0||Je===void 0&&te===fe&&fe===Fe)O=typeof te=="string"?te+" "+ot[0]:w.precision===2?S(te/255)+" "+ot[0]:L(te/255)+" "+ot[0];else if(Je===void 0||Xr(Je)==="object"){if(Je&&!isNaN(Je.a)&&Je.a===0)return["1.","1.","1.",ot[1]].join(" ");O=typeof te=="string"?[te,fe,Fe,ot[1]].join(" "):w.precision===2?[S(te/255),S(fe/255),S(Fe/255),ot[1]].join(" "):[L(te/255),L(fe/255),L(Fe/255),ot[1]].join(" ")}else O=typeof te=="string"?[te,fe,Fe,Je,ot[2]].join(" "):w.precision===2?[S(te),S(fe),S(Fe),S(Je),ot[2]].join(" "):[L(te),L(fe),L(Fe),L(Je),ot[2]].join(" ");return O},yt=g.__private__.getFilters=function(){return a},Et=g.__private__.putStream=function(w){var O=(w=w||{}).data||"",te=w.filters||yt(),fe=w.alreadyAppliedFilters||[],Fe=w.addLength1||!1,Je=O.length,ot=w.objectId,Qt=function(On){return On};if(u!==null&&ot===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Qt=xe.encryptor(ot,0));var Vt={};te===!0&&(te=["FlateEncode"]);var rr=w.additionalKeyValues||[],Ar=(Vt=Jt.API.processDataByFilters!==void 0?Jt.API.processDataByFilters(O,te):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(Vt.data.length!==0&&(rr.push({key:"Length",value:Vt.data.length}),Fe===!0&&rr.push({key:"Length1",value:Je})),Ar.length!=0)if(Ar.split("/").length-1==1)rr.push({key:"Filter",value:Ar});else{rr.push({key:"Filter",value:"["+Ar+"]"});for(var yr=0;yr<rr.length;yr+=1)if(rr[yr].key==="DecodeParms"){for(var Or=[],Fn=0;Fn<Vt.reverseChain.split("/").length-1;Fn+=1)Or.push("null");Or.push(rr[yr].value),rr[yr].value="["+Or.join(" ")+"]"}}R("<<");for(var Gr=0;Gr<rr.length;Gr++)R("/"+rr[Gr].key+" "+rr[Gr].value);R(">>"),Vt.data.length!==0&&(R("stream"),R(Qt(Vt.data)),R("endstream"))},ar=g.__private__.putPage=function(w){var O=w.number,te=w.data,fe=w.objId,Fe=w.contentsObjId;ae(fe,!0),R("<</Type /Page"),R("/Parent "+w.rootDictionaryObjId+" 0 R"),R("/Resources "+w.resourceDictionaryObjId+" 0 R"),R("/MediaBox ["+parseFloat(_(w.mediaBox.bottomLeftX))+" "+parseFloat(_(w.mediaBox.bottomLeftY))+" "+_(w.mediaBox.topRightX)+" "+_(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&R("/CropBox ["+_(w.cropBox.bottomLeftX)+" "+_(w.cropBox.bottomLeftY)+" "+_(w.cropBox.topRightX)+" "+_(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&R("/BleedBox ["+_(w.bleedBox.bottomLeftX)+" "+_(w.bleedBox.bottomLeftY)+" "+_(w.bleedBox.topRightX)+" "+_(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&R("/TrimBox ["+_(w.trimBox.bottomLeftX)+" "+_(w.trimBox.bottomLeftY)+" "+_(w.trimBox.topRightX)+" "+_(w.trimBox.topRightY)+"]"),w.artBox!==null&&R("/ArtBox ["+_(w.artBox.bottomLeftX)+" "+_(w.artBox.bottomLeftY)+" "+_(w.artBox.topRightX)+" "+_(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&R("/UserUnit "+w.userUnit),Kt.publish("putPage",{objId:fe,pageContext:wt[O],pageNumber:O,page:te}),R("/Contents "+Fe+" 0 R"),R(">>"),R("endobj");var Je=te.join(`
`);return U===N&&(Je+=`
Q`),ae(Fe,!0),Et({data:Je,filters:yt(),objectId:Fe}),R("endobj"),fe},Tr=g.__private__.putPages=function(){var w,O,te=[];for(w=1;w<=Ht;w++)wt[w].objId=Rr(),wt[w].contentsObjId=Rr();for(w=1;w<=Ht;w++)te.push(ar({number:w,data:Oe[w],objId:wt[w].objId,contentsObjId:wt[w].contentsObjId,mediaBox:wt[w].mediaBox,cropBox:wt[w].cropBox,bleedBox:wt[w].bleedBox,trimBox:wt[w].trimBox,artBox:wt[w].artBox,userUnit:wt[w].userUnit,rootDictionaryObjId:vt,resourceDictionaryObjId:mt}));ae(vt,!0),R("<</Type /Pages");var fe="/Kids [";for(O=0;O<Ht;O++)fe+=te[O]+" 0 R ";R(fe+"]"),R("/Count "+Ht),R(">>"),R("endobj"),Kt.publish("postPutPages")},Ir=function(w){Kt.publish("putFont",{font:w,out:R,newObject:mr,putStream:Et}),w.isAlreadyPutted!==!0&&(w.objectNumber=mr(),R("<<"),R("/Type /Font"),R("/BaseFont /"+qu(w.postScriptName)),R("/Subtype /Type1"),typeof w.encoding=="string"&&R("/Encoding /"+w.encoding),R("/FirstChar 32"),R("/LastChar 255"),R(">>"),R("endobj"))},js=function(w){w.objectNumber=mr();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[_(w.x),_(w.y),_(w.x+w.width),_(w.y+w.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var te=w.pages[1].join(`
`);Et({data:te,additionalKeyValues:O,objectId:w.objectNumber}),R("endobj")},Ei=function(w,O){O||(O=21);var te=mr(),fe=function(ot,Qt){var Vt,rr=[],Ar=1/(Qt-1);for(Vt=0;Vt<1;Vt+=Ar)rr.push(Vt);if(rr.push(1),ot[0].offset!=0){var yr={offset:0,color:ot[0].color};ot.unshift(yr)}if(ot[ot.length-1].offset!=1){var Or={offset:1,color:ot[ot.length-1].color};ot.push(Or)}for(var Fn="",Gr=0,On=0;On<rr.length;On++){for(Vt=rr[On];Vt>ot[Gr+1].offset;)Gr++;var Tn=ot[Gr].offset,Hn=(Vt-Tn)/(ot[Gr+1].offset-Tn),Un=ot[Gr].color,Fi=ot[Gr+1].color;Fn+=ee(Math.round((1-Hn)*Un[0]+Hn*Fi[0]).toString(16))+ee(Math.round((1-Hn)*Un[1]+Hn*Fi[1]).toString(16))+ee(Math.round((1-Hn)*Un[2]+Hn*Fi[2]).toString(16))}return Fn.trim()}(w.colors,O),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+O+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Et({data:fe,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:te}),R("endobj"),w.objectNumber=mr(),R("<< /ShadingType "+w.type),R("/ColorSpace /DeviceRGB");var Je="/Coords ["+_(parseFloat(w.coords[0]))+" "+_(parseFloat(w.coords[1]))+" ";w.type===2?Je+=_(parseFloat(w.coords[2]))+" "+_(parseFloat(w.coords[3])):Je+=_(parseFloat(w.coords[2]))+" "+_(parseFloat(w.coords[3]))+" "+_(parseFloat(w.coords[4]))+" "+_(parseFloat(w.coords[5])),R(Je+="]"),w.matrix&&R("/Matrix ["+w.matrix.toString()+"]"),R("/Function "+te+" 0 R"),R("/Extend [true true]"),R(">>"),R("endobj")},ki=function(w,O){var te=Rr(),fe=mr();O.push({resourcesOid:te,objectOid:fe}),w.objectNumber=fe;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+w.boundingBox.map(_).join(" ")+"]"}),Fe.push({key:"XStep",value:_(w.xStep)}),Fe.push({key:"YStep",value:_(w.yStep)}),Fe.push({key:"Resources",value:te+" 0 R"}),w.matrix&&Fe.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),Et({data:w.stream,additionalKeyValues:Fe,objectId:w.objectNumber}),R("endobj")},gi=function(w){for(var O in w.objectNumber=mr(),R("<<"),w)switch(O){case"opacity":R("/ca "+S(w[O]));break;case"stroke-opacity":R("/CA "+S(w[O]))}R(">>"),R("endobj")},Gi=function(w){ae(w.resourcesOid,!0),R("<<"),R("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var O in R("/Font <<"),gt)gt.hasOwnProperty(O)&&(d===!1||d===!0&&p.hasOwnProperty(O))&&R("/"+O+" "+gt[O].objectNumber+" 0 R");R(">>")}(),function(){if(Object.keys(tt).length>0){for(var O in R("/Shading <<"),tt)tt.hasOwnProperty(O)&&tt[O]instanceof Qc&&tt[O].objectNumber>=0&&R("/"+O+" "+tt[O].objectNumber+" 0 R");Kt.publish("putShadingPatternDict"),R(">>")}}(),function(O){if(Object.keys(tt).length>0){for(var te in R("/Pattern <<"),tt)tt.hasOwnProperty(te)&&tt[te]instanceof g.TilingPattern&&tt[te].objectNumber>=0&&tt[te].objectNumber<O&&R("/"+te+" "+tt[te].objectNumber+" 0 R");Kt.publish("putTilingPatternDict"),R(">>")}}(w.objectOid),function(){if(Object.keys(bt).length>0){var O;for(O in R("/ExtGState <<"),bt)bt.hasOwnProperty(O)&&bt[O].objectNumber>=0&&R("/"+O+" "+bt[O].objectNumber+" 0 R");Kt.publish("putGStateDict"),R(">>")}}(),function(){for(var O in R("/XObject <<"),Qr)Qr.hasOwnProperty(O)&&Qr[O].objectNumber>=0&&R("/"+O+" "+Qr[O].objectNumber+" 0 R");Kt.publish("putXobjectDict"),R(">>")}(),R(">>"),R("endobj")},Do=function(w){At[w.fontName]=At[w.fontName]||{},At[w.fontName][w.fontStyle]=w.id},Ao=function(w,O,te,fe,Fe){var Je={id:"F"+(Object.keys(gt).length+1).toString(10),postScriptName:w,fontName:O,fontStyle:te,encoding:fe,isStandardFont:Fe||!1,metadata:{}};return Kt.publish("addFont",{font:Je,instance:this}),gt[Je.id]=Je,Do(Je),Je.id},cs=g.__private__.pdfEscape=g.pdfEscape=function(w,O){return function(te,fe){var Fe,Je,ot,Qt,Vt,rr,Ar,yr,Or;if(ot=(fe=fe||{}).sourceEncoding||"Unicode",Vt=fe.outputEncoding,(fe.autoencode||Vt)&&gt[Re].metadata&&gt[Re].metadata[ot]&&gt[Re].metadata[ot].encoding&&(Qt=gt[Re].metadata[ot].encoding,!Vt&&gt[Re].encoding&&(Vt=gt[Re].encoding),!Vt&&Qt.codePages&&(Vt=Qt.codePages[0]),typeof Vt=="string"&&(Vt=Qt[Vt]),Vt)){for(Ar=!1,rr=[],Fe=0,Je=te.length;Fe<Je;Fe++)(yr=Vt[te.charCodeAt(Fe)])?rr.push(String.fromCharCode(yr)):rr.push(te[Fe]),rr[Fe].charCodeAt(0)>>8&&(Ar=!0);te=rr.join("")}for(Fe=te.length;Ar===void 0&&Fe!==0;)te.charCodeAt(Fe-1)>>8&&(Ar=!0),Fe--;if(!Ar)return te;for(rr=fe.noBOM?[]:[254,255],Fe=0,Je=te.length;Fe<Je;Fe++){if((Or=(yr=te.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");rr.push(Or),rr.push(yr-(Or<<8))}return String.fromCharCode.apply(void 0,rr)}(w,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Js=g.__private__.beginPage=function(w){Oe[++Ht]=[],wt[Ht]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},lo(Ht),ce(Oe[H])},Pa=function(w,O){var te,fe,Fe;switch(r=O||r,typeof w=="string"&&(te=x(w.toLowerCase()),Array.isArray(te)&&(fe=te[0],Fe=te[1])),Array.isArray(w)&&(fe=w[0]*$e,Fe=w[1]*$e),isNaN(fe)&&(fe=s[0],Fe=s[1]),(fe>14400||Fe>14400)&&(ln.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),Fe=Math.min(14400,Fe)),s=[fe,Fe],r.substr(0,1)){case"l":Fe>fe&&(s=[Fe,fe]);break;case"p":fe>Fe&&(s=[Fe,fe])}Js(s),Xt(Is),R(Oa),tn!==0&&R(tn+" J"),gc!==0&&R(gc+" j"),Kt.publish("addPage",{pageNumber:Ht})},Da=function(w){w>0&&w<=Ht&&(Oe.splice(w,1),wt.splice(w,1),Ht--,H>Ht&&(H=Ht),this.setPage(H))},lo=function(w){w>0&&w<=Ht&&(H=w)},mn=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Oe.length-1},co=function(w,O,te){var fe,Fe=void 0;return te=te||{},w=w!==void 0?w:gt[Re].fontName,O=O!==void 0?O:gt[Re].fontStyle,fe=w.toLowerCase(),At[fe]!==void 0&&At[fe][O]!==void 0?Fe=At[fe][O]:At[w]!==void 0&&At[w][O]!==void 0?Fe=At[w][O]:te.disableWarning===!1&&ln.warn("Unable to look up font label for font '"+w+"', '"+O+"'. Refer to getFontList() for available fonts."),Fe||te.noFallback||(Fe=At.times[O])==null&&(Fe=At.times.normal),Fe},Qs=g.__private__.putInfo=function(){var w=mr(),O=function(fe){return fe};for(var te in u!==null&&(O=xe.encryptor(w,0)),R("<<"),R("/Producer ("+cs(O("jsPDF "+Jt.version))+")"),Le)Le.hasOwnProperty(te)&&Le[te]&&R("/"+te.substr(0,1).toUpperCase()+te.substr(1)+" ("+cs(O(Le[te]))+")");R("/CreationDate ("+cs(O(ye))+")"),R(">>"),R("endobj")},pa=g.__private__.putCatalog=function(w){var O=(w=w||{}).rootDictionaryObjId||vt;switch(mr(),R("<<"),R("/Type /Catalog"),R("/Pages "+O+" 0 R"),Be||(Be="fullwidth"),Be){case"fullwidth":R("/OpenAction [3 0 R /FitH null]");break;case"fullheight":R("/OpenAction [3 0 R /FitV null]");break;case"fullpage":R("/OpenAction [3 0 R /Fit]");break;case"original":R("/OpenAction [3 0 R /XYZ null null 1]");break;default:var te=""+Be;te.substr(te.length-1)==="%"&&(Be=parseInt(Be)/100),typeof Be=="number"&&R("/OpenAction [3 0 R /XYZ null null "+S(Be)+"]")}switch(le||(le="continuous"),le){case"continuous":R("/PageLayout /OneColumn");break;case"single":R("/PageLayout /SinglePage");break;case"two":case"twoleft":R("/PageLayout /TwoColumnLeft");break;case"tworight":R("/PageLayout /TwoColumnRight")}Te&&R("/PageMode /"+Te),Kt.publish("putCatalog"),R(">>"),R("endobj")},Mo=g.__private__.putTrailer=function(){R("trailer"),R("<<"),R("/Size "+(se+1)),R("/Root "+se+" 0 R"),R("/Info "+(se-1)+" 0 R"),u!==null&&R("/Encrypt "+xe.oid+" 0 R"),R("/ID [ <"+_e+"> <"+_e+"> ]"),R(">>")},un=g.__private__.putHeader=function(){R("%PDF-"+v),R("%")},Oo=g.__private__.putXRef=function(){var w="0000000000";R("xref"),R("0 "+(se+1)),R("0000000000 65535 f ");for(var O=1;O<=se;O++)typeof ue[O]=="function"?R((w+ue[O]()).slice(-10)+" 00000 n "):ue[O]!==void 0?R((w+ue[O]).slice(-10)+" 00000 n "):R("0000000000 00000 n ")},Si=g.__private__.buildDocument=function(){var w;se=0,pe=0,Ae=[],ue=[],Ne=[],vt=Rr(),mt=Rr(),ce(Ae),Kt.publish("buildDocument"),un(),Tr(),function(){Kt.publish("putAdditionalObjects");for(var te=0;te<Ne.length;te++){var fe=Ne[te];ae(fe.objId,!0),R(fe.content),R("endobj")}Kt.publish("postPutAdditionalObjects")}(),w=[],function(){for(var te in gt)gt.hasOwnProperty(te)&&(d===!1||d===!0&&p.hasOwnProperty(te))&&Ir(gt[te])}(),function(){var te;for(te in bt)bt.hasOwnProperty(te)&&gi(bt[te])}(),function(){for(var te in Qr)Qr.hasOwnProperty(te)&&js(Qr[te])}(),function(te){var fe;for(fe in tt)tt.hasOwnProperty(fe)&&(tt[fe]instanceof Qc?Ei(tt[fe]):tt[fe]instanceof cd&&ki(tt[fe],te))}(w),Kt.publish("putResources"),w.forEach(Gi),Gi({resourcesOid:mt,objectOid:Number.MAX_SAFE_INTEGER}),Kt.publish("postPutResources"),u!==null&&(xe.oid=mr(),R("<<"),R("/Filter /Standard"),R("/V "+xe.v),R("/R "+xe.r),R("/U <"+xe.toHexString(xe.U)+">"),R("/O <"+xe.toHexString(xe.O)+">"),R("/P "+xe.P),R(">>"),R("endobj")),Qs(),pa();var O=pe;return Oo(),Mo(),R("startxref"),R(""+O),R("%%EOF"),ce(Oe[H]),Ae.join(`
`)},Ma=g.__private__.getBlob=function(w){return new Blob([De(w)],{type:"application/pdf"})},Ho=g.output=g.__private__.output=(Mr=function(w,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",w){case void 0:return Si();case"save":g.save(O.filename);break;case"arraybuffer":return De(Si());case"blob":return Ma(Si());case"bloburi":case"bloburl":if(sr.URL!==void 0&&typeof sr.URL.createObjectURL=="function")return sr.URL&&sr.URL.createObjectURL(Ma(Si()))||void 0;ln.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var te="",fe=Si();try{te=R4(fe)}catch{te=R4(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+O.filename+";base64,"+te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(sr)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(Fe=O.pdfObjectUrl,Je="");var ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+Je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",Qt=sr.open();return Qt!==null&&Qt.document.write(ot),Qt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(sr)==="[object Window]"){var Vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',rr=sr.open();if(rr!==null){rr.document.write(Vt);var Ar=this;rr.document.documentElement.querySelector("#pdfViewer").onload=function(){rr.document.title=O.filename,rr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ar.output("bloburl"))}}return rr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(sr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',Or=sr.open();if(Or!==null&&(Or.document.write(yr),Or.document.title=O.filename),Or||typeof safari>"u")return Or;break;case"datauri":case"dataurl":return sr.document.location.href=this.output("datauristring",O);default:return null}},Mr.foo=function(){try{return Mr.apply(this,arguments)}catch(te){var w=te.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var O="Error in function "+w.split(`
`)[0].split("<")[0]+": "+te.message;if(!sr.console)throw new Error(O);sr.console.error(O,te),sr.alert&&alert(O)}},Mr.foo.bar=Mr,Mr.foo),Y=function(w){return Array.isArray(zr)===!0&&zr.indexOf(w)>-1};switch(n){case"pt":$e=1;break;case"mm":$e=72/25.4;break;case"cm":$e=72/2.54;break;case"in":$e=72;break;case"px":$e=Y("px_scaling")==1?.75:96/72;break;case"pc":case"em":$e=12;break;case"ex":$e=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);$e=n}var xe=null;Se(),ie();var Ge=g.__private__.getPageInfo=g.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:wt[w].objId,pageNumber:w,pageContext:wt[w]}},Ye=g.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in wt)if(wt[O].objId===w)break;return Ge(O)},it=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:wt[H].objId,pageNumber:H,pageContext:wt[H]}};g.addPage=function(){return Pa.apply(this,arguments),this},g.setPage=function(){return lo.apply(this,arguments),ce.call(this,Oe[H]),this},g.insertPage=function(w){return this.addPage(),this.movePage(H,w),this},g.movePage=function(w,O){var te,fe;if(w>O){te=Oe[w],fe=wt[w];for(var Fe=w;Fe>O;Fe--)Oe[Fe]=Oe[Fe-1],wt[Fe]=wt[Fe-1];Oe[O]=te,wt[O]=fe,this.setPage(O)}else if(w<O){te=Oe[w],fe=wt[w];for(var Je=w;Je<O;Je++)Oe[Je]=Oe[Je+1],wt[Je]=wt[Je+1];Oe[O]=te,wt[O]=fe,this.setPage(O)}return this},g.deletePage=function(){return Da.apply(this,arguments),this},g.__private__.text=g.text=function(w,O,te,fe,Fe){var Je,ot,Qt,Vt,rr,Ar,yr,Or,Fn,Gr=(fe=fe||{}).scope||this;if(typeof w=="number"&&typeof O=="number"&&(typeof te=="string"||Array.isArray(te))){var On=te;te=O,O=w,w=On}if(arguments[3]instanceof Dt==0?(Qt=arguments[4],Vt=arguments[5],Xr(yr=arguments[3])==="object"&&yr!==null||(typeof Qt=="string"&&(Vt=Qt,Qt=null),typeof yr=="string"&&(Vt=yr,yr=null),typeof yr=="number"&&(Qt=yr,yr=null),fe={flags:yr,angle:Qt,align:Vt})):(B("The transform parameter of text() with a Matrix value"),Fn=Fe),isNaN(O)||isNaN(te)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return Gr;var Tn,Hn="",Un=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:Cs,Fi=Gr.internal.scaleFactor;function va(Vr){return Vr=Vr.split("	").join(Array(fe.TabLen||9).join(" ")),cs(Vr,yr)}function ya(Vr){for(var on,Xn=Vr.concat(),ps=[],Go=Xn.length;Go--;)typeof(on=Xn.shift())=="string"?ps.push(on):Array.isArray(Vr)&&(on.length===1||on[1]===void 0&&on[2]===void 0)?ps.push(on[0]):ps.push([on[0],on[1],on[2]]);return ps}function f(Vr,on){var Xn;if(typeof Vr=="string")Xn=on(Vr)[0];else if(Array.isArray(Vr)){for(var ps,Go,kh=Vr.concat(),Cu=[],l0=kh.length;l0--;)typeof(ps=kh.shift())=="string"?Cu.push(on(ps)[0]):Array.isArray(ps)&&typeof ps[0]=="string"&&(Go=on(ps[0],ps[1],ps[2]),Cu.push([Go[0],Go[1],Go[2]]));Xn=Cu}return Xn}var C=!1,Q=!0;if(typeof w=="string")C=!0;else if(Array.isArray(w)){var J=w.concat();ot=[];for(var Ue,Ke=J.length;Ke--;)(typeof(Ue=J.shift())!="string"||Array.isArray(Ue)&&typeof Ue[0]!="string")&&(Q=!1);C=Q}if(C===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var xt=ge/Gr.internal.scaleFactor,kr=xt*(Un-1);switch(fe.baseline){case"bottom":te-=kr;break;case"top":te+=xt-kr;break;case"hanging":te+=xt-2*kr;break;case"middle":te+=xt/2-kr}if((Ar=fe.maxWidth||0)>0&&(typeof w=="string"?w=Gr.splitTextToSize(w,Ar):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(Vr,on){return Vr.concat(Gr.splitTextToSize(on,Ar))},[]))),Je={text:w,x:O,y:te,options:fe,mutex:{pdfEscape:cs,activeFontKey:Re,fonts:gt,activeFontSize:ge}},Kt.publish("preProcessText",Je),w=Je.text,Qt=(fe=Je.options).angle,Fn instanceof Dt==0&&Qt&&typeof Qt=="number"){Qt*=Math.PI/180,fe.rotationDirection===0&&(Qt=-Qt),U===N&&(Qt=-Qt);var Ln=Math.cos(Qt),wr=Math.sin(Qt);Fn=new Dt(Ln,wr,-wr,Ln,0,0)}else Qt&&Qt instanceof Dt&&(Fn=Qt);U!==N||Fn||(Fn=dr),(rr=fe.charSpace||ga)!==void 0&&(Hn+=_(T(rr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Or=fe.horizontalScale)!==void 0&&(Hn+=_(100*Or)+` Tz
`),fe.lang;var Dr=-1,dn=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,Wi=Gr.internal.getCurrentPageInfo().pageContext;switch(dn){case 0:case!1:case"fill":Dr=0;break;case 1:case!0:case"stroke":Dr=1;break;case 2:case"fillThenStroke":Dr=2;break;case 3:case"invisible":Dr=3;break;case 4:case"fillAndAddForClipping":Dr=4;break;case 5:case"strokeAndAddPathForClipping":Dr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Dr=6;break;case 7:case"addToPathForClipping":Dr=7}var Zs=Wi.usedRenderingMode!==void 0?Wi.usedRenderingMode:-1;Dr!==-1?Hn+=Dr+` Tr
`:Zs!==-1&&(Hn+=`0 Tr
`),Dr!==-1&&(Wi.usedRenderingMode=Dr),Vt=fe.align||"left";var Rs,Ha=ge*Un,yh=Gr.internal.pageSize.getWidth(),bh=gt[Re];rr=fe.charSpace||ga,Ar=fe.maxWidth||0,yr=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var RA=[],xc=function(Vr){return Gr.getStringUnitWidth(Vr,{font:bh,charSpace:rr,fontSize:ge,doKerning:!1})*ge/Fi};if(Object.prototype.toString.call(w)==="[object Array]"){var Ji;ot=ya(w),Vt!=="left"&&(Rs=ot.map(xc));var Xi,PA=0;if(Vt==="right"){O-=Rs[0],w=[],Ke=ot.length;for(var zo=0;zo<Ke;zo++)zo===0?(Xi=Wn(O),Ji=Ni(te)):(Xi=T(PA-Rs[zo]),Ji=-Ha),w.push([ot[zo],Xi,Ji]),PA=Rs[zo]}else if(Vt==="center"){O-=Rs[0]/2,w=[],Ke=ot.length;for(var DA=0;DA<Ke;DA++)DA===0?(Xi=Wn(O),Ji=Ni(te)):(Xi=T((PA-Rs[DA])/2),Ji=-Ha),w.push([ot[DA],Xi,Ji]),PA=Rs[DA]}else if(Vt==="left"){w=[],Ke=ot.length;for(var Bh=0;Bh<Ke;Bh++)w.push(ot[Bh])}else if(Vt==="justify"&&bh.encoding==="Identity-H"){w=[],Ke=ot.length,Ar=Ar!==0?Ar:yh;for(var _u=0,Jn=0;Jn<Ke;Jn++)if(Ji=Jn===0?Ni(te):-Ha,Xi=Jn===0?Wn(O):_u,Jn<Ke-1){var A0=T((Ar-Rs[Jn])/(ot[Jn].split(" ").length-1)),fo=ot[Jn].split(" ");w.push([fo[0]+" ",Xi,Ji]),_u=0;for(var po=1;po<fo.length;po++){var _h=(xc(fo[po-1]+" "+fo[po])-xc(fo[po]))*Fi+A0;po==fo.length-1?w.push([fo[po],_h,0]):w.push([fo[po]+" ",_h,0]),_u-=_h}}else w.push([ot[Jn],Xi,Ji]);w.push(["",_u,0])}else{if(Vt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],Ke=ot.length,Ar=Ar!==0?Ar:yh,Jn=0;Jn<Ke;Jn++){Ji=Jn===0?Ni(te):-Ha,Xi=Jn===0?Wn(O):0;var Ch=ot[Jn].split(" ").length-1,Ih=Ch>0?(Ar-Rs[Jn])/Ch:0;Jn<Ke-1?RA.push(_(T(Ih))):RA.push(0),w.push([ot[Jn],Xi,Ji])}}}(typeof fe.R2L=="boolean"?fe.R2L:de)===!0&&(w=f(w,function(Vr,on,Xn){return[Vr.split("").reverse().join(""),on,Xn]})),Je={text:w,x:O,y:te,options:fe,mutex:{pdfEscape:cs,activeFontKey:Re,fonts:gt,activeFontSize:ge}},Kt.publish("postProcessText",Je),w=Je.text,Tn=Je.mutex.isHex||!1;var Eh=gt[Re].encoding;Eh!=="WinAnsiEncoding"&&Eh!=="StandardEncoding"||(w=f(w,function(Vr,on,Xn){return[va(Vr),on,Xn]})),ot=ya(w),w=[];for(var MA,OA,HA,vc=Array.isArray(ot[0])?1:0,VA="",yc=function(Vr,on,Xn){var ps="";return Xn instanceof Dt?(Xn=typeof fe.angle=="number"?jt(Xn,new Dt(1,0,0,1,Vr,on)):jt(new Dt(1,0,0,1,Vr,on),Xn),U===N&&(Xn=jt(new Dt(1,0,0,-1,0,0),Xn)),ps=Xn.join(" ")+` Tm
`):ps=_(Vr)+" "+_(on)+` Td
`,ps},ba=0;ba<ot.length;ba++){switch(VA="",vc){case 1:HA=(Tn?"<":"(")+ot[ba][0]+(Tn?">":")"),MA=parseFloat(ot[ba][1]),OA=parseFloat(ot[ba][2]);break;case 0:HA=(Tn?"<":"(")+ot[ba]+(Tn?">":")"),MA=Wn(O),OA=Ni(te)}RA!==void 0&&RA[ba]!==void 0&&(VA=RA[ba]+` Tw
`),ba===0?w.push(VA+yc(MA,OA,Fn)+HA):vc===0?w.push(VA+HA):vc===1&&w.push(VA+yc(MA,OA,Fn)+HA)}w=vc===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var go=`BT
/`;return go+=Re+" "+ge+` Tf
`,go+=_(ge*Un)+` TL
`,go+=qi+`
`,go+=Hn,go+=w,R(go+="ET"),p[Re]=!0,Gr};var Nt=g.__private__.clip=g.clip=function(w){return R(w==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Nt("evenodd")},g.__private__.discardPath=g.discardPath=function(){return R("n"),this};var Ze=g.__private__.isValidStyle=function(w){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(O=!0),O};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(w){return Ze(w)&&(c=w),this};var Zt=g.__private__.getStyle=g.getStyle=function(w){var O=c;switch(w){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=w}return O},Yt=g.close=function(){return R("h"),this};g.stroke=function(){return R("S"),this},g.fill=function(w){return hr("f",w),this},g.fillEvenOdd=function(w){return hr("f*",w),this},g.fillStroke=function(w){return hr("B",w),this},g.fillStrokeEvenOdd=function(w){return hr("B*",w),this};var hr=function(w,O){Xr(O)==="object"?_s(O,w):R(w)},Er=function(w){w===null||U===N&&w===void 0||(w=Zt(w),R(w))};function Pr(w,O,te,fe,Fe){var Je=new cd(O||this.boundingBox,te||this.xStep,fe||this.yStep,this.gState,Fe||this.matrix);Je.stream=this.stream;var ot=w+"$$"+this.cloneIndex+++"$$";return en(ot,Je),Je}var _s=function(w,O){var te=Tt[w.key],fe=tt[te];if(fe instanceof Qc)R("q"),R(an(O)),fe.gState&&g.setGState(fe.gState),R(w.matrix.toString()+" cm"),R("/"+te+" sh"),R("Q");else if(fe instanceof cd){var Fe=new Dt(1,0,0,-1,0,xa());w.matrix&&(Fe=Fe.multiply(w.matrix||dr),te=Pr.call(fe,w.key,w.boundingBox,w.xStep,w.yStep,Fe).id),R("q"),R("/Pattern cs"),R("/"+te+" scn"),fe.gState&&g.setGState(fe.gState),R(O),R("Q")}},an=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Mn=g.moveTo=function(w,O){return R(_(T(w))+" "+_(Z(O))+" m"),this},Xs=g.lineTo=function(w,O){return R(_(T(w))+" "+_(Z(O))+" l"),this},or=g.curveTo=function(w,O,te,fe,Fe,Je){return R([_(T(w)),_(Z(O)),_(T(te)),_(Z(fe)),_(T(Fe)),_(Z(Je)),"c"].join(" ")),this};g.__private__.line=g.line=function(w,O,te,fe,Fe){if(isNaN(w)||isNaN(O)||isNaN(te)||isNaN(fe)||!Ze(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return U===I?this.lines([[te-w,fe-O]],w,O,[1,1],Fe||"S"):this.lines([[te-w,fe-O]],w,O,[1,1]).stroke()},g.__private__.lines=g.lines=function(w,O,te,fe,Fe,Je){var ot,Qt,Vt,rr,Ar,yr,Or,Fn,Gr,On,Tn,Hn;if(typeof w=="number"&&(Hn=te,te=O,O=w,w=Hn),fe=fe||[1,1],Je=Je||!1,isNaN(O)||isNaN(te)||!Array.isArray(w)||!Array.isArray(fe)||!Ze(Fe)||typeof Je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Mn(O,te),ot=fe[0],Qt=fe[1],rr=w.length,On=O,Tn=te,Vt=0;Vt<rr;Vt++)(Ar=w[Vt]).length===2?(On=Ar[0]*ot+On,Tn=Ar[1]*Qt+Tn,Xs(On,Tn)):(yr=Ar[0]*ot+On,Or=Ar[1]*Qt+Tn,Fn=Ar[2]*ot+On,Gr=Ar[3]*Qt+Tn,On=Ar[4]*ot+On,Tn=Ar[5]*Qt+Tn,or(yr,Or,Fn,Gr,On,Tn));return Je&&Yt(),Er(Fe),this},g.path=function(w){for(var O=0;O<w.length;O++){var te=w[O],fe=te.c;switch(te.op){case"m":Mn(fe[0],fe[1]);break;case"l":Xs(fe[0],fe[1]);break;case"c":or.apply(this,fe);break;case"h":Yt()}}return this},g.__private__.rect=g.rect=function(w,O,te,fe,Fe){if(isNaN(w)||isNaN(O)||isNaN(te)||isNaN(fe)||!Ze(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return U===I&&(fe=-fe),R([_(T(w)),_(Z(O)),_(T(te)),_(T(fe)),"re"].join(" ")),Er(Fe),this},g.__private__.triangle=g.triangle=function(w,O,te,fe,Fe,Je,ot){if(isNaN(w)||isNaN(O)||isNaN(te)||isNaN(fe)||isNaN(Fe)||isNaN(Je)||!Ze(ot))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[te-w,fe-O],[Fe-te,Je-fe],[w-Fe,O-Je]],w,O,[1,1],ot,!0),this},g.__private__.roundedRect=g.roundedRect=function(w,O,te,fe,Fe,Je,ot){if(isNaN(w)||isNaN(O)||isNaN(te)||isNaN(fe)||isNaN(Fe)||isNaN(Je)||!Ze(ot))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qt=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*te),Je=Math.min(Je,.5*fe),this.lines([[te-2*Fe,0],[Fe*Qt,0,Fe,Je-Je*Qt,Fe,Je],[0,fe-2*Je],[0,Je*Qt,-Fe*Qt,Je,-Fe,Je],[2*Fe-te,0],[-Fe*Qt,0,-Fe,-Je*Qt,-Fe,-Je],[0,2*Je-fe],[0,-Je*Qt,Fe*Qt,-Je,Fe,-Je]],w+Fe,O,[1,1],ot,!0),this},g.__private__.ellipse=g.ellipse=function(w,O,te,fe,Fe){if(isNaN(w)||isNaN(O)||isNaN(te)||isNaN(fe)||!Ze(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Je=4/3*(Math.SQRT2-1)*te,ot=4/3*(Math.SQRT2-1)*fe;return Mn(w+te,O),or(w+te,O-ot,w+Je,O-fe,w,O-fe),or(w-Je,O-fe,w-te,O-ot,w-te,O),or(w-te,O+ot,w-Je,O+fe,w,O+fe),or(w+Je,O+fe,w+te,O+ot,w+te,O),Er(Fe),this},g.__private__.circle=g.circle=function(w,O,te,fe){if(isNaN(w)||isNaN(O)||isNaN(te)||!Ze(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,O,te,te,fe)},g.setFont=function(w,O,te){return te&&(O=E(O,te)),Re=co(w,O,{disableWarning:!1}),this};var er=g.__private__.getFont=g.getFont=function(){return gt[co.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var w,O,te={};for(w in At)if(At.hasOwnProperty(w))for(O in te[w]=[],At[w])At[w].hasOwnProperty(O)&&te[w].push(O);return te},g.addFont=function(w,O,te,fe,Fe){var Je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Je.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&Je.indexOf(arguments[3])==-1&&(te=E(te,fe)),Ao.call(this,w,O,te,Fe=Fe||"Identity-H")};var Cs,Is=t.lineWidth||.200025,$i=g.__private__.getLineWidth=g.getLineWidth=function(){return Is},Xt=g.__private__.setLineWidth=g.setLineWidth=function(w){return Is=w,R(_(T(w))+" w"),this};g.__private__.setLineDash=Jt.API.setLineDash=Jt.API.setLineDashPattern=function(w,O){if(w=w||[],O=O||0,isNaN(O)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(te){return _(T(te))}).join(" "),O=_(T(O)),R("["+w+"] "+O+" d"),this};var TA=g.__private__.getLineHeight=g.getLineHeight=function(){return ge*Cs};g.__private__.getLineHeight=g.getLineHeight=function(){return ge*Cs};var hc=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(Cs=w),this},fc=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Cs};hc(t.lineHeight);var Wn=g.__private__.getHorizontalCoordinate=function(w){return T(w)},Ni=g.__private__.getVerticalCoordinate=function(w){return U===N?w:wt[H].mediaBox.topRightY-wt[H].mediaBox.bottomLeftY-T(w)},UA=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(w){return _(Wn(w))},Ys=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(w){return _(Ni(w))},Oa=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return kt(Oa)},g.__private__.setStrokeColor=g.setDrawColor=function(w,O,te,fe){return Oa=at({ch1:w,ch2:O,ch3:te,ch4:fe,pdfColorType:"draw",precision:2}),R(Oa),this};var LA=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return kt(LA)},g.__private__.setFillColor=g.setFillColor=function(w,O,te,fe){return LA=at({ch1:w,ch2:O,ch3:te,ch4:fe,pdfColorType:"fill",precision:2}),R(LA),this};var qi=t.textColor||"0 g",Vo=g.__private__.getTextColor=g.getTextColor=function(){return kt(qi)};g.__private__.setTextColor=g.setTextColor=function(w,O,te,fe){return qi=at({ch1:w,ch2:O,ch3:te,ch4:fe,pdfColorType:"text",precision:3}),this};var ga=t.charSpace,pc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(ga||0)};g.__private__.setCharSpace=g.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ga=w,this};var tn=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(w){var O=g.CapJoinStyles[w];if(O===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return tn=O,R(O+" J"),this};var gc=0;g.__private__.setLineJoin=g.setLineJoin=function(w){var O=g.CapJoinStyles[w];if(O===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gc=O,R(O+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return R(_(T(w))+" M"),this},g.GState=vw,g.setGState=function(w){(w=typeof w=="string"?bt[It[w]]:bu(null,w)).equals(qt)||(R("/"+w.id+" gs"),qt=w)};var bu=function(w,O){if(!w||!It[w]){var te=!1;for(var fe in bt)if(bt.hasOwnProperty(fe)&&bt[fe].equals(O)){te=!0;break}if(te)O=bt[fe];else{var Fe="GS"+(Object.keys(bt).length+1).toString(10);bt[Fe]=O,O.id=Fe}return w&&(It[w]=O.id),Kt.publish("addGState",O),O}};g.addGState=function(w,O){return bu(w,O),this},g.saveGraphicsState=function(){return R("q"),dt.push({key:Re,size:ge,color:qi}),this},g.restoreGraphicsState=function(){R("Q");var w=dt.pop();return Re=w.key,ge=w.size,qi=w.color,qt=null,this},g.setCurrentTransformationMatrix=function(w){return R(w.toString()+" cm"),this},g.comment=function(w){return R("#"+w),this};var ma=function(w,O){var te=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return te},set:function(Je){isNaN(Je)||(te=parseFloat(Je))}});var fe=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(Je){isNaN(Je)||(fe=parseFloat(Je))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(Je){Fe=Je.toString()}}),this},jA=function(w,O,te,fe){ma.call(this,w,O),this.type="rect";var Fe=te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(ot){isNaN(ot)||(Fe=parseFloat(ot))}});var Je=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Je},set:function(ot){isNaN(ot)||(Je=parseFloat(ot))}}),this},Ko=function(){this.page=Ht,this.currentPage=H,this.pages=Oe.slice(0),this.pagesContext=wt.slice(0),this.x=Ve,this.y=St,this.matrix=ft,this.width=mi(H),this.height=Bu(H),this.outputDestination=ke,this.id="",this.objectNumber=-1};Ko.prototype.restore=function(){Ht=this.page,H=this.currentPage,wt=this.pagesContext,Oe=this.pages,Ve=this.x,St=this.y,ft=this.matrix,mc(H,this.width),wi(H,this.height),ke=this.outputDestination};var uo=function(w,O,te,fe,Fe){tr.push(new Ko),Ht=H=0,Oe=[],Ve=w,St=O,ft=Fe,Js([te,fe])};for(var ho in g.beginFormObject=function(w,O,te,fe,Fe){return uo(w,O,te,fe,Fe),this},g.endFormObject=function(w){return function(O){if(Hr[O])tr.pop().restore();else{var te=new Ko,fe="Xo"+(Object.keys(Qr).length+1).toString(10);te.id=fe,Hr[O]=fe,Qr[fe]=te,Kt.publish("addFormObject",te),tr.pop().restore()}}(w),this},g.doFormObject=function(w,O){var te=Qr[Hr[w]];return R("q"),R(O.toString()+" cm"),R("/"+te.id+" Do"),R("Q"),this},g.getFormObject=function(w){var O=Qr[Hr[w]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},g.save=function(w,O){return w=w||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(Nc(Ma(Si()),w),typeof Nc.unload=="function"&&sr.setTimeout&&setTimeout(Nc.unload,911),this):new Promise(function(te,fe){try{var Fe=Nc(Ma(Si()),w);typeof Nc.unload=="function"&&sr.setTimeout&&setTimeout(Nc.unload,911),te(Fe)}catch(Je){fe(Je.message)}})},Jt.API)Jt.API.hasOwnProperty(ho)&&(ho==="events"&&Jt.API.events.length?function(w,O){var te,fe,Fe;for(Fe=O.length-1;Fe!==-1;Fe--)te=O[Fe][0],fe=O[Fe][1],w.subscribe.apply(w,[te].concat(typeof fe=="function"?[fe]:fe))}(Kt,Jt.API.events):g[ho]=Jt.API[ho]);function mi(w){return wt[w].mediaBox.topRightX-wt[w].mediaBox.bottomLeftX}function mc(w,O){wt[w].mediaBox.topRightX=O+wt[w].mediaBox.bottomLeftX}function Bu(w){return wt[w].mediaBox.topRightY-wt[w].mediaBox.bottomLeftY}function wi(w,O){wt[w].mediaBox.topRightY=O+wt[w].mediaBox.bottomLeftY}var wa=g.getPageWidth=function(w){return mi(w=w||H)/$e},QA=g.setPageWidth=function(w,O){mc(w,O*$e)},xa=g.getPageHeight=function(w){return Bu(w=w||H)/$e},wc=g.setPageHeight=function(w,O){wi(w,O*$e)};return g.internal={pdfEscape:cs,getStyle:Zt,getFont:er,getFontSize:ve,getCharSpace:pc,getTextColor:Vo,getLineHeight:TA,getLineHeightFactor:fc,getLineWidth:$i,write:Ee,getHorizontalCoordinate:Wn,getVerticalCoordinate:Ni,getCoordinateString:UA,getVerticalCoordinateString:Ys,collections:{},newObject:mr,newAdditionalObject:qe,newObjectDeferred:Rr,newObjectDeferredBegin:ae,getFilters:yt,putStream:Et,events:Kt,scaleFactor:$e,pageSize:{getWidth:function(){return wa(H)},setWidth:function(w){QA(H,w)},getHeight:function(){return xa(H)},setHeight:function(w){wc(H,w)}},encryptionOptions:u,encryption:xe,getEncryptor:function(w){return u!==null?xe.encryptor(w,0):function(O){return O}},output:Ho,getNumberOfPages:mn,get pages(){return Oe},out:R,f2:S,f3:L,getPageInfo:Ge,getPageInfoByObjId:Ye,getCurrentPageInfo:it,getPDFVersion:y,Point:ma,Rectangle:jA,Matrix:Dt,hasHotfix:Y},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return wa(H)},set:function(w){QA(H,w)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return xa(H)},set:function(w){wc(H,w)},enumerable:!0,configurable:!0}),(function(w){for(var O=0,te=st.length;O<te;O++){var fe=Ao.call(this,w[O][0],w[O][1],w[O][2],st[O][3],!0);d===!1&&(p[fe]=!0);var Fe=w[O][0].split("-");Do({id:fe,fontName:Fe[0],fontStyle:Fe[1]||""})}Kt.publish("addFonts",{fonts:gt,dictionary:At})}).call(g,st),Re="F1",Pa(s,r),Kt.publish("initialized"),g}$u.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},$u.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},$u.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},$u.prototype.processOwnerPassword=function(t,e){return Sy(ky(e).substr(0,5),t)},$u.prototype.encryptor=function(t,e){var r=ky(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Sy(r,n)}},vw.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Xr(t)!==Xr(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Jt.API={events:[]},Jt.version="4.1.0";var zn=Jt.API,ZB=1,yu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Du=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},yw=function(t){return t.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(e){var r=e.charCodeAt(0).toString(16).toUpperCase();return"#"+(r.length===1?"0"+r:r)})},lr=function(t){return t.toFixed(2)},rl=function(t){return t.toFixed(5)};zn.__acroform__={};var zi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},O4=function(t){return t*ZB},yo=function(t){var e=new s6,r=Mt.internal.getHeight(t)||0,n=Mt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(lr(n)),Number(lr(r))],e},fY=zn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},pY=zn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},gY=zn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},is=zn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return gY(t,e-1)},as=zn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return fY(t,e-1)},os=zn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return pY(t,e-1)},mY=zn.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],A={};return A.lowerLeft_X=r(s)||0,A.lowerLeft_Y=n(i+o)||0,A.upperRight_X=r(s+a)||0,A.upperRight_Y=n(i)||0,[Number(lr(A.lowerLeft_X)),Number(lr(A.lowerLeft_Y)),Number(lr(A.upperRight_X)),Number(lr(A.upperRight_Y))]},wY=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Ny(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+lr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=yo(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},Ny=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(S){return S.split(`
`)}):s.map(function(S){return[S]});var i=r,a=Mt.internal.getHeight(t)||0;a=a<0?-a:a;var o=Mt.internal.getWidth(t)||0;o=o<0?-o:o;var A=function(S,L,T){if(S+1<s.length){var Z=L+" "+s[S+1][0];return Eg(Z,t,T).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,u,d=Eg("3",t,i).height,p=t.multiline?a-i:(a-d)/2,g=p+=2,v=0,y=0,k=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Eg(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var x="",I=0,N=0;N<s.length;N++)if(s.hasOwnProperty(N)){var U=!1;if(s[N].length!==1&&k!==s[N].length-1){if((d+2)*(I+2)+2>a)continue e;x+=s[N][k],U=!0,y=N,N--}else{x=(x+=s[N][k]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var D=parseInt(N),P=A(D,x,i),E=N>=s.length-1;if(P&&!E){x+=" ",k=0;continue}if(P||E){if(E)y=D;else if(t.multiline&&(d+2)*(I+2)+2>a)continue e}else{if(!t.multiline||(d+2)*(I+2)+2>a)continue e;y=D}}for(var _="",B=v;B<=y;B++){var j=s[B];if(t.multiline){if(B===y){_+=j[k]+" ",k=(k+1)%j.length;continue}if(B===v){_+=j[j.length-1]+" ";continue}}_+=j[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,u=Eg(_,t,i).width,t.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;default:c=2}e+=lr(c)+" "+lr(g)+` Td
`,e+="("+yu(_)+`) Tj
`,e+=-lr(c)+` 0 Td
`,g=-(i+2),u=0,v=U?y:y+1,I++,x=""}break}return n.text=e,n.fontSize=i,n},Eg=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},xY={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vY=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},yY=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ao.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(xY)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ZB=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new i6,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&vY(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],A=[],c=o.Rect;if(o.Rect&&(o.Rect=mY(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Mt.createDefaultAppearanceStream(o),Xr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(A=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=wY(o);A.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var d="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var g=o.appearanceStreamContent[p];if(d+="/"+p+" ",d+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var v=g[a];typeof v=="function"&&(v=v.call(s,o)),d+="/"+a+" "+v+" ",s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v)}}else typeof(v=g)=="function"&&(v=v.call(s,o)),d+="/"+a+" "+v,s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v);d+=">>"}A.push({key:"AP",value:`<<
`+d+">>"})}s.internal.putStream({additionalKeyValues:A,objectId:o.objId}),s.internal.out("endobj")}i&&function(y,k){for(var x in y)if(y.hasOwnProperty(x)){var I=x,N=y[x];k.internal.newObjectDeferredBegin(N.objId,!0),Xr(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete y[I]}}(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},n6=zn.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),Xr(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)==="/"?s+="/"+yw(t[i].substr(1)):(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+yu(n(t[i].toString()))+")")}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},wv=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+yu(n(t))+")"},ko=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ko.prototype.toString=function(){return this.objId+" 0 R"},ko.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ko.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:n6(s,this.objId,this.scope)}):s instanceof ko?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var s6=function(){ko.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};zi(s6,ko);var i6=function(){ko.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+yu(r(t))+")"}},set:function(r){t=r}})};zi(i6,ko);var ao=function t(){ko.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!is(e,3)},set:function(x){x?this.F=as(e,3):this.F=os(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof bw)return;i="FieldObject"+t.FieldNum++}var x=function(I){return I};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+yu(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(x){A=x}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/ZB:c},set:function(x){c=x}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(x){u=x}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof bw||this instanceof $c))return wv(d,this.objId,this.scope)},set:function(x){x=x.toString(),d=x}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Fs==0?wv(p,this.objId,this.scope):p},set:function(x){x=x.toString(),p=this instanceof Fs==0?x.substr(0,1)==="("?Du(x.substr(1,x.length-2)):Du(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fs==1?Du(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof Fs==1?"/"+yw(x):x}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Fs==0?wv(g,this.objId,this.scope):g},set:function(x){x=x.toString(),g=this instanceof Fs==0?x.substr(0,1)==="("?Du(x.substr(1,x.length-2)):Du(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fs==1?Du(g.substr(1,g.length-1)):g},set:function(x){x=x.toString(),g=this instanceof Fs==1?"/"+yw(x):x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(x){x=!!x,y=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(x){v=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,1)},set:function(x){x?this.Ff=as(this.Ff,1):this.Ff=os(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,2)},set:function(x){x?this.Ff=as(this.Ff,2):this.Ff=os(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,3)},set:function(x){x?this.Ff=as(this.Ff,3):this.Ff=os(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');k=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(k){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};zi(ao,ko);var Bd=function(){ao.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return n6(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,a,o){o||(o=1);for(var A,c=[];A=a.exec(i);)c.push(A[o]);return c}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,18)},set:function(r){r?this.Ff=as(this.Ff,18):this.Ff=os(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=as(this.Ff,19):this.Ff=os(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,20)},set:function(r){r?(this.Ff=as(this.Ff,20),e.sort()):this.Ff=os(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,22)},set:function(r){r?this.Ff=as(this.Ff,22):this.Ff=os(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,23)},set:function(r){r?this.Ff=as(this.Ff,23):this.Ff=os(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,27)},set:function(r){r?this.Ff=as(this.Ff,27):this.Ff=os(this.Ff,27)}}),this.hasAppearanceStream=!1};zi(Bd,ao);var _d=function(){Bd.call(this),this.fontName="helvetica",this.combo=!1};zi(_d,Bd);var Cd=function(){_d.call(this),this.combo=!0};zi(Cd,_d);var lm=function(){Cd.call(this),this.edit=!0};zi(lm,Cd);var Fs=function(){ao.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,15)},set:function(r){r?this.Ff=as(this.Ff,15):this.Ff=os(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,16)},set:function(r){r?this.Ff=as(this.Ff,16):this.Ff=os(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,17)},set:function(r){r?this.Ff=as(this.Ff,17):this.Ff=os(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,26)},set:function(r){r?this.Ff=as(this.Ff,26):this.Ff=os(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+yu(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Xr(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+yw(r)}})};zi(Fs,ao);var cm=function(){Fs.call(this),this.pushButton=!0};zi(cm,Fs);var Id=function(){Fs.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};zi(Id,Fs);var bw=function(){var t,e;ao.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+yu(s(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){Xr(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Mt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zi(bw,ao),Id.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Id.prototype.createOption=function(t){var e=new bw;return e.Parent=this,e.optionName=t,this.Kids.push(e),bY.call(this.scope,e),e};var um=function(){Fs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Mt.CheckBox.createAppearanceStream()};zi(um,Fs);var $c=function(){ao.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,13)},set:function(e){e?this.Ff=as(this.Ff,13):this.Ff=os(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,21)},set:function(e){e?this.Ff=as(this.Ff,21):this.Ff=os(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,23)},set:function(e){e?this.Ff=as(this.Ff,23):this.Ff=os(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,24)},set:function(e){e?this.Ff=as(this.Ff,24):this.Ff=os(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,25)},set:function(e){e?this.Ff=as(this.Ff,25):this.Ff=os(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,26)},set:function(e){e?this.Ff=as(this.Ff,26):this.Ff=os(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zi($c,ao);var dm=function(){$c.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!is(this.Ff,14)},set:function(t){t?this.Ff=as(this.Ff,14):this.Ff=os(this.Ff,14)}}),this.password=!0};zi(dm,$c);var Mt={CheckBox:{createAppearanceStream:function(){return{N:{On:Mt.CheckBox.YesNormal},D:{On:Mt.CheckBox.YesPushDown,Off:Mt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=yo(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=Ny(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+lr(Mt.internal.getWidth(t))+" "+lr(Mt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+lr(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=yo(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=Mt.internal.getHeight(t),a=Mt.internal.getWidth(t),o=Ny(t,t.caption);return s.push("1 g"),s.push("0 0 "+lr(a)+" "+lr(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+lr(a-1)+" "+lr(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+lr(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=yo(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+lr(Mt.internal.getWidth(t))+" "+lr(Mt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Mt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Mt.RadioButton.Circle.YesNormal,e.D[t]=Mt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=yo(t);e.scope=t.scope;var r=[],n=Mt.internal.getWidth(t)<=Mt.internal.getHeight(t)?Mt.internal.getWidth(t)/4:Mt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Mt.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+rl(Mt.internal.getWidth(t)/2)+" "+rl(Mt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=yo(t);e.scope=t.scope;var r=[],n=Mt.internal.getWidth(t)<=Mt.internal.getHeight(t)?Mt.internal.getWidth(t)/4:Mt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Mt.internal.Bezier_C).toFixed(5)),a=Number((n*Mt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+rl(Mt.internal.getWidth(t)/2)+" "+rl(Mt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+rl(Mt.internal.getWidth(t)/2)+" "+rl(Mt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=yo(t);e.scope=t.scope;var r=[],n=Mt.internal.getWidth(t)<=Mt.internal.getHeight(t)?Mt.internal.getWidth(t)/4:Mt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Mt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+rl(Mt.internal.getWidth(t)/2)+" "+rl(Mt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Mt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Mt.RadioButton.Cross.YesNormal,e.D[t]=Mt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=yo(t);e.scope=t.scope;var r=[],n=Mt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+lr(Mt.internal.getWidth(t)-2)+" "+lr(Mt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(lr(n.x1.x)+" "+lr(n.x1.y)+" m"),r.push(lr(n.x2.x)+" "+lr(n.x2.y)+" l"),r.push(lr(n.x4.x)+" "+lr(n.x4.y)+" m"),r.push(lr(n.x3.x)+" "+lr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=yo(t);e.scope=t.scope;var r=Mt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+lr(Mt.internal.getWidth(t))+" "+lr(Mt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+lr(Mt.internal.getWidth(t)-2)+" "+lr(Mt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(lr(r.x1.x)+" "+lr(r.x1.y)+" m"),n.push(lr(r.x2.x)+" "+lr(r.x2.y)+" l"),n.push(lr(r.x4.x)+" "+lr(r.x4.y)+" m"),n.push(lr(r.x3.x)+" "+lr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=yo(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+lr(Mt.internal.getWidth(t))+" "+lr(Mt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Mt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Mt.internal.getWidth(t),r=Mt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Mt.internal.getWidth=function(t){var e=0;return Xr(t)==="object"&&(e=O4(t.Rect[2])),e},Mt.internal.getHeight=function(t){var e=0;return Xr(t)==="object"&&(e=O4(t.Rect[3])),e};var bY=zn.addField=function(t){if(yY(this,t),!(t instanceof ao))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};zn.AcroFormChoiceField=Bd,zn.AcroFormListBox=_d,zn.AcroFormComboBox=Cd,zn.AcroFormEditBox=lm,zn.AcroFormButton=Fs,zn.AcroFormPushButton=cm,zn.AcroFormRadioButton=Id,zn.AcroFormCheckBox=um,zn.AcroFormTextField=$c,zn.AcroFormPasswordField=dm,zn.AcroFormAppearance=Mt,zn.AcroForm={ChoiceField:Bd,ListBox:_d,ComboBox:Cd,EditBox:lm,Button:Fs,PushButton:cm,RadioButton:Id,CheckBox:um,TextField:$c,PasswordField:dm,Appearance:Mt},Jt.AcroForm={ChoiceField:Bd,ListBox:_d,ComboBox:Cd,EditBox:lm,Button:Fs,PushButton:cm,RadioButton:Id,CheckBox:um,TextField:$c,PasswordField:dm,Appearance:Mt};Jt.AcroForm;function a6(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(S,L){var T,Z,ye,_e,Ce,ie=r;if((L=L||r)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(P(S))for(Ce in n)for(ye=n[Ce],T=0;T<ye.length;T+=1){for(_e=!0,Z=0;Z<ye[T].length;Z+=1)if(ye[T][Z]!==void 0&&ye[T][Z]!==S[Z]){_e=!1;break}if(_e===!0){ie=Ce;break}}else for(Ce in n)for(ye=n[Ce],T=0;T<ye.length;T+=1){for(_e=!0,Z=0;Z<ye[T].length;Z+=1)if(ye[T][Z]!==void 0&&ye[T][Z]!==S.charCodeAt(Z)){_e=!1;break}if(_e===!0){ie=Ce;break}}return ie===r&&L!==r&&(ie=L),ie},i=function S(L){for(var T=this.internal.write,Z=this.internal.putStream,ye=(0,this.internal.getFilters)();ye.indexOf("FlateEncode")!==-1;)ye.splice(ye.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var _e=[];if(_e.push({key:"Type",value:"/XObject"}),_e.push({key:"Subtype",value:"/Image"}),_e.push({key:"Width",value:L.width}),_e.push({key:"Height",value:L.height}),L.colorSpace===x.INDEXED?_e.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(_e.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===x.DEVICE_CMYK&&_e.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),_e.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&_e.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var Ce="",ie=0,we=L.transparency.length;ie<we;ie++)Ce+=L.transparency[ie]+" "+L.transparency[ie]+" ";_e.push({key:"Mask",value:"["+Ce+"]"})}L.sMask!==void 0&&_e.push({key:"SMask",value:L.objectId+1+" 0 R"});var Pe=L.filter!==void 0?["/"+L.filter]:void 0;if(Z({data:L.data,additionalKeyValues:_e,alreadyAppliedFilters:Pe,objectId:L.objectId}),T("endobj"),"sMask"in L&&L.sMask!==void 0){var Se,M=(Se=L.sMaskBitsPerComponent)!==null&&Se!==void 0?Se:L.bitsPerComponent,H={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:L.sMask};"filter"in L&&(H.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(L.width),H.filter=L.filter),S.call(this,H)}if(L.colorSpace===x.INDEXED){var K=this.internal.newObject();Z({data:_(new Uint8Array(L.palette)),objectId:K}),T("endobj")}},a=function(){var S=this.internal.collections[e+"images"];for(var L in S)i.call(this,S[L])},o=function(){var S,L=this.internal.collections[e+"images"],T=this.internal.write;for(var Z in L)T("/I"+(S=L[Z]).index,S.objectId,"0","R")},A=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var S=this.internal.collections[e+"images"];return A.call(this),S},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(S){return typeof t["process"+S.toUpperCase()]=="function"},p=function(S){return Xr(S)==="object"&&S.nodeType===1},g=function(S,L){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var T=""+S.getAttribute("src");if(T.indexOf("data:image/")===0)return Am(unescape(T).split("base64,").pop());var Z=t.loadFile(T,!0);if(Z!==void 0)return Z}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var ye;switch(L){case"PNG":ye="image/png";break;case"WEBP":ye="image/webp";break;default:ye="image/jpeg"}return Am(S.toDataURL(ye,1).split("base64,").pop())}},v=function(S){var L=this.internal.collections[e+"images"];if(L){for(var T in L)if(S===L[T].alias)return L[T]}},y=function(S,L,T){return S||L||(S=-96,L=-96),S<0&&(S=-1*T.width*72/S/this.internal.scaleFactor),L<0&&(L=-1*T.height*72/L/this.internal.scaleFactor),S===0&&(S=L*T.width/T.height),L===0&&(L=S*T.height/T.width),[S,L]},k=function(S,L,T,Z,ye,_e){var Ce=y.call(this,T,Z,ye),ie=this.internal.getCoordinateString,we=this.internal.getVerticalCoordinateString,Pe=c.call(this);if(T=Ce[0],Z=Ce[1],Pe[ye.index]=ye,_e){_e*=Math.PI/180;var Se=Math.cos(_e),M=Math.sin(_e),H=function(ee){return ee.toFixed(4)},K=[H(Se),H(M),H(-1*M),H(Se),0,0,"cm"]}this.internal.write("q"),_e?(this.internal.write([1,"0","0",1,ie(S),we(L+Z),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([ie(T),"0","0",ie(Z),"0","0","cm"].join(" "))):this.internal.write([ie(T),"0","0",ie(Z),ie(S),we(L+Z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ye.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(S){var L,T,Z=0;if(typeof S=="string")for(T=S.length,L=0;L<T;L++)Z=(Z<<5)-Z+S.charCodeAt(L),Z|=0;else if(P(S))for(T=S.byteLength/2,L=0;L<T;L++)Z=(Z<<5)-Z+S[L],Z|=0;return Z},U=t.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var L=!0;return S.length===0&&(L=!1),S.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(L=!1),L},D=t.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var L=S.indexOf(",");return L<0?null:S.substring(0,L).trim().endsWith("base64")?S.substring(L+1):null};t.__addimage__.isArrayBuffer=function(S){return S instanceof ArrayBuffer};var P=t.__addimage__.isArrayBufferView=function(S){return S instanceof Int8Array||S instanceof Uint8Array||S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array},E=t.__addimage__.binaryStringToUint8Array=function(S){for(var L=S.length,T=new Uint8Array(L),Z=0;Z<L;Z++)T[Z]=S.charCodeAt(Z);return T},_=t.__addimage__.arrayBufferToBinaryString=function(S){for(var L="",T=P(S)?S:new Uint8Array(S),Z=0;Z<T.length;Z+=8192)L+=String.fromCharCode.apply(null,T.subarray(Z,Z+8192));return L};t.addImage=function(){var S,L,T,Z,ye,_e,Ce,ie,we;if(typeof arguments[1]=="number"?(L=r,T=arguments[1],Z=arguments[2],ye=arguments[3],_e=arguments[4],Ce=arguments[5],ie=arguments[6],we=arguments[7]):(L=arguments[1],T=arguments[2],Z=arguments[3],ye=arguments[4],_e=arguments[5],Ce=arguments[6],ie=arguments[7],we=arguments[8]),Xr(S=arguments[0])==="object"&&!p(S)&&"imageData"in S){var Pe=S;S=Pe.imageData,L=Pe.format||L||r,T=Pe.x||T||0,Z=Pe.y||Z||0,ye=Pe.w||Pe.width||ye,_e=Pe.h||Pe.height||_e,Ce=Pe.alias||Ce,ie=Pe.compression||ie,we=Pe.rotation||Pe.angle||we}var Se=this.internal.getFilters();if(ie===void 0&&Se.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(T)||isNaN(Z))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var M=B.call(this,S,L,Ce,ie);return k.call(this,T,Z,ye,_e,M,we),this};var B=function(S,L,T,Z){var ye,_e,Ce;if(typeof S=="string"&&s(S)===r){S=unescape(S);var ie=j(S,!1);(ie!==""||(ie=t.loadFile(S,!0))!==void 0)&&(S=ie)}if(p(S)&&(S=g(S,L)),L=s(S,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((Ce=T)==null||Ce.length===0)&&(T=function(we){return typeof we=="string"||P(we)?N(we):P(we.data)?N(we.data):null}(S)),(ye=v.call(this,T))||(S instanceof Uint8Array||L==="RGBA"||(_e=S,S=E(S)),ye=this["process"+L.toUpperCase()](S,u.call(this),T,function(we){return we&&typeof we=="string"&&(we=we.toUpperCase()),we in t.image_compression?we:I.NONE}(Z),_e)),!ye)throw new Error("An unknown error occurred whilst processing the image.");return ye},j=t.__addimage__.convertBase64ToBinaryString=function(S,L){L=typeof L!="boolean"||L;var T,Z="";if(typeof S=="string"){var ye;T=(ye=D(S))!==null&&ye!==void 0?ye:S;try{Z=Am(T)}catch(_e){if(L)throw U(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+_e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};t.getImageProperties=function(S){var L,T,Z="";if(p(S)&&(S=g(S)),typeof S=="string"&&s(S)===r&&((Z=j(S,!1))===""&&(Z=t.loadFile(S)||""),S=Z),T=s(S),!d(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(S instanceof Uint8Array||(S=E(S)),!(L=this["process"+T.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=T,L}})(Jt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Jt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((n=c[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){n=c[p];var g=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(y.objId),I=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(x(n.contents))+")",i+=" /Popup "+k.objId+" 0 R",i+=" /P "+A.objId+" 0 R",i+=" /T ("+g(x(I))+") >>",y.content=i;var N=y.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",k.content=i,this.internal.write(y.objId,"0 R",k.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var U=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(v(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var D=this.annotations._nameMap[n.options.name];n.options.pageNumber=D.page,n.options.top=D.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var P=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+P+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,a){var o=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:A(r),y:c(n),w:A(r+s),h:c(n+i)},options:a,type:"link"})},t.textWithLink=function(r,n,s,i){var a,o,A=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(r,o).length;a=Math.ceil(c*u)}else o=A,a=c;return this.text(r,n,s,i),s+=.2*c,i.align==="center"&&(n-=A/2),i.align==="right"&&(n-=A),this.link(n,s-c,o,a,i),A},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Jt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length<=2},A=t.__arabicParser__.isArabicAlfLetter=function(y){return a(y)&&s.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(y){var k=0,x=r,I="",N=0;for(k=0;k<y.length;k+=1)x[y.charCodeAt(k)]!==void 0?(N++,typeof(x=x[y.charCodeAt(k)])=="number"&&(I+=String.fromCharCode(x),x=r,N=0),k===y.length-1&&(x=r,I+=y.charAt(k-(N-1)),k-=N-1,N=0)):(x=r,I+=y.charAt(k-N),k-=N,N=0);return I};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(y,k,x){return a(y)?i(y)===!1?-1:!c(y)||!a(k)&&!a(x)||!a(x)&&o(k)||o(y)&&!a(k)||o(y)&&A(k)||o(y)&&o(k)?0:u(y)&&a(k)&&!o(k)&&a(x)&&c(x)?3:o(y)||!a(x)?1:2:-1},g=function(y){var k=0,x=0,I=0,N="",U="",D="",P=(y=y||"").split("\\s+"),E=[];for(k=0;k<P.length;k+=1){for(E.push(""),x=0;x<P[k].length;x+=1)N=P[k][x],U=P[k][x-1],D=P[k][x+1],a(N)?(I=p(N,U,D),E[k]+=I!==-1?String.fromCharCode(e[N.charCodeAt(0)][I]):N):E[k]+=N;E[k]=d(E[k])}return E.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var y,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(k)){var I=0;for(x=[],I=0;I<k.length;I+=1)Array.isArray(k[I])?x.push([g(k[I][0]),k[I][1],k[I][2]]):x.push([g(k[I])]);y=x}else y=g(k);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",v])}(Jt.API),Jt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Jt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(y){A=y}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(A){return n.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},t.getTextDimensions=function(A,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,g=0,v=0,y=0,k=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var x=c.maxWidth;x>0?typeof A=="string"?A=this.splitTextToSize(A,x):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(N,U){return N.concat(k.splitTextToSize(U,x))},[])):A=Array.isArray(A)?A:[A];for(var I=0;I<A.length;I++)g<(y=this.getStringUnitWidth(A[I],{font:d})*u)&&(g=y);return g!==0&&(v=A.length),{w:g/=p,h:Math.max((v*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var A;A=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===A.lineNumber?(A.x=(c.x||0)+(c.width||0),A.y=c.y||0):c.y+c.height+A.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=d.top,g&&p&&(this.printHeaderRow(A.lineNumber,!0),A.y+=p[0].height)):A.y=c.y+c.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,r===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-u,A.y+u,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+u,{align:"center",baseline:"top",maxWidth:A.width-u-u}):this.text(A.text,A.x+u,A.y+u,{align:"left",baseline:"top",maxWidth:A.width-u-u})),this.internal.__cell__.lastCell=A,this};t.table=function(A,c,u,d,p){if(n.call(this),!u)throw new Error("No data for PDF table.");var g,v,y,k,x=[],I=[],N=[],U={},D={},P=[],E=[],_=(p=p||{}).autoSize||!1,B=p.printHeaders!==!1,j=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,S=p.margins||Object.assign({width:this.getPageWidth()},e),L=typeof p.padding=="number"?p.padding:3,T=p.headerBackgroundColor||"#c8c8c8",Z=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=Z,this.setFontSize(j),d==null)I=x=Object.keys(u[0]),N=x.map(function(){return"left"});else if(Array.isArray(d)&&Xr(d[0])==="object")for(x=d.map(function(Pe){return Pe.name}),I=d.map(function(Pe){return Pe.prompt||Pe.name||""}),N=d.map(function(Pe){return Pe.align||"left"}),g=0;g<d.length;g+=1)D[d[g].name]=.7499990551181103*d[g].width;else Array.isArray(d)&&typeof d[0]=="string"&&(I=x=d,N=x.map(function(){return"left"}));if(_||Array.isArray(d)&&typeof d[0]=="string")for(g=0;g<x.length;g+=1){for(U[k=x[g]]=u.map(function(Pe){return Pe[k]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(I[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=U[k],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)P.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[k]=Math.max.apply(null,P)+L+L,P=[]}if(B){var ye={};for(g=0;g<x.length;g+=1)ye[x[g]]={},ye[x[g]].text=I[g],ye[x[g]].align=N[g];var _e=o.call(this,ye,D);E=x.map(function(Pe){return new i(A,c,D[Pe],_e,ye[Pe].text,void 0,ye[Pe].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var Ce=d.reduce(function(Pe,Se){return Pe[Se.name]=Se.align,Pe},{});for(g=0;g<u.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:u[g]},this);var ie=o.call(this,u[g],D);for(y=0;y<x.length;y+=1){var we=u[g][x[y]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:y,data:we},this),a.call(this,new i(A,c,D[x[y]],ie,we,g+2,Ce[x[y]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=c,this};var o=function(A,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(A).map(function(g){var v=A[g];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,c[g]-u-u)},this).map(function(g){return this.getLineHeightFactor()*g.length*d/p+u+u},this).reduce(function(g,v){return Math.max(g,v)},0)};t.setTableHeaderRow=function(A){n.call(this),this.internal.__cell__.tableHeaderRow=A},t.printHeaderRow=function(A,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){u=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=A;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(v)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(Jt.API);var o6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},A6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Fy=a6(A6),l6=[100,200,300,400,500,600,700,800,900],BY=a6(l6);function xv(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return o6[i=i||"normal"]?i:"normal"}(t.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(t.weight),s=function(i){return typeof Fy[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function H4(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var _Y={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},V4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function K4(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function z4(t){return t.trimLeft()}function CY(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function IY(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Mu,kg,G4,$4,q4,vv=["times"];function W4(t,e,r,n,s){var i=4,a=X4;switch(s){case Jt.API.image_compression.FAST:i=1,a=J4;break;case Jt.API.image_compression.MEDIUM:i=6,a=Y4;break;case Jt.API.image_compression.SLOW:i=9,a=Z4}t=function(A,c,u,d){for(var p,g=A.length/c,v=new Uint8Array(A.length+g),y=[EY,J4,X4,Y4,Z4],k=0;k<g;k+=1){var x=k*c,I=A.subarray(x,x+c);if(d)v.set(d(I,u,p),x+k);else{for(var N=y.length,U=[],D=0;D<N;D+=1)U[D]=y[D](I,u,p);var P=SY(U.concat());v.set(U[P],x+k)}p=I}return v}(t,e,Math.ceil(r*n/8),a);var o=_y(t,{level:i});return Jt.API.__addimage__.arrayBufferToBinaryString(o)}function EY(t){var e=Array.apply([],t);return e.unshift(0),e}function J4(t,e){var r=t.length,n=[];n[0]=1;for(var s=0;s<r;s+=1){var i=t[s-e]||0;n[s+1]=t[s]-i+256&255}return n}function X4(t,e,r){var n=t.length,s=[];s[0]=2;for(var i=0;i<n;i+=1){var a=r&&r[i]||0;s[i+1]=t[i]-a+256&255}return s}function Y4(t,e,r){var n=t.length,s=[];s[0]=3;for(var i=0;i<n;i+=1){var a=t[i-e]||0,o=r&&r[i]||0;s[i+1]=t[i]+256-(a+o>>>1)&255}return s}function Z4(t,e,r){var n=t.length,s=[];s[0]=4;for(var i=0;i<n;i+=1){var a=kY(t[i-e]||0,r&&r[i]||0,r&&r[i-e]||0);s[i+1]=t[i]-a+256&255}return s}function kY(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),s=Math.abs(t-r),i=Math.abs(t+e-r-r);return n<=s&&n<=i?t:s<=i?e:r}function SY(t){var e=t.map(function(r){return r.reduce(function(n,s){return n+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function yv(t,e,r){var n=e*r,s=Math.floor(n/8),i=16-(n-8*s+r),a=(1<<r)-1;return c6(t,s)>>i&a}function ek(t,e,r,n){var s=r*n,i=Math.floor(s/8),a=16-(s-8*i+n),o=(1<<n)-1,A=(e&o)<<a;(function(c,u,d){if(u+1<c.byteLength)c.setUint16(u,d,!1);else{var p=d>>8&255;c.setUint8(u,p)}})(t,i,c6(t,i)&~(o<<a)&65535|A)}function c6(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function NY(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<1+(7&s);t[e++],t[e++];var o=null,A=null;i&&(o=e,A=a,e+=3*a);var c=!0,u=[],d=0,p=null,g=0,v=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];d=t[e++]|t[e++]<<8,p=t[e++],1&y||(p=null),g=y>>2&7,e++;break;case 254:for(;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,U=t[e++],D=U>>6&1,P=1<<1+(7&U),E=o,_=A,B=!1;U>>7&&(B=!0,E=e,_=P,e+=3*P);var j=e;for(e++;;){var S;if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}u.push({x:k,y:x,width:I,height:N,has_local_palette:B,palette_offset:E,palette_size:_,data_offset:j,data_length:e-j,transparent_index:p,interlaced:!!D,delay:d,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return v},this.frameInfo=function(L){if(L<0||L>=u.length)throw new Error("Frame index out of range.");return u[L]},this.decodeAndBlitFrameBGRA=function(L,T){var Z=this.frameInfo(L),ye=Z.width*Z.height,_e=new Uint8Array(ye);tk(t,Z.data_offset,_e,ye);var Ce=Z.palette_offset,ie=Z.transparent_index;ie===null&&(ie=256);var we=Z.width,Pe=r-we,Se=we,M=4*(Z.y*r+Z.x),H=4*((Z.y+Z.height)*r+Z.x),K=M,ee=4*Pe;Z.interlaced===!0&&(ee+=4*r*7);for(var se=8,ue=0,Ae=_e.length;ue<Ae;++ue){var pe=_e[ue];if(Se===0&&(Se=we,(K+=ee)>=H&&(ee=4*Pe+4*r*(se-1),K=M+(we+Pe)*(se<<1),se>>=1)),pe===ie)K+=4;else{var Ne=t[Ce+3*pe],Oe=t[Ce+3*pe+1],nt=t[Ce+3*pe+2];T[K++]=nt,T[K++]=Oe,T[K++]=Ne,T[K++]=255}--Se}},this.decodeAndBlitFrameRGBA=function(L,T){var Z=this.frameInfo(L),ye=Z.width*Z.height,_e=new Uint8Array(ye);tk(t,Z.data_offset,_e,ye);var Ce=Z.palette_offset,ie=Z.transparent_index;ie===null&&(ie=256);var we=Z.width,Pe=r-we,Se=we,M=4*(Z.y*r+Z.x),H=4*((Z.y+Z.height)*r+Z.x),K=M,ee=4*Pe;Z.interlaced===!0&&(ee+=4*r*7);for(var se=8,ue=0,Ae=_e.length;ue<Ae;++ue){var pe=_e[ue];if(Se===0&&(Se=we,(K+=ee)>=H&&(ee=4*Pe+4*r*(se-1),K=M+(we+Pe)*(se<<1),se>>=1)),pe===ie)K+=4;else{var Ne=t[Ce+3*pe],Oe=t[Ce+3*pe+1],nt=t[Ce+3*pe+2];T[K++]=Ne,T[K++]=Oe,T[K++]=nt,T[K++]=255}--Se}}}function tk(t,e,r,n){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,A=s+1,c=(1<<A)-1,u=0,d=0,p=0,g=t[e++],v=new Int32Array(4096),y=null;;){for(;u<16&&g!==0;)d|=t[e++]<<u,u+=8,g===1?g=t[e++]:--g;if(u<A)break;var k=d&c;if(d>>=A,u-=A,k!==i){if(k===a)break;for(var x=k<o?k:y,I=0,N=x;N>i;)N=v[N]>>8,++I;var U=N;if(p+I+(x!==k?1:0)>n)return void ln.log("Warning, gif stream longer than expected.");r[p++]=U;var D=p+=I;for(x!==k&&(r[p++]=U),N=x;I--;)N=v[N],r[--D]=255&N,N>>=8;y!==null&&o<4096&&(v[o++]=y<<8|U,o>=c+1&&A<12&&(++A,c=c<<1|1)),y=k}else o=a+1,c=(1<<(A=s+1))-1,y=null}return p!==n&&ln.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bv(t){var e,r,n,s,i,a=Math.floor,o=new Array(64),A=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),p=new Array(65535),g=new Array(64),v=new Array(64),y=[],k=0,x=7,I=new Array(64),N=new Array(64),U=new Array(64),D=new Array(256),P=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ye=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function _e(M,H){for(var K=0,ee=0,se=new Array,ue=1;ue<=16;ue++){for(var Ae=1;Ae<=M[ue];Ae++)se[H[ee]]=[],se[H[ee]][0]=K,se[H[ee]][1]=ue,ee++,K++;K*=2}return se}function Ce(M){for(var H=M[0],K=M[1]-1;K>=0;)H&1<<K&&(k|=1<<x),K--,--x<0&&(k==255?(ie(255),ie(0)):ie(k),x=7,k=0)}function ie(M){y.push(M)}function we(M){ie(M>>8&255),ie(255&M)}function Pe(M,H,K,ee,se){for(var ue,Ae=se[0],pe=se[240],Ne=function(ge,Be){var ve,de,Te,q,le,oe,he,Le,Re,$e,Ve=0;for(Re=0;Re<8;++Re){ve=ge[Ve],de=ge[Ve+1],Te=ge[Ve+2],q=ge[Ve+3],le=ge[Ve+4],oe=ge[Ve+5],he=ge[Ve+6];var St=ve+(Le=ge[Ve+7]),ft=ve-Le,gt=de+he,At=de-he,dt=Te+oe,tt=Te-oe,Tt=q+le,bt=q-le,It=St+Tt,qt=St-Tt,Ht=gt+dt,wt=gt-dt;ge[Ve]=It+Ht,ge[Ve+4]=It-Ht;var Kt=.707106781*(wt+qt);ge[Ve+2]=qt+Kt,ge[Ve+6]=qt-Kt;var zr=.382683433*((It=bt+tt)-(wt=At+ft)),Qr=.5411961*It+zr,Hr=1.306562965*wt+zr,tr=.707106781*(Ht=tt+At),Dt=ft+tr,jt=ft-tr;ge[Ve+5]=jt+Qr,ge[Ve+3]=jt-Qr,ge[Ve+1]=Dt+Hr,ge[Ve+7]=Dt-Hr,Ve+=8}for(Ve=0,Re=0;Re<8;++Re){ve=ge[Ve],de=ge[Ve+8],Te=ge[Ve+16],q=ge[Ve+24],le=ge[Ve+32],oe=ge[Ve+40],he=ge[Ve+48];var dr=ve+(Le=ge[Ve+56]),en=ve-Le,Mr=de+he,mr=de-he,Rr=Te+oe,ae=Te-oe,qe=q+le,vt=q-le,mt=dr+qe,kt=dr-qe,at=Mr+Rr,yt=Mr-Rr;ge[Ve]=mt+at,ge[Ve+32]=mt-at;var Et=.707106781*(yt+kt);ge[Ve+16]=kt+Et,ge[Ve+48]=kt-Et;var ar=.382683433*((mt=vt+ae)-(yt=mr+en)),Tr=.5411961*mt+ar,Ir=1.306562965*yt+ar,js=.707106781*(at=ae+mr),Ei=en+js,ki=en-js;ge[Ve+40]=ki+Tr,ge[Ve+24]=ki-Tr,ge[Ve+8]=Ei+Ir,ge[Ve+56]=Ei-Ir,Ve++}for(Re=0;Re<64;++Re)$e=ge[Re]*Be[Re],g[Re]=$e>0?$e+.5|0:$e-.5|0;return g}(M,H),Oe=0;Oe<64;++Oe)v[E[Oe]]=Ne[Oe];var nt=v[0]-K;K=v[0],nt==0?Ce(ee[0]):(Ce(ee[p[ue=32767+nt]]),Ce(d[ue]));for(var ke=63;ke>0&&v[ke]==0;)ke--;if(ke==0)return Ce(Ae),K;for(var ce,R=1;R<=ke;){for(var Ee=R;v[R]==0&&R<=ke;)++R;var De=R-Ee;if(De>=16){ce=De>>4;for(var st=1;st<=ce;++st)Ce(pe);De&=15}ue=32767+v[R],Ce(se[(De<<4)+p[ue]]),Ce(d[ue]),R++}return ke!=63&&Ce(Ae),K}function Se(M){M=Math.min(Math.max(M,1),100),i!=M&&(function(H){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var se=a((K[ee]*H+50)/100);se=Math.min(Math.max(se,1),255),o[E[ee]]=se}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var pe=a((ue[Ae]*H+50)/100);pe=Math.min(Math.max(pe,1),255),A[E[Ae]]=pe}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Oe=0,nt=0;nt<8;nt++)for(var ke=0;ke<8;ke++)c[Oe]=1/(o[E[Oe]]*Ne[nt]*Ne[ke]*8),u[Oe]=1/(A[E[Oe]]*Ne[nt]*Ne[ke]*8),Oe++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),i=M)}this.encode=function(M,H){H&&Se(H),y=new Array,k=0,x=7,we(65496),we(65504),we(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),we(1),we(1),ie(0),ie(0),function(){we(65499),we(132),ie(0);for(var de=0;de<64;de++)ie(o[de]);ie(1);for(var Te=0;Te<64;Te++)ie(A[Te])}(),function(de,Te){we(65472),we(17),ie(8),we(Te),we(de),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)}(M.width,M.height),function(){we(65476),we(418),ie(0);for(var de=0;de<16;de++)ie(_[de+1]);for(var Te=0;Te<=11;Te++)ie(B[Te]);ie(16);for(var q=0;q<16;q++)ie(j[q+1]);for(var le=0;le<=161;le++)ie(S[le]);ie(1);for(var oe=0;oe<16;oe++)ie(L[oe+1]);for(var he=0;he<=11;he++)ie(T[he]);ie(17);for(var Le=0;Le<16;Le++)ie(Z[Le+1]);for(var Re=0;Re<=161;Re++)ie(ye[Re])}(),we(65498),we(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var K=0,ee=0,se=0;k=0,x=7,this.encode.displayName="_encode_";for(var ue,Ae,pe,Ne,Oe,nt,ke,ce,R,Ee=M.data,De=M.width,st=M.height,ge=4*De,Be=0;Be<st;){for(ue=0;ue<ge;){for(Oe=ge*Be+ue,ke=-1,ce=0,R=0;R<64;R++)nt=Oe+(ce=R>>3)*ge+(ke=4*(7&R)),Be+ce>=st&&(nt-=ge*(Be+1+ce-st)),ue+ke>=ge&&(nt-=ue+ke-ge+4),Ae=Ee[nt++],pe=Ee[nt++],Ne=Ee[nt++],I[R]=(P[Ae]+P[pe+256|0]+P[Ne+512|0]>>16)-128,N[R]=(P[Ae+768|0]+P[pe+1024|0]+P[Ne+1280|0]>>16)-128,U[R]=(P[Ae+1280|0]+P[pe+1536|0]+P[Ne+1792|0]>>16)-128;K=Pe(I,c,K,e,n),ee=Pe(N,u,ee,r,s),se=Pe(U,u,se,r,s),ue+=32}Be+=8}if(x>=0){var ve=[];ve[1]=x+1,ve[0]=(1<<x+1)-1,Ce(ve)}return we(65497),new Uint8Array(y)},t=t||50,function(){for(var M=String.fromCharCode,H=0;H<256;H++)D[H]=M(H)}(),e=_e(_,B),r=_e(L,T),n=_e(j,S),s=_e(Z,ye),function(){for(var M=1,H=2,K=1;K<=15;K++){for(var ee=M;ee<H;ee++)p[32767+ee]=K,d[32767+ee]=[],d[32767+ee][1]=K,d[32767+ee][0]=ee;for(var se=-(H-1);se<=-M;se++)p[32767+se]=K,d[32767+se]=[],d[32767+se][1]=K,d[32767+se][0]=H-1+se;M<<=1,H<<=1}}(),function(){for(var M=0;M<256;M++)P[M]=19595*M,P[M+256|0]=38470*M,P[M+512|0]=7471*M+32768,P[M+768|0]=-11059*M,P[M+1024|0]=-21709*M,P[M+1280|0]=32768*M+8421375,P[M+1536|0]=-27439*M,P[M+1792|0]=-5329*M}(),Se(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function $a(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function rk(t){function e(B){if(!B)throw Error("assert :P")}function r(B,j,S){for(var L=0;4>L;L++)if(B[j+L]!=S.charCodeAt(L))return!0;return!1}function n(B,j,S,L,T){for(var Z=0;Z<T;Z++)B[j+Z]=S[L+Z]}function s(B,j,S,L){for(var T=0;T<L;T++)B[j+T]=S}function i(B){return new Int32Array(B)}function a(B,j){for(var S=[],L=0;L<B;L++)S.push(new j);return S}function o(B,j){var S=[];return function L(T,Z,ye){for(var _e=ye[Z],Ce=0;Ce<_e&&(T.push(ye.length>Z+1?[]:new j),!(ye.length<Z+1));Ce++)L(T[Ce],Z+1,ye)}(S,0,B),S}var A=function(){var B=this;function j(h,m){for(var b=1<<m-1>>>0;h&b;)b>>>=1;return b?(h&b-1)+b:h}function S(h,m,b,F,V){e(!(F%b));do h[m+(F-=b)]=V;while(0<F)}function L(h,m,b,F,V){if(e(2328>=V),512>=V)var G=i(512);else if((G=i(V))==null)return 0;return function($,W,X,re,be,He){var ne,Ie,je=W,We=1<<X,Me=i(16),Xe=i(16);for(e(be!=0),e(re!=null),e($!=null),e(0<X),Ie=0;Ie<be;++Ie){if(15<re[Ie])return 0;++Me[re[Ie]]}if(Me[0]==be)return 0;for(Xe[1]=0,ne=1;15>ne;++ne){if(Me[ne]>1<<ne)return 0;Xe[ne+1]=Xe[ne]+Me[ne]}for(Ie=0;Ie<be;++Ie)ne=re[Ie],0<re[Ie]&&(He[Xe[ne]++]=Ie);if(Xe[15]==1)return(re=new T).g=0,re.value=He[0],S($,je,1,We,re),We;var rt,ht=-1,lt=We-1,Wt=0,Pt=1,pr=1,zt=1<<X;for(Ie=0,ne=1,be=2;ne<=X;++ne,be<<=1){if(Pt+=pr<<=1,0>(pr-=Me[ne]))return 0;for(;0<Me[ne];--Me[ne])(re=new T).g=ne,re.value=He[Ie++],S($,je+Wt,be,zt,re),Wt=j(Wt,ne)}for(ne=X+1,be=2;15>=ne;++ne,be<<=1){if(Pt+=pr<<=1,0>(pr-=Me[ne]))return 0;for(;0<Me[ne];--Me[ne]){if(re=new T,(Wt&lt)!=ht){for(je+=zt,rt=1<<(ht=ne)-X;15>ht&&!(0>=(rt-=Me[ht]));)++ht,rt<<=1;We+=zt=1<<(rt=ht-X),$[W+(ht=Wt&lt)].g=rt+X,$[W+ht].value=je-W-ht}re.g=ne-X,re.value=He[Ie++],S($,je+(Wt>>X),be,zt,re),Wt=j(Wt,ne)}}return Pt!=2*Xe[15]-1?0:We}(h,m,b,F,V,G)}function T(){this.value=this.g=0}function Z(){this.value=this.g=0}function ye(){this.G=a(5,T),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(xc,Z)}function _e(h,m,b,F){e(h!=null),e(m!=null),e(2147483648>F),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=b,h.Jd=m,h.Yc=b+F,h.Zc=4<=F?b+F-4+1:b,Ae(h)}function Ce(h,m){for(var b=0;0<m--;)b|=Ne(h,128)<<m;return b}function ie(h,m){var b=Ce(h,m);return pe(h)?-b:b}function we(h,m,b,F){var V,G=0;for(e(h!=null),e(m!=null),e(4294967288>F),h.Sb=F,h.Ra=0,h.u=0,h.h=0,4<F&&(F=4),V=0;V<F;++V)G+=m[b+V]<<8*V;h.Ra=G,h.bb=F,h.oa=m,h.pa=b}function Pe(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<PA-8>>>0,++h.bb,h.u-=8;ee(h)&&(h.h=1,h.u=0)}function Se(h,m){if(e(0<=m),!h.h&&m<=Xi){var b=K(h)&Ji[m];return h.u+=m,Pe(h),b}return h.h=1,h.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(h){return h.Ra>>>(h.u&PA-1)>>>0}function ee(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>PA}function se(h,m){h.u=m,h.h=ee(h)}function ue(h){h.u>=zo&&(e(h.u>=zo),Pe(h))}function Ae(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function pe(h){return Ce(h,1)}function Ne(h,m){var b=h.Ca;0>h.b&&Ae(h);var F=h.b,V=b*m>>>8,G=(h.I>>>F>V)+0;for(G?(b-=V,h.I-=V+1<<F>>>0):b=V+1,F=b,V=0;256<=F;)V+=8,F>>=8;return F=7^V+DA[F],h.b-=F,h.Ca=(b<<F)-1,G}function Oe(h,m,b){h[m+0]=b>>24&255,h[m+1]=b>>16&255,h[m+2]=b>>8&255,h[m+3]=255&b}function nt(h,m){return h[m+0]|h[m+1]<<8}function ke(h,m){return nt(h,m)|h[m+2]<<16}function ce(h,m){return nt(h,m)|nt(h,m+2)<<16}function R(h,m){var b=1<<m;return e(h!=null),e(0<m),h.X=i(b),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function Ee(h,m){e(h!=null),e(m!=null),e(h.Xa==m.Xa),n(m.X,0,h.X,0,1<<m.Xa)}function De(){this.X=[],this.Xa=this.Mb=0}function st(h,m,b,F){e(b!=null),e(F!=null);var V=b[0],G=F[0];return V==0&&(V=(h*G+m/2)/m),G==0&&(G=(m*V+h/2)/h),0>=V||0>=G?0:(b[0]=V,F[0]=G,1)}function ge(h,m){return h+(1<<m)-1>>>m}function Be(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function ve(h,m){B[m]=function(b,F,V,G,$,W,X){var re;for(re=0;re<$;++re){var be=B[h](W[X+re-1],V,G+re);W[X+re]=Be(b[F+re],be)}}}function de(){this.ud=this.hd=this.jd=0}function Te(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function q(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function le(h,m){return q(h+(h-m+.5>>1))}function oe(h,m,b){return Math.abs(m-b)-Math.abs(h-b)}function he(h,m,b,F,V,G,$){for(F=G[$-1],b=0;b<V;++b)G[$+b]=F=Be(h[m+b],F)}function Le(h,m,b,F,V){var G;for(G=0;G<b;++G){var $=h[m+G],W=$>>8&255,X=16711935&(X=(X=16711935&$)+((W<<16)+W));F[V+G]=(4278255360&$)+X>>>0}}function Re(h,m){m.jd=255&h,m.hd=h>>8&255,m.ud=h>>16&255}function $e(h,m,b,F,V,G){var $;for($=0;$<F;++$){var W=m[b+$],X=W>>>8,re=W,be=255&(be=(be=W>>>16)+((h.jd<<24>>24)*(X<<24>>24)>>>5));re=255&(re=(re+=(h.hd<<24>>24)*(X<<24>>24)>>>5)+((h.ud<<24>>24)*(be<<24>>24)>>>5)),V[G+$]=(4278255360&W)+(be<<16)+re}}function Ve(h,m,b,F,V){B[m]=function(G,$,W,X,re,be,He,ne,Ie){for(X=He;X<ne;++X)for(He=0;He<Ie;++He)re[be++]=V(W[F(G[$++])])},B[h]=function(G,$,W,X,re,be,He){var ne=8>>G.b,Ie=G.Ea,je=G.K[0],We=G.w;if(8>ne)for(G=(1<<G.b)-1,We=(1<<ne)-1;$<W;++$){var Me,Xe=0;for(Me=0;Me<Ie;++Me)Me&G||(Xe=F(X[re++])),be[He++]=V(je[Xe&We]),Xe>>=ne}else B["VP8LMapColor"+b](X,re,je,We,be,He,$,W,Ie)}}function St(h,m,b,F,V){for(b=m+b;m<b;){var G=h[m++];F[V++]=G>>16&255,F[V++]=G>>8&255,F[V++]=255&G}}function ft(h,m,b,F,V){for(b=m+b;m<b;){var G=h[m++];F[V++]=G>>16&255,F[V++]=G>>8&255,F[V++]=255&G,F[V++]=G>>24&255}}function gt(h,m,b,F,V){for(b=m+b;m<b;){var G=($=h[m++])>>16&240|$>>12&15,$=240&$|$>>28&15;F[V++]=G,F[V++]=$}}function At(h,m,b,F,V){for(b=m+b;m<b;){var G=($=h[m++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;F[V++]=G,F[V++]=$}}function dt(h,m,b,F,V){for(b=m+b;m<b;){var G=h[m++];F[V++]=255&G,F[V++]=G>>8&255,F[V++]=G>>16&255}}function tt(h,m,b,F,V,G){if(G==0)for(b=m+b;m<b;)Oe(F,((G=h[m++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),V+=32;else n(F,V,h,m,b)}function Tt(h,m){B[m][0]=B[h+"0"],B[m][1]=B[h+"1"],B[m][2]=B[h+"2"],B[m][3]=B[h+"3"],B[m][4]=B[h+"4"],B[m][5]=B[h+"5"],B[m][6]=B[h+"6"],B[m][7]=B[h+"7"],B[m][8]=B[h+"8"],B[m][9]=B[h+"9"],B[m][10]=B[h+"10"],B[m][11]=B[h+"11"],B[m][12]=B[h+"12"],B[m][13]=B[h+"13"],B[m][14]=B[h+"0"],B[m][15]=B[h+"0"]}function bt(h){return h==L1||h==j1||h==p0||h==Q1}function It(){this.eb=[],this.size=this.A=this.fb=0}function qt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ht(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new It,this.f.kb=new qt,this.sd=null}function wt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Kt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function zr(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Qr(h,m){var b=h.T,F=m.ba.f.RGBA,V=F.eb,G=F.fb+h.ka*F.A,$=_a[m.ba.S],W=h.y,X=h.O,re=h.f,be=h.N,He=h.ea,ne=h.W,Ie=m.cc,je=m.dc,We=m.Mc,Me=m.Nc,Xe=h.ka,rt=h.ka+h.T,ht=h.U,lt=ht+1>>1;for(Xe==0?$(W,X,null,null,re,be,He,ne,re,be,He,ne,V,G,null,null,ht):($(m.ec,m.fc,W,X,Ie,je,We,Me,re,be,He,ne,V,G-F.A,V,G,ht),++b);Xe+2<rt;Xe+=2)Ie=re,je=be,We=He,Me=ne,be+=h.Rc,ne+=h.Rc,G+=2*F.A,$(W,(X+=2*h.fa)-h.fa,W,X,Ie,je,We,Me,re,be,He,ne,V,G-F.A,V,G,ht);return X+=h.fa,h.j+rt<h.o?(n(m.ec,m.fc,W,X,ht),n(m.cc,m.dc,re,be,lt),n(m.Mc,m.Nc,He,ne,lt),b--):1&rt||$(W,X,null,null,re,be,He,ne,re,be,He,ne,V,G+F.A,null,null,ht),b}function Hr(h,m,b){var F=h.F,V=[h.J];if(F!=null){var G=h.U,$=m.ba.S,W=$==f0||$==p0;m=m.ba.f.RGBA;var X=[0],re=h.ka;X[0]=h.T,h.Kb&&(re==0?--X[0]:(--re,V[0]-=h.width),h.j+h.ka+h.T==h.o&&(X[0]=h.o-h.j-re));var be=m.eb;re=m.fb+re*m.A,h=o5(F,V[0],h.width,G,X,be,re+(W?0:3),m.A),e(b==X),h&&bt($)&&Sh(be,re,W,G,X,m.A)}return 0}function tr(h){var m=h.ma,b=m.ba.S,F=11>b,V=b==d0||b==h0||b==f0||b==U1||b==12||bt(b);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!yh(m.Oa,h,V?11:12))return 0;if(V&&bt(b)&&ya(),h.da)alert("todo:use_scaling");else{if(F){if(m.Ib=zr,h.Kb){if(b=h.U+1>>1,m.memory=i(h.U+2*b),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+b,m.Ib=Qr,ya()}}else alert("todo:EmitYUV");V&&(m.Jb=Hr,F&&Fi())}if(F&&!B5){for(h=0;256>h;++h)L6[h]=89858*(h-128)+m0>>g0,R6[h]=-22014*(h-128)+m0,Q6[h]=-45773*(h-128),j6[h]=113618*(h-128)+m0>>g0;for(h=Fh;h<D1;++h)m=76283*(h-16)+m0>>g0,P6[h-Fh]=Qs(m,255),D6[h-Fh]=Qs(m+8>>4,15);B5=1}return 1}function Dt(h){var m=h.ma,b=h.U,F=h.T;return e(!(1&h.ka)),0>=b||0>=F?0:(b=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,b),m.Dc+=b,1)}function jt(h){h.ma.memory=null}function dr(h,m,b,F){return Se(h,8)!=47?0:(m[0]=Se(h,14)+1,b[0]=Se(h,14)+1,F[0]=Se(h,1),Se(h,3)!=0?0:!h.h)}function en(h,m){if(4>h)return h+1;var b=h-2>>1;return(2+(1&h)<<b)+Se(m,b)+1}function Mr(h,m){return 120<m?m-120:1<=(b=((b=v6[m-1])>>4)*h+(8-(15&b)))?b:1;var b}function mr(h,m,b){var F=K(b),V=h[m+=255&F].g-8;return 0<V&&(se(b,b.u+8),F=K(b),m+=h[m].value,m+=F&(1<<V)-1),se(b,b.u+h[m].g),h[m].value}function Rr(h,m,b){return b.g+=h.g,b.value+=h.value<<m>>>0,e(8>=b.g),h.g}function ae(h,m,b){var F=h.xc;return e((m=F==0?0:h.vc[h.md*(b>>F)+(m>>F)])<h.Wb),h.Ya[m]}function qe(h,m,b,F){var V=h.ab,G=h.c*m,$=h.C;m=$+m;var W=b,X=F;for(F=h.Ta,b=h.Ua;0<V--;){var re=h.gc[V],be=$,He=m,ne=W,Ie=X,je=(X=F,W=b,re.Ea);switch(e(be<He),e(He<=re.nc),re.hc){case 2:Jn(ne,Ie,(He-be)*je,X,W);break;case 0:var We=be,Me=He,Xe=X,rt=W,ht=(zt=re).Ea;We==0&&(Bh(ne,Ie,null,null,1,Xe,rt),he(ne,Ie+1,0,0,ht-1,Xe,rt+1),Ie+=ht,rt+=ht,++We);for(var lt=1<<zt.b,Wt=lt-1,Pt=ge(ht,zt.b),pr=zt.K,zt=zt.w+(We>>zt.b)*Pt;We<Me;){var Sr=pr,gs=zt,gr=1;for(_u(ne,Ie,Xe,rt-ht,1,Xe,rt);gr<ht;){var Gt=(gr&~Wt)+lt;Gt>ht&&(Gt=ht),(0,Ch[Sr[gs++]>>8&15])(ne,Ie+ +gr,Xe,rt+gr-ht,Gt-gr,Xe,rt+gr),gr=Gt}Ie+=ht,rt+=ht,++We&Wt||(zt+=Pt)}He!=re.nc&&n(X,W-je,X,W+(He-be-1)*je,je);break;case 1:for(je=ne,Me=Ie,ht=(ne=re.Ea)-(rt=ne&~(Xe=(Ie=1<<re.b)-1)),We=ge(ne,re.b),lt=re.K,re=re.w+(be>>re.b)*We;be<He;){for(Wt=lt,Pt=re,pr=new de,zt=Me+rt,Sr=Me+ne;Me<zt;)Re(Wt[Pt++],pr),Ih(pr,je,Me,Ie,X,W),Me+=Ie,W+=Ie;Me<Sr&&(Re(Wt[Pt++],pr),Ih(pr,je,Me,ht,X,W),Me+=ht,W+=ht),++be&Xe||(re+=We)}break;case 3:if(ne==X&&Ie==W&&0<re.b){for(Me=X,ne=je=W+(He-be)*je-(rt=(He-be)*ge(re.Ea,re.b)),Ie=X,Xe=W,We=[],rt=(ht=rt)-1;0<=rt;--rt)We[rt]=Ie[Xe+rt];for(rt=ht-1;0<=rt;--rt)Me[ne+rt]=We[rt];A0(re,be,He,X,je,X,W)}else A0(re,be,He,ne,Ie,X,W)}W=F,X=b}X!=b&&n(F,b,W,X,G)}function vt(h,m){var b=h.V,F=h.Ba+h.c*h.C,V=m-h.C;if(e(m<=h.l.o),e(16>=V),0<V){var G=h.l,$=h.Ta,W=h.Ua,X=G.width;if(qe(h,V,b,F),V=W=[W],e((b=h.C)<(F=m)),e(G.v<G.va),F>G.o&&(F=G.o),b<G.j){var re=G.j-b;b=G.j,V[0]+=re*X}if(b>=F?b=0:(V[0]+=4*G.v,G.ka=b-G.j,G.U=G.va-G.v,G.T=F-b,b=1),b){if(W=W[0],11>(b=h.ca).S){var be=b.f.RGBA,He=(F=b.S,V=G.U,G=G.T,re=be.eb,be.A),ne=G;for(be=be.fb+h.Ma*be.A;0<ne--;){var Ie=$,je=W,We=V,Me=re,Xe=be;switch(F){case u0:Eh(Ie,je,We,Me,Xe);break;case d0:MA(Ie,je,We,Me,Xe);break;case L1:MA(Ie,je,We,Me,Xe),Sh(Me,Xe,0,We,1,0);break;case f5:vc(Ie,je,We,Me,Xe);break;case h0:tt(Ie,je,We,Me,Xe,1);break;case j1:tt(Ie,je,We,Me,Xe,1),Sh(Me,Xe,0,We,1,0);break;case f0:tt(Ie,je,We,Me,Xe,0);break;case p0:tt(Ie,je,We,Me,Xe,0),Sh(Me,Xe,1,We,1,0);break;case U1:OA(Ie,je,We,Me,Xe);break;case Q1:OA(Ie,je,We,Me,Xe),a5(Me,Xe,We,1,0);break;case p5:HA(Ie,je,We,Me,Xe);break;default:e(0)}W+=X,be+=He}h.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=b.height)}}h.C=m,e(h.C<=h.i)}function mt(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var b=h.Ya[m].G,F=h.Ya[m].H;if(0<b[1][F[1]+0].g||0<b[2][F[2]+0].g||0<b[3][F[3]+0].g)return 0}return 1}function kt(h,m,b,F,V,G){if(h.Z!=0){var $=h.qd,W=h.rd;for(e(zA[h.Z]!=null);m<b;++m)zA[h.Z]($,W,F,V,F,V,G),$=F,W=V,V+=G;h.qd=$,h.rd=W}}function at(h,m){var b=h.l.ma,F=b.Z==0||b.Z==1?h.l.j:h.C;if(F=h.C<F?F:h.C,e(m<=h.l.o),m>F){var V=h.l.width,G=b.ca,$=b.tb+V*F,W=h.V,X=h.Ba+h.c*F,re=h.gc;e(h.ab==1),e(re[0].hc==3),po(re[0],F,m,W,X,G,$),kt(b,F,m,G,$,V)}h.C=h.Ma=m}function yt(h,m,b,F,V,G,$){var W=h.$/F,X=h.$%F,re=h.m,be=h.s,He=b+h.$,ne=He;V=b+F*V;var Ie=b+F*G,je=280+be.ua,We=h.Pb?W:16777216,Me=0<be.ua?be.Wa:null,Xe=be.wc,rt=He<Ie?ae(be,X,W):null;e(h.C<G),e(Ie<=V);var ht=!1;e:for(;;){for(;ht||He<Ie;){var lt=0;if(W>=We){var Wt=He-b;e((We=h).Pb),We.wd=We.m,We.xd=Wt,0<We.s.ua&&Ee(We.s.Wa,We.s.vb),We=W+b6}if(X&Xe||(rt=ae(be,X,W)),e(rt!=null),rt.Qb&&(m[He]=rt.qb,ht=!0),!ht)if(ue(re),rt.jc){lt=re,Wt=m;var Pt=He,pr=rt.pd[K(lt)&xc-1];e(rt.jc),256>pr.g?(se(lt,lt.u+pr.g),Wt[Pt]=pr.value,lt=0):(se(lt,lt.u+pr.g-256),e(256<=pr.value),lt=pr.value),lt==0&&(ht=!0)}else lt=mr(rt.G[0],rt.H[0],re);if(re.h)break;if(ht||256>lt){if(!ht)if(rt.nd)m[He]=(rt.qb|lt<<8)>>>0;else{if(ue(re),ht=mr(rt.G[1],rt.H[1],re),ue(re),Wt=mr(rt.G[2],rt.H[2],re),Pt=mr(rt.G[3],rt.H[3],re),re.h)break;m[He]=(Pt<<24|ht<<16|lt<<8|Wt)>>>0}if(ht=!1,++He,++X>=F&&(X=0,++W,$!=null&&W<=G&&!(W%16)&&$(h,W),Me!=null))for(;ne<He;)lt=m[ne++],Me.X[(506832829*lt&4294967295)>>>Me.Mb]=lt}else if(280>lt){if(lt=en(lt-256,re),Wt=mr(rt.G[4],rt.H[4],re),ue(re),Wt=Mr(F,Wt=en(Wt,re)),re.h)break;if(He-b<Wt||V-He<lt)break e;for(Pt=0;Pt<lt;++Pt)m[He+Pt]=m[He+Pt-Wt];for(He+=lt,X+=lt;X>=F;)X-=F,++W,$!=null&&W<=G&&!(W%16)&&$(h,W);if(e(He<=V),X&Xe&&(rt=ae(be,X,W)),Me!=null)for(;ne<He;)lt=m[ne++],Me.X[(506832829*lt&4294967295)>>>Me.Mb]=lt}else{if(!(lt<je))break e;for(ht=lt-280,e(Me!=null);ne<He;)lt=m[ne++],Me.X[(506832829*lt&4294967295)>>>Me.Mb]=lt;lt=He,e(!(ht>>>(Wt=Me).Xa)),m[lt]=Wt.X[ht],ht=!0}ht||e(re.h==ee(re))}if(h.Pb&&re.h&&He<V)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Ee(h.s.vb,h.s.Wa);else{if(re.h)break e;$!=null&&$(h,W>G?G:W),h.a=0,h.$=He-b}return 1}return h.a=3,0}function Et(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,e(h!=null)}function ar(){var h=new rr;return h==null?null:(h.a=0,h.xb=w5,Tt("Predictor","VP8LPredictors"),Tt("Predictor","VP8LPredictors_C"),Tt("PredictorAdd","VP8LPredictorsAdd"),Tt("PredictorAdd","VP8LPredictorsAdd_C"),Jn=Le,Ih=$e,Eh=St,MA=ft,OA=gt,HA=At,vc=dt,B.VP8LMapColor32b=fo,B.VP8LMapColor8b=_h,h)}function Tr(h,m,b,F,V){var G=1,$=[h],W=[m],X=F.m,re=F.s,be=null,He=0;e:for(;;){if(b)for(;G&&Se(X,1);){var ne=$,Ie=W,je=F,We=1,Me=je.m,Xe=je.gc[je.ab],rt=Se(Me,2);if(je.Oc&1<<rt)G=0;else{switch(je.Oc|=1<<rt,Xe.hc=rt,Xe.Ea=ne[0],Xe.nc=Ie[0],Xe.K=[null],++je.ab,e(4>=je.ab),rt){case 0:case 1:Xe.b=Se(Me,3)+2,We=Tr(ge(Xe.Ea,Xe.b),ge(Xe.nc,Xe.b),0,je,Xe.K),Xe.K=Xe.K[0];break;case 3:var ht,lt=Se(Me,8)+1,Wt=16<lt?0:4<lt?1:2<lt?2:3;if(ne[0]=ge(Xe.Ea,Wt),Xe.b=Wt,ht=We=Tr(lt,1,0,je,Xe.K)){var Pt,pr=lt,zt=Xe,Sr=1<<(8>>zt.b),gs=i(Sr);if(gs==null)ht=0;else{var gr=zt.K[0],Gt=zt.w;for(gs[0]=zt.K[0][0],Pt=1;Pt<1*pr;++Pt)gs[Pt]=Be(gr[Gt+Pt],gs[Pt-1]);for(;Pt<4*Sr;++Pt)gs[Pt]=0;zt.K[0]=null,zt.K[0]=gs,ht=1}}We=ht;break;case 2:break;default:e(0)}G=We}}if($=$[0],W=W[0],G&&Se(X,1)&&!(G=1<=(He=Se(X,4))&&11>=He)){F.a=3;break e}var _t;if(_t=G)t:{var Yn,cr,Nr,wn=F,Ps=$,xi=W,Vn=He,ei=b,vi=wn.m,ms=wn.s,Ur=[null],$r=1,Kn=0,qr=y6[Vn];r:for(;;){if(ei&&Se(vi,1)){var Ds=Se(vi,3)+2,Ka=ge(Ps,Ds),Zn=ge(xi,Ds),Ti=Ka*Zn;if(!Tr(Ka,Zn,0,wn,Ur))break r;for(Ur=Ur[0],ms.xc=Ds,Yn=0;Yn<Ti;++Yn){var An=Ur[Yn]>>8&65535;Ur[Yn]=An,An>=$r&&($r=An+1)}}if(vi.h)break r;for(cr=0;5>cr;++cr){var ws=g5[cr];!cr&&0<Vn&&(ws+=1<<Vn),Kn<ws&&(Kn=ws)}var Zi=a($r*qr,T),yi=$r,ea=a(yi,ye);if(ea==null)var ta=null;else e(65536>=yi),ta=ea;var Ui=i(Kn);if(ta==null||Ui==null||Zi==null){wn.a=1;break r}var ra=Zi;for(Yn=Nr=0;Yn<$r;++Yn){var hn=ta[Yn],na=hn.G,za=hn.H,bc=0,qo=1,Ms=0;for(cr=0;5>cr;++cr){ws=g5[cr],na[cr]=ra,za[cr]=Nr,!cr&&0<Vn&&(ws+=1<<Vn);s:{var x0,M1=ws,v0=wn,Th=Ui,H6=ra,V6=Nr,O1=0,GA=v0.m,K6=Se(GA,1);if(s(Th,0,0,M1),K6){var z6=Se(GA,1)+1,G6=Se(GA,1),I5=Se(GA,G6==0?1:8);Th[I5]=1,z6==2&&(Th[I5=Se(GA,8)]=1);var y0=1}else{var E5=i(19),k5=Se(GA,4)+4;if(19<k5){v0.a=3;var b0=0;break s}for(x0=0;x0<k5;++x0)E5[x6[x0]]=Se(GA,3);var H1=void 0,Uh=void 0,S5=v0,$6=E5,B0=M1,N5=Th,V1=0,$A=S5.m,F5=8,T5=a(128,T);n:for(;L(T5,0,7,$6,19);){if(Se($A,1)){var q6=2+2*Se($A,3);if((H1=2+Se($A,q6))>B0)break n}else H1=B0;for(Uh=0;Uh<B0&&H1--;){ue($A);var U5=T5[0+(127&K($A))];se($A,$A.u+U5.g);var Iu=U5.value;if(16>Iu)N5[Uh++]=Iu,Iu!=0&&(F5=Iu);else{var W6=Iu==16,L5=Iu-16,J6=m6[L5],j5=Se($A,g6[L5])+J6;if(Uh+j5>B0)break n;for(var X6=W6?F5:0;0<j5--;)N5[Uh++]=X6}}V1=1;break n}V1||(S5.a=3),y0=V1}(y0=y0&&!GA.h)&&(O1=L(H6,V6,8,Th,M1)),y0&&O1!=0?b0=O1:(v0.a=3,b0=0)}if(b0==0)break r;if(qo&&w6[cr]==1&&(qo=ra[Nr].g==0),bc+=ra[Nr].g,Nr+=b0,3>=cr){var Lh,K1=Ui[0];for(Lh=1;Lh<ws;++Lh)Ui[Lh]>K1&&(K1=Ui[Lh]);Ms+=K1}}if(hn.nd=qo,hn.Qb=0,qo&&(hn.qb=(na[3][za[3]+0].value<<24|na[1][za[1]+0].value<<16|na[2][za[2]+0].value)>>>0,bc==0&&256>na[0][za[0]+0].value&&(hn.Qb=1,hn.qb+=na[0][za[0]+0].value<<8)),hn.jc=!hn.Qb&&6>Ms,hn.jc){var _0,Wo=hn;for(_0=0;_0<xc;++_0){var qA=_0,WA=Wo.pd[qA],C0=Wo.G[0][Wo.H[0]+qA];256<=C0.value?(WA.g=C0.g+256,WA.value=C0.value):(WA.g=0,WA.value=0,qA>>=Rr(C0,8,WA),qA>>=Rr(Wo.G[1][Wo.H[1]+qA],16,WA),qA>>=Rr(Wo.G[2][Wo.H[2]+qA],0,WA),Rr(Wo.G[3][Wo.H[3]+qA],24,WA))}}}ms.vc=Ur,ms.Wb=$r,ms.Ya=ta,ms.yc=Zi,_t=1;break t}_t=0}if(!(G=_t)){F.a=3;break e}if(0<He){if(re.ua=1<<He,!R(re.Wa,He)){F.a=1,G=0;break e}}else re.ua=0;var z1=F,Q5=$,Y6=W,G1=z1.s,$1=G1.xc;if(z1.c=Q5,z1.i=Y6,G1.md=ge(Q5,$1),G1.wc=$1==0?-1:(1<<$1)-1,b){F.xb=S6;break e}if((be=i($*W))==null){F.a=1,G=0;break e}G=(G=yt(F,be,0,$,W,W,null))&&!X.h;break e}return G?(V!=null?V[0]=be:(e(be==null),e(b)),F.$=0,b||Et(re)):Et(re),G}function Ir(h,m){var b=h.c*h.i,F=b+m+16*m;return e(h.c<=m),h.V=i(F),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+b+m,1)}function js(h,m){var b=h.C,F=m-b,V=h.V,G=h.Ba+h.c*b;for(e(m<=h.l.o);0<F;){var $=16<F?16:F,W=h.l.ma,X=h.l.width,re=X*$,be=W.ca,He=W.tb+X*b,ne=h.Ta,Ie=h.Ua;qe(h,$,V,G),A5(ne,Ie,be,He,re),kt(W,b,b+$,be,He,X),F-=$,V+=$*h.c,b+=$}e(b==m),h.C=h.Ma=m}function Ei(){this.ub=this.yd=this.td=this.Rb=0}function ki(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function gi(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Gi(){this.Yb=function(){var h=[];return function m(b,F,V){for(var G=V[F],$=0;$<G&&(b.push(V.length>F+1?[]:0),!(V.length<F+1));$++)m(b[$],F+1,V)}(h,0,[3,11]),h}()}function Do(){this.jb=i(3),this.Wc=o([4,8],Gi),this.Xc=o([4,17],Gi)}function Ao(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function cs(){this.ld=this.La=this.dd=this.tc=0}function Js(){this.Na=this.la=0}function Pa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Da(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function lo(){this.uc=this.M=this.Nb=0,this.wa=Array(new cs),this.Y=0,this.ya=Array(new Da),this.aa=0,this.l=new pa}function mn(){this.y=i(16),this.f=i(8),this.ea=i(8)}function co(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new Ei,this.Kc=new ki,this.ed=new Ao,this.Qa=new gi,this.Ic=this.$c=this.Aa=0,this.D=new lo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,M),this.ia=0,this.pb=a(4,Pa),this.Pa=new Do,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new mn),this.Hd=0,this.rb=Array(new Js),this.sb=0,this.wa=Array(new cs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Da),this.L=this.aa=0,this.gd=o([4,2],cs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qs(h,m){return 0>h?0:h>m?m:h}function pa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Mo(){var h=new co;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Nh||(Nh=Ma)),h}function un(h,m,b){return h.a==0&&(h.a=m,h.sc=b,h.cb=0),0}function Oo(h,m,b){return 3<=b&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function Si(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return un(h,2,"null VP8Io passed to VP8GetHeaders()");var b=m.data,F=m.w,V=m.ha;if(4>V)return un(h,7,"Truncated header.");var G=b[F+0]|b[F+1]<<8|b[F+2]<<16,$=h.Od;if($.Rb=!(1&G),$.td=G>>1&7,$.yd=G>>4&1,$.ub=G>>5,3<$.td)return un(h,3,"Incorrect keyframe parameters.");if(!$.yd)return un(h,4,"Frame not displayable.");F+=3,V-=3;var W=h.Kc;if($.Rb){if(7>V)return un(h,7,"cannot parse picture header");if(!Oo(b,F,V))return un(h,3,"Bad code word");W.c=16383&(b[F+4]<<8|b[F+3]),W.Td=b[F+4]>>6,W.i=16383&(b[F+6]<<8|b[F+5]),W.Ud=b[F+6]>>6,F+=7,V-=7,h.za=W.c+15>>4,h.Ub=W.i+15>>4,m.width=W.c,m.height=W.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,s((G=h.Pa).jb,0,255,G.jb.length),e((G=h.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,s(G.Zb,0,0,G.Zb.length),s(G.Lb,0,0,G.Lb)}if($.ub>V)return un(h,7,"bad partition length");_e(G=h.m,b,F,$.ub),F+=$.ub,V-=$.ub,$.Rb&&(W.Ld=pe(G),W.Kd=pe(G)),W=h.Qa;var X,re=h.Pa;if(e(G!=null),e(W!=null),W.Cb=pe(G),W.Cb){if(W.Bb=pe(G),pe(G)){for(W.Fb=pe(G),X=0;4>X;++X)W.Zb[X]=pe(G)?ie(G,7):0;for(X=0;4>X;++X)W.Lb[X]=pe(G)?ie(G,6):0}if(W.Bb)for(X=0;3>X;++X)re.jb[X]=pe(G)?Ce(G,8):255}else W.Bb=0;if(G.Ka)return un(h,3,"cannot parse segment header");if((W=h.ed).zd=pe(G),W.Tb=Ce(G,6),W.wb=Ce(G,3),W.Pc=pe(G),W.Pc&&pe(G)){for(re=0;4>re;++re)pe(G)&&(W.vd[re]=ie(G,6));for(re=0;4>re;++re)pe(G)&&(W.od[re]=ie(G,6))}if(h.L=W.Tb==0?0:W.zd?1:2,G.Ka)return un(h,3,"cannot parse filter header");var be=V;if(V=X=F,F=X+be,W=be,h.Xb=(1<<Ce(h.m,2))-1,be<3*(re=h.Xb))b=7;else{for(X+=3*re,W-=3*re,be=0;be<re;++be){var He=b[V+0]|b[V+1]<<8|b[V+2]<<16;He>W&&(He=W),_e(h.Jc[+be],b,X,He),X+=He,W-=He,V+=3}_e(h.Jc[+re],b,X,W),b=X<F?0:5}if(b!=0)return un(h,b,"cannot parse partitions");for(b=Ce(X=h.m,7),V=pe(X)?ie(X,4):0,F=pe(X)?ie(X,4):0,W=pe(X)?ie(X,4):0,re=pe(X)?ie(X,4):0,X=pe(X)?ie(X,4):0,be=h.Qa,He=0;4>He;++He){if(be.Cb){var ne=be.Zb[He];be.Fb||(ne+=b)}else{if(0<He){h.pb[He]=h.pb[0];continue}ne=b}var Ie=h.pb[He];Ie.Sc[0]=R1[Qs(ne+V,127)],Ie.Sc[1]=P1[Qs(ne+0,127)],Ie.Eb[0]=2*R1[Qs(ne+F,127)],Ie.Eb[1]=101581*P1[Qs(ne+W,127)]>>16,8>Ie.Eb[1]&&(Ie.Eb[1]=8),Ie.Qc[0]=R1[Qs(ne+re,117)],Ie.Qc[1]=P1[Qs(ne+X,127)],Ie.lc=ne+X}if(!$.Rb)return un(h,4,"Not a key frame.");for(pe(G),$=h.Pa,b=0;4>b;++b){for(V=0;8>V;++V)for(F=0;3>F;++F)for(W=0;11>W;++W)re=Ne(G,E6[b][V][F][W])?Ce(G,8):C6[b][V][F][W],$.Wc[b][V].Yb[F][W]=re;for(V=0;17>V;++V)$.Xc[b][V]=$.Wc[b][k6[V]]}return h.kc=pe(G),h.kc&&(h.Bd=Ce(G,8)),h.cb=1}function Ma(h,m,b,F,V,G,$){var W=m[V].Yb[b];for(b=0;16>V;++V){if(!Ne(h,W[b+0]))return V;for(;!Ne(h,W[b+1]);)if(W=m[++V].Yb[0],b=0,V==16)return 16;var X=m[V+1].Yb;if(Ne(h,W[b+2])){var re=h,be=0;if(Ne(re,(ne=W)[(He=b)+3]))if(Ne(re,ne[He+6])){for(W=0,He=2*(be=Ne(re,ne[He+8]))+(ne=Ne(re,ne[He+9+be])),be=0,ne=B6[He];ne[W];++W)be+=be+Ne(re,ne[W]);be+=3+(8<<He)}else Ne(re,ne[He+7])?(be=7+2*Ne(re,165),be+=Ne(re,145)):be=5+Ne(re,159);else be=Ne(re,ne[He+4])?3+Ne(re,ne[He+5]):2;W=X[2]}else be=1,W=X[1];X=$+_6[V],0>(re=h).b&&Ae(re);var He,ne=re.b,Ie=(He=re.Ca>>1)-(re.I>>ne)>>31;--re.b,re.Ca+=Ie,re.Ca|=1,re.I-=(He+1&Ie)<<ne,G[X]=((be^Ie)-Ie)*F[(0<V)+0]}return 16}function Ho(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,s(h.zc,0,0,h.zc.length),h.ja=0}function Y(h,m,b,F,V){V=h[m+b+32*F]+(V>>3),h[m+b+32*F]=-256&V?0>V?0:255:V}function xe(h,m,b,F,V,G){Y(h,m,0,b,F+V),Y(h,m,1,b,F+G),Y(h,m,2,b,F-G),Y(h,m,3,b,F-V)}function Ge(h){return(20091*h>>16)+h}function Ye(h,m,b,F){var V,G=0,$=i(16);for(V=0;4>V;++V){var W=h[m+0]+h[m+8],X=h[m+0]-h[m+8],re=(35468*h[m+4]>>16)-Ge(h[m+12]),be=Ge(h[m+4])+(35468*h[m+12]>>16);$[G+0]=W+be,$[G+1]=X+re,$[G+2]=X-re,$[G+3]=W-be,G+=4,m++}for(V=G=0;4>V;++V)W=(h=$[G+0]+4)+$[G+8],X=h-$[G+8],re=(35468*$[G+4]>>16)-Ge($[G+12]),Y(b,F,0,0,W+(be=Ge($[G+4])+(35468*$[G+12]>>16))),Y(b,F,1,0,X+re),Y(b,F,2,0,X-re),Y(b,F,3,0,W-be),G++,F+=32}function it(h,m,b,F){var V=h[m+0]+4,G=35468*h[m+4]>>16,$=Ge(h[m+4]),W=35468*h[m+1]>>16;xe(b,F,0,V+$,h=Ge(h[m+1]),W),xe(b,F,1,V+G,h,W),xe(b,F,2,V-G,h,W),xe(b,F,3,V-$,h,W)}function Nt(h,m,b,F,V){Ye(h,m,b,F),V&&Ye(h,m+16,b,F+4)}function Ze(h,m,b,F){yc(h,m+0,b,F,1),yc(h,m+32,b,F+128,1)}function Zt(h,m,b,F){var V;for(h=h[m+0]+4,V=0;4>V;++V)for(m=0;4>m;++m)Y(b,F,m,V,h)}function Yt(h,m,b,F){h[m+0]&&Vr(h,m+0,b,F),h[m+16]&&Vr(h,m+16,b,F+4),h[m+32]&&Vr(h,m+32,b,F+128),h[m+48]&&Vr(h,m+48,b,F+128+4)}function hr(h,m,b,F){var V,G=i(16);for(V=0;4>V;++V){var $=h[m+0+V]+h[m+12+V],W=h[m+4+V]+h[m+8+V],X=h[m+4+V]-h[m+8+V],re=h[m+0+V]-h[m+12+V];G[0+V]=$+W,G[8+V]=$-W,G[4+V]=re+X,G[12+V]=re-X}for(V=0;4>V;++V)$=(h=G[0+4*V]+3)+G[3+4*V],W=G[1+4*V]+G[2+4*V],X=G[1+4*V]-G[2+4*V],re=h-G[3+4*V],b[F+0]=$+W>>3,b[F+16]=re+X>>3,b[F+32]=$-W>>3,b[F+48]=re-X>>3,F+=64}function Er(h,m,b){var F,V=m-32,G=Yi,$=255-h[V-1];for(F=0;F<b;++F){var W,X=G,re=$+h[m-1];for(W=0;W<b;++W)h[m+W]=X[re+h[V+W]];m+=32}}function Pr(h,m){Er(h,m,4)}function _s(h,m){Er(h,m,8)}function an(h,m){Er(h,m,16)}function Mn(h,m){var b;for(b=0;16>b;++b)n(h,m+32*b,h,m-32,16)}function Xs(h,m){var b;for(b=16;0<b;--b)s(h,m,h[m-1],16),m+=32}function or(h,m,b){var F;for(F=0;16>F;++F)s(m,b+32*F,h,16)}function er(h,m){var b,F=16;for(b=0;16>b;++b)F+=h[m-1+32*b]+h[m+b-32];or(F>>5,h,m)}function Cs(h,m){var b,F=8;for(b=0;16>b;++b)F+=h[m-1+32*b];or(F>>4,h,m)}function Is(h,m){var b,F=8;for(b=0;16>b;++b)F+=h[m+b-32];or(F>>4,h,m)}function $i(h,m){or(128,h,m)}function Xt(h,m,b){return h+2*m+b+2>>2}function TA(h,m){var b,F=m-32;for(F=new Uint8Array([Xt(h[F-1],h[F+0],h[F+1]),Xt(h[F+0],h[F+1],h[F+2]),Xt(h[F+1],h[F+2],h[F+3]),Xt(h[F+2],h[F+3],h[F+4])]),b=0;4>b;++b)n(h,m+32*b,F,0,F.length)}function hc(h,m){var b=h[m-1],F=h[m-1+32],V=h[m-1+64],G=h[m-1+96];Oe(h,m+0,16843009*Xt(h[m-1-32],b,F)),Oe(h,m+32,16843009*Xt(b,F,V)),Oe(h,m+64,16843009*Xt(F,V,G)),Oe(h,m+96,16843009*Xt(V,G,G))}function fc(h,m){var b,F=4;for(b=0;4>b;++b)F+=h[m+b-32]+h[m-1+32*b];for(F>>=3,b=0;4>b;++b)s(h,m+32*b,F,4)}function Wn(h,m){var b=h[m-1+0],F=h[m-1+32],V=h[m-1+64],G=h[m-1-32],$=h[m+0-32],W=h[m+1-32],X=h[m+2-32],re=h[m+3-32];h[m+0+96]=Xt(F,V,h[m-1+96]),h[m+1+96]=h[m+0+64]=Xt(b,F,V),h[m+2+96]=h[m+1+64]=h[m+0+32]=Xt(G,b,F),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=Xt($,G,b),h[m+3+64]=h[m+2+32]=h[m+1+0]=Xt(W,$,G),h[m+3+32]=h[m+2+0]=Xt(X,W,$),h[m+3+0]=Xt(re,X,W)}function Ni(h,m){var b=h[m+1-32],F=h[m+2-32],V=h[m+3-32],G=h[m+4-32],$=h[m+5-32],W=h[m+6-32],X=h[m+7-32];h[m+0+0]=Xt(h[m+0-32],b,F),h[m+1+0]=h[m+0+32]=Xt(b,F,V),h[m+2+0]=h[m+1+32]=h[m+0+64]=Xt(F,V,G),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=Xt(V,G,$),h[m+3+32]=h[m+2+64]=h[m+1+96]=Xt(G,$,W),h[m+3+64]=h[m+2+96]=Xt($,W,X),h[m+3+96]=Xt(W,X,X)}function UA(h,m){var b=h[m-1+0],F=h[m-1+32],V=h[m-1+64],G=h[m-1-32],$=h[m+0-32],W=h[m+1-32],X=h[m+2-32],re=h[m+3-32];h[m+0+0]=h[m+1+64]=G+$+1>>1,h[m+1+0]=h[m+2+64]=$+W+1>>1,h[m+2+0]=h[m+3+64]=W+X+1>>1,h[m+3+0]=X+re+1>>1,h[m+0+96]=Xt(V,F,b),h[m+0+64]=Xt(F,b,G),h[m+0+32]=h[m+1+96]=Xt(b,G,$),h[m+1+32]=h[m+2+96]=Xt(G,$,W),h[m+2+32]=h[m+3+96]=Xt($,W,X),h[m+3+32]=Xt(W,X,re)}function Ys(h,m){var b=h[m+0-32],F=h[m+1-32],V=h[m+2-32],G=h[m+3-32],$=h[m+4-32],W=h[m+5-32],X=h[m+6-32],re=h[m+7-32];h[m+0+0]=b+F+1>>1,h[m+1+0]=h[m+0+64]=F+V+1>>1,h[m+2+0]=h[m+1+64]=V+G+1>>1,h[m+3+0]=h[m+2+64]=G+$+1>>1,h[m+0+32]=Xt(b,F,V),h[m+1+32]=h[m+0+96]=Xt(F,V,G),h[m+2+32]=h[m+1+96]=Xt(V,G,$),h[m+3+32]=h[m+2+96]=Xt(G,$,W),h[m+3+64]=Xt($,W,X),h[m+3+96]=Xt(W,X,re)}function Oa(h,m){var b=h[m-1+0],F=h[m-1+32],V=h[m-1+64],G=h[m-1+96];h[m+0+0]=b+F+1>>1,h[m+2+0]=h[m+0+32]=F+V+1>>1,h[m+2+32]=h[m+0+64]=V+G+1>>1,h[m+1+0]=Xt(b,F,V),h[m+3+0]=h[m+1+32]=Xt(F,V,G),h[m+3+32]=h[m+1+64]=Xt(V,G,G),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=G}function LA(h,m){var b=h[m-1+0],F=h[m-1+32],V=h[m-1+64],G=h[m-1+96],$=h[m-1-32],W=h[m+0-32],X=h[m+1-32],re=h[m+2-32];h[m+0+0]=h[m+2+32]=b+$+1>>1,h[m+0+32]=h[m+2+64]=F+b+1>>1,h[m+0+64]=h[m+2+96]=V+F+1>>1,h[m+0+96]=G+V+1>>1,h[m+3+0]=Xt(W,X,re),h[m+2+0]=Xt($,W,X),h[m+1+0]=h[m+3+32]=Xt(b,$,W),h[m+1+32]=h[m+3+64]=Xt(F,b,$),h[m+1+64]=h[m+3+96]=Xt(V,F,b),h[m+1+96]=Xt(G,V,F)}function qi(h,m){var b;for(b=0;8>b;++b)n(h,m+32*b,h,m-32,8)}function Vo(h,m){var b;for(b=0;8>b;++b)s(h,m,h[m-1],8),m+=32}function ga(h,m,b){var F;for(F=0;8>F;++F)s(m,b+32*F,h,8)}function pc(h,m){var b,F=8;for(b=0;8>b;++b)F+=h[m+b-32]+h[m-1+32*b];ga(F>>4,h,m)}function tn(h,m){var b,F=4;for(b=0;8>b;++b)F+=h[m+b-32];ga(F>>3,h,m)}function gc(h,m){var b,F=4;for(b=0;8>b;++b)F+=h[m-1+32*b];ga(F>>3,h,m)}function bu(h,m){ga(128,h,m)}function ma(h,m,b){var F=h[m-b],V=h[m+0],G=3*(V-F)+T1[1020+h[m-2*b]-h[m+b]],$=c0[112+(G+4>>3)];h[m-b]=Yi[255+F+c0[112+(G+3>>3)]],h[m+0]=Yi[255+V-$]}function jA(h,m,b,F){var V=h[m+0],G=h[m+b];return Ba[255+h[m-2*b]-h[m-b]]>F||Ba[255+G-V]>F}function Ko(h,m,b,F){return 4*Ba[255+h[m-b]-h[m+0]]+Ba[255+h[m-2*b]-h[m+b]]<=F}function uo(h,m,b,F,V){var G=h[m-3*b],$=h[m-2*b],W=h[m-b],X=h[m+0],re=h[m+b],be=h[m+2*b],He=h[m+3*b];return 4*Ba[255+W-X]+Ba[255+$-re]>F?0:Ba[255+h[m-4*b]-G]<=V&&Ba[255+G-$]<=V&&Ba[255+$-W]<=V&&Ba[255+He-be]<=V&&Ba[255+be-re]<=V&&Ba[255+re-X]<=V}function ho(h,m,b,F){var V=2*F+1;for(F=0;16>F;++F)Ko(h,m+F,b,V)&&ma(h,m+F,b)}function mi(h,m,b,F){var V=2*F+1;for(F=0;16>F;++F)Ko(h,m+F*b,1,V)&&ma(h,m+F*b,1)}function mc(h,m,b,F){var V;for(V=3;0<V;--V)ho(h,m+=4*b,b,F)}function Bu(h,m,b,F){var V;for(V=3;0<V;--V)mi(h,m+=4,b,F)}function wi(h,m,b,F,V,G,$,W){for(G=2*G+1;0<V--;){if(uo(h,m,b,G,$))if(jA(h,m,b,W))ma(h,m,b);else{var X=h,re=m,be=b,He=X[re-2*be],ne=X[re-be],Ie=X[re+0],je=X[re+be],We=X[re+2*be],Me=27*(rt=T1[1020+3*(Ie-ne)+T1[1020+He-je]])+63>>7,Xe=18*rt+63>>7,rt=9*rt+63>>7;X[re-3*be]=Yi[255+X[re-3*be]+rt],X[re-2*be]=Yi[255+He+Xe],X[re-be]=Yi[255+ne+Me],X[re+0]=Yi[255+Ie-Me],X[re+be]=Yi[255+je-Xe],X[re+2*be]=Yi[255+We-rt]}m+=F}}function wa(h,m,b,F,V,G,$,W){for(G=2*G+1;0<V--;){if(uo(h,m,b,G,$))if(jA(h,m,b,W))ma(h,m,b);else{var X=h,re=m,be=b,He=X[re-be],ne=X[re+0],Ie=X[re+be],je=c0[112+(4+(We=3*(ne-He))>>3)],We=c0[112+(We+3>>3)],Me=je+1>>1;X[re-2*be]=Yi[255+X[re-2*be]+Me],X[re-be]=Yi[255+He+We],X[re+0]=Yi[255+ne-je],X[re+be]=Yi[255+Ie-Me]}m+=F}}function QA(h,m,b,F,V,G){wi(h,m,b,1,16,F,V,G)}function xa(h,m,b,F,V,G){wi(h,m,1,b,16,F,V,G)}function wc(h,m,b,F,V,G){var $;for($=3;0<$;--$)wa(h,m+=4*b,b,1,16,F,V,G)}function w(h,m,b,F,V,G){var $;for($=3;0<$;--$)wa(h,m+=4,1,b,16,F,V,G)}function O(h,m,b,F,V,G,$,W){wi(h,m,V,1,8,G,$,W),wi(b,F,V,1,8,G,$,W)}function te(h,m,b,F,V,G,$,W){wi(h,m,1,V,8,G,$,W),wi(b,F,1,V,8,G,$,W)}function fe(h,m,b,F,V,G,$,W){wa(h,m+4*V,V,1,8,G,$,W),wa(b,F+4*V,V,1,8,G,$,W)}function Fe(h,m,b,F,V,G,$,W){wa(h,m+4,1,V,8,G,$,W),wa(b,F+4,1,V,8,G,$,W)}function Je(){this.ba=new Ht,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Kt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ot(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Qt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vt(){this.ua=0,this.Wa=new De,this.vb=new De,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ye,this.yc=new T}function rr(){this.xb=this.a=0,this.l=new pa,this.ca=new Ht,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vt,this.ab=0,this.gc=a(4,Qt),this.Oc=0}function Ar(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new pa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yr(h,m,b,F,V,G,$){for(h=h==null?0:h[m+0],m=0;m<$;++m)V[G+m]=h+b[F+m]&255,h=V[G+m]}function Or(h,m,b,F,V,G,$){var W;if(h==null)yr(null,null,b,F,V,G,$);else for(W=0;W<$;++W)V[G+W]=h[m+W]+b[F+W]&255}function Fn(h,m,b,F,V,G,$){if(h==null)yr(null,null,b,F,V,G,$);else{var W,X=h[m+0],re=X,be=X;for(W=0;W<$;++W)re=be+(X=h[m+W])-re,be=b[F+W]+(-256&re?0>re?0:255:re)&255,re=X,V[G+W]=be}}function Gr(h,m,b,F){var V=m.width,G=m.o;if(e(h!=null&&m!=null),0>b||0>=F||b+F>G)return null;if(!h.Cc){if(h.ga==null){var $;if(h.ga=new Ar,($=h.ga==null)||($=m.width*m.o,e(h.Gb.length==0),h.Gb=i($),h.Uc=0,h.Gb==null?$=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,$=1),$=!$),!$){$=h.ga;var W=h.Fa,X=h.P,re=h.qc,be=h.mb,He=h.nb,ne=X+1,Ie=re-1,je=$.l;if(e(W!=null&&be!=null&&m!=null),zA[0]=null,zA[1]=yr,zA[2]=Or,zA[3]=Fn,$.ca=be,$.tb=He,$.c=m.width,$.i=m.height,e(0<$.c&&0<$.i),1>=re)m=0;else if($.$a=3&W[X+0],$.Z=W[X+0]>>2&3,$.Lc=W[X+0]>>4&3,X=W[X+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||X)m=0;else if(je.put=Dt,je.ac=tr,je.bc=jt,je.ma=$,je.width=m.width,je.height=m.height,je.Da=m.Da,je.v=m.v,je.va=m.va,je.j=m.j,je.o=m.o,$.$a)e:{e($.$a==1),m=ar();t:for(;;){if(m==null){m=0;break e}if(e($!=null),$.mc=m,m.c=$.c,m.i=$.i,m.l=$.l,m.l.ma=$,m.l.width=$.c,m.l.height=$.i,m.a=0,we(m.m,W,ne,Ie),!Tr($.c,$.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&mt(m.s)?($.ic=1,W=m.c*m.i,m.Ta=null,m.Ua=0,m.V=i(W),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):($.ic=0,m=Ir(m,$.c)),!m))break t;m=1;break e}$.mc=null,m=0}else m=Ie>=$.c*$.i;$=!m}if($)return null;h.ga.Lc!=1?h.Ga=0:F=G-b}e(h.ga!=null),e(b+F<=G);e:{if(m=(W=h.ga).c,G=W.l.o,W.$a==0){if(ne=h.rc,Ie=h.Vc,je=h.Fa,X=h.P+1+b*m,re=h.mb,be=h.nb+b*m,e(X<=h.P+h.qc),W.Z!=0)for(e(zA[W.Z]!=null),$=0;$<F;++$)zA[W.Z](ne,Ie,je,X,re,be,m),ne=re,Ie=be,be+=m,X+=m;else for($=0;$<F;++$)n(re,be,je,X,m),ne=re,Ie=be,be+=m,X+=m;h.rc=ne,h.Vc=Ie}else{if(e(W.mc!=null),m=b+F,e(($=W.mc)!=null),e(m<=$.i),$.C>=m)m=1;else if(W.ic||Fi(),W.ic){W=$.V,ne=$.Ba,Ie=$.c;var We=$.i,Me=(je=1,X=$.$/Ie,re=$.$%Ie,be=$.m,He=$.s,$.$),Xe=Ie*We,rt=Ie*m,ht=He.wc,lt=Me<rt?ae(He,re,X):null;e(Me<=Xe),e(m<=We),e(mt(He));t:for(;;){for(;!be.h&&Me<rt;){if(re&ht||(lt=ae(He,re,X)),e(lt!=null),ue(be),256>(We=mr(lt.G[0],lt.H[0],be)))W[ne+Me]=We,++Me,++re>=Ie&&(re=0,++X<=m&&!(X%16)&&at($,X));else{if(!(280>We)){je=0;break t}We=en(We-256,be);var Wt,Pt=mr(lt.G[4],lt.H[4],be);if(ue(be),!(Me>=(Pt=Mr(Ie,Pt=en(Pt,be)))&&Xe-Me>=We)){je=0;break t}for(Wt=0;Wt<We;++Wt)W[ne+Me+Wt]=W[ne+Me+Wt-Pt];for(Me+=We,re+=We;re>=Ie;)re-=Ie,++X<=m&&!(X%16)&&at($,X);Me<rt&&re&ht&&(lt=ae(He,re,X))}e(be.h==ee(be))}at($,X>m?m:X);break t}!je||be.h&&Me<Xe?(je=0,$.a=be.h?5:3):$.$=Me,m=je}else m=yt($,$.V,$.Ba,$.c,$.i,m,js);if(!m){F=0;break e}}b+F>=G&&(h.Cc=1),F=1}if(!F)return null;if(h.Cc&&((F=h.ga)!=null&&(F.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+b*V}function On(h,m,b,F,V,G){for(;0<V--;){var $,W=h,X=m+(b?1:0),re=h,be=m+(b?0:3);for($=0;$<F;++$){var He=re[be+4*$];He!=255&&(He*=32897,W[X+4*$+0]=W[X+4*$+0]*He>>23,W[X+4*$+1]=W[X+4*$+1]*He>>23,W[X+4*$+2]=W[X+4*$+2]*He>>23)}m+=G}}function Tn(h,m,b,F,V){for(;0<F--;){var G;for(G=0;G<b;++G){var $=h[m+2*G+0],W=15&(re=h[m+2*G+1]),X=4369*W,re=(240&re|re>>4)*X>>16;h[m+2*G+0]=(240&$|$>>4)*X>>16&240|(15&$|$<<4)*X>>16>>4&15,h[m+2*G+1]=240&re|W}m+=V}}function Hn(h,m,b,F,V,G,$,W){var X,re,be=255;for(re=0;re<V;++re){for(X=0;X<F;++X){var He=h[m+X];G[$+4*X]=He,be&=He}m+=b,$+=W}return be!=255}function Un(h,m,b,F,V){var G;for(G=0;G<V;++G)b[F+G]=h[m+G]>>8}function Fi(){Sh=On,a5=Tn,o5=Hn,A5=Un}function va(h,m,b){B[h]=function(F,V,G,$,W,X,re,be,He,ne,Ie,je,We,Me,Xe,rt,ht){var lt,Wt=ht-1>>1,Pt=W[X+0]|re[be+0]<<16,pr=He[ne+0]|Ie[je+0]<<16;e(F!=null);var zt=3*Pt+pr+131074>>2;for(m(F[V+0],255&zt,zt>>16,We,Me),G!=null&&(zt=3*pr+Pt+131074>>2,m(G[$+0],255&zt,zt>>16,Xe,rt)),lt=1;lt<=Wt;++lt){var Sr=W[X+lt]|re[be+lt]<<16,gs=He[ne+lt]|Ie[je+lt]<<16,gr=Pt+Sr+pr+gs+524296,Gt=gr+2*(Sr+pr)>>3;zt=Gt+Pt>>1,Pt=(gr=gr+2*(Pt+gs)>>3)+Sr>>1,m(F[V+2*lt-1],255&zt,zt>>16,We,Me+(2*lt-1)*b),m(F[V+2*lt-0],255&Pt,Pt>>16,We,Me+(2*lt-0)*b),G!=null&&(zt=gr+pr>>1,Pt=Gt+gs>>1,m(G[$+2*lt-1],255&zt,zt>>16,Xe,rt+(2*lt-1)*b),m(G[$+2*lt+0],255&Pt,Pt>>16,Xe,rt+(2*lt+0)*b)),Pt=Sr,pr=gs}1&ht||(zt=3*Pt+pr+131074>>2,m(F[V+ht-1],255&zt,zt>>16,We,Me+(ht-1)*b),G!=null&&(zt=3*pr+Pt+131074>>2,m(G[$+ht-1],255&zt,zt>>16,Xe,rt+(ht-1)*b)))}}function ya(){_a[u0]=N6,_a[d0]=x5,_a[f5]=F6,_a[h0]=v5,_a[f0]=y5,_a[U1]=b5,_a[p5]=T6,_a[L1]=x5,_a[j1]=v5,_a[p0]=y5,_a[Q1]=b5}function f(h){return h&-16384?0>h?0:255:h>>U6}function C(h,m){return f((19077*h>>8)+(26149*m>>8)-14234)}function Q(h,m,b){return f((19077*h>>8)-(6419*m>>8)-(13320*b>>8)+8708)}function J(h,m){return f((19077*h>>8)+(33050*m>>8)-17685)}function Ue(h,m,b,F,V){F[V+0]=C(h,b),F[V+1]=Q(h,m,b),F[V+2]=J(h,m)}function Ke(h,m,b,F,V){F[V+0]=J(h,m),F[V+1]=Q(h,m,b),F[V+2]=C(h,b)}function xt(h,m,b,F,V){var G=Q(h,m,b);m=G<<3&224|J(h,m)>>3,F[V+0]=248&C(h,b)|G>>5,F[V+1]=m}function kr(h,m,b,F,V){var G=240&J(h,m)|15;F[V+0]=240&C(h,b)|Q(h,m,b)>>4,F[V+1]=G}function Ln(h,m,b,F,V){F[V+0]=255,Ue(h,m,b,F,V+1)}function wr(h,m,b,F,V){Ke(h,m,b,F,V),F[V+3]=255}function Dr(h,m,b,F,V){Ue(h,m,b,F,V),F[V+3]=255}function dn(h,m,b){B[h]=function(F,V,G,$,W,X,re,be,He){for(var ne=be+(-2&He)*b;be!=ne;)m(F[V+0],G[$+0],W[X+0],re,be),m(F[V+1],G[$+0],W[X+0],re,be+b),V+=2,++$,++X,be+=2*b;1&He&&m(F[V+0],G[$+0],W[X+0],re,be)}}function Wi(h,m,b){return b==0?h==0?m==0?6:5:m==0?4:0:b}function Zs(h,m,b,F,V){switch(h>>>30){case 3:yc(m,b,F,V,0);break;case 2:ba(m,b,F,V);break;case 1:Vr(m,b,F,V)}}function Rs(h,m){var b,F,V=m.M,G=m.Nb,$=h.oc,W=h.pc+40,X=h.oc,re=h.pc+584,be=h.oc,He=h.pc+600;for(b=0;16>b;++b)$[W+32*b-1]=129;for(b=0;8>b;++b)X[re+32*b-1]=129,be[He+32*b-1]=129;for(0<V?$[W-1-32]=X[re-1-32]=be[He-1-32]=129:(s($,W-32-1,127,21),s(X,re-32-1,127,9),s(be,He-32-1,127,9)),F=0;F<h.za;++F){var ne=m.ya[m.aa+F];if(0<F){for(b=-1;16>b;++b)n($,W+32*b-4,$,W+32*b+12,4);for(b=-1;8>b;++b)n(X,re+32*b-4,X,re+32*b+4,4),n(be,He+32*b-4,be,He+32*b+4,4)}var Ie=h.Gd,je=h.Hd+F,We=ne.ad,Me=ne.Hc;if(0<V&&(n($,W-32,Ie[je].y,0,16),n(X,re-32,Ie[je].f,0,8),n(be,He-32,Ie[je].ea,0,8)),ne.Za){var Xe=$,rt=W-32+16;for(0<V&&(F>=h.za-1?s(Xe,rt,Ie[je].y[15],4):n(Xe,rt,Ie[je+1].y,0,4)),b=0;4>b;b++)Xe[rt+128+b]=Xe[rt+256+b]=Xe[rt+384+b]=Xe[rt+0+b];for(b=0;16>b;++b,Me<<=2)Xe=$,rt=W+_5[b],Va[ne.Ob[b]](Xe,rt),Zs(Me,We,16*+b,Xe,rt)}else if(Xe=Wi(F,V,ne.Ob[0]),KA[Xe]($,W),Me!=0)for(b=0;16>b;++b,Me<<=2)Zs(Me,We,16*+b,$,W+_5[b]);for(b=ne.Gc,Xe=Wi(F,V,ne.Dd),$o[Xe](X,re),$o[Xe](be,He),Me=We,Xe=X,rt=re,255&(ne=0|b)&&(170&ne?go(Me,256,Xe,rt):on(Me,256,Xe,rt)),ne=be,Me=He,255&(b>>=8)&&(170&b?go(We,320,ne,Me):on(We,320,ne,Me)),V<h.Ub-1&&(n(Ie[je].y,0,$,W+480,16),n(Ie[je].f,0,X,re+224,8),n(Ie[je].ea,0,be,He+224,8)),b=8*G*h.B,Ie=h.sa,je=h.ta+16*F+16*G*h.R,We=h.qa,ne=h.ra+8*F+b,Me=h.Ha,Xe=h.Ia+8*F+b,b=0;16>b;++b)n(Ie,je+b*h.R,$,W+32*b,16);for(b=0;8>b;++b)n(We,ne+b*h.B,X,re+32*b,8),n(Me,Xe+b*h.B,be,He+32*b,8)}}function Ha(h,m,b,F,V,G,$,W,X){var re=[0],be=[0],He=0,ne=X!=null?X.kd:0,Ie=X??new ot;if(h==null||12>b)return 7;Ie.data=h,Ie.w=m,Ie.ha=b,m=[m],b=[b],Ie.gb=[Ie.gb];e:{var je=m,We=b,Me=Ie.gb;if(e(h!=null),e(We!=null),e(Me!=null),Me[0]=0,12<=We[0]&&!r(h,je[0],"RIFF")){if(r(h,je[0]+8,"WEBP")){Me=3;break e}var Xe=ce(h,je[0]+4);if(12>Xe||4294967286<Xe){Me=3;break e}if(ne&&Xe>We[0]-8){Me=7;break e}Me[0]=Xe,je[0]+=12,We[0]-=12}Me=0}if(Me!=0)return Me;for(Xe=0<Ie.gb[0],b=b[0];;){e:{var rt=h;We=m,Me=b;var ht=re,lt=be,Wt=je=[0];if((zt=He=[He])[0]=0,8>Me[0])Me=7;else{if(!r(rt,We[0],"VP8X")){if(ce(rt,We[0]+4)!=10){Me=3;break e}if(18>Me[0]){Me=7;break e}var Pt=ce(rt,We[0]+8),pr=1+ke(rt,We[0]+12);if(2147483648<=pr*(rt=1+ke(rt,We[0]+15))){Me=3;break e}Wt!=null&&(Wt[0]=Pt),ht!=null&&(ht[0]=pr),lt!=null&&(lt[0]=rt),We[0]+=18,Me[0]-=18,zt[0]=1}Me=0}}if(He=He[0],je=je[0],Me!=0)return Me;if(We=!!(2&je),!Xe&&He)return 3;if(G!=null&&(G[0]=!!(16&je)),$!=null&&($[0]=We),W!=null&&(W[0]=0),$=re[0],je=be[0],He&&We&&X==null){Me=0;break}if(4>b){Me=7;break}if(Xe&&He||!Xe&&!He&&!r(h,m[0],"ALPH")){b=[b],Ie.na=[Ie.na],Ie.P=[Ie.P],Ie.Sa=[Ie.Sa];e:{Pt=h,Me=m,Xe=b;var zt=Ie.gb;ht=Ie.na,lt=Ie.P,Wt=Ie.Sa,pr=22,e(Pt!=null),e(Xe!=null),rt=Me[0];var Sr=Xe[0];for(e(ht!=null),e(Wt!=null),ht[0]=null,lt[0]=null,Wt[0]=0;;){if(Me[0]=rt,Xe[0]=Sr,8>Sr){Me=7;break e}var gs=ce(Pt,rt+4);if(4294967286<gs){Me=3;break e}var gr=8+gs+1&-2;if(pr+=gr,0<zt&&pr>zt){Me=3;break e}if(!r(Pt,rt,"VP8 ")||!r(Pt,rt,"VP8L")){Me=0;break e}if(Sr[0]<gr){Me=7;break e}r(Pt,rt,"ALPH")||(ht[0]=Pt,lt[0]=rt+8,Wt[0]=gs),rt+=gr,Sr-=gr}}if(b=b[0],Ie.na=Ie.na[0],Ie.P=Ie.P[0],Ie.Sa=Ie.Sa[0],Me!=0)break}b=[b],Ie.Ja=[Ie.Ja],Ie.xa=[Ie.xa];e:if(zt=h,Me=m,Xe=b,ht=Ie.gb[0],lt=Ie.Ja,Wt=Ie.xa,Pt=Me[0],rt=!r(zt,Pt,"VP8 "),pr=!r(zt,Pt,"VP8L"),e(zt!=null),e(Xe!=null),e(lt!=null),e(Wt!=null),8>Xe[0])Me=7;else{if(rt||pr){if(zt=ce(zt,Pt+4),12<=ht&&zt>ht-12){Me=3;break e}if(ne&&zt>Xe[0]-8){Me=7;break e}lt[0]=zt,Me[0]+=8,Xe[0]-=8,Wt[0]=pr}else Wt[0]=5<=Xe[0]&&zt[Pt+0]==47&&!(zt[Pt+4]>>5),lt[0]=Xe[0];Me=0}if(b=b[0],Ie.Ja=Ie.Ja[0],Ie.xa=Ie.xa[0],m=m[0],Me!=0)break;if(4294967286<Ie.Ja)return 3;if(W==null||We||(W[0]=Ie.xa?2:1),$=[$],je=[je],Ie.xa){if(5>b){Me=7;break}W=$,ne=je,We=G,h==null||5>b?h=0:5<=b&&h[m+0]==47&&!(h[m+4]>>5)?(Xe=[0],zt=[0],ht=[0],we(lt=new H,h,m,b),dr(lt,Xe,zt,ht)?(W!=null&&(W[0]=Xe[0]),ne!=null&&(ne[0]=zt[0]),We!=null&&(We[0]=ht[0]),h=1):h=0):h=0}else{if(10>b){Me=7;break}W=je,h==null||10>b||!Oo(h,m+3,b-3)?h=0:(ne=h[m+0]|h[m+1]<<8|h[m+2]<<16,We=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&ne||3<(ne>>1&7)||!(ne>>4&1)||ne>>5>=Ie.Ja||!We||!h?h=0:($&&($[0]=We),W&&(W[0]=h),h=1))}if(!h||($=$[0],je=je[0],He&&(re[0]!=$||be[0]!=je)))return 3;X!=null&&(X[0]=Ie,X.offset=m-X.w,e(4294967286>m-X.w),e(X.offset==X.ha-b));break}return Me==0||Me==7&&He&&X==null?(G!=null&&(G[0]|=Ie.na!=null&&0<Ie.na.length),F!=null&&(F[0]=$),V!=null&&(V[0]=je),0):Me}function yh(h,m,b){var F=m.width,V=m.height,G=0,$=0,W=F,X=V;if(m.Da=h!=null&&0<h.Da,m.Da&&(W=h.cd,X=h.bd,G=h.v,$=h.j,11>b||(G&=-2,$&=-2),0>G||0>$||0>=W||0>=X||G+W>F||$+X>V))return 0;if(m.v=G,m.j=$,m.va=G+W,m.o=$+X,m.U=W,m.T=X,m.da=h!=null&&0<h.da,m.da){if(!st(W,X,b=[h.ib],G=[h.hb]))return 0;m.ib=b[0],m.hb=G[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*F/4&&m.hb<3*V/4,m.Kb=0),1}function bh(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function RA(h,m,b,F){if(F==null||0>=h||0>=m)return 2;if(b!=null){if(b.Da){var V=b.cd,G=b.bd,$=-2&b.v,W=-2&b.j;if(0>$||0>W||0>=V||0>=G||$+V>h||W+G>m)return 2;h=V,m=G}if(b.da){if(!st(h,m,V=[b.ib],G=[b.hb]))return 2;h=V[0],m=G[0]}}F.width=h,F.height=m;e:{var X=F.width,re=F.height;if(h=F.S,0>=X||0>=re||!(h>=u0&&13>h))h=2;else{if(0>=F.Rd&&F.sd==null){$=G=V=m=0;var be=(W=X*C5[h])*re;if(11>h||(G=(re+1)/2*(m=(X+1)/2),h==12&&($=(V=X)*re)),(re=i(be+2*G+$))==null){h=1;break e}F.sd=re,11>h?((X=F.f.RGBA).eb=re,X.fb=0,X.A=W,X.size=be):((X=F.f.kb).y=re,X.O=0,X.fa=W,X.Fd=be,X.f=re,X.N=0+be,X.Ab=m,X.Cd=G,X.ea=re,X.W=0+be+G,X.Db=m,X.Ed=G,h==12&&(X.F=re,X.J=0+be+2*G),X.Tc=$,X.lb=V)}if(m=1,V=F.S,G=F.width,$=F.height,V>=u0&&13>V)if(11>V)h=F.f.RGBA,m&=(W=Math.abs(h.A))*($-1)+G<=h.size,m&=W>=G*C5[V],m&=h.eb!=null;else{h=F.f.kb,W=(G+1)/2,be=($+1)/2,X=Math.abs(h.fa),re=Math.abs(h.Ab);var He=Math.abs(h.Db),ne=Math.abs(h.lb),Ie=ne*($-1)+G;m&=X*($-1)+G<=h.Fd,m&=re*(be-1)+W<=h.Cd,m=(m&=He*(be-1)+W<=h.Ed)&X>=G&re>=W&He>=W,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,V==12&&(m&=ne>=G,m&=Ie<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||b!=null&&b.fd&&(h=bh(F)),h}var xc=64,Ji=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xi=24,PA=32,zo=8,DA=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ve("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(h){return h},B.Predictor2=function(h,m,b){return m[b+0]},B.Predictor3=function(h,m,b){return m[b+1]},B.Predictor4=function(h,m,b){return m[b-1]},B.Predictor5=function(h,m,b){return Te(Te(h,m[b+1]),m[b+0])},B.Predictor6=function(h,m,b){return Te(h,m[b-1])},B.Predictor7=function(h,m,b){return Te(h,m[b+0])},B.Predictor8=function(h,m,b){return Te(m[b-1],m[b+0])},B.Predictor9=function(h,m,b){return Te(m[b+0],m[b+1])},B.Predictor10=function(h,m,b){return Te(Te(h,m[b-1]),Te(m[b+0],m[b+1]))},B.Predictor11=function(h,m,b){var F=m[b+0];return 0>=oe(F>>24&255,h>>24&255,(m=m[b-1])>>24&255)+oe(F>>16&255,h>>16&255,m>>16&255)+oe(F>>8&255,h>>8&255,m>>8&255)+oe(255&F,255&h,255&m)?F:h},B.Predictor12=function(h,m,b){var F=m[b+0];return(q((h>>24&255)+(F>>24&255)-((m=m[b-1])>>24&255))<<24|q((h>>16&255)+(F>>16&255)-(m>>16&255))<<16|q((h>>8&255)+(F>>8&255)-(m>>8&255))<<8|q((255&h)+(255&F)-(255&m)))>>>0},B.Predictor13=function(h,m,b){var F=m[b-1];return(le((h=Te(h,m[b+0]))>>24&255,F>>24&255)<<24|le(h>>16&255,F>>16&255)<<16|le(h>>8&255,F>>8&255)<<8|le(255&h,255&F))>>>0};var Bh=B.PredictorAdd0;B.PredictorAdd1=he,ve("Predictor2","PredictorAdd2"),ve("Predictor3","PredictorAdd3"),ve("Predictor4","PredictorAdd4"),ve("Predictor5","PredictorAdd5"),ve("Predictor6","PredictorAdd6"),ve("Predictor7","PredictorAdd7"),ve("Predictor8","PredictorAdd8"),ve("Predictor9","PredictorAdd9"),ve("Predictor10","PredictorAdd10"),ve("Predictor11","PredictorAdd11"),ve("Predictor12","PredictorAdd12"),ve("Predictor13","PredictorAdd13");var _u=B.PredictorAdd2;Ve("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Ve("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Jn,A0=B.ColorIndexInverseTransform,fo=B.MapARGB,po=B.VP8LColorIndexInverseTransformAlpha,_h=B.MapAlpha,Ch=B.VP8LPredictorsAdd=[];Ch.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var Ih,Eh,MA,OA,HA,vc,VA,yc,ba,go,Vr,on,Xn,ps,Go,kh,Cu,l0,e5,t5,r5,n5,s5,i5,Sh,a5,o5,A5,l5=i(511),c5=i(2041),u5=i(225),d5=i(767),h5=0,T1=c5,c0=u5,Yi=d5,Ba=l5,u0=0,d0=1,f5=2,h0=3,f0=4,U1=5,p5=6,L1=7,j1=8,p0=9,Q1=10,g6=[2,3,7],m6=[3,3,11],g5=[280,256,256,256,40],w6=[0,1,1,1,0],x6=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],v6=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],y6=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],b6=8,R1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],P1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Nh=null,B6=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_6=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],m5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],C6=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],I6=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],E6=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],k6=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],KA=[],Va=[],$o=[],S6=1,w5=2,zA=[],_a=[];va("UpsampleRgbLinePair",Ue,3),va("UpsampleBgrLinePair",Ke,3),va("UpsampleRgbaLinePair",Dr,4),va("UpsampleBgraLinePair",wr,4),va("UpsampleArgbLinePair",Ln,4),va("UpsampleRgba4444LinePair",kr,2),va("UpsampleRgb565LinePair",xt,2);var N6=B.UpsampleRgbLinePair,F6=B.UpsampleBgrLinePair,x5=B.UpsampleRgbaLinePair,v5=B.UpsampleBgraLinePair,y5=B.UpsampleArgbLinePair,b5=B.UpsampleRgba4444LinePair,T6=B.UpsampleRgb565LinePair,g0=16,m0=1<<g0-1,Fh=-227,D1=482,U6=6,B5=0,L6=i(256),j6=i(256),Q6=i(256),R6=i(256),P6=i(D1-Fh),D6=i(D1-Fh);dn("YuvToRgbRow",Ue,3),dn("YuvToBgrRow",Ke,3),dn("YuvToRgbaRow",Dr,4),dn("YuvToBgraRow",wr,4),dn("YuvToArgbRow",Ln,4),dn("YuvToRgba4444Row",kr,2),dn("YuvToRgb565Row",xt,2);var _5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],w0=[0,2,8],M6=[8,7,6,4,4,2,2,2,1,1,1,1],O6=1;this.WebPDecodeRGBA=function(h,m,b,F,V){var G=d0,$=new Je,W=new Ht;$.ba=W,W.S=G,W.width=[W.width],W.height=[W.height];var X=W.width,re=W.height,be=new wt;if(be==null||h==null)var He=2;else e(be!=null),He=Ha(h,m,b,be.width,be.height,be.Pd,be.Qd,be.format,null);if(He!=0?X=0:(X!=null&&(X[0]=be.width[0]),re!=null&&(re[0]=be.height[0]),X=1),X){W.width=W.width[0],W.height=W.height[0],F!=null&&(F[0]=W.width),V!=null&&(V[0]=W.height);e:{if(F=new pa,(V=new ot).data=h,V.w=m,V.ha=b,V.kd=1,m=[0],e(V!=null),((h=Ha(V.data,V.w,V.ha,null,null,null,m,null,V))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(e($!=null),F.data=V.data,F.w=V.w+V.offset,F.ha=V.ha-V.offset,F.put=Dt,F.ac=tr,F.bc=jt,F.ma=$,V.xa){if((h=ar())==null){$=1;break e}if(function(ne,Ie){var je=[0],We=[0],Me=[0];t:for(;;){if(ne==null)return 0;if(Ie==null)return ne.a=2,0;if(ne.l=Ie,ne.a=0,we(ne.m,Ie.data,Ie.w,Ie.ha),!dr(ne.m,je,We,Me)){ne.a=3;break t}if(ne.xb=w5,Ie.width=je[0],Ie.height=We[0],!Tr(je[0],We[0],1,ne,null))break t;return 1}return e(ne.a!=0),0}(h,F)){if(F=(m=RA(F.width,F.height,$.Oa,$.ba))==0){t:{F=h;r:for(;;){if(F==null){F=0;break t}if(e(F.s.yc!=null),e(F.s.Ya!=null),e(0<F.s.Wb),e((b=F.l)!=null),e((V=b.ma)!=null),F.xb!=0){if(F.ca=V.ba,F.tb=V.tb,e(F.ca!=null),!yh(V.Oa,b,h0)){F.a=2;break r}if(!Ir(F,b.width)||b.da)break r;if((b.da||bt(F.ca.S))&&Fi(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&Fi()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!R(F.s.vb,F.s.Wa.Xa)){F.a=1;break r}F.xb=0}if(!yt(F,F.V,F.Ba,F.c,F.i,b.o,vt))break r;V.Dc=F.Ma,F=1;break t}e(F.a!=0),F=0}F=!F}F&&(m=h.a)}else m=h.a}else{if((h=new Mo)==null){$=1;break e}if(h.Fa=V.na,h.P=V.P,h.qc=V.Sa,Si(h,F)){if((m=RA(F.width,F.height,$.Oa,$.ba))==0){if(h.Aa=0,b=$.Oa,e((V=h)!=null),b!=null){if(0<(X=0>(X=b.Md)?0:100<X?255:255*X/100)){for(re=be=0;4>re;++re)12>(He=V.pb[re]).lc&&(He.ia=X*M6[0>He.lc?0:He.lc]>>3),be|=He.ia;be&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=b.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}(function(ne,Ie){if(ne==null)return 0;if(Ie==null)return un(ne,2,"NULL VP8Io parameter in VP8Decode().");if(!ne.cb&&!Si(ne,Ie))return 0;if(e(ne.cb),Ie.ac==null||Ie.ac(Ie)){Ie.ob&&(ne.L=0);var je=w0[ne.L];if(ne.L==2?(ne.yb=0,ne.zb=0):(ne.yb=Ie.v-je>>4,ne.zb=Ie.j-je>>4,0>ne.yb&&(ne.yb=0),0>ne.zb&&(ne.zb=0)),ne.Va=Ie.o+15+je>>4,ne.Hb=Ie.va+15+je>>4,ne.Hb>ne.za&&(ne.Hb=ne.za),ne.Va>ne.Ub&&(ne.Va=ne.Ub),0<ne.L){var We=ne.ed;for(je=0;4>je;++je){var Me;if(ne.Qa.Cb){var Xe=ne.Qa.Lb[je];ne.Qa.Fb||(Xe+=We.Tb)}else Xe=We.Tb;for(Me=0;1>=Me;++Me){var rt=ne.gd[je][Me],ht=Xe;if(We.Pc&&(ht+=We.vd[0],Me&&(ht+=We.od[0])),0<(ht=0>ht?0:63<ht?63:ht)){var lt=ht;0<We.wb&&(lt=4<We.wb?lt>>2:lt>>1)>9-We.wb&&(lt=9-We.wb),1>lt&&(lt=1),rt.dd=lt,rt.tc=2*ht+lt,rt.ld=40<=ht?2:15<=ht?1:0}else rt.tc=0;rt.La=Me}}}je=0}else un(ne,6,"Frame setup failed"),je=ne.a;if(je=je==0){if(je){ne.$c=0,0<ne.Aa||(ne.Ic=O6);t:{je=ne.Ic,We=4*(lt=ne.za);var Wt=32*lt,Pt=lt+1,pr=0<ne.L?lt*(0<ne.Aa?2:1):0,zt=(ne.Aa==2?2:1)*lt;if((rt=We+832+(Me=3*(16*je+w0[ne.L])/2*Wt)+(Xe=ne.Fa!=null&&0<ne.Fa.length?ne.Kc.c*ne.Kc.i:0))!=rt)je=0;else{if(rt>ne.Vb){if(ne.Vb=0,ne.Ec=i(rt),ne.Fc=0,ne.Ec==null){je=un(ne,1,"no memory during frame initialization.");break t}ne.Vb=rt}rt=ne.Ec,ht=ne.Fc,ne.Ac=rt,ne.Bc=ht,ht+=We,ne.Gd=a(Wt,mn),ne.Hd=0,ne.rb=a(Pt+1,Js),ne.sb=1,ne.wa=pr?a(pr,cs):null,ne.Y=0,ne.D.Nb=0,ne.D.wa=ne.wa,ne.D.Y=ne.Y,0<ne.Aa&&(ne.D.Y+=lt),e(!0),ne.oc=rt,ne.pc=ht,ht+=832,ne.ya=a(zt,Da),ne.aa=0,ne.D.ya=ne.ya,ne.D.aa=ne.aa,ne.Aa==2&&(ne.D.aa+=lt),ne.R=16*lt,ne.B=8*lt,lt=(Wt=w0[ne.L])*ne.R,Wt=Wt/2*ne.B,ne.sa=rt,ne.ta=ht+lt,ne.qa=ne.sa,ne.ra=ne.ta+16*je*ne.R+Wt,ne.Ha=ne.qa,ne.Ia=ne.ra+8*je*ne.B+Wt,ne.$c=0,ht+=Me,ne.mb=Xe?rt:null,ne.nb=Xe?ht:null,e(ht+Xe<=ne.Fc+ne.Vb),Ho(ne),s(ne.Ac,ne.Bc,0,We),je=1}}if(je){if(Ie.ka=0,Ie.y=ne.sa,Ie.O=ne.ta,Ie.f=ne.qa,Ie.N=ne.ra,Ie.ea=ne.Ha,Ie.Vd=ne.Ia,Ie.fa=ne.R,Ie.Rc=ne.B,Ie.F=null,Ie.J=0,!h5){for(je=-255;255>=je;++je)l5[255+je]=0>je?-je:je;for(je=-1020;1020>=je;++je)c5[1020+je]=-128>je?-128:127<je?127:je;for(je=-112;112>=je;++je)u5[112+je]=-16>je?-16:15<je?15:je;for(je=-255;510>=je;++je)d5[255+je]=0>je?0:255<je?255:je;h5=1}VA=hr,yc=Nt,go=Ze,Vr=Zt,on=Yt,ba=it,Xn=QA,ps=xa,Go=O,kh=te,Cu=wc,l0=w,e5=fe,t5=Fe,r5=ho,n5=mi,s5=mc,i5=Bu,Va[0]=fc,Va[1]=Pr,Va[2]=TA,Va[3]=hc,Va[4]=Wn,Va[5]=UA,Va[6]=Ni,Va[7]=Ys,Va[8]=LA,Va[9]=Oa,KA[0]=er,KA[1]=an,KA[2]=Mn,KA[3]=Xs,KA[4]=Cs,KA[5]=Is,KA[6]=$i,$o[0]=pc,$o[1]=_s,$o[2]=qi,$o[3]=Vo,$o[4]=gc,$o[5]=tn,$o[6]=bu,je=1}else je=0}je&&(je=function(Sr,gs){for(Sr.M=0;Sr.M<Sr.Va;++Sr.M){var gr,Gt=Sr.Jc[Sr.M&Sr.Xb],_t=Sr.m,Yn=Sr;for(gr=0;gr<Yn.za;++gr){var cr=_t,Nr=Yn,wn=Nr.Ac,Ps=Nr.Bc+4*gr,xi=Nr.zc,Vn=Nr.ya[Nr.aa+gr];if(Nr.Qa.Bb?Vn.$b=Ne(cr,Nr.Pa.jb[0])?2+Ne(cr,Nr.Pa.jb[2]):Ne(cr,Nr.Pa.jb[1]):Vn.$b=0,Nr.kc&&(Vn.Ad=Ne(cr,Nr.Bd)),Vn.Za=!Ne(cr,145)+0,Vn.Za){var ei=Vn.Ob,vi=0;for(Nr=0;4>Nr;++Nr){var ms,Ur=xi[0+Nr];for(ms=0;4>ms;++ms){Ur=I6[wn[Ps+ms]][Ur];for(var $r=m5[Ne(cr,Ur[0])];0<$r;)$r=m5[2*$r+Ne(cr,Ur[$r])];Ur=-$r,wn[Ps+ms]=Ur}n(ei,vi,wn,Ps,4),vi+=4,xi[0+Nr]=Ur}}else Ur=Ne(cr,156)?Ne(cr,128)?1:3:Ne(cr,163)?2:0,Vn.Ob[0]=Ur,s(wn,Ps,Ur,4),s(xi,0,Ur,4);Vn.Dd=Ne(cr,142)?Ne(cr,114)?Ne(cr,183)?1:3:2:0}if(Yn.m.Ka)return un(Sr,7,"Premature end-of-partition0 encountered.");for(;Sr.ja<Sr.za;++Sr.ja){if(Yn=Gt,cr=(_t=Sr).rb[_t.sb-1],wn=_t.rb[_t.sb+_t.ja],gr=_t.ya[_t.aa+_t.ja],Ps=_t.kc?gr.Ad:0)cr.la=wn.la=0,gr.Za||(cr.Na=wn.Na=0),gr.Hc=0,gr.Gc=0,gr.ia=0;else{var Kn,qr;if(cr=wn,wn=Yn,Ps=_t.Pa.Xc,xi=_t.ya[_t.aa+_t.ja],Vn=_t.pb[xi.$b],Nr=xi.ad,ei=0,vi=_t.rb[_t.sb-1],Ur=ms=0,s(Nr,ei,0,384),xi.Za)var Ds=0,Ka=Ps[3];else{$r=i(16);var Zn=cr.Na+vi.Na;if(Zn=Nh(wn,Ps[1],Zn,Vn.Eb,0,$r,0),cr.Na=vi.Na=(0<Zn)+0,1<Zn)VA($r,0,Nr,ei);else{var Ti=$r[0]+3>>3;for($r=0;256>$r;$r+=16)Nr[ei+$r]=Ti}Ds=1,Ka=Ps[0]}var An=15&cr.la,ws=15&vi.la;for($r=0;4>$r;++$r){var Zi=1&ws;for(Ti=qr=0;4>Ti;++Ti)An=An>>1|(Zi=(Zn=Nh(wn,Ka,Zn=Zi+(1&An),Vn.Sc,Ds,Nr,ei))>Ds)<<7,qr=qr<<2|(3<Zn?3:1<Zn?2:Nr[ei+0]!=0),ei+=16;An>>=4,ws=ws>>1|Zi<<7,ms=(ms<<8|qr)>>>0}for(Ka=An,Ds=ws>>4,Kn=0;4>Kn;Kn+=2){for(qr=0,An=cr.la>>4+Kn,ws=vi.la>>4+Kn,$r=0;2>$r;++$r){for(Zi=1&ws,Ti=0;2>Ti;++Ti)Zn=Zi+(1&An),An=An>>1|(Zi=0<(Zn=Nh(wn,Ps[2],Zn,Vn.Qc,0,Nr,ei)))<<3,qr=qr<<2|(3<Zn?3:1<Zn?2:Nr[ei+0]!=0),ei+=16;An>>=2,ws=ws>>1|Zi<<5}Ur|=qr<<4*Kn,Ka|=An<<4<<Kn,Ds|=(240&ws)<<Kn}cr.la=Ka,vi.la=Ds,xi.Hc=ms,xi.Gc=Ur,xi.ia=43690&Ur?0:Vn.ia,Ps=!(ms|Ur)}if(0<_t.L&&(_t.wa[_t.Y+_t.ja]=_t.gd[gr.$b][gr.Za],_t.wa[_t.Y+_t.ja].La|=!Ps),Yn.Ka)return un(Sr,7,"Premature end-of-file encountered.")}if(Ho(Sr),_t=gs,Yn=1,gr=(Gt=Sr).D,cr=0<Gt.L&&Gt.M>=Gt.zb&&Gt.M<=Gt.Va,Gt.Aa==0)t:{if(gr.M=Gt.M,gr.uc=cr,Rs(Gt,gr),Yn=1,gr=(qr=Gt.D).Nb,cr=(Ur=w0[Gt.L])*Gt.R,wn=Ur/2*Gt.B,$r=16*gr*Gt.R,Ti=8*gr*Gt.B,Ps=Gt.sa,xi=Gt.ta-cr+$r,Vn=Gt.qa,Nr=Gt.ra-wn+Ti,ei=Gt.Ha,vi=Gt.Ia-wn+Ti,ws=(An=qr.M)==0,ms=An>=Gt.Va-1,Gt.Aa==2&&Rs(Gt,qr),qr.uc)for(Zi=(Zn=Gt).D.M,e(Zn.D.uc),qr=Zn.yb;qr<Zn.Hb;++qr){Ds=qr,Ka=Zi;var yi=(ea=(Ms=Zn).D).Nb;Kn=Ms.R;var ea=ea.wa[ea.Y+Ds],ta=Ms.sa,Ui=Ms.ta+16*yi*Kn+16*Ds,ra=ea.dd,hn=ea.tc;if(hn!=0)if(e(3<=hn),Ms.L==1)0<Ds&&n5(ta,Ui,Kn,hn+4),ea.La&&i5(ta,Ui,Kn,hn),0<Ka&&r5(ta,Ui,Kn,hn+4),ea.La&&s5(ta,Ui,Kn,hn);else{var na=Ms.B,za=Ms.qa,bc=Ms.ra+8*yi*na+8*Ds,qo=Ms.Ha,Ms=Ms.Ia+8*yi*na+8*Ds;yi=ea.ld,0<Ds&&(ps(ta,Ui,Kn,hn+4,ra,yi),kh(za,bc,qo,Ms,na,hn+4,ra,yi)),ea.La&&(l0(ta,Ui,Kn,hn,ra,yi),t5(za,bc,qo,Ms,na,hn,ra,yi)),0<Ka&&(Xn(ta,Ui,Kn,hn+4,ra,yi),Go(za,bc,qo,Ms,na,hn+4,ra,yi)),ea.La&&(Cu(ta,Ui,Kn,hn,ra,yi),e5(za,bc,qo,Ms,na,hn,ra,yi))}}if(Gt.ia&&alert("todo:DitherRow"),_t.put!=null){if(qr=16*An,An=16*(An+1),ws?(_t.y=Gt.sa,_t.O=Gt.ta+$r,_t.f=Gt.qa,_t.N=Gt.ra+Ti,_t.ea=Gt.Ha,_t.W=Gt.Ia+Ti):(qr-=Ur,_t.y=Ps,_t.O=xi,_t.f=Vn,_t.N=Nr,_t.ea=ei,_t.W=vi),ms||(An-=Ur),An>_t.o&&(An=_t.o),_t.F=null,_t.J=null,Gt.Fa!=null&&0<Gt.Fa.length&&qr<An&&(_t.J=Gr(Gt,_t,qr,An-qr),_t.F=Gt.mb,_t.F==null&&_t.F.length==0)){Yn=un(Gt,3,"Could not decode alpha data.");break t}qr<_t.j&&(Ur=_t.j-qr,qr=_t.j,e(!(1&Ur)),_t.O+=Gt.R*Ur,_t.N+=Gt.B*(Ur>>1),_t.W+=Gt.B*(Ur>>1),_t.F!=null&&(_t.J+=_t.width*Ur)),qr<An&&(_t.O+=_t.v,_t.N+=_t.v>>1,_t.W+=_t.v>>1,_t.F!=null&&(_t.J+=_t.v),_t.ka=qr-_t.j,_t.U=_t.va-_t.v,_t.T=An-qr,Yn=_t.put(_t))}gr+1!=Gt.Ic||ms||(n(Gt.sa,Gt.ta-cr,Ps,xi+16*Gt.R,cr),n(Gt.qa,Gt.ra-wn,Vn,Nr+8*Gt.B,wn),n(Gt.Ha,Gt.Ia-wn,ei,vi+8*Gt.B,wn))}if(!Yn)return un(Sr,6,"Output aborted.")}return 1}(ne,Ie)),Ie.bc!=null&&Ie.bc(Ie),je&=1}return je?(ne.cb=0,je):0})(h,F)||(m=h.a)}}else m=h.a}m==0&&$.Oa!=null&&$.Oa.fd&&(m=bh($.ba))}$=m}G=$!=0?null:11>G?W.f.RGBA.eb:W.f.kb.y}else G=null;return G};var C5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(B,j){for(var S="",L=0;L<4;L++)S+=String.fromCharCode(B[j++]);return S}function u(B,j){return B[j+0]|B[j+1]<<8}function d(B,j){return(B[j+0]|B[j+1]<<8|B[j+2]<<16)>>>0}function p(B,j){return(B[j+0]|B[j+1]<<8|B[j+2]<<16|B[j+3]<<24)>>>0}new A;var g=[0],v=[0],y=[],k=new A,x=t,I=function(B,j){var S={},L=0,T=!1,Z=0,ye=0;if(S.frames=[],!function(M,H){for(var K=0;K<4;K++)if(M[H+K]!="RIFF".charCodeAt(K))return!0;return!1}(B,j)){for(p(B,j+=4),j+=8;j<B.length;){var _e=c(B,j),Ce=p(B,j+=4);j+=4;var ie=Ce+(1&Ce);switch(_e){case"VP8 ":case"VP8L":S.frames[L]===void 0&&(S.frames[L]={}),(Se=S.frames[L]).src_off=T?ye:j-8,Se.src_size=Z+Ce+8,L++,T&&(T=!1,Z=0,ye=0);break;case"VP8X":(Se=S.header={}).feature_flags=B[j];var we=j+4;Se.canvas_width=1+d(B,we),we+=3,Se.canvas_height=1+d(B,we),we+=3;break;case"ALPH":T=!0,Z=ie+8,ye=j-8;break;case"ANIM":(Se=S.header).bgcolor=p(B,j),we=j+4,Se.loop_count=u(B,we),we+=2;break;case"ANMF":var Pe,Se;(Se=S.frames[L]={}).offset_x=2*d(B,j),j+=3,Se.offset_y=2*d(B,j),j+=3,Se.width=1+d(B,j),j+=3,Se.height=1+d(B,j),j+=3,Se.duration=d(B,j),j+=3,Pe=B[j++],Se.dispose=1&Pe,Se.blend=Pe>>1&1}_e!="ANMF"&&(j+=ie)}return S}}(x,0);I.response=x,I.rgbaoutput=!0,I.dataurl=!1;var N=I.header?I.header:null,U=I.frames?I.frames:null;if(N){N.loop_counter=N.loop_count,g=[N.canvas_height],v=[N.canvas_width];for(var D=0;D<U.length&&U[D].blend!=0;D++);}var P=U[0],E=k.WebPDecodeRGBA(x,P.src_off,P.src_size,v,g);P.rgba=E,P.imgwidth=v[0],P.imgheight=g[0];for(var _=0;_<v[0]*g[0]*4;_++)y[_]=E[_];return this.width=v,this.height=g,this.data=y,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function FY(){var t,e=this.internal.__metadata__.metadata,r=unescape(encodeURIComponent(e));t=this.internal.__metadata__.rawXml?r:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+t.length+" >>"),this.internal.write("stream"),this.internal.write(t),this.internal.write("endstream"),this.internal.write("endobj")}function TY(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(t){var e,r,n,s,i,a,o,A,c,u=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new A,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new a,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new a,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,A=this.internal.Matrix,c=new u}]);var d=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=M;Object.defineProperty(this,"pdf",{get:function(){return H}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(R){K=!!R}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(R){ee=!!R}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(R){isNaN(R)||(se=R)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(R){isNaN(R)||(ue=R)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(R){var Ee;typeof R=="number"?Ee=[R,R,R,R]:((Ee=new Array(4))[0]=R[0],Ee[1]=R.length>=2?R[1]:Ee[0],Ee[2]=R.length>=3?R[2]:Ee[0],Ee[3]=R.length>=4?R[3]:Ee[1]),c.margin=Ee}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(R){Ae=R}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(R){pe=R}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(R){Ne=R}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(R){R instanceof u&&(c=R)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(R){c.path=R}});var Oe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Oe},set:function(R){Oe=R}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(R){var Ee;Ee=p(R),this.ctx.fillStyle=Ee.style,this.ctx.isFillTransparent=Ee.a===0,this.ctx.fillOpacity=Ee.a,this.pdf.setFillColor(Ee.r,Ee.g,Ee.b,{a:Ee.a}),this.pdf.setTextColor(Ee.r,Ee.g,Ee.b,{a:Ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(R){var Ee=p(R);this.ctx.strokeStyle=Ee.style,this.ctx.isStrokeTransparent=Ee.a===0,this.ctx.strokeOpacity=Ee.a,Ee.a===0?this.pdf.setDrawColor(255,255,255):(Ee.a,this.pdf.setDrawColor(Ee.r,Ee.g,Ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(R){["butt","round","square"].indexOf(R)!==-1&&(this.ctx.lineCap=R,this.pdf.setLineCap(R))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(R){isNaN(R)||(this.ctx.lineWidth=R,this.pdf.setLineWidth(R))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(R){["bevel","round","miter"].indexOf(R)!==-1&&(this.ctx.lineJoin=R,this.pdf.setLineJoin(R))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(R){isNaN(R)||(this.ctx.miterLimit=R,this.pdf.setMiterLimit(R))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(R){this.ctx.textBaseline=R}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(R){["right","end","center","left","start"].indexOf(R)!==-1&&(this.ctx.textAlign=R)}});var nt=null,ke=null,ce=null;Object.defineProperty(this,"fontFaces",{get:function(){return ce},set:function(R){nt=null,ke=null,ce=R}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(R){var Ee;if(this.ctx.font=R,(Ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(R))!==null){var De=Ee[1];Ee[2];var st=Ee[3],ge=Ee[4];Ee[5];var Be=Ee[6],ve=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ge)[2];ge=Math.floor(ve==="px"?parseFloat(ge)*this.pdf.internal.scaleFactor:ve==="em"?parseFloat(ge)*this.pdf.getFontSize():parseFloat(ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ge);var de=function(Ve){var St,ft,gt=[],At=Ve.trim();if(At==="")return vv;if(At in V4)return[V4[At]];for(;At!=="";){switch(ft=null,St=(At=z4(At)).charAt(0)){case'"':case"'":ft=CY(At.substring(1),St);break;default:ft=IY(At)}if(ft===null||(gt.push(ft[0]),(At=z4(ft[1]))!==""&&At.charAt(0)!==","))return vv;At=At.replace(/^,/,"")}return gt}(Be);if(this.fontFaces){var Te=function(Ve,St){var ft=Ve.getFontList(),gt=JSON.stringify(ft);if(nt===null||ke!==gt){var At=function(dt){var tt=[];return Object.keys(dt).forEach(function(Tt){dt[Tt].forEach(function(bt){var It=null;switch(bt){case"bold":It={family:Tt,weight:"bold"};break;case"italic":It={family:Tt,style:"italic"};break;case"bolditalic":It={family:Tt,weight:"bold",style:"italic"};break;case"":case"normal":It={family:Tt}}It!==null&&(It.ref={name:Tt,style:bt},tt.push(It))})}),tt}(ft);nt=function(dt){for(var tt={},Tt=0;Tt<dt.length;++Tt){var bt=xv(dt[Tt]),It=bt.family,qt=bt.stretch,Ht=bt.style,wt=bt.weight;tt[It]=tt[It]||{},tt[It][qt]=tt[It][qt]||{},tt[It][qt][Ht]=tt[It][qt][Ht]||{},tt[It][qt][Ht][wt]=bt}return tt}(At.concat(St)),ke=gt}return nt}(this.pdf,this.fontFaces),q=de.map(function(Ve){return{family:Ve,stretch:"normal",weight:st,style:De}}),le=function(Ve,St,ft){for(var gt=(ft=ft||{}).defaultFontFamily||"times",At=Object.assign({},_Y,ft.genericFontFamilies||{}),dt=null,tt=null,Tt=0;Tt<St.length;++Tt)if(At[(dt=xv(St[Tt])).family]&&(dt.family=At[dt.family]),Ve.hasOwnProperty(dt.family)){tt=Ve[dt.family];break}if(!(tt=tt||Ve[gt]))throw new Error("Could not find a font-family for the rule '"+K4(dt)+"' and default family '"+gt+"'.");if(tt=function(bt,It){if(It[bt])return It[bt];var qt=Fy[bt],Ht=qt<=Fy.normal?-1:1,wt=H4(It,A6,qt,Ht);if(!wt)throw new Error("Could not find a matching font-stretch value for "+bt);return wt}(dt.stretch,tt),tt=function(bt,It){if(It[bt])return It[bt];for(var qt=o6[bt],Ht=0;Ht<qt.length;++Ht)if(It[qt[Ht]])return It[qt[Ht]];throw new Error("Could not find a matching font-style for "+bt)}(dt.style,tt),!(tt=function(bt,It){if(It[bt])return It[bt];if(bt===400&&It[500])return It[500];if(bt===500&&It[400])return It[400];var qt=BY[bt],Ht=H4(It,l6,qt,bt<400?-1:1);if(!Ht)throw new Error("Could not find a matching font-weight for value "+bt);return Ht}(dt.weight,tt)))throw new Error("Failed to resolve a font for the rule '"+K4(dt)+"'.");return tt}(Te,q);this.pdf.setFont(le.ref.name,le.ref.style)}else{var oe="";(st==="bold"||parseInt(st,10)>=700||De==="bold")&&(oe="bold"),De==="italic"&&(oe+="italic"),oe.length===0&&(oe="normal");for(var he="",Le={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Re=0;Re<de.length;Re++){if(this.pdf.internal.getFont(de[Re],oe,{noFallback:!0,disableWarning:!0})!==void 0){he=de[Re];break}if(oe==="bolditalic"&&this.pdf.internal.getFont(de[Re],"bold",{noFallback:!0,disableWarning:!0})!==void 0)he=de[Re],oe="bold";else if(this.pdf.internal.getFont(de[Re],"normal",{noFallback:!0,disableWarning:!0})!==void 0){he=de[Re],oe="normal";break}}if(he===""){for(var $e=0;$e<de.length;$e++)if(Le[de[$e]]){he=Le[de[$e]];break}}he=he===""?"Times":he,this.pdf.setFont(he,oe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(R){this.ctx.globalCompositeOperation=R}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(R){this.ctx.globalAlpha=R}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(R){this.ctx.lineDashOffset=R,Se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(R){this.ctx.lineDash=R,Se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(R){this.ctx.ignoreClearRect=!!R}})};d.prototype.setLineDash=function(M){this.lineDash=M},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){U.call(this,"fill",!1)},d.prototype.stroke=function(){U.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(M,H){if(isNaN(M)||isNaN(H))throw ln.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new a(M,H));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(M,H)},d.prototype.closePath=function(){var M=new a(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Xr(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){M=new a(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(M.x,M.y)},d.prototype.lineTo=function(M,H){if(isNaN(M)||isNaN(H))throw ln.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new a(M,H));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(K.x,K.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},d.prototype.quadraticCurveTo=function(M,H,K,ee){if(isNaN(K)||isNaN(ee)||isNaN(M)||isNaN(H))throw ln.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new a(K,ee)),ue=this.ctx.transform.applyToPoint(new a(M,H));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:se.x,y:se.y}),this.ctx.lastPoint=new a(se.x,se.y)},d.prototype.bezierCurveTo=function(M,H,K,ee,se,ue){if(isNaN(se)||isNaN(ue)||isNaN(M)||isNaN(H)||isNaN(K)||isNaN(ee))throw ln.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new a(se,ue)),pe=this.ctx.transform.applyToPoint(new a(M,H)),Ne=this.ctx.transform.applyToPoint(new a(K,ee));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:Ne.x,y2:Ne.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new a(Ae.x,Ae.y)},d.prototype.arc=function(M,H,K,ee,se,ue){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(ee)||isNaN(se))throw ln.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new a(M,H));M=Ae.x,H=Ae.y;var pe=this.ctx.transform.applyToPoint(new a(0,K)),Ne=this.ctx.transform.applyToPoint(new a(0,0));K=Math.sqrt(Math.pow(pe.x-Ne.x,2)+Math.pow(pe.y-Ne.y,2))}Math.abs(se-ee)>=2*Math.PI&&(ee=0,se=2*Math.PI),this.path.push({type:"arc",x:M,y:H,radius:K,startAngle:ee,endAngle:se,counterclockwise:ue})},d.prototype.arcTo=function(M,H,K,ee,se){throw new Error("arcTo not implemented.")},d.prototype.rect=function(M,H,K,ee){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(ee))throw ln.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,H),this.lineTo(M+K,H),this.lineTo(M+K,H+ee),this.lineTo(M,H+ee),this.lineTo(M,H),this.lineTo(M+K,H),this.lineTo(M,H)},d.prototype.fillRect=function(M,H,K,ee){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(ee))throw ln.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,H,K,ee),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},d.prototype.strokeRect=function(M,H,K,ee){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(ee))throw ln.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(M,H,K,ee),this.stroke())},d.prototype.clearRect=function(M,H,K,ee){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(ee))throw ln.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,H,K,ee))},d.prototype.save=function(M){M=typeof M!="boolean"||M;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},d.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(H),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(M){var H,K,ee,se;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))H=0,K=0,ee=0,se=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ue!==null)H=parseInt(ue[1]),K=parseInt(ue[2]),ee=parseInt(ue[3]),se=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)H=parseInt(ue[1]),K=parseInt(ue[2]),ee=parseInt(ue[3]),se=parseFloat(ue[4]);else{if(se=1,typeof M=="string"&&M.charAt(0)!=="#"){var Ae=new e6(M);M=Ae.ok?Ae.toHex():"#000000"}M.length===4?(H=M.substring(1,2),H+=H,K=M.substring(2,3),K+=K,ee=M.substring(3,4),ee+=ee):(H=M.substring(1,3),K=M.substring(3,5),ee=M.substring(5,7)),H=parseInt(H,16),K=parseInt(K,16),ee=parseInt(ee,16)}}return{r:H,g:K,b:ee,a:se,style:M}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(M,H,K,ee){if(isNaN(H)||isNaN(K)||typeof M!="string")throw ln.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!g.call(this)){var se=ie(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;L.call(this,{text:M,x:H,y:K,scale:ue,angle:se,align:this.textAlign,maxWidth:ee})}},d.prototype.strokeText=function(M,H,K,ee){if(isNaN(H)||isNaN(K)||typeof M!="string")throw ln.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){ee=isNaN(ee)?void 0:ee;var se=ie(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;L.call(this,{text:M,x:H,y:K,scale:ue,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:ee})}},d.prototype.measureText=function(M){if(typeof M!="string")throw ln.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,K=this.pdf.internal.scaleFactor,ee=H.internal.getFontSize(),se=H.getStringUnitWidth(M)*ee/H.internal.scaleFactor;return new function(ue){var Ae=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this}({width:se*=Math.round(96*K/72*1e4)/1e4})},d.prototype.scale=function(M,H){if(isNaN(M)||isNaN(H))throw ln.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new A(M,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.rotate=function(M){if(isNaN(M))throw ln.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new A(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},d.prototype.translate=function(M,H){if(isNaN(M)||isNaN(H))throw ln.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new A(1,0,0,1,M,H);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.transform=function(M,H,K,ee,se,ue){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(ee)||isNaN(se)||isNaN(ue))throw ln.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new A(M,H,K,ee,se,ue);this.ctx.transform=this.ctx.transform.multiply(Ae)},d.prototype.setTransform=function(M,H,K,ee,se,ue){M=isNaN(M)?1:M,H=isNaN(H)?0:H,K=isNaN(K)?0:K,ee=isNaN(ee)?1:ee,se=isNaN(se)?0:se,ue=isNaN(ue)?0:ue,this.ctx.transform=new A(M,H,K,ee,se,ue)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(M,H,K,ee,se,ue,Ae,pe,Ne){var Oe=this.pdf.getImageProperties(M),nt=1,ke=1,ce=1,R=1;ee!==void 0&&pe!==void 0&&(ce=pe/ee,R=Ne/se,nt=Oe.width/ee*pe/ee,ke=Oe.height/se*Ne/se),ue===void 0&&(ue=H,Ae=K,H=0,K=0),ee!==void 0&&pe===void 0&&(pe=ee,Ne=se),ee===void 0&&pe===void 0&&(pe=Oe.width,Ne=Oe.height);var Ee=this.ctx.transform.decompose(),De=ie(Ee.rotate.shx),st=new A,ge=(st=(st=(st=st.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale)).applyToRectangle(new o(ue-H*ce,Ae-K*R,ee*nt,se*ke));if(this.autoPaging){for(var Be,ve=k.call(this,ge),de=[],Te=0;Te<ve.length;Te+=1)de.indexOf(ve[Te])===-1&&de.push(ve[Te]);N(de);for(var q=de[0],le=de[de.length-1],oe=q;oe<le+1;oe++){this.pdf.setPage(oe);var he=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Le=oe===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ve=oe===1?0:Re+(oe-2)*$e;if(this.ctx.clip_path.length!==0){var St=this.path;Be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Be,this.posX+this.margin[3],-Ve+Le+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=St}var ft=JSON.parse(JSON.stringify(ge));ft=I([ft],this.posX+this.margin[3],-Ve+Le+this.ctx.prevPageLastElemOffset)[0];var gt=(oe>q||oe<le)&&y.call(this);gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],he,$e,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",ft.x,ft.y,ft.w,ft.h,null,null,De),gt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(M,"JPEG",ge.x,ge.y,ge.w,ge.h,null,null,De)};var k=function(M,H,K){var ee=[];H=H||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":ee.push(Math.floor((M.y+se)/K)+1);break;case"arc":ee.push(Math.floor((M.y+se-M.radius)/K)+1),ee.push(Math.floor((M.y+se+M.radius)/K)+1);break;case"qct":var ue=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);ee.push(Math.floor((ue.y+se)/K)+1),ee.push(Math.floor((ue.y+ue.h+se)/K)+1);break;case"bct":var Ae=Pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);ee.push(Math.floor((Ae.y+se)/K)+1),ee.push(Math.floor((Ae.y+Ae.h+se)/K)+1);break;case"rect":ee.push(Math.floor((M.y+se)/K)+1),ee.push(Math.floor((M.y+M.h+se)/K)+1)}for(var pe=0;pe<ee.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<ee[pe];)x.call(this);return ee},x=function(){var M=this.fillStyle,H=this.strokeStyle,K=this.font,ee=this.lineCap,se=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=H,this.font=K,this.lineCap=ee,this.lineWidth=se,this.lineJoin=ue},I=function(M,H,K){for(var ee=0;ee<M.length;ee++)switch(M[ee].type){case"bct":M[ee].x2+=H,M[ee].y2+=K;case"qct":M[ee].x1+=H,M[ee].y1+=K;default:M[ee].x+=H,M[ee].y+=K}return M},N=function(M){return M.sort(function(H,K){return H-K})},U=function(M,H){var K=this.fillStyle,ee=this.strokeStyle,se=this.lineCap,ue=this.lineWidth,Ae=Math.abs(ue*this.ctx.transform.scaleX),pe=this.lineJoin;if(this.autoPaging){for(var Ne,Oe,nt=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),ce=[],R=0;R<ke.length;R++)if(ke[R].x!==void 0)for(var Ee=k.call(this,ke[R]),De=0;De<Ee.length;De+=1)ce.indexOf(Ee[De])===-1&&ce.push(Ee[De]);for(var st=0;st<ce.length;st++)for(;this.pdf.internal.getNumberOfPages()<ce[st];)x.call(this);N(ce);for(var ge=ce[0],Be=ce[ce.length-1],ve=ge;ve<Be+1;ve++){this.pdf.setPage(ve),this.fillStyle=K,this.strokeStyle=ee,this.lineCap=se,this.lineWidth=Ae,this.lineJoin=pe;var de=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Te=ve===1?this.posY+this.margin[0]:this.margin[0],q=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],le=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],oe=ve===1?0:q+(ve-2)*le;if(this.ctx.clip_path.length!==0){var he=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Ne,this.posX+this.margin[3],-oe+Te+this.ctx.prevPageLastElemOffset),D.call(this,M,!0),this.path=he}if(Oe=JSON.parse(JSON.stringify(nt)),this.path=I(Oe,this.posX+this.margin[3],-oe+Te+this.ctx.prevPageLastElemOffset),H===!1||ve===0){var Le=(ve>ge||ve<Be)&&y.call(this);Le&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],de,le,null).clip().discardPath()),D.call(this,M,H),Le&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}this.path=nt}else this.lineWidth=Ae,D.call(this,M,H),this.lineWidth=ue},D=function(M,H){if((M!=="stroke"||H||!v.call(this))&&(M==="stroke"||H||!g.call(this))){for(var K,ee,se=[],ue=this.path,Ae=0;Ae<ue.length;Ae++){var pe=ue[Ae];switch(pe.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:pe,deltas:[],abs:[]});break;case"lt":var Ne=se.length;if(ue[Ae-1]&&!isNaN(ue[Ae-1].x)&&(K=[pe.x-ue[Ae-1].x,pe.y-ue[Ae-1].y],Ne>0)){for(;Ne>=0;Ne--)if(se[Ne-1].close!==!0&&se[Ne-1].begin!==!0){se[Ne-1].deltas.push(K),se[Ne-1].abs.push(pe);break}}break;case"bct":K=[pe.x1-ue[Ae-1].x,pe.y1-ue[Ae-1].y,pe.x2-ue[Ae-1].x,pe.y2-ue[Ae-1].y,pe.x-ue[Ae-1].x,pe.y-ue[Ae-1].y],se[se.length-1].deltas.push(K);break;case"qct":var Oe=ue[Ae-1].x+2/3*(pe.x1-ue[Ae-1].x),nt=ue[Ae-1].y+2/3*(pe.y1-ue[Ae-1].y),ke=pe.x+2/3*(pe.x1-pe.x),ce=pe.y+2/3*(pe.y1-pe.y),R=pe.x,Ee=pe.y;K=[Oe-ue[Ae-1].x,nt-ue[Ae-1].y,ke-ue[Ae-1].x,ce-ue[Ae-1].y,R-ue[Ae-1].x,Ee-ue[Ae-1].y],se[se.length-1].deltas.push(K);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(pe)}}ee=H?null:M==="stroke"?"stroke":"fill";for(var De=!1,st=0;st<se.length;st++)if(se[st].arc)for(var ge=se[st].abs,Be=0;Be<ge.length;Be++){var ve=ge[Be];ve.type==="arc"?_.call(this,ve.x,ve.y,ve.radius,ve.startAngle,ve.endAngle,ve.counterclockwise,void 0,H,!De):T.call(this,ve.x,ve.y),De=!0}else if(se[st].close===!0)this.pdf.internal.out("h"),De=!1;else if(se[st].begin!==!0){var de=se[st].start.x,Te=se[st].start.y;Z.call(this,se[st].deltas,de,Te),De=!0}ee&&B.call(this,ee),H&&j.call(this)}},P=function(M){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-K;case"top":return M+H-K;case"hanging":return M+H-2*K;case"middle":return M+H/2-K;default:return M}},E=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(H,K){this.colorStops.push([H,K])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(M,H,K,ee,se,ue,Ae,pe,Ne){for(var Oe=_e.call(this,K,ee,se,ue),nt=0;nt<Oe.length;nt++){var ke=Oe[nt];nt===0&&(Ne?S.call(this,ke.x1+M,ke.y1+H):T.call(this,ke.x1+M,ke.y1+H)),ye.call(this,M,H,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}pe?j.call(this):B.call(this,Ae)},B=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},j=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(M,H){this.pdf.internal.out(r(M)+" "+n(H)+" m")},L=function(M){var H;switch(M.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var K,ee,se,ue=this.pdf.getTextDimensions(M.text),Ae=P.call(this,M.y),pe=E.call(this,Ae)-ue.h,Ne=this.ctx.transform.applyToPoint(new a(M.x,Ae));if(this.autoPaging){var Oe=this.ctx.transform.decompose(),nt=new A;nt=(nt=(nt=nt.multiply(Oe.translate)).multiply(Oe.skew)).multiply(Oe.scale);for(var ke=this.ctx.transform.applyToRectangle(new o(M.x,Ae,ue.w,ue.h)),ce=nt.applyToRectangle(new o(M.x,pe,ue.w,ue.h)),R=k.call(this,ce),Ee=[],De=0;De<R.length;De+=1)Ee.indexOf(R[De])===-1&&Ee.push(R[De]);N(Ee);for(var st=Ee[0],ge=Ee[Ee.length-1],Be=st;Be<ge+1;Be++){this.pdf.setPage(Be);var ve=Be===1?this.posY+this.margin[0]:this.margin[0],de=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Te=this.pdf.internal.pageSize.height-this.margin[2],q=Te-this.margin[0],le=this.pdf.internal.pageSize.width-this.margin[1],oe=le-this.margin[3],he=Be===1?0:de+(Be-2)*q;if(this.ctx.clip_path.length!==0){var Le=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(K,this.posX+this.margin[3],-1*he+ve),D.call(this,"fill",!0),this.path=Le}var Re=I([JSON.parse(JSON.stringify(ce))],this.posX+this.margin[3],-he+ve+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*M.scale),se=this.lineWidth,this.lineWidth=se*M.scale);var $e=this.autoPaging!=="text";if($e||Re.y+Re.h<=Te){if($e||Re.y>=ve&&Re.x<=le){var Ve=$e?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||le-Re.x)[0],St=I([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-he+ve+this.ctx.prevPageLastElemOffset)[0],ft=$e&&(Be>st||Be<ge)&&y.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],oe,q,null).clip().discardPath()),this.pdf.text(Ve,St.x,St.y,{angle:M.angle,align:H,renderingMode:M.renderingMode}),ft&&this.pdf.restoreGraphicsState()}}else Re.y<Te&&(this.ctx.prevPageLastElemOffset+=Te-Re.y);M.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=se)}}else M.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*M.scale),se=this.lineWidth,this.lineWidth=se*M.scale),this.pdf.text(M.text,Ne.x+this.posX,Ne.y+this.posY,{angle:M.angle,align:H,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=se)},T=function(M,H,K,ee){K=K||0,ee=ee||0,this.pdf.internal.out(r(M+K)+" "+n(H+ee)+" l")},Z=function(M,H,K){return this.pdf.lines(M,H,K,null,null)},ye=function(M,H,K,ee,se,ue,Ae,pe){this.pdf.internal.out([e(s(K+M)),e(i(ee+H)),e(s(se+M)),e(i(ue+H)),e(s(Ae+M)),e(i(pe+H)),"c"].join(" "))},_e=function(M,H,K,ee){for(var se=2*Math.PI,ue=Math.PI/2;H>K;)H-=se;var Ae=Math.abs(K-H);Ae<se&&ee&&(Ae=se-Ae);for(var pe=[],Ne=ee?-1:1,Oe=H;Ae>1e-5;){var nt=Oe+Ne*Math.min(Ae,ue);pe.push(Ce.call(this,M,Oe,nt)),Ae-=Math.abs(nt-Oe),Oe=nt}return pe},Ce=function(M,H,K){var ee=(K-H)/2,se=M*Math.cos(ee),ue=M*Math.sin(ee),Ae=se,pe=-ue,Ne=Ae*Ae+pe*pe,Oe=Ne+Ae*se+pe*ue,nt=4/3*(Math.sqrt(2*Ne*Oe)-Oe)/(Ae*ue-pe*se),ke=Ae-nt*pe,ce=pe+nt*Ae,R=ke,Ee=-ce,De=ee+H,st=Math.cos(De),ge=Math.sin(De);return{x1:M*Math.cos(H),y1:M*Math.sin(H),x2:ke*st-ce*ge,y2:ke*ge+ce*st,x3:R*st-Ee*ge,y3:R*ge+Ee*st,x4:M*Math.cos(K),y4:M*Math.sin(K)}},ie=function(M){return 180*M/Math.PI},we=function(M,H,K,ee,se,ue){var Ae=M+.5*(K-M),pe=H+.5*(ee-H),Ne=se+.5*(K-se),Oe=ue+.5*(ee-ue),nt=Math.min(M,se,Ae,Ne),ke=Math.max(M,se,Ae,Ne),ce=Math.min(H,ue,pe,Oe),R=Math.max(H,ue,pe,Oe);return new o(nt,ce,ke-nt,R-ce)},Pe=function(M,H,K,ee,se,ue,Ae,pe){var Ne,Oe,nt,ke,ce,R,Ee,De,st,ge,Be,ve,de,Te,q=K-M,le=ee-H,oe=se-K,he=ue-ee,Le=Ae-se,Re=pe-ue;for(Oe=0;Oe<41;Oe++)st=(Ee=(nt=M+(Ne=Oe/40)*q)+Ne*((ce=K+Ne*oe)-nt))+Ne*(ce+Ne*(se+Ne*Le-ce)-Ee),ge=(De=(ke=H+Ne*le)+Ne*((R=ee+Ne*he)-ke))+Ne*(R+Ne*(ue+Ne*Re-R)-De),Oe==0?(Be=st,ve=ge,de=st,Te=ge):(Be=Math.min(Be,st),ve=Math.min(ve,ge),de=Math.max(de,st),Te=Math.max(Te,ge));return new o(Math.round(Be),Math.round(ve),Math.round(de-Be),Math.round(Te-ve))},Se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,H,K=(M=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:H}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(Jt.API),function(t){var e=function(a){var o,A,c,u,d,p,g,v,y,k;for(A=[],c=0,u=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;u>c;c+=4)(d=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(p=(d=((d=((d=((d=(d-(k=d%85))/85)-(y=d%85))/85)-(v=d%85))/85)-(g=d%85))/85)%85,A.push(p+33,g+33,v+33,y+33,k+33)):A.push(122);return function(x,I){for(var N=I;N>0;N--)x.pop()}(A,o.length),String.fromCharCode.apply(String,A)+"~>"},r=function(a){var o,A,c,u,d,p=String,g="length",v=255,y="charCodeAt",k="slice",x="replace";for(a[k](-2),a=a[k](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),c=[],u=0,d=(a+=o="uuuuu"[k](a[g]%5||5))[g];d>u;u+=5)A=52200625*(a[y](u)-33)+614125*(a[y](u+1)-33)+7225*(a[y](u+2)-33)+85*(a[y](u+3)-33)+(a[y](u+4)-33),c.push(v&A>>24,v&A>>16,v&A>>8,v&A);return function(I,N){for(var U=N;U>0;U--)I.pop()}(c,o[g]),p.fromCharCode.apply(p,c)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var A="",c=0;c<a.length;c+=2)A+=String.fromCharCode("0x"+(a[c]+a[c+1]));return A},i=function(a){for(var o=new Uint8Array(a.length),A=a.length;A--;)o[A]=a.charCodeAt(A);return(o=_y(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,o){var A=0,c=a||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),A=0;A<o.length;A+=1)switch(o[A]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=s(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[A]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Jt.API),function(t){t.loadFile=function(e,r,n){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(A,c,u){var d=new XMLHttpRequest,p=0,g=function(v){var y=v.length,k=[],x=String.fromCharCode;for(p=0;p<y;p+=1)k.push(x(255&v.charCodeAt(p)));return k.join("")};if(d.open("GET",A,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(g(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return g(d.responseText)}(s,i,a)}catch{}return o}(e,r,n)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile}(Jt.API),function(t){function e(){return(sr.html2canvas?Promise.resolve(sr.html2canvas):Hg(()=>Promise.resolve().then(()=>nJ),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(sr.DOMPurify?Promise.resolve(sr.DOMPurify):Hg(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var A=Xr(o);return A==="undefined"?"undefined":A==="string"||o instanceof String?"string":A==="number"||o instanceof Number?"number":A==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":A==="object"?"object":"unknown"},s=function(o,A){var c=document.createElement(o);for(var u in A.className&&(c.className=A.className),A.innerHTML&&A.dompurify&&(c.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)c.style[u]=A.style[u];return c},i=function o(A,c){for(var u=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),d=A.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||u.appendChild(o(d,c));return A.nodeType===1&&(A.nodeName==="CANVAS"?(u.width=A.width,u.height=A.height,u.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(u.value=A.value),u.addEventListener("load",function(){u.scrollTop=A.scrollTop,u.scrollLeft=A.scrollLeft},!0)),u},a=function o(A){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return(u=u.setProgress(1,o,1,[o])).set(A)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,A){return o.__proto__=A||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,A){return this.then(function(){switch(A=A||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),A){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(A){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,A(this.prop.container,c)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(A){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var v=u[g],y=v.src.find(function(k){return k.format==="truetype"});y&&c.addFont(y.url,v.ref.name,v.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),A(this.prop.container,p)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,A,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,A):this.outputPdf(o,A)},a.prototype.outputPdf=function(o,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,A)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var A=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(A)})},a.prototype.get=function(o,A){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return A?A(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function A(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||Jt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:A(o.inner.width,o.k),height:A(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,A,c,u){return o!=null&&(this.progress.val=o),A!=null&&(this.progress.state=A),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,A,c,u){return this.setProgress(o?this.progress.val+o:null,A||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(o,A){var c=this;return this.thenCore(o,A,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,u),p}).then(u,d).then(function(p){return c.updateProgress(1),p})})},a.prototype.thenCore=function(o,A,c){c=c||Promise.prototype.then;var u=this;o&&(o=o.bind(u)),A&&(A=A.bind(u));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:a.convert(Object.assign({},u),Promise.prototype),p=c.call(d,o,A);return a.convert(p,u.__proto__)},a.prototype.thenExternal=function(o,A){return Promise.prototype.then.call(this,o,A)},a.prototype.thenList=function(o){var A=this;return o.forEach(function(c){A=A.thenCore(c)}),A},a.prototype.catch=function(o){o&&(o=o.bind(this));var A=Promise.prototype.catch.call(this,o);return a.convert(A,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Jt.getPageSize=function(o,A,c){if(Xr(o)==="object"){var u=o;o=u.orientation,A=u.unit||A,c=u.format||c}A=A||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+A}var v,y=0,k=0;if(g.hasOwnProperty(p))y=g[p][1]/d,k=g[p][0]/d;else try{y=c[1],k=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",k>y&&(v=k,k=y,y=v);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>k&&(v=k,k=y,y=v)}return{width:k,height:y,unit:A,k:d,orientation:o}},t.html=function(o,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(xv):null;var c=new a(A);return A.worker?c:c.from(o).doCallback()}}(Jt.API),Jt.API.addJS=function(t){var e,r,n=t;return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(e+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+n+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){e!==void 0&&r!==void 0&&this.internal.out("/Names <</JavaScript "+e+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=n.exec(a);if(o!=null){var A=o[1];r.internal.newObjectDeferredBegin(A,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var d=r.internal.newObject();u.push(d);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var a={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var A=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(Jt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,a,o){var A,c=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,A=function(d){for(var p,g=256*d.charCodeAt(4)+d.charCodeAt(5),v=d.length,y={width:0,height:0,numcomponents:1},k=4;k<v;k+=2){if(k+=g,e.indexOf(d.charCodeAt(k+1))!==-1){p=256*d.charCodeAt(k+5)+d.charCodeAt(k+6),y={width:256*d.charCodeAt(k+7)+d.charCodeAt(k+8),height:p,numcomponents:d.charCodeAt(k+9)};break}g=256*d.charCodeAt(k+2)+d.charCodeAt(k+3)}return y}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),A.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:A.width,height:A.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:s}}return u}}(Jt.API),Jt.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var s,i=lY(t,{checkCrc:!0}),a=i.width,o=i.height,A=i.channels,c=i.palette,u=i.depth;s=c&&A===1?function(_){for(var B=_.width,j=_.height,S=_.data,L=_.palette,T=_.depth,Z=!1,ye=[],_e=[],Ce=void 0,ie=!1,we=0,Pe=0;Pe<L.length;Pe++){var Se=XE(L[Pe],4),M=Se[0],H=Se[1],K=Se[2],ee=Se[3];ye.push(M,H,K),ee!=null&&(ee===0?(we++,_e.length<1&&_e.push(Pe)):ee<255&&(ie=!0))}if(ie||we>1){Z=!0,_e=void 0;var se=B*j;Ce=new Uint8Array(se);for(var ue=new DataView(S.buffer),Ae=0;Ae<se;Ae++){var pe=yv(ue,Ae,T),Ne=XE(L[pe],4)[3];Ce[Ae]=Ne}}else we===0&&(_e=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Z?8:void 0,colorBytes:S,alphaBytes:Ce,needSMask:Z,palette:ye,mask:_e}}(i):A===2||A===4?function(_){for(var B=_.data,j=_.width,S=_.height,L=_.channels,T=_.depth,Z=L===2?"DeviceGray":"DeviceRGB",ye=L-1,_e=j*S,Ce=ye,ie=_e*Ce,we=1*_e,Pe=Math.ceil(ie*T/8),Se=Math.ceil(we*T/8),M=new Uint8Array(Pe),H=new Uint8Array(Se),K=new DataView(B.buffer),ee=new DataView(M.buffer),se=new DataView(H.buffer),ue=!1,Ae=0;Ae<_e;Ae++){for(var pe=Ae*L,Ne=0;Ne<Ce;Ne++)ek(ee,yv(K,pe+Ne,T),Ae*Ce+Ne,T);var Oe=yv(K,pe+Ce,T);Oe<(1<<T)-1&&(ue=!0),ek(se,Oe,1*Ae,T)}return{colorSpace:Z,colorsPerPixel:ye,sMaskBitsPerComponent:ue?T:void 0,colorBytes:M,alphaBytes:H,needSMask:ue}}(i):function(_){var B=_.data,j=_.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:j,colorsPerPixel:j==="DeviceGray"?1:3,colorBytes:B instanceof Uint16Array?function(S){for(var L=S.length,T=new Uint8Array(2*L),Z=new DataView(T.buffer,T.byteOffset,T.byteLength),ye=0;ye<L;ye++)Z.setUint16(2*ye,S[ye],!1);return T}(B):B,needSMask:!1}}(i);var d,p,g,v=s,y=v.colorSpace,k=v.colorsPerPixel,x=v.sMaskBitsPerComponent,I=v.colorBytes,N=v.alphaBytes,U=v.needSMask,D=v.palette,P=v.mask,E=null;return n!==Jt.API.image_compression.NONE&&typeof _y=="function"?(E=function(_){var B;switch(_){case Jt.API.image_compression.FAST:B=11;break;case Jt.API.image_compression.MEDIUM:B=13;break;case Jt.API.image_compression.SLOW:B=14;break;default:B=12}return B}(n),d=this.decode.FLATE_DECODE,p="/Predictor ".concat(E," /Colors ").concat(k," /BitsPerComponent ").concat(u," /Columns ").concat(a),t=W4(I,Math.ceil(a*k*u/8),k,u,n),U&&(g=W4(N,Math.ceil(a*x/8),1,x,n))):(d=void 0,p=void 0,t=I,U&&(g=N)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:r,data:t,index:e,filter:d,decodeParameters:p,transparency:P,palette:D,sMask:g,predictor:E,width:a,height:o,bitsPerComponent:u,sMaskBitsPerComponent:x,colorSpace:y}}},function(t){t.processGIF89A=function(e,r,n,s){var i=new NY(e),a=i.width,o=i.height,A=[];i.decodeAndBlitFrameRGBA(0,A);var c={data:A,width:a,height:o},u=new bv(100).encode(c,100);return t.processJPEG.call(this,u,r,n,s)},t.processGIF87A=t.processGIF89A}(Jt.API),$a.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$a.prototype.parseBGR=function(){this.pos=this.offset;var t="bit"+this.bitPP,e=this.width*this.height*4;if(e>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(e);try{this[t]()}catch(r){ln.log("bit decode error:"+r)}},$a.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var A=this.palette[i>>7-o&1];this.data[a+4*o]=A.blue,this.data[a+4*o+1]=A.green,this.data[a+4*o+2]=A.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},$a.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,o=i>>4,A=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[A],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},$a.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},$a.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,A=(i>>10&e)/e*255|0,c=i>>15?255:0,u=n*this.width*4+4*s;this.data[u]=A,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=t}},$a.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,A=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=A,this.data[u+2]=o,this.data[u+3]=255}this.pos+=t}},$a.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},$a.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=a}},$a.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var i=new $a(e,!1),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new bv(100).encode(A,100);return t.processJPEG.call(this,c,r,n,s)}}(Jt.API),rk.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var i=new rk(e),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new bv(100).encode(A,100);return t.processJPEG.call(this,c,r,n,s)}}(Jt.API),Jt.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,A=0,c=0;c<s;c+=4){var u=n[c],d=n[c+1],p=n[c+2],g=n[c+3];i[o++]=u,i[o++]=d,i[o++]=p,a[A++]=g}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:v,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Jt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Mu=Jt.API,kg=Mu.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,A=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,p=0,g=t.length,v=0,y=o[0]||A,k=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?k.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(p=d&&Xr(c[n])==="object"&&!isNaN(parseInt(c[n][v],10))?c[n][v]/u:0,k.push((o[n]||y)/A+p)),v=n;return k},G4=Mu.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Mu.processArabic&&(t=Mu.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:kg.apply(this,arguments).reduce(function(i,a){return i+a},0)},$4=function(t,e,r,n){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<r;)o+=e[i],i++;s.push(t.slice(0,i));var A=i;for(o=0;i!==a;)o+e[i]>n&&(s.push(t.slice(A,i)),o=0,A=i),o+=e[i],i++;return A!==i&&s.push(t.slice(A,i)),s},q4=function(t,e,r){r||(r={});var n,s,i,a,o,A,c,u=[],d=[u],p=r.textIndent||0,g=0,v=0,y=t.split(" "),k=kg.apply(this,[" ",r])[0];if(A=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var x=Array(A).join(" "),I=[];y.map(function(U){(U=U.split(/\s*\n/)).length>1?I=I.concat(U.map(function(D,P){return(P&&D.length?`
`:"")+D})):I.push(U[0])}),y=I,A=G4.apply(this,[x,r])}for(i=0,a=y.length;i<a;i++){var N=0;if(n=y[i],A&&n[0]==`
`&&(n=n.substr(1),N=1),p+g+(v=(s=kg.apply(this,[n,r])).reduce(function(U,D){return U+D},0))>e||N){if(v>e){for(o=$4.apply(this,[n,s,e-(p+g),e]),u.push(o.shift()),u=[o.pop()];o.length;)d.push([o.shift()]);v=s.slice(n.length-(u[0]?u[0].length:0)).reduce(function(U,D){return U+D},0)}else u=[n];d.push(u),p=v+A,g=k}else u.push(n),p+=g+v,g=k}return c=A?function(U,D){return(D?x:"")+U.join(" ")}:function(U){return U.join(" ")},d.map(c)},Mu.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),p="Unicode";return d.metadata[p]?{widths:d.metadata[p].widths||{0:1},kerning:d.metadata[p].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var o,A,c=[];for(o=0,A=n.length;o<A;o++)c=c.concat(q4.apply(this,[n[o],a,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},s={},i=0;i<16;i++)n[r[i]]=e[i],s[e[i]]=r[i];var a=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var g,v,y,k,x=["{"];for(var I in p){if(g=p[I],isNaN(parseInt(I,10))?v="'"+I+"'":(I=parseInt(I,10),v=(v=a(I).slice(2)).slice(0,-1)+s[v.slice(-1)]),typeof g=="number")g<0?(y=a(g).slice(3),k="-"):(y=a(g).slice(2),k=""),y=k+y.slice(0,-1)+s[y.slice(-1)];else{if(Xr(g)!=="object")throw new Error("Don't know what to do with value type "+Xr(g)+".");y=o(g)}x.push(v+y)}return x.push("}"),x.join("")},A=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,v,y,k,x={},I=1,N=x,U=[],D="",P="",E=p.length-1,_=1;_<E;_+=1)(k=p[_])=="'"?g?(y=g.join(""),g=void 0):g=[]:g?g.push(k):k=="{"?(U.push([N,y]),N={},y=void 0):k=="}"?((v=U.pop())[0][v[1]]=N,y=void 0,N=v[0]):k=="-"?I=-1:y===void 0?n.hasOwnProperty(k)?(D+=n[k],y=parseInt(D,16)*I,I=1,D=""):D+=k:n.hasOwnProperty(k)?(P+=n[k],N[y]=parseInt(P,16)*I,I=1,y=void 0,P=""):P+=k;return x},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var g=p.font,v=d.Unicode[g.postScriptName];v&&(g.metadata.Unicode={},g.metadata.Unicode.widths=v.widths,g.metadata.Unicode.kerning=v.kerning);var y=u.Unicode[g.postScriptName];y&&(g.metadata.Unicode.encoding=y,g.encoding=y.codePages[0])}])}(Jt.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Am(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])}(Jt),Jt.API.addSvgAsImage=function(t,e,r,n,s,i,a,o){if(isNaN(e)||isNaN(r))throw ln.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw ln.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=n,A.height=s;var c=A.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,A.width,A.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(sr.canvg?Promise.resolve(sr.canvg):Hg(()=>import("./index.es-Bw7SwC6a.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(c,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(u)}).then(function(){d.addImage(A.toDataURL("image/jpeg",1),e,r,n,s,a,o)})},Jt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},Jt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),A=[],c=0,u=0,d=0;function p(v,y){var k,x=!1;for(k=0;k<v.length;k+=1)v[k]===y&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(d=0;d<g;d+=1)r[o[d]].value=r[o[d]].defaultValue,r[o[d]].explicitSet=!1}if(Xr(t)==="object"){for(s in t)if(i=t[s],p(o,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&p(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")A.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(n=!1);n===!0&&A.push([i[c][0]-1,i[c][1]-1].join(" "))}r[s].value="["+A.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,y=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?y.push("/"+v+" /"+r[v].value):y.push("/"+v+" "+r[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},Jt.API.addMetadata=function(t,e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:t,namespaceUri:e??"http://jspdf.default.namespaceuri/",rawXml:typeof e=="boolean"&&e},this.internal.events.subscribe("putCatalog",TY),this.internal.events.subscribe("postPutResources",FY)),this},function(t){var e=t.API,r=e.pdfEscape16=function(i,a){for(var o,A=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,p=i.length;d<p;++d){if(o=a.metadata.characterToGlyph(i.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(d),A.indexOf(o)==-1&&(A.push(o),A.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},n=function(i){var a,o,A,c,u,d,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],d=0,p=(o=Object.keys(i).sort(function(g,v){return g-v})).length;d<p;d++)a=o[d],A.length>=100&&(u+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),A.push("<"+a+"><"+c+">"));return A.length&&(u+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",v=0;v<p.length;v++)g+=String.fromCharCode(p[v]);var y=c();u({data:g,addLength1:!0,objectId:y}),A("endobj");var k=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:k}),A("endobj");var x=c();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+qu(o.fontName)),A("/FontFile2 "+y+" 0 R"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/Flags "+o.metadata.flags),A("/StemV "+o.metadata.stemV),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A(">>"),A("endobj");var I=c();A("<<"),A("/Type /Font"),A("/BaseFont /"+qu(o.fontName)),A("/FontDescriptor "+x+" 0 R"),A("/W "+t.API.PDFObject.convert(d)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+o.encoding+")"),A(">>"),A(">>"),A("endobj"),o.objectNumber=c(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+k+" 0 R"),A("/BaseFont /"+qu(o.fontName)),A("/Encoding /"+o.encoding),A("/DescendantFonts ["+I+" 0 R]"),A(">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,p="",g=0;g<d.length;g++)p+=String.fromCharCode(d[g]);var v=c();u({data:p,addLength1:!0,objectId:v}),A("endobj");var y=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),A("endobj");var k=c();A("<<"),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A("/StemV "+o.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+v+" 0 R"),A("/Flags 96"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/FontName /"+qu(o.fontName)),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A(">>"),A("endobj"),o.objectNumber=c();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+qu(o.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",A=i.x,c=i.y,u=i.options||{},d=i.mutex||{},p=d.pdfEscape,g=d.activeFontKey,v=d.fonts,y=g,k="",x=0,I="",N=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:o,x:A,y:c,options:u,mutex:d};for(I=o,y=g,Array.isArray(o)&&(I=o[0]),x=0;x<I.length;x+=1)v[y].metadata.hasOwnProperty("cmap")&&(a=v[y].metadata.cmap.unicode.codeMap[I[x].charCodeAt(0)]),a||I[x].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?k+=I[x]:k+="";var U="";return parseInt(y.slice(1))<14||N==="WinAnsiEncoding"?U=p(k,y).split("").map(function(D){return D.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(U=r(k,v[y])),d.isHex=!0,{text:U,x:A,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],A={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},A,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},A,{text:a[c]})).text);i.text=o}else i.text=s(Object.assign({},A,{text:a})).text}])}(Jt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Jt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,a,o,A,c,u,d=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,N=0;this.__bidiEngine__={};var U=function(S){var L=S.charCodeAt(),T=L>>8,Z=y[T];return Z!==void 0?d[256*Z+(255&L)]:T===252||T===253?"AL":x.test(T)?"L":T===8?"R":"N"},D=function(S){for(var L,T=0;T<S.length;T++){if((L=U(S.charAt(T)))==="L")return!1;if(L==="R")return!0}return!1},P=function(S,L,T,Z){var ye,_e,Ce,ie,we=L[Z];switch(we){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"N":case"AN":break;case"EN":I&&(we="AN");break;case"AL":I=!0,we="R";break;case"WS":case"BN":we="N";break;case"CS":Z<1||Z+1>=L.length||(ye=T[Z-1])!=="EN"&&ye!=="AN"||(_e=L[Z+1])!=="EN"&&_e!=="AN"?we="N":I&&(_e="AN"),we=_e===ye?_e:"N";break;case"ES":we=(ye=Z>0?T[Z-1]:"B")==="EN"&&Z+1<L.length&&L[Z+1]==="EN"?"EN":"N";break;case"ET":if(Z>0&&T[Z-1]==="EN"){we="EN";break}if(I){we="N";break}for(Ce=Z+1,ie=L.length;Ce<ie&&L[Ce]==="ET";)Ce++;we=Ce<ie&&L[Ce]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(ie=L.length,Ce=Z+1;Ce<ie&&L[Ce]==="NSM";)Ce++;if(Ce<ie){var Pe=S[Z],Se=Pe>=1425&&Pe<=2303||Pe===64286;if(ye=L[Ce],Se&&(ye==="R"||ye==="AL")){we="R";break}}}we=Z<1||(ye=L[Z-1])==="B"?"N":T[Z-1];break;case"B":I=!1,s=!0,we=N;break;case"S":i=!0,we="N"}return we},E=function(S,L,T){var Z=S.split("");return T&&_(Z,T,{hiLevel:N}),Z.reverse(),L&&L.reverse(),Z.join("")},_=function(S,L,T){var Z,ye,_e,Ce,ie,we=-1,Pe=S.length,Se=0,M=[],H=N?g:p,K=[];for(I=!1,s=!1,i=!1,ye=0;ye<Pe;ye++)K[ye]=U(S[ye]);for(_e=0;_e<Pe;_e++){if(ie=Se,M[_e]=P(S,K,M,_e),Z=240&(Se=H[ie][v[M[_e]]]),Se&=15,L[_e]=Ce=H[Se][5],Z>0)if(Z===16){for(ye=we;ye<_e;ye++)L[ye]=1;we=-1}else we=-1;if(H[Se][6])we===-1&&(we=_e);else if(we>-1){for(ye=we;ye<_e;ye++)L[ye]=Ce;we=-1}K[_e]==="B"&&(L[_e]=0),T.hiLevel|=Ce}i&&function(ee,se,ue){for(var Ae=0;Ae<ue;Ae++)if(ee[Ae]==="S"){se[Ae]=N;for(var pe=Ae-1;pe>=0&&ee[pe]==="WS";pe--)se[pe]=N}}(K,L,Pe)},B=function(S,L,T,Z,ye){if(!(ye.hiLevel<S)){if(S===1&&N===1&&!s)return L.reverse(),void(T&&T.reverse());for(var _e,Ce,ie,we,Pe=L.length,Se=0;Se<Pe;){if(Z[Se]>=S){for(ie=Se+1;ie<Pe&&Z[ie]>=S;)ie++;for(we=Se,Ce=ie-1;we<Ce;we++,Ce--)_e=L[we],L[we]=L[Ce],L[Ce]=_e,T&&(_e=T[we],T[we]=T[Ce],T[Ce]=_e);Se=ie}Se++}}},j=function(S,L,T){var Z=S.split(""),ye={hiLevel:N};return T||(T=[]),_(Z,T,ye),function(_e,Ce,ie){if(ie.hiLevel!==0&&u)for(var we,Pe=0;Pe<_e.length;Pe++)Ce[Pe]===1&&(we=k.indexOf(_e[Pe]))>=0&&(_e[Pe]=k[we+1])}(Z,T,ye),B(2,Z,L,T,ye),B(1,Z,L,T,ye),Z.join("")};return this.__bidiEngine__.doBidiReorder=function(S,L,T){if(function(ye,_e){if(_e)for(var Ce=0;Ce<ye.length;Ce++)_e[Ce]=Ce;o===void 0&&(o=D(ye)),c===void 0&&(c=D(ye))}(S,L),a||!A||c)if(a&&A&&o^c)N=o?1:0,S=E(S,L,T);else if(!a&&A&&c)N=o?1:0,S=j(S,L,T),S=E(S,L);else if(!a||o||A||c){if(a&&!A&&o^c)S=E(S,L),o?(N=0,S=j(S,L,T)):(N=1,S=j(S,L,T),S=E(S,L));else if(a&&o&&!A&&c)N=1,S=j(S,L,T),S=E(S,L);else if(!a&&!A&&o^c){var Z=u;o?(N=1,S=j(S,L,T),N=0,u=!1,S=j(S,L,T),u=Z):(N=0,S=j(S,L,T),S=E(S,L),N=1,u=!1,S=j(S,L,T),u=Z,S=E(S,L))}}else N=0,S=j(S,L,T);else N=o?1:0,S=j(S,L,T);return S},this.__bidiEngine__.setOptions=function(S){S&&(a=S.isInputVisual,A=S.isOutputVisual,o=S.isInputRtl,c=S.isOutputRtl,u=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([r.doBidiReorder(s[o])]);n.text=a}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(Jt),Jt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new ec(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new $Y(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new UY(this.contents),this.head=new jY(this),this.name=new MY(this),this.cmap=new u6(this),this.toUnicode={},this.hhea=new QY(this),this.maxp=new OY(this),this.hmtx=new HY(this),this.post=new PY(this),this.os2=new RY(this),this.loca=new GY(this),this.glyf=new VY(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,A,c;for(c=[],a=0,o=(A=this.bbox).length;a<o;a++)e=A[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var oo,ec=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,a,o,A;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^A)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*a+256*o+A},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),UY=function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,a,o,A,c,u,d,p,g,v,y;for(y in g=Object.keys(r).length,A=Math.log(2),d=16*Math.floor(Math.log(g)/A),a=Math.floor(d/A),u=16*g-d,(s=new ec).writeInt(this.scalarType),s.writeShort(g),s.writeShort(d),s.writeShort(a),s.writeShort(u),i=16*g,c=s.pos+i,o=null,v=[],r)for(p=r[y],s.writeString(y),s.writeInt(t(p)),s.writeInt(c),s.writeInt(p.length),v=v.concat(p),y==="head"&&(o=c),c+=p.length;c%4;)v.push(0),c++;return s.write(v),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,a;for(r=d6.call(r);r.length%4;)r.push(0);for(i=new ec(r),s=0,n=0,a=r.length;n<a;n=n+=4)s+=i.readUInt32();return 4294967295&s},e}(),LY={}.hasOwnProperty,Po=function(t,e){for(var r in e)LY.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};oo=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var jY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Po(t,oo),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new ec).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),nk=function(){function t(e,r){var n,s,i,a,o,A,c,u,d,p,g,v,y,k,x,I,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(g=e.readUInt16(),p=g/2,e.pos+=6,i=function(){var U,D;for(D=[],A=U=0;0<=p?U<p:U>p;A=0<=p?++U:--U)D.push(e.readUInt16());return D}(),e.pos+=2,y=function(){var U,D;for(D=[],A=U=0;0<=p?U<p:U>p;A=0<=p?++U:--U)D.push(e.readUInt16());return D}(),c=function(){var U,D;for(D=[],A=U=0;0<=p?U<p:U>p;A=0<=p?++U:--U)D.push(e.readUInt16());return D}(),u=function(){var U,D;for(D=[],A=U=0;0<=p?U<p:U>p;A=0<=p?++U:--U)D.push(e.readUInt16());return D}(),s=(this.length-e.pos+this.offset)/2,o=function(){var U,D;for(D=[],A=U=0;0<=s?U<s:U>s;A=0<=s?++U:--U)D.push(e.readUInt16());return D}(),A=x=0,N=i.length;x<N;A=++x)for(k=i[A],n=I=v=y[A];v<=k?I<=k:I>=k;n=v<=k?++I:--I)u[A]===0?a=n+c[A]:(a=o[u[A]/2+(n-v)-(p-A)]||0)!==0&&(a+=c[A]),this.codeMap[n]=65535&a}e.pos=d}return t.encode=function(e,r){var n,s,i,a,o,A,c,u,d,p,g,v,y,k,x,I,N,U,D,P,E,_,B,j,S,L,T,Z,ye,_e,Ce,ie,we,Pe,Se,M,H,K,ee,se,ue,Ae,pe,Ne,Oe,nt;switch(Z=new ec,a=Object.keys(e).sort(function(ke,ce){return ke-ce}),r){case"macroman":for(y=0,k=function(){var ke=[];for(v=0;v<256;++v)ke.push(0);return ke}(),I={0:0},i={},ye=0,we=a.length;ye<we;ye++)I[pe=e[s=a[ye]]]==null&&(I[pe]=++y),i[s]={old:e[s],new:I[e[s]]},k[s]=I[e[s]];return Z.writeUInt16(1),Z.writeUInt16(0),Z.writeUInt32(12),Z.writeUInt16(0),Z.writeUInt16(262),Z.writeUInt16(0),Z.write(k),{charMap:i,subtable:Z.data,maxGlyphID:y+1};case"unicode":for(L=[],d=[],N=0,I={},n={},x=c=null,_e=0,Pe=a.length;_e<Pe;_e++)I[D=e[s=a[_e]]]==null&&(I[D]=++N),n[s]={old:D,new:I[D]},o=I[D]-s,x!=null&&o===c||(x&&d.push(x),L.push(s),c=o),x=s;for(x&&d.push(x),d.push(65535),L.push(65535),j=2*(B=L.length),_=2*Math.pow(Math.log(B)/Math.LN2,2),p=Math.log(_/2)/Math.LN2,E=2*B-_,A=[],P=[],g=[],v=Ce=0,Se=L.length;Ce<Se;v=++Ce){if(S=L[v],u=d[v],S===65535){A.push(0),P.push(0);break}if(S-(T=n[S].new)>=32768)for(A.push(0),P.push(2*(g.length+B-v)),s=ie=S;S<=u?ie<=u:ie>=u;s=S<=u?++ie:--ie)g.push(n[s].new);else A.push(T-S),P.push(0)}for(Z.writeUInt16(3),Z.writeUInt16(1),Z.writeUInt32(12),Z.writeUInt16(4),Z.writeUInt16(16+8*B+2*g.length),Z.writeUInt16(0),Z.writeUInt16(j),Z.writeUInt16(_),Z.writeUInt16(p),Z.writeUInt16(E),ue=0,M=d.length;ue<M;ue++)s=d[ue],Z.writeUInt16(s);for(Z.writeUInt16(0),Ae=0,H=L.length;Ae<H;Ae++)s=L[Ae],Z.writeUInt16(s);for(Ne=0,K=A.length;Ne<K;Ne++)o=A[Ne],Z.writeUInt16(o);for(Oe=0,ee=P.length;Oe<ee;Oe++)U=P[Oe],Z.writeUInt16(U);for(nt=0,se=g.length;nt<se;nt++)y=g[nt],Z.writeUInt16(y);return{charMap:n,subtable:Z.data,maxGlyphID:N+1}}},t}(),u6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Po(t,oo),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r=new nk(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,s;return r==null&&(r="macroman"),n=nk.encode(e,r),(s=new ec).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},t}(),QY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Po(t,oo),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),RY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Po(t,oo),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),PY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Po(t,oo),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)r=e.readByte(),s.push(this.names.push(e.readString(r)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,A;for(A=[],i=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;i=0<=o?++a:--a)A.push(e.readUInt32());return A}).call(this)}},t}(),DY=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},MY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Po(t,oo),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,s,i,a,o,A,c,u,d,p;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(A={},i=u=0,d=n.length;u<d;i=++u)s=n[i],e.pos=s.offset,c=e.readString(s.length),a=new DY(c,s),A[p=s.nameID]==null&&(A[p]=[]),A[s.nameID].push(a);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},t}(),OY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Po(t,oo),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),HY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Po(t,oo),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,s,i,a,o,A;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)u.push(e.readInt16());return u}(),this.widths=(function(){var c,u,d,p;for(p=[],c=0,u=(d=this.metrics).length;c<u;c++)i=d[c],p.push(i.advance);return p}).call(this),n=this.widths[this.widths.length-1],A=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)A.push(this.widths.push(n));return A},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),d6=[].slice,VY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Po(t,oo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,s,i,a,o,A,c,u,d;return e in this.cache?this.cache[e]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(e),(s=i.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,a=(o=new ec(r.read(s))).readShort(),c=o.readShort(),d=o.readShort(),A=o.readShort(),u=o.readShort(),this.cache[e]=a===-1?new zY(o,c,d,A,u):new KY(o,a,c,d,A,u),this.cache[e]))},t.prototype.encode=function(e,r,n){var s,i,a,o,A;for(a=[],i=[],o=0,A=r.length;o<A;o++)s=e[r[o]],i.push(a.length),s&&(a=a.concat(s.encode(n)));return i.push(a.length),{table:a,offsets:i}},t}(),KY=function(){function t(e,r,n,s,i,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),zY=function(){function t(e,r,n,s,i){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new ec(d6.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),GY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Po(t,oo),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=4)i.push(e.readUInt32());return i}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<n.length;++a)if(n[a]=s,i<r.length&&r[i]==a){++i,n[a]=s;var o=this.offsets[a],A=this.offsets[a+1]-o;A>0&&(s+=A)}for(var c=new Array(4*n.length),u=0;u<n.length;++u)c[4*u+3]=255&n[u],c[4*u+2]=(65280&n[u])>>8,c[4*u+1]=(16711680&n[u])>>16,c[4*u]=(4278190080&n[u])>>24;return c},t}(),$Y=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,a,o,A;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in A=this.glyphsFor(r))n=A[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,a,o,A,c,u,d,p,g,v,y,k,x;for(s in n=u6.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),g={0:0},x=n.charMap)g[(A=x[s]).old]=A.new;for(v in p=n.maxGlyphID,a)v in g||(g[v]=p++);return u=function(I){var N,U;for(N in U={},I)U[I[N]]=N;return U}(g),d=Object.keys(u).sort(function(I,N){return I-N}),y=function(){var I,N,U;for(U=[],I=0,N=d.length;I<N;I++)o=d[I],U.push(u[o]);return U}(),i=this.font.glyf.encode(a,y,g),c=this.font.loca.encode(i.offsets,y),k={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t}();Jt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,a;if(Array.isArray(r))return"["+function(){var o,A,c;for(c=[],o=0,A=r.length;o<A;o++)n=r[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)a=r[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+r},e}();const Ca=t=>{if(!t)return 0;const[e,r]=t.split(":").map(Number);return e*60+r},Sg=t=>{let e=Math.floor(t/60),r=t%60;return e>=24&&(e-=24),e<0&&(e+=24),`${String(e).padStart(2,"0")}:${String(r).padStart(2,"0")}`},qY=()=>{var de,Te;const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:i}=Ki(),[a,o]=z.useState("teachers"),[A,c]=z.useState(!1),[u,d]=z.useState(null),[p,g]=z.useState({}),[v,y]=z.useState({}),[k,x]=z.useState({}),[I,N]=z.useState({}),[U,D]=z.useState("preset_normal"),[P,E]=z.useState([]),[_,B]=z.useState(!1),[j,S]=z.useState(""),[L,T]=z.useState(et.First),[Z,ye]=z.useState(!1),[_e,Ce]=z.useState(new Date().toISOString().split("T")[0]),ie=z.useRef(null),[we,Pe]=z.useState(null);z.useEffect(()=>{if(s.bellPresets&&s.bellPresets.length>0){const q=s.bellPresets.find(le=>le.id===U);if(q){E(q.bells);return}}E(Mm)},[U,s.bellPresets]);const Se=q=>{d(q||null),a==="teachers"?g(q?e.find(le=>le.id===q)??{}:{subjectIds:[],unavailableDates:[],shifts:[et.First,et.Second],telegramChatId:""}):a==="subjects"?y(q?t.find(le=>le.id===q)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):a==="classes"?x(q?r.find(le=>le.id===q)??{}:{shift:et.First,studentsCount:25,excludeFromReports:!1}):a==="rooms"&&N(q?n.find(le=>le.id===q)??{}:{capacity:30,type:""}),c(!0)},M=async()=>{const q={teachers:{list:e,form:p,key:"teachers"},subjects:{list:t,form:v,key:"subjects"},classes:{list:r,form:k,key:"classes"},rooms:{list:n,form:I,key:"rooms"}};if(a==="bells"||!(a in q))return;const le=q[a],{list:oe,form:he,key:Le}=le;if(!he.name)return;let Re=[...oe];if(u)Re=Re.map($e=>$e.id===u?{...$e,...he}:$e);else{const $e=oe.reduce((St,ft)=>Math.max(St,ft.order||0),0),Ve={...he,id:Gs(),order:$e+1};Re.push(Ve)}await i({[Le]:Re}),c(!1)},H=async q=>{if(window.confirm(" ?"))switch(a){case"teachers":await i({teachers:e.filter(le=>le.id!==q)});break;case"subjects":await i({subjects:t.filter(le=>le.id!==q)});break;case"classes":await i({classes:r.filter(le=>le.id!==q)});break;case"rooms":await i({rooms:n.filter(le=>le.id!==q)});break}},K=(q,le)=>{Pe(le),q.dataTransfer.effectAllowed="move"},ee=q=>{q.preventDefault()},se=async(q,le)=>{if(we===null||we===le)return;const oe=he=>{const Le=[...he],[Re]=Le.splice(we,1);return Le.splice(le,0,Re),Le.map(($e,Ve)=>({...$e,order:Ve}))};switch(a){case"teachers":{await i({teachers:oe(e)});break}case"subjects":{await i({subjects:oe(t)});break}case"classes":{await i({classes:oe(r)});break}case"rooms":{await i({rooms:oe(n)});break}}Pe(null)},ue=(q,le,oe,he)=>{let Le=[...P],Re=Le.findIndex(Ve=>Ve.shift===q&&Ve.period===le&&Ve.day==="default");Re===-1&&(Le.push({shift:q,period:le,[oe]:he,start:"00:00",end:"00:00",day:"default"}),Re=Le.length-1);const $e=Le[Re];if(oe==="start"){const Ve=Ca($e.start),ft=Ca($e.end)-Ve,At=Ca(he)+(ft>0?ft:45);Le[Re]={...$e,start:he,end:Sg(At)}}else Le[Re]={...$e,end:he};E(Le)},Ae=(q,le)=>{const oe=[...P],he=oe.findIndex(Le=>Le.shift===q&&Le.period===le&&Le.day==="default");he>=0?oe[he]={...oe[he],cancelled:!oe[he].cancelled}:oe.push({shift:q,period:le,start:"00:00",end:"00:00",day:"default",cancelled:!0}),E(oe)},pe=(q,le)=>{const oe=P.map(he=>{if(he.shift!==q)return he;const Le=Ca(he.start)+le,Re=Ca(he.end)+le;return{...he,start:Sg(Le),end:Sg(Re)}});E(oe)},Ne=(q,le)=>{const oe=P.map(he=>{if(he.shift!==q)return he;const Le=Ca(he.start);return{...he,end:Sg(Le+le)}});E(oe)},Oe=async()=>{let q=[...s.bellPresets||[]];const le=q.findIndex(oe=>oe.id===U);le>=0?q[le]={...q[le],bells:P}:q.push({id:U,name:j||" ",bells:P}),await i({settings:{...s,bellPresets:q}}),alert(" !")},nt=()=>{S(""),B(!0)},ke=()=>{var le;const q=(le=s.bellPresets)==null?void 0:le.find(oe=>oe.id===U);S(((q==null?void 0:q.name)||"")+" ()"),B(!0)},ce=async()=>{if(!j)return;const q=`preset_${Gs()}`,le=[...s.bellPresets||[]];le.push({id:q,name:j,bells:JSON.parse(JSON.stringify(P))}),await i({settings:{...s,bellPresets:le}}),D(q),B(!1)},R=async()=>{var oe;if(U==="preset_normal"){alert("   .");return}if(!window.confirm("   ?"))return;const q=(s.bellPresets||[]).filter(he=>he.id!==U),le=((oe=q[0])==null?void 0:oe.id)||"preset_normal";D(le),await i({settings:{...s,bellPresets:q}})},Ee=async()=>{var q,le;window.confirm(`   "${(le=(q=s.bellPresets)==null?void 0:q.find(oe=>oe.id===U))==null?void 0:le.name}"   ?`)&&(await i({bellSchedule:P}),alert("  !"))},De=()=>{var le;const q=(le=s.bellPresets)==null?void 0:le.find(oe=>oe.id===U);return`
            <div style="font-family: 'Segoe UI', Arial, sans-serif; padding: 10px 40px 20px 40px; background: white; width: 1000px; max-width: 1000px; margin: 0 auto; color: #1e293b; box-sizing: border-box;">
                <div style="text-align: center; margin-bottom: 25px; padding-top: 10px;">
                    <h1 style="font-size: 32px; font-weight: 900; text-transform: uppercase; color: #1e293b; margin: 0 0 5px 0; letter-spacing: -0.5px;">
                         
                    </h1>
                    <p style="font-size: 20px; color: #64748b; font-weight: 600; margin: 0;">
                        : <span style="color: #4f46e5;">${(q==null?void 0:q.name)||""}</span>
                        ${_e?`<br> ${new Date(_e).toLocaleDateString("ru-RU")}`:""}
                    </p>
                    <div style="height: 6px; width: 80px; background: #4f46e5; margin: 15px auto 0; border-radius: 4px;"></div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                    ${[et.First,et.Second].map(oe=>{const he=P.filter(Le=>Le.shift===oe);return`
                            <div style="background: #fff; border: 2px solid #e2e8f0; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);">
                                <div style="background: ${oe===et.First?"#4f46e5":"#7c3aed"}; color: white; padding: 12px; text-align: center; font-weight: 800; font-size: 16px; text-transform: uppercase; letter-spacing: 1px;">
                                    ${oe}
                                </div>
                                <div style="padding: 20px;">
                                    ${Ks[oe].map(Le=>{const Re=he.find($e=>$e.period===Le&&$e.day==="default")||{start:"00:00",end:"00:00",cancelled:!1};return Re.cancelled?`
                                                <div style="display: flex; align-items: center; margin-bottom: 10px; padding: 8px 12px; background-color: #fef2f2; border: 1px solid #fecaca; border-radius: 10px;">
                                                    <div style="width: 40px; height: 40px; line-height: 40px; text-align: center; border-radius: 50%; background: #fee2e2; color: #991b1b; font-weight: bold; margin-right: 15px; font-size: 20px; flex-shrink: 0;">${Le}</div>
                                                    <div style="font-weight: 800; color: #dc2626; text-transform: uppercase; font-size: 13px; letter-spacing: 0.5px;"> </div>
                                                </div>
                                            `:`
                                            <div style="display: flex; align-items: center; margin-bottom: 10px; padding: 8px 12px; background-color: #f8fafc; border: 1px solid #e2e8f0; border-radius: 10px;">
                                                <div style="width: 40px; height: 40px; line-height: 40px; text-align: center; border-radius: 50%; background: #e2e8f0; color: #475569; font-weight: bold; margin-right: 15px; font-size: 20px; flex-shrink: 0;">${Le}</div>
                                                <div style="flex: 1; display: flex; justify-content: space-between; align-items: center; font-weight: bold; font-size: 28px; color: #0f172a; font-variant-numeric: tabular-nums;">
                                                    <span>${Re.start}</span>
                                                    <span style="color: #cbd5e1; font-weight: normal; margin: 0 10px;">&mdash;</span>
                                                    <span>${Re.end}</span>
                                                </div>
                                            </div>
                                        `}).join("")}
                                </div>
                            </div>
                        `}).join("")}
                </div>

                <div style="margin-top: 40px; padding-top: 15px; border-top: 2px solid #e2e8f0; display: flex; justify-content: space-between; align-items: flex-end;">
                    <div style="font-size: 12px; font-weight: bold; color: #64748b;">
                        <div style="text-transform: uppercase; margin-bottom: 4px; letter-spacing: 0.5px;"></div>
                        <div style="color: #0f172a;"> </div>
                    </div>
                    <div style="text-align: right;">
                         <div style="border-bottom: 2px solid #94a3b8; width: 180px; margin-bottom: 4px;"></div>
                         <div style="font-size: 10px; color: #94a3b8; text-transform: uppercase;"></div>
                    </div>
                </div>
            </div>
        `},st=async()=>{var he;if(!ie.current)return;const q=await Zd(ie.current,{scale:2,backgroundColor:"#ffffff"}),le=document.createElement("a");le.href=q.toDataURL("image/png");const oe=(he=s.bellPresets)==null?void 0:he.find(Le=>Le.id===U);le.download=`_${(oe==null?void 0:oe.name)||""}.png`,le.click()},ge=async()=>{var $e;if(!ie.current)return;const q=await Zd(ie.current,{scale:2,backgroundColor:"#ffffff"}),le=q.toDataURL("image/png"),oe=new Jt("p","mm","a4"),he=oe.internal.pageSize.getWidth(),Le=q.height*he/q.width;oe.addImage(le,"PNG",0,0,he,Le);const Re=($e=s.bellPresets)==null?void 0:$e.find(Ve=>Ve.id===U);oe.save(`_${(Re==null?void 0:Re.name)||""}.pdf`)},Be=()=>{var Re;const q=(Re=s.bellPresets)==null?void 0:Re.find($e=>$e.id===U);let le=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 8px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 18pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 16pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #312e81; color: white; border: 2px solid #000; }
                    .lesson-header { font-size: 14pt; font-weight: bold; background-color: #e5e7eb; border: 2px solid #000; }
                    .time-cell { font-size: 16pt; font-weight: bold; background-color: #fff; width: 150px; }
                    .cancelled-cell { font-size: 14pt; font-weight: bold; background-color: #fef2f2; color: #dc2626; text-transform: uppercase; letter-spacing: 0.1em; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 11pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 11pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 15px; }
                </style>
            </head>
            <body>
        `;le+=`
            <table>
                <tr>
                    <td colspan="2" style="border:none"></td>
                    <td colspan="2" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        __________ ..<br>
                        "__" ______ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="4" style="border:none"></td></tr>
            </table>
        `,le+=`
            <table>
                <tr><td colspan="4" class="title-main"> </td></tr>
                ${_e?`<tr><td colspan="4" class="title-sub"> ${new Date(_e).toLocaleDateString("ru-RU")}</td></tr>`:""}
                <tr><td colspan="4" class="title-sub">: ${(q==null?void 0:q.name)||""}</td></tr>
                <tr class="empty-row"><td colspan="4" style="border:none"></td></tr>
                <tr>
                    <th class="lesson-header"></th>
                    <th class="lesson-header"> </th>
                    <th class="lesson-header"> </th>
                    <th class="lesson-header"> </th>
                </tr>
        `,[et.First,et.Second].forEach($e=>{const Ve=$e===et.First?"1- ":"2- ";Ks[$e].forEach((St,ft)=>{const gt=P.find(At=>At.shift===$e&&At.period===St&&At.day==="default")||{start:"00:00",end:"00:00",cancelled:!1};le+=`
                    <tr>
                        ${ft===0?`<td rowspan="${Ks[$e].length}" class="shift-header">${Ve}</td>`:""}
                        <td class="lesson-header">${St}</td>
                        ${gt.cancelled?'<td colspan="2" class="cancelled-cell"> </td>':`<td class="time-cell">${gt.start}</td><td class="time-cell">${gt.end}</td>`}
                    </tr>
                `}),le+='<tr class="empty-row"><td colspan="4" style="border:none"></td></tr>'}),le+=`
                <tr class="empty-row"><td colspan="4" style="border:none"></td></tr>
                <tr>
                    <td colspan="4" class="footer-block">
                        : ${new Date().toLocaleDateString("ru-RU")}  ${new Date().toLocaleTimeString("ru-RU")}
                    </td>
                </tr>
            </table>
            </body>
            </html>
        `;const oe=new Blob([le],{type:"application/vnd.ms-excel"}),he=document.createElement("a");he.href=URL.createObjectURL(oe);const Le=_e?`_${new Date(_e).toLocaleDateString("ru-RU").replace(/\./g,"-")}`:"";he.download=`__${(q==null?void 0:q.name)||""}${Le}.xls`,document.body.appendChild(he),he.click(),document.body.removeChild(he)},ve=({shift:q})=>{const le=Ks[q],oe=P.filter(he=>he.shift===q&&he.day==="default");return l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white text-center bg-gradient-to-r ${q===et.First?"from-indigo-600 to-indigo-700":"from-purple-600 to-purple-700"}`,children:q}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-2 flex justify-center gap-2 border-b border-slate-200 dark:border-slate-600",children:[l.jsx("button",{onClick:()=>pe(q,-5),className:"px-2 py-1 text-xs font-bold text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded shadow-sm border border-slate-200 dark:border-slate-500",children:"-5 "}),l.jsx("button",{onClick:()=>pe(q,5),className:"px-2 py-1 text-xs font-bold text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded shadow-sm border border-slate-200 dark:border-slate-500",children:"+5 "}),l.jsx("div",{className:"w-px h-6 bg-slate-300 dark:bg-slate-600 mx-1"}),l.jsx("button",{onClick:()=>Ne(q,45),className:"px-2 py-1 text-xs font-bold text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded border border-indigo-200 dark:border-indigo-800",children:"45 "}),l.jsx("button",{onClick:()=>Ne(q,40),className:"px-2 py-1 text-xs font-bold text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded border border-indigo-200 dark:border-indigo-800",children:"40 "})]}),l.jsxs("div",{className:"p-4 space-y-2 relative flex-1 overflow-y-auto custom-scrollbar",children:[l.jsx("div",{className:"absolute left-[2.85rem] top-4 bottom-4 w-0.5 bg-slate-200 dark:bg-slate-700 z-0"}),le.map((he,Le)=>{const Re=oe.find(gt=>gt.period===he)||{start:"00:00",end:"00:00",cancelled:!1},$e=Le>0?oe.find(gt=>gt.period===le[Le-1]):null,Ve=$e&&Ca(Re.start)<Ca($e.end),St=Ca(Re.end)<=Ca(Re.start);let ft=0;return $e&&(ft=Ca(Re.start)-Ca($e.end)),l.jsxs(Co.Fragment,{children:[Le>0&&l.jsxs("div",{className:"flex items-center gap-4 relative z-10 my-1",children:[l.jsx("div",{className:"w-12 flex justify-center",children:l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300 dark:bg-slate-500"})}),l.jsxs("div",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1 ${ft<5?"bg-red-100 text-red-600":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:[l.jsx(me,{name:"Coffee",size:10}),ft," "]})]}),l.jsxs("div",{className:`relative z-10 flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${Re.cancelled?"bg-[linear-gradient(45deg,#fef2f2_25%,#fee2e2_25%,#fee2e2_50%,#fef2f2_50%,#fef2f2_75%,#fee2e2_75%,#fee2e2_100%)] bg-[length:20px_20px] border-red-200 dark:border-red-900/50":"bg-white dark:bg-slate-700/30 border-slate-100 dark:border-slate-600 hover:border-indigo-200 dark:hover:border-indigo-500"}`,children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black text-lg shadow-sm border-2 ${Re.cancelled?"bg-white text-red-400 border-red-100":"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-600 dark:to-slate-700 text-slate-600 dark:text-slate-300 border-white dark:border-slate-500"}`,children:he}),Re.cancelled?l.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[l.jsx("span",{className:"text-red-500 font-bold uppercase text-xs tracking-wider bg-white/80 px-2 py-1 rounded",children:" "}),l.jsx("button",{onClick:()=>Ae(q,he),className:"p-2 bg-white text-emerald-600 hover:bg-emerald-50 rounded-lg transition shadow-sm",children:l.jsx(me,{name:"RotateCcw",size:16})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex-1 grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"time",value:Re.start,onChange:gt=>ue(q,he,"start",gt.target.value),className:`w-full bg-slate-50 dark:bg-slate-800 border rounded-lg px-2 py-1 text-center font-mono font-bold text-lg outline-none focus:ring-2 focus:ring-indigo-500 ${Ve?"border-red-500 text-red-600":"border-slate-200 dark:border-slate-600 dark:text-white"}`}),Ve&&l.jsx("div",{className:"absolute -top-2 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),l.jsx("span",{className:"text-slate-300 dark:text-slate-600 font-bold",children:"-"}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"time",value:Re.end,onChange:gt=>ue(q,he,"end",gt.target.value),className:`w-full bg-slate-50 dark:bg-slate-800 border rounded-lg px-2 py-1 text-center font-mono font-bold text-lg outline-none focus:ring-2 focus:ring-indigo-500 ${St?"border-red-500 text-red-600":"border-slate-200 dark:border-slate-600 dark:text-white"}`})})]}),l.jsx("button",{onClick:()=>Ae(q,he),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-slate-50 dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(me,{name:"X",size:16})})]})]})]},he)})]})]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(q=>l.jsxs("button",{onClick:()=>o(q.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${a===q.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(me,{name:q.icon,size:18})," ",q.label]},q.id))}),a!=="bells"&&l.jsxs("button",{onClick:()=>Se(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(me,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[a==="teachers"&&l.jsx(X0,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((q,le)=>l.jsxs("div",{draggable:!0,onDragStart:oe=>K(oe,le),onDragOver:ee,onDrop:oe=>se(oe,le),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(me,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:q.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Se(q.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(me,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>H(q.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(me,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:q.birthDate?`: ${new Date(q.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[q.shifts.includes(et.First)&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),q.shifts.includes(et.Second)&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:q.subjectIds.map(oe=>{const he=t.find(Le=>Le.id===oe);return he?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:he.color,color:"#334155"},children:he.name},oe):null})})]},q.id))}),a==="subjects"&&l.jsx(X0,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((q,le)=>l.jsxs("div",{draggable:!0,onDragStart:oe=>K(oe,le),onDragOver:ee,onDrop:oe=>se(oe,le),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:q.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(me,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:q.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[" ",q.difficulty,"  ",q.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Se(q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(me,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>H(q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(me,{name:"Trash2",size:16})})]})]},q.id))}),a==="classes"&&l.jsx(X0,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((q,le)=>l.jsxs("div",{draggable:!0,onDragStart:oe=>K(oe,le),onDragOver:ee,onDrop:oe=>se(oe,le),className:`bg-white dark:bg-dark-800 p-4 rounded-2xl border ${q.excludeFromReports?"border-dashed border-slate-300 bg-slate-50":"border-slate-100"} dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing`,children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(me,{name:"GripVertical",size:14})}),l.jsx("div",{className:`text-2xl font-black ${q.excludeFromReports?"text-slate-400":"text-slate-800 dark:text-slate-100"} mb-1`,children:q.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[q.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${q.shift===et.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[q.shift===et.First?"I":"II"," "]}),q.excludeFromReports&&l.jsx("div",{className:"mt-2 text-[10px] text-slate-400 font-bold uppercase border border-slate-200 rounded px-1 inline-block",children:""}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Se(q.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(me,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>H(q.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(me,{name:"Trash2",size:14})})]})]},q.id))}),a==="rooms"&&l.jsx(X0,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((q,le)=>l.jsxs("div",{draggable:!0,onDragStart:oe=>K(oe,le),onDragOver:ee,onDrop:oe=>se(oe,le),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(me,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(me,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:q.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",q.capacity,"  ",q.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Se(q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(me,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>H(q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(me,{name:"Trash2",size:16})})]})]},q.id))}),a==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:flex-row gap-4 items-start md:items-center justify-between sticky top-0 z-20",children:[l.jsxs("div",{className:"flex flex-col gap-2 w-full md:w-auto",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:" "}),l.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 md:pb-0 custom-scrollbar",children:[(s.bellPresets||[]).map(q=>l.jsxs("div",{onClick:()=>D(q.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl border transition-all cursor-pointer whitespace-nowrap group ${U===q.id?"bg-indigo-600 border-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:border-indigo-300 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:[l.jsx("span",{className:"text-sm font-bold",children:q.name}),U===q.id&&l.jsxs("div",{className:"flex items-center gap-1 ml-2 border-l border-indigo-400 pl-2",children:[l.jsx("button",{onClick:le=>{le.stopPropagation(),ke()},className:"text-indigo-100 hover:text-white p-1 rounded hover:bg-indigo-500/50 transition-colors",title:"",children:l.jsx(me,{name:"Copy",size:14})}),l.jsx("button",{onClick:le=>{le.stopPropagation(),R()},className:"text-indigo-200 hover:text-red-200 p-1 rounded hover:bg-red-500/20 transition-colors",title:"",children:l.jsx(me,{name:"Trash2",size:14})})]})]},q.id)),l.jsx("button",{onClick:nt,className:"p-2 bg-slate-100 dark:bg-slate-700 text-slate-500 hover:bg-slate-200 rounded-xl",title:"",children:l.jsx(me,{name:"Plus",size:20})})]})]}),l.jsxs("div",{className:"flex gap-3 flex-wrap items-end w-full md:w-auto justify-end",children:[l.jsxs("button",{onClick:Oe,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(me,{name:"Save",size:18})," "]}),l.jsxs("button",{onClick:Ee,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(me,{name:"CheckCircle",size:18})," "]}),l.jsxs("button",{onClick:()=>ye(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(me,{name:"Printer",size:18}),"  / "]})]})]}),l.jsxs("div",{className:"lg:hidden flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>T(et.First),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${L===et.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>T(et.Second),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${L===et.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[l.jsx("div",{className:`${L===et.First?"block":"hidden lg:block"}`,children:l.jsx(ve,{shift:et.First})}),l.jsx("div",{className:`${L===et.Second?"block":"hidden lg:block"}`,children:l.jsx(ve,{shift:et.Second})})]})]})]}),l.jsx($n,{isOpen:A,onClose:()=>c(!1),title:u?"":"",children:l.jsxs("div",{className:"space-y-4",children:[a==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:p.name||"",onChange:q=>g({...p,name:q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:p.birthDate||"",onChange:q=>g({...p,birthDate:q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:p.telegramChatId||"",onChange:q=>g({...p,telegramChatId:q.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(de=p.shifts)==null?void 0:de.includes(et.First),onChange:()=>{const q=p.shifts||[];g({...p,shifts:q.includes(et.First)?q.filter(le=>le!==et.First):[...q,et.First]})}})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(Te=p.shifts)==null?void 0:Te.includes(et.Second),onChange:()=>{const q=p.shifts||[];g({...p,shifts:q.includes(et.Second)?q.filter(le=>le!==et.Second):[...q,et.Second]})}})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(q=>{var le;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(le=p.subjectIds)==null?void 0:le.includes(q.id),onChange:oe=>{const he=p.subjectIds||[];g({...p,subjectIds:oe.target.checked?[...he,q.id]:he.filter(Le=>Le!==q.id)})}})," ",l.jsx("span",{className:"text-sm dark:text-slate-300",children:q.name})]},q.id)})})]}),a==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:v.name||"",onChange:q=>y({...v,name:q.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:v.color||"#ffffff",onChange:q=>y({...v,color:q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",inputMode:"numeric",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.difficulty||5,onChange:q=>y({...v,difficulty:parseInt(q.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.requiredRoomType,onChange:q=>y({...v,requiredRoomType:q.target.value}),children:eC.map(q=>l.jsx("option",{value:q,children:q},q))})]})]}),a==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:k.name||"",onChange:q=>x({...k,name:q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",inputMode:"numeric",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:k.studentsCount||25,onChange:q=>x({...k,studentsCount:parseInt(q.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>x({...k,shift:et.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${k.shift===et.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>x({...k,shift:et.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${k.shift===et.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("label",{className:"flex items-center gap-2 mt-4 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:k.excludeFromReports||!1,onChange:q=>x({...k,excludeFromReports:q.target.checked})}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"   "})]}),l.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"      ,     ."})]}),a==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:I.name||"",onChange:q=>N({...I,name:q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",inputMode:"numeric",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:I.capacity||30,onChange:q=>N({...I,capacity:parseInt(q.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:I.type,onChange:q=>N({...I,type:q.target.value}),children:eC.map(q=>l.jsx("option",{value:q,children:q},q))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:M,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})}),l.jsx($n,{isOpen:_,onClose:()=>B(!1),title:"  ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:":  (30 )",value:j,onChange:q=>S(q.target.value),autoFocus:!0})]}),l.jsx("div",{className:"flex justify-end pt-2",children:l.jsx("button",{onClick:ce,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold",children:""})})]})}),l.jsx($n,{isOpen:Z,onClose:()=>ye(!1),title:"  ",maxWidth:"max-w-6xl",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("label",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"  :"}),l.jsx("input",{type:"date",value:_e,onChange:q=>Ce(q.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-xl text-sm font-bold bg-white dark:bg-slate-800 dark:text-white"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:st,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition flex items-center gap-2 text-sm shadow-lg shadow-emerald-200 dark:shadow-none",children:[l.jsx(me,{name:"Image",size:18}),"  PNG"]}),l.jsxs("button",{onClick:ge,className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition flex items-center gap-2 text-sm shadow-lg shadow-red-200 dark:shadow-none",children:[l.jsx(me,{name:"FileSpreadsheet",size:18}),"  PDF"]}),l.jsxs("button",{onClick:Be,className:"px-4 py-2 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition flex items-center gap-2 text-sm shadow-lg shadow-green-200 dark:shadow-none",children:[l.jsx(me,{name:"Table",size:18}),"  Excel"]})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-200 dark:bg-slate-900/50 p-6 rounded-2xl border border-slate-300 dark:border-slate-700 flex justify-center",children:l.jsx("div",{ref:ie,dangerouslySetInnerHTML:{__html:De()}})})]})})]})},WY=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:i}=Ki(),{schedule1:a,schedule2:o,substitutions:A,saveScheduleData:c}=FA(),{addToast:u}=w1(),d=sc(),[p,g]=z.useState(uA()),v=z.useRef(null),[y,k]=z.useState("pending"),[x,I]=z.useState("teacher"),[N,U]=z.useState(!1),[D,P]=z.useState(!1),[E,_]=z.useState(null),[B,j]=z.useState(!1),[S,L]=z.useState(!1),[T,Z]=z.useState(!1),[ye,_e]=z.useState(!1),[Ce,ie]=z.useState(null),[we,Pe]=z.useState(null),[Se,M]=z.useState(""),[H,K]=z.useState(""),[ee,se]=z.useState(""),[ue,Ae]=z.useState(""),[pe,Ne]=z.useState("all"),[Oe,nt]=z.useState(""),[ke,ce]=z.useState(""),[R,Ee]=z.useState(""),[De,st]=z.useState(""),[ge,Be]=z.useState(""),[ve,de]=z.useState(null),[Te,q]=z.useState([]),[le,oe]=z.useState(!1),[he,Le]=z.useState(!1),[Re,$e]=z.useState(!1),[Ve,St]=z.useState(!1),[ft,gt]=z.useState(null),[At,dt]=z.useState(!1),[tt,Tt]=z.useState(null),[bt,It]=z.useState(""),[qt,Ht]=z.useState(""),[wt,Kt]=z.useState(null),[zr,Qr]=z.useState(null),Hr=mU({maxWidth:767}),[tr,Dt]=z.useState("lessons"),jt=z.useMemo(()=>{const Y={schedule:a,schedule2:o,settings:s};return iU(new Date(p),Y)},[p,a,o,s]);z.useEffect(()=>{var Y;(Y=d.state)!=null&&Y.subParams&&(_(d.state.subParams),st(""),Be(""),q([]),de(null),oe(!1),Le(!1),$e(!1),I("teacher"),P(!0),window.history.replaceState({},document.title))},[d.state]),z.useEffect(()=>{if(D&&E){if(E.isEditing)return;const Y=A.find(xe=>xe.scheduleItemId===E.scheduleItemId&&xe.date===p);Y?(q(Y.refusals||[]),Y.replacementTeacherId==="cancelled"?I("cancel"):Y.isMerger||Y.replacementClassId?I("advanced"):I("teacher"),Y.replacementTeacherId&&!["conducted","cancelled"].includes(Y.replacementTeacherId)&&de(Y.replacementTeacherId)):(q([]),I("teacher"),de(null)),oe(!1),Le(!1),$e(!1)}},[D,E,A,p]);const dr=z.useMemo(()=>{const Y=new Date(p).getDay();return Y===0||Y===6?null:Lr[Y-1]},[p]),en=Y=>{const xe=new Date(p);xe.setDate(xe.getDate()+Y),g(uA(xe))},Mr=()=>{g(uA(new Date))},mr=()=>{v.current&&v.current.showPicker()},Rr=z.useMemo(()=>e.filter(Y=>{const xe=Y.name.toLowerCase().includes(ue.toLowerCase()),Ge=pe==="all"?!0:Y.shifts&&Y.shifts.includes(pe),Ye=Oe?Y.subjectIds.includes(Oe):!0;return xe&&Ge&&Ye}),[e,ue,pe,Oe]),ae=z.useMemo(()=>e.filter(Y=>Y.unavailableDates.includes(p)),[e,p]),qe=z.useMemo(()=>{if(!dr)return[];const Y=ae.map(Ze=>Ze.id),xe=jt.filter(Ze=>Ze.day===dr&&Y.includes(Ze.teacherId)),Ye=A.filter(Ze=>Ze.date===p).map(Ze=>Ze.scheduleItemId),it=jt.filter(Ze=>Ye.includes(Ze.id)),Nt=[...xe];return it.forEach(Ze=>{Nt.find(Zt=>Zt.id===Ze.id)||Nt.push(Ze)}),Nt.sort((Ze,Zt)=>Ze.period-Zt.period)},[jt,dr,ae,A,p]),{pendingLessons:vt,resolvedLessons:mt}=z.useMemo(()=>{const Y=[],xe=[];return qe.forEach(Ge=>{A.filter(it=>it.scheduleItemId===Ge.id&&it.date===p).length>0?xe.push(Ge):Y.push(Ge)}),{pendingLessons:Y,resolvedLessons:xe}},[qe,A,p]),kt=Y=>{var Ge;const xe=e.find(Ye=>Ye.id===Y);Pe(Y),M(((Ge=xe==null?void 0:xe.absenceReasons)==null?void 0:Ge[p])||""),j(!0)},at=z.useCallback(async()=>{let Y=[...e];const xe=Y.findIndex(Ye=>Ye.id===we);if(xe===-1)return;const Ge={...Y[xe]};Ge.unavailableDates.includes(p)||(Ge.unavailableDates=[...Ge.unavailableDates,p]),Ge.absenceReasons||(Ge.absenceReasons={}),Ge.absenceReasons[p]=Se,Y[xe]=Ge,await i({teachers:Y}),j(!1)},[e,we,p,Se,i]),yt=()=>{Ht(Se),dt(!0)},Et=z.useCallback(async()=>{let Y=[...e];const xe=Y.findIndex(Ge=>Ge.id===we);if(xe!==-1){const Ge={...Y[xe]};Ge.unavailableDates.includes(p)||(Ge.unavailableDates=[...Ge.unavailableDates,p]),Ge.absenceReasons||(Ge.absenceReasons={}),Ge.absenceReasons[p]=qt,Y[xe]=Ge,await i({teachers:Y})}if(dr&&tt){const Ge=jt.filter(it=>it.teacherId===we&&it.day===dr),Ye=A.filter(it=>!(it.originalTeacherId===we&&it.date===p));Ge.forEach(it=>{Ye.push({id:Gs(),date:p,scheduleItemId:it.id,originalTeacherId:it.teacherId,replacementTeacherId:tt==="cancel"?"cancelled":bt,lessonAbsenceReason:qt})}),await c({substitutions:Ye})}dt(!1),j(!1),Tt(null),It("")},[e,we,p,qt,i,dr,jt,A,c,tt,bt]),ar=z.useCallback(async Y=>{let xe=[...e];const Ge=xe.findIndex(it=>it.id===Y);if(Ge===-1)return;const Ye={...xe[Ge]};Ye.unavailableDates=Ye.unavailableDates.filter(it=>it!==p),Ye.absenceReasons&&delete Ye.absenceReasons[p],xe[Ge]=Ye,await i({teachers:xe})},[e,p,i]),Tr=z.useCallback(async(Y,xe=!1)=>{if(!E){alert(":   .    .");return}const Ge=jt.find(Nt=>Nt.id===E.scheduleItemId);if(!Ge){alert(":     .");return}const Ye=A.filter(Nt=>!(Nt.scheduleItemId===E.scheduleItemId&&Nt.date===p)),it={id:Gs(),date:p,scheduleItemId:E.scheduleItemId,originalTeacherId:Ge.teacherId,replacementTeacherId:Y,replacementRoomId:De||void 0,isMerger:xe,lessonAbsenceReason:Y!=="conducted"&&Y!=="cancelled"&&ge?ge:void 0,refusals:Te};Ye.push(it);try{await c({substitutions:Ye}),P(!1),ce(""),st(""),Be(""),q([]),de(null),_(null)}catch(Nt){console.error("Failed to save substitution:",Nt),alert("   .   .")}},[E,p,De,jt,A,e,ge,Te,c]),Ir=z.useCallback(async Y=>{if(!E||!dr||!E.period||!E.shift||!E.teacherId){alert(":   .");return}const xe=jt.filter(Ye=>Ye.classId===Y&&Ye.day===dr&&Ye.period===E.period&&Ye.shift===E.shift);if(xe.length===0){alert("    .");return}const Ge=A.filter(Ye=>!(Ye.scheduleItemId===E.scheduleItemId&&Ye.date===p));xe.forEach(Ye=>{const it={id:Gs(),date:p,scheduleItemId:E.scheduleItemId,originalTeacherId:E.teacherId,replacementTeacherId:Ye.teacherId,replacementClassId:Ye.classId,replacementSubjectId:Ye.subjectId,isMerger:!0,replacementRoomId:Ye.roomId,lessonAbsenceReason:ge||void 0};Ge.push(it)}),await c({substitutions:Ge}),P(!1),ce(""),st(""),Be(""),_(null),Le(!1)},[E,p,dr,jt,A,ge,c]),js=z.useCallback(async Y=>{if(!E)return;const xe=jt.find(Er=>Er.id===E.scheduleItemId),Ge=jt.find(Er=>Er.id===Y);if(!xe||!Ge){alert(":     .");return}const Ye=[...A];let it,Nt;De?(it=De,Nt=Re?Ge.roomId:xe.roomId):Re?(it=xe.roomId,Nt=Ge.roomId):(it=Ge.roomId,Nt=xe.roomId);const Ze=Ye.findIndex(Er=>Er.scheduleItemId===xe.id&&Er.date===p),Zt={id:Ze>=0?Ye[Ze].id:Gs(),date:p,scheduleItemId:xe.id,originalTeacherId:xe.teacherId,replacementTeacherId:xe.teacherId,replacementClassId:Ge.classId,replacementSubjectId:Ge.subjectId,replacementRoomId:it!==xe.roomId?it:void 0};Ze>=0?Ye[Ze]=Zt:Ye.push(Zt);const Yt=Ye.findIndex(Er=>Er.scheduleItemId===Ge.id&&Er.date===p),hr={id:Yt>=0?Ye[Yt].id:Gs(),date:p,scheduleItemId:Ge.id,originalTeacherId:Ge.teacherId,replacementTeacherId:Ge.teacherId,replacementClassId:xe.classId,replacementSubjectId:xe.subjectId,replacementRoomId:Nt!==Ge.roomId?Nt:void 0};Yt>=0?Ye[Yt]=hr:Ye.push(hr),await c({substitutions:Ye}),P(!1),_(null),st(""),oe(!1),$e(!1)},[E,jt,A,p,c,De,Re]),Ei=z.useCallback(async Y=>{const xe=A.filter(Ge=>!(Ge.scheduleItemId===Y&&Ge.date===p));await c({substitutions:xe})},[A,p,c]),ki=(Y,xe)=>{_({scheduleItemId:Y.id,subjectId:Y.subjectId,period:Y.period,shift:Y.shift,classId:Y.classId,teacherId:Y.teacherId,roomId:Y.roomId,day:Y.day,isEditing:!0}),xe.replacementRoomId?st(xe.replacementRoomId):st(""),xe.lessonAbsenceReason?Be(xe.lessonAbsenceReason):Be(""),xe.refusals?q(xe.refusals):q([]),xe.replacementTeacherId==="cancelled"?I("cancel"):xe.isMerger||xe.replacementClassId?I("advanced"):(I("teacher"),de(xe.replacementTeacherId)),P(!0)},gi=()=>{const Y=A.filter(Ye=>Ye.date===p&&Ye.replacementTeacherId!=="conducted"&&Ye.replacementTeacherId!=="cancelled");if(Y.length===0)return"    .";Y.sort((Ye,it)=>{const Nt=jt.find(Zt=>Zt.id===Ye.scheduleItemId),Ze=jt.find(Zt=>Zt.id===it.scheduleItemId);return((Nt==null?void 0:Nt.period)||0)-((Ze==null?void 0:Ze.period)||0)});let xe="";const Ge=new Set;return Y.forEach(Ye=>{if(Ge.has(Ye.scheduleItemId))return;Ge.add(Ye.scheduleItemId);const it=jt.find(Pr=>Pr.id===Ye.scheduleItemId);if(!it)return;const Nt=r.find(Pr=>Pr.id===it.classId),Ze=t.find(Pr=>Pr.id===it.subjectId),Zt=e.find(Pr=>Pr.id===Ye.originalTeacherId),Yt=e.find(Pr=>Pr.id===Ye.replacementTeacherId),hr=n.find(Pr=>Pr.id===(Ye.replacementRoomId||it.roomId)),Er=hr?hr.name:Ye.replacementRoomId||it.roomId||"";if(xe+=` **${it.period} ** | ${Nt==null?void 0:Nt.name} | ${Ze==null?void 0:Ze.name}
`,xe+=` ${Zt==null?void 0:Zt.name}
`,Ye.isMerger)xe+=` : ${Yt==null?void 0:Yt.name}
`;else if(Ye.replacementClassId){const Pr=r.find(_s=>_s.id===Ye.replacementClassId);xe+=`  : ${Pr==null?void 0:Pr.name}
`}else xe+=` ${Yt==null?void 0:Yt.name}
`;xe+=` . ${Er}

`}),xe},Gi=()=>{var Ye;const Y=gi(),xe=new Date(p).toLocaleDateString("ru-RU");let Ge=(Ye=s.telegramTemplates)==null?void 0:Ye.summary;return Ge||(Ge=` **  {{date}}** 

{{content}}`),Ge.replace("{{date}}",xe).replace("{{content}}",Y)},Do=()=>{const Y=Gi();navigator.clipboard.writeText(Y),u({type:"success",title:"",message:"    "})},Ao=async()=>{if(!s.telegramToken||!s.feedbackChatId){u({type:"warning",title:"",message:"Telegram  "});return}const Y=Gi();U(!0);try{await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s.feedbackChatId,text:Y,parse_mode:"Markdown"})}),u({type:"success",title:"",message:"   Telegram"})}catch(xe){console.error(xe),u({type:"danger",title:"",message:"   "})}finally{U(!1)}},cs=(Y,xe,Ge,Ye,it,Nt,Ze)=>{ie({teacherId:Y,lessonId:xe,roomName:Ge,className:Ye,subjectName:it,period:Nt,roomChanged:Ze}),_e(!0)},Js=async Y=>{var Pr,_s;if(!Ce)return;const{teacherId:xe,lessonId:Ge,roomName:Ye,className:it,subjectName:Nt,period:Ze,roomChanged:Zt}=Ce,Yt=e.find(an=>an.id===xe);if(!(Yt!=null&&Yt.telegramChatId)||!s.telegramToken){alert("    Telegram ID    ."),_e(!1);return}const hr=new Date(p).toLocaleDateString("ru-RU");let Er="";if(Y==="single"){const an=` *${Ze} * | ${it}
 ${Nt}
 . ${Ye}`;let Mn=(Pr=s.telegramTemplates)==null?void 0:Pr.teacherNotification;Mn||(Mn=` **  !**
 {{date}}

{{content}}

,   .`),Er=Mn.replace("{{date}}",hr).replace("{{content}}",an)}else{const an=A.filter(or=>or.date===p&&or.replacementTeacherId===xe);if(an.sort((or,er)=>{const Cs=jt.find($i=>$i.id===or.scheduleItemId),Is=jt.find($i=>$i.id===er.scheduleItemId);return((Cs==null?void 0:Cs.period)||0)-((Is==null?void 0:Is.period)||0)}),an.length===0){alert("       ."),_e(!1);return}let Mn="";an.forEach(or=>{var Wn,Ni,UA;const er=jt.find(Ys=>Ys.id===or.scheduleItemId);if(!er)return;const Cs=((Wn=r.find(Ys=>Ys.id===er.classId))==null?void 0:Wn.name)||"?",Is=((Ni=t.find(Ys=>Ys.id===er.subjectId))==null?void 0:Ni.name)||"?",$i=er.roomId,Xt=or.replacementRoomId,TA=Xt||$i,hc=((UA=n.find(Ys=>Ys.id===TA))==null?void 0:UA.name)||TA||"",fc=Xt&&Xt!==$i?" ( .)":"";Mn+=` *${er.period} * | ${Cs}
 ${Is}
 . ${hc}${fc}

`});let Xs=(_s=s.telegramTemplates)==null?void 0:_s.teacherSummary;Xs||(Xs=` **   {{date}}**

{{content}},   .`),Er=Xs.replace("{{date}}",hr).replace("{{content}}",Mn)}try{await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:Yt.telegramChatId,text:Er,parse_mode:"Markdown"})}),u({type:"success",title:"",message:`  ${Yt.name}`})}catch(an){console.error(an),alert("   Telegram")}finally{_e(!1),ie(null)}},Pa=z.useMemo(()=>E?new Set(A.filter(Y=>Y.date===p&&Y.replacementTeacherId!=="conducted"&&Y.replacementTeacherId!=="cancelled").map(Y=>{const xe=jt.find(Ge=>Ge.id===Y.scheduleItemId);return xe&&xe.period===E.period&&xe.shift===E.shift?Y.replacementTeacherId:null}).filter(Y=>!!Y)):new Set,[A,jt,p,E]),Da=z.useMemo(()=>{if(!E||!dr)return{recommended:[],others:[]};const Y=p.substring(0,7),xe=e.filter(it=>it.name.toLowerCase().includes(ke.toLowerCase())).map(it=>{var Mn,Xs;const Nt=A.some(or=>or.date===p&&or.originalTeacherId===it.id&&or.replacementTeacherId==="conducted"),Ze=it.unavailableDates.includes(p)&&!Nt,Zt=jt.some(or=>or.teacherId===it.id&&or.day===dr&&or.period===E.period&&or.shift===E.shift),Yt=Pa.has(it.id),hr=Zt||Yt;let Er=null;if(Zt){const or=jt.find(er=>er.teacherId===it.id&&er.day===dr&&er.period===E.period&&er.shift===E.shift);if(or){const er=(Mn=r.find(Is=>Is.id===or.classId))==null?void 0:Mn.name,Cs=((Xs=n.find(Is=>Is.id===or.roomId))==null?void 0:Xs.name)||or.roomId;Er={type:"regular",details:`${er}, . ${Cs}`}}}else Yt&&(Er={type:"sub",details:""});const Pr=it.subjectIds.includes(E.subjectId),_s=A.filter(or=>or.replacementTeacherId===it.id&&or.date.startsWith(Y)).length;let an=0;return Ze&&(an-=1e3),hr&&(an-=200),Pr&&(an+=50),!hr&&!Ze&&(an+=100),an-=_s,{teacher:it,isAbsent:Ze,isBusy:hr,busyReason:Er,isSpecialist:Pr,score:an,subsCount:_s}}).sort((it,Nt)=>Nt.score-it.score),Ge=xe.filter(it=>!it.isBusy&&!it.isAbsent).slice(0,3),Ye=xe.filter(it=>!Ge.includes(it));return{recommended:Ge,others:Ye}},[e,E,p,ke,dr,jt,A,Pa,r,n]),lo=z.useMemo(()=>{if(!E||!dr)return[];const Y=jt.filter(Ge=>Ge.day===dr&&Ge.period===E.period&&Ge.shift===E.shift&&Ge.classId!==E.classId),xe=new Map;return Y.forEach(Ge=>{const Ye=r.find(Ze=>Ze.id===Ge.classId),it=e.find(Ze=>Ze.id===Ge.teacherId),Nt=t.find(Ze=>Ze.id===Ge.subjectId);if(Ye&&it){xe.has(Ye.id)||xe.set(Ye.id,{classEntity:Ye,teachers:[],subjects:[]});const Ze=xe.get(Ye.id);Ze.teachers.includes(it.name)||Ze.teachers.push(it.name),Nt&&!Ze.subjects.includes(Nt.name)&&Ze.subjects.push(Nt.name)}}),Array.from(xe.values())},[jt,E,dr,r,e,t]),mn=z.useMemo(()=>{var Nt;if(!E)return null;const Y=jt.find(Ze=>Ze.id===E.scheduleItemId);if(!Y)return null;const xe=r.find(Ze=>Ze.id===Y.classId),Ge=t.find(Ze=>Ze.id===Y.subjectId),Ye=e.find(Ze=>Ze.id===Y.teacherId),it=((Nt=Ye==null?void 0:Ye.unavailableDates)==null?void 0:Nt.includes(p))||!1;return{className:xe==null?void 0:xe.name,subjectName:Ge==null?void 0:Ge.name,teacherName:Ye==null?void 0:Ye.name,teacherId:Ye==null?void 0:Ye.id,period:Y.period,roomId:Y.roomId,isTeacherAbsent:it}},[E,jt,r,t,e,p]),co=z.useMemo(()=>!(mn!=null&&mn.teacherId)||!dr?[]:jt.filter(Y=>Y.teacherId===mn.teacherId&&Y.day===dr&&Y.id!==(E==null?void 0:E.scheduleItemId)).sort((Y,xe)=>Y.period-xe.period),[jt,mn,dr,E]),Qs=z.useMemo(()=>{if(!dr||R.length<2)return[];const Y=R.toLowerCase(),xe=e.filter(it=>it.name.toLowerCase().includes(Y)),Ge=r.filter(it=>it.name.toLowerCase().includes(Y)),Ye=[];return xe.forEach(it=>{jt.filter(Ze=>Ze.teacherId===it.id&&Ze.day===dr).forEach(Ze=>{const Zt=r.find(hr=>hr.id===Ze.classId),Yt=t.find(hr=>hr.id===Ze.subjectId);Ye.push({...Ze,entityName:it.name,subInfo:Zt==null?void 0:Zt.name,subjectName:Yt==null?void 0:Yt.name})})}),Ge.forEach(it=>{jt.filter(Ze=>Ze.classId===it.id&&Ze.day===dr).forEach(Ze=>{if(Ye.find(hr=>hr.id===Ze.id))return;const Zt=e.find(hr=>hr.id===Ze.teacherId),Yt=t.find(hr=>hr.id===Ze.subjectId);Ye.push({...Ze,entityName:it.name,subInfo:Zt==null?void 0:Zt.name,subjectName:Yt==null?void 0:Yt.name})})}),Ye.sort((it,Nt)=>it.period-Nt.period)},[R,dr,e,r,jt,t]),pa=(Y,xe)=>{Kt(xe),Y.dataTransfer.effectAllowed="copy",Y.dataTransfer.setData("text/plain",xe)},Mo=(Y,xe)=>{Y.preventDefault(),Qr(xe)},un=()=>{Qr(null)},Oo=(Y,xe)=>{var Ge;Y.preventDefault(),wt&&(_({scheduleItemId:xe.id,subjectId:xe.subjectId,period:xe.period,shift:xe.shift,classId:xe.classId,teacherId:xe.teacherId,roomId:xe.roomId,day:xe.day}),P(!0),ce(((Ge=e.find(Ye=>Ye.id===wt))==null?void 0:Ge.name)||""),Kt(null),Qr(null))},Si=(Y,xe)=>{let Ge=!1;if(xe){if(!window.confirm("  .   ?"))return;Ge=!0}Tr(Y,Ge)},Ma=(Y,xe)=>{xe.stopPropagation(),Te.includes(Y)?q(Te.filter(Ge=>Ge!==Y)):q([...Te,Y])},Ho=(Y,xe)=>{var Xs,or;const Ge=A.filter(er=>er.scheduleItemId===Y.id&&er.date===p),it=Ge.length>0?Ge[0]:null,Nt=it&&!["conducted","cancelled"].includes(it.replacementTeacherId)?e.find(er=>er.id===it.replacementTeacherId):null,Ze=e.find(er=>er.id===Y.teacherId),Zt=t.find(er=>er.id===Y.subjectId),Yt=r.find(er=>er.id===Y.classId),hr=((Xs=n.find(er=>er.id===Y.roomId))==null?void 0:Xs.name)||Y.roomId||"",Er=it==null?void 0:it.replacementRoomId,Pr=Er?((or=n.find(er=>er.id===Er))==null?void 0:or.name)||Er:null,_s=Er&&Er!==Y.roomId,an=(it==null?void 0:it.replacementTeacherId)==="cancelled",Mn=(it==null?void 0:it.replacementTeacherId)==="conducted";return Ve?l.jsxs("div",{onDragOver:er=>Mo(er,Y.id),onDragLeave:un,onDrop:er=>Oo(er,Y),className:`relative flex items-center gap-3 p-2 rounded-lg border transition-all 
                        ${zr===Y.id?"ring-2 ring-indigo-500 bg-indigo-50 border-indigo-500 z-10":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700"} 
                        ${wt&&!xe&&zr!==Y.id?"border-dashed border-indigo-300":""} overflow-hidden`,children:[wt&&!xe&&zr!==Y.id&&l.jsx("div",{className:"absolute inset-0 bg-indigo-50/10 pointer-events-none"}),l.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm ${xe?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:Y.period}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm truncate",children:Yt==null?void 0:Yt.name}),l.jsx("span",{className:"text-xs text-slate-400 truncate",children:Zt==null?void 0:Zt.name})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx("span",{className:`font-medium ${xe?"text-slate-400 line-through":"text-red-500"}`,children:Ze==null?void 0:Ze.name}),xe&&l.jsx(me,{name:"ArrowRight",size:10,className:"text-slate-300"}),xe&&l.jsx("span",{className:`font-bold ${an?"text-red-600":Mn?"text-blue-600":"text-emerald-600"}`,children:an?"":Mn?"":Nt==null?void 0:Nt.name})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[_s?l.jsxs("div",{className:"flex items-center gap-1 text-[10px] bg-indigo-50 px-1.5 py-0.5 rounded border border-indigo-100",children:[l.jsx("span",{className:"line-through text-slate-400",children:hr}),l.jsx(me,{name:"ArrowRight",size:8,className:"text-indigo-400"}),l.jsx("span",{className:"font-bold text-indigo-700",children:Pr})]}):l.jsx("div",{className:"text-[10px] bg-slate-100 px-1.5 py-0.5 rounded font-bold text-slate-500",children:hr}),xe?l.jsxs("div",{className:"flex gap-1",children:[it&&l.jsx("button",{onClick:()=>ki(Y,it),className:"p-1.5 text-slate-400 hover:text-indigo-600 rounded-lg hover:bg-slate-100",children:l.jsx(me,{name:"Edit",size:14})}),l.jsx("button",{onClick:()=>Ei(Y.id),className:"p-1.5 text-slate-300 hover:text-red-500 rounded-lg hover:bg-red-50",children:l.jsx(me,{name:"X",size:14})})]}):l.jsx("button",{onClick:()=>{_({scheduleItemId:Y.id,subjectId:Y.subjectId,period:Y.period,shift:Y.shift,classId:Y.classId,teacherId:Y.teacherId,roomId:Y.roomId,day:Y.day}),P(!0)},className:"p-1.5 bg-indigo-100 text-indigo-600 rounded-lg hover:bg-indigo-200",children:l.jsx(me,{name:"Edit",size:14})})]})]},Y.id):l.jsxs("div",{onDragOver:er=>Mo(er,Y.id),onDragLeave:un,onDrop:er=>Oo(er,Y),className:`relative p-5 rounded-2xl border transition-all overflow-hidden
                    ${zr===Y.id?"ring-2 ring-indigo-500 bg-indigo-50 border-indigo-500 z-10 scale-[1.02] shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 shadow-sm"} 
                    ${wt&&!xe&&zr!==Y.id?"border-dashed border-indigo-300":""}`,children:[wt&&!xe&&zr!==Y.id&&l.jsx("div",{className:"absolute inset-0 bg-indigo-50/10 pointer-events-none z-10"}),l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-xl ${xe?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:Y.period}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg",children:Yt==null?void 0:Yt.name}),l.jsx("div",{className:"text-sm text-slate-500",children:Zt==null?void 0:Zt.name})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:Y.shift===et.First?"1 ":"2 "}),l.jsx("div",{className:"mt-1",children:_s?l.jsxs("div",{className:"flex items-center justify-end gap-1.5 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded border border-indigo-100 dark:border-indigo-800",children:[l.jsx("span",{className:"text-xs font-mono font-bold text-slate-400 line-through decoration-red-400",children:hr}),l.jsx(me,{name:"ArrowRight",size:10,className:"text-indigo-400"}),l.jsx("span",{className:"text-xs font-mono font-black text-indigo-700 dark:text-indigo-300",children:Pr})]}):l.jsx("div",{className:"text-xs font-mono bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded inline-block font-bold",children:hr})})]})]}),l.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-slate-100 dark:border-slate-700",children:[l.jsx("div",{className:`text-base font-medium ${xe?"text-slate-400 line-through":"text-red-500"}`,children:Ze==null?void 0:Ze.name}),xe?l.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[an?l.jsx("span",{className:"text-red-600 font-black text-sm uppercase",children:" "}):Mn?l.jsx("span",{className:"text-blue-600 font-bold text-sm",children:""}):l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("span",{className:"text-emerald-600 font-bold text-base",children:(Nt==null?void 0:Nt.name)||""}),(it==null?void 0:it.isMerger)&&l.jsx("span",{className:"text-[10px] text-purple-500 font-bold",children:""})]}),Nt&&Nt.telegramChatId&&!an&&!Mn&&l.jsx("button",{onClick:()=>{const er=_s?`${hr} -> ${Pr}`:hr;cs(Nt.id,Y.id,er,(Yt==null?void 0:Yt.name)||"?",(Zt==null?void 0:Zt.name)||"?",Y.period,!!_s)},className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",title:"   Telegram",children:l.jsx(me,{name:"Send",size:16})}),it&&l.jsx("button",{onClick:()=>ki(Y,it),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 rounded-lg transition-colors",title:" ",children:l.jsx(me,{name:"Edit",size:18})}),l.jsx("button",{onClick:()=>Ei(Y.id),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx(me,{name:"X",size:18})})]}):l.jsx("button",{onClick:()=>{_({scheduleItemId:Y.id,subjectId:Y.subjectId,period:Y.period,shift:Y.shift,classId:Y.classId,teacherId:Y.teacherId,roomId:Y.roomId,day:Y.day}),P(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition",children:""})]})]},Y.id)};return l.jsxs("div",{className:"h-full flex flex-col gap-6",children:[l.jsx("div",{className:"flex flex-col gap-4",children:l.jsx("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 p-1.5 rounded-xl border border-slate-200 dark:border-slate-600",children:[l.jsx("button",{onClick:()=>en(-1),className:"p-2 text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition-colors",children:l.jsx(me,{name:"ArrowRight",className:"rotate-180",size:18})}),l.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 font-bold text-slate-700 dark:text-slate-200 cursor-pointer relative group",children:[l.jsx(me,{name:"Calendar",size:18,className:"text-indigo-500"}),l.jsx("span",{children:new Date(p).toLocaleDateString("ru-RU",{day:"numeric",month:"long",weekday:"short"})}),l.jsx("input",{ref:v,type:"date",value:p,onChange:Y=>g(Y.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]}),l.jsx("button",{onClick:mr,className:"p-2 bg-white dark:bg-slate-600 text-slate-600 dark:text-slate-300 rounded-lg hover:text-indigo-600 shadow-sm border border-slate-200 dark:border-slate-500",title:" ",children:l.jsx(me,{name:"Calendar",size:16})}),l.jsx("button",{onClick:()=>Mr(),className:"px-3 py-1.5 text-xs font-bold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors",children:""}),l.jsx("button",{onClick:()=>en(1),className:"p-2 text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition-colors",children:l.jsx(me,{name:"ArrowRight",size:18})})]})]}),l.jsxs("div",{className:"flex gap-2 mt-auto",children:[l.jsxs("button",{onClick:Ao,disabled:N,className:"h-[48px] px-5 rounded-xl bg-blue-600 text-white font-bold text-sm shadow-lg shadow-blue-200 hover:bg-blue-700 transition flex items-center gap-2 disabled:opacity-50",children:[N?l.jsx(me,{name:"Loader",className:"animate-spin",size:18}):l.jsx(me,{name:"Send",size:18})," Telegram"]}),l.jsxs("button",{onClick:Do,className:"h-[48px] px-5 rounded-xl bg-indigo-600 text-white font-bold text-sm shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition flex items-center gap-2",children:[l.jsx(me,{name:"Copy",size:18})," "]}),l.jsxs("button",{onClick:()=>Z(!0),className:"h-[48px] px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 transition-colors",children:[l.jsx(me,{name:"History",size:18})," "]})]})]})})}),l.jsxs("div",{className:"md:hidden flex bg-white dark:bg-dark-800 p-1 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 shrink-0",children:[l.jsxs("button",{onClick:()=>Dt("lessons"),className:`flex-1 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${tr==="lessons"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[l.jsx(me,{name:"List",size:18}),""]}),l.jsxs("button",{onClick:()=>Dt("teachers"),className:`flex-1 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${tr==="teachers"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[l.jsx(me,{name:"Users",size:18}),""]})]}),l.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-6 min-h-0",children:[l.jsx("div",{className:`w-full md:w-80 flex-col gap-4 ${Hr&&tr!=="teachers"?"hidden":"flex"}`,children:l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>Ne("all"),className:`flex-1 py-2 text-xs font-bold rounded-md ${pe==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>Ne(et.First),className:`flex-1 py-2 text-xs font-bold rounded-md ${pe===et.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>Ne(et.Second),className:`flex-1 py-2 text-xs font-bold rounded-md ${pe===et.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("select",{value:Oe,onChange:Y=>nt(Y.target.value),className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs font-bold text-slate-600 dark:text-slate-300 outline-none",children:[l.jsx("option",{value:"",children:" "}),t.map(Y=>l.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),l.jsxs("div",{className:"relative",children:[l.jsx(me,{name:"Search",className:"absolute left-3 top-3 text-slate-400",size:16}),l.jsx("input",{placeholder:" ...",value:ue,onChange:Y=>Ae(Y.target.value),className:"w-full pl-9 pr-3 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-sm outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:Rr.map(Y=>{const xe=Y.unavailableDates.includes(p),Ge=Y.absenceReasons?Y.absenceReasons[p]:"";return l.jsxs("div",{draggable:!xe,onDragStart:Ye=>pa(Ye,Y.id),className:`flex flex-col p-4 rounded-xl border transition-all ${xe?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600 cursor-grab active:cursor-grabbing hover:border-indigo-300"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-base font-bold ${xe?"text-red-700 dark:text-red-400":"text-slate-700 dark:text-slate-300"}`,children:Y.name}),l.jsxs("div",{className:"flex gap-1",children:[xe&&l.jsx("button",{onClick:()=>kt(Y.id),className:"p-1.5 bg-white text-slate-500 rounded-lg hover:text-indigo-600 shadow-sm",title:" ",children:l.jsx(me,{name:"Edit",size:14})}),l.jsx("button",{onClick:()=>xe?ar(Y.id):kt(Y.id),className:`text-xs px-2.5 py-1.5 rounded-lg font-bold transition-colors ${xe?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:xe?"":""})]})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:Y.shifts.map(Ye=>l.jsx("span",{className:"text-[10px] bg-white dark:bg-slate-600 px-1.5 py-0.5 rounded border border-slate-100 dark:border-slate-500 text-slate-500 font-medium",children:Ye===et.First?"1":"2"},Ye))}),xe&&Ge&&l.jsx("div",{className:"text-xs text-red-500 dark:text-red-400 italic font-medium",children:Ge})]})]},Y.id)})})]})}),l.jsxs("div",{className:`flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden ${Hr&&tr!=="lessons"?"hidden":"flex"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsxs("button",{onClick:()=>k("pending"),className:`px-5 py-2.5 text-sm font-bold rounded-lg transition-all ${y==="pending"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500"}`,children:["  ",vt.length>0&&l.jsx("span",{className:"ml-1 bg-red-500 text-white px-2 py-0.5 rounded-full text-xs",children:vt.length})]}),l.jsxs("button",{onClick:()=>k("resolved"),className:`px-5 py-2.5 text-sm font-bold rounded-lg transition-all ${y==="resolved"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500"}`,children:[" ",mt.length>0&&l.jsx("span",{className:"ml-1 bg-emerald-500 text-white px-2 py-0.5 rounded-full text-xs",children:mt.length})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>St(!Ve),className:`p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700 ${Ve?"text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30":"text-slate-400"}`,title:" ",children:l.jsx(me,{name:Ve?"List":"Grid",size:20})}),l.jsx("button",{onClick:()=>window.print(),className:"p-3 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 print:hidden",title:"",children:l.jsx(me,{name:"Printer",size:20})}),l.jsx("button",{onClick:()=>{Ee(""),L(!0)},className:"p-3 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100",children:l.jsx(me,{name:"Search",size:20})})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[(y==="pending"?vt:mt).map(Y=>Ho(Y,y==="resolved")),(y==="pending"?vt:mt).length===0&&l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(me,{name:y==="pending"?"CheckCircle":"List",size:64,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{className:"text-lg font-medium",children:y==="pending"?"  !":"  "})]})]})]})]}),l.jsx($n,{isOpen:D,onClose:()=>P(!1),title:" ",maxWidth:"max-w-2xl",children:l.jsxs("div",{className:"flex flex-col h-[90vh] md:h-[850px] -m-6",children:[l.jsxs("div",{className:"p-6 pb-2 border-b border-slate-100 dark:border-slate-700 bg-white dark:bg-dark-800 z-10",children:[mn&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-xl",children:mn.className}),l.jsxs("div",{className:"text-slate-500 dark:text-slate-400 font-medium",children:[mn.period,"   ",mn.subjectName]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-slate-400 text-xs uppercase font-bold",children:""}),l.jsx("div",{className:`text-base ${mn.isTeacherAbsent?"line-through decoration-red-400 text-red-400":"font-bold dark:text-white"}`,children:mn.teacherName})]})]}),l.jsxs("div",{className:"flex gap-2 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("button",{onClick:()=>I("teacher"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${x==="teacher"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:" "}),l.jsx("button",{onClick:()=>I("cancel"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${x==="cancel"?"border-red-600 text-red-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:" "}),l.jsx("button",{onClick:()=>I("advanced"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${x==="advanced"?"border-amber-600 text-amber-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:". "})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-white dark:bg-dark-800",children:[x==="teacher"&&l.jsxs("div",{className:"space-y-6",children:[Da.recommended.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"text-xs font-bold text-emerald-600 uppercase tracking-wider mb-2 flex items-center gap-1",children:[l.jsx(me,{name:"Star",size:14})," "]}),l.jsx("div",{className:"space-y-2",children:Da.recommended.map(({teacher:Y,isSpecialist:xe})=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50/50 border border-emerald-100 rounded-xl hover:bg-emerald-100/50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-200 text-emerald-700 flex items-center justify-center text-sm font-bold",children:Y.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 text-base",children:Y.name}),l.jsx("div",{className:"text-xs text-emerald-600 font-bold uppercase",children:xe?"":" "})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>gt(Y.id),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-white rounded-lg",title:" ",children:l.jsx(me,{name:"Eye",size:16})}),l.jsx("button",{onClick:()=>Tr(Y.id),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:""})]})]},Y.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:" "}),l.jsxs("div",{className:"relative mb-2",children:[l.jsx(me,{name:"Search",className:"absolute left-3 top-3 text-slate-400",size:16}),l.jsx("input",{placeholder:" ...",value:ke,onChange:Y=>ce(Y.target.value),className:"w-full pl-10 pr-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:border-indigo-500"})]}),l.jsx("div",{className:"space-y-1",children:Da.others.map(({teacher:Y,isBusy:xe,busyReason:Ge,isAbsent:Ye,subsCount:it})=>{const Nt=Te.includes(Y.id);return l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg text-sm ${Ye?"opacity-50":"hover:bg-slate-50"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${xe?"bg-orange-400":Ye?"bg-red-400":"bg-slate-300"}`}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-base text-slate-700",children:Y.name}),xe&&Ge&&l.jsx("span",{className:"text-[10px] text-orange-500 font-bold",children:Ge.details}),Nt&&l.jsx("span",{className:"text-[10px] bg-slate-200 px-1.5 py-0.5 rounded font-bold text-slate-500 w-fit",children:""})]})]}),l.jsxs("div",{className:"flex gap-2",children:[!Ye&&l.jsx("button",{onClick:()=>gt(Y.id),className:"p-1.5 text-slate-300 hover:text-indigo-600 hover:bg-slate-100 rounded",title:" ",children:l.jsx(me,{name:"Eye",size:16})}),!Ye&&l.jsx("button",{onClick:Ze=>Ma(Y.id,Ze),className:"p-1.5 text-slate-300 hover:text-slate-500 hover:bg-slate-100 rounded",children:l.jsx(me,{name:"X",size:16})}),!Ye&&l.jsx("button",{onClick:()=>Si(Y.id,xe),className:`px-3 py-1.5 rounded-lg text-xs font-bold ${xe?"text-orange-600 bg-orange-50":"text-indigo-600 bg-indigo-50"}`,children:xe?"?":""})]})]},Y.id)})})]})]}),x==="cancel"&&l.jsxs("div",{className:"text-center py-12 flex flex-col items-center justify-center h-full",children:[l.jsx("div",{className:"w-20 h-20 bg-red-50 text-red-500 rounded-full flex items-center justify-center mb-6",children:l.jsx(me,{name:"X",size:40})}),l.jsx("h3",{className:"font-black text-2xl mb-2 text-slate-800",children:" ?"}),l.jsx("p",{className:"text-slate-500 text-base mb-8 max-w-sm",children:"          ."}),l.jsx("button",{onClick:()=>Tr("cancelled"),className:"px-8 py-4 bg-red-600 text-white rounded-xl font-bold text-lg hover:bg-red-700 shadow-lg shadow-red-200 hover:shadow-xl transition-all",children:" "})]}),x==="advanced"&&l.jsxs("div",{className:"space-y-6 pt-4",children:[l.jsxs("button",{onClick:()=>Tr("conducted"),className:"w-full p-4 rounded-xl bg-blue-50 text-blue-700 font-bold text-base hover:bg-blue-100 flex items-center justify-center gap-3 border border-blue-100 transition-all hover:shadow-md",children:[l.jsx(me,{name:"CheckCircle",size:20}),"   ( )"]}),l.jsxs("div",{className:"bg-amber-50 p-5 rounded-2xl border border-amber-100",children:[l.jsxs("h4",{className:"font-bold text-amber-800 text-base mb-2 flex items-center gap-2",children:[l.jsx(me,{name:"Users",size:18})," "]}),l.jsx("p",{className:"text-sm text-amber-700 mb-4",children:"     ."}),l.jsx("div",{className:"space-y-2",children:lo.length===0?l.jsx("div",{className:"text-sm text-amber-500 italic text-center py-4",children:"  "}):lo.map(Y=>l.jsxs("button",{onClick:()=>Ir(Y.classEntity.id),className:"w-full p-3 bg-white rounded-xl border border-amber-200 text-left text-sm hover:border-amber-400 hover:shadow-sm transition-all",children:[l.jsx("span",{className:"font-bold text-base",children:Y.classEntity.name})," ",l.jsx("span",{className:"text-slate-400 mx-2",children:"|"})," ",l.jsx("span",{className:"font-medium",children:Y.subjects.join(", ")})]},Y.classEntity.id))})]}),co.length>0&&l.jsxs("div",{className:"bg-purple-50 p-5 rounded-2xl border border-purple-100",children:[l.jsxs("h4",{className:"font-bold text-purple-800 text-base mb-2 flex items-center gap-2",children:[l.jsx(me,{name:"RotateCw",size:18})," "]}),l.jsx("p",{className:"text-sm text-purple-700 mb-4",children:"      ."}),l.jsx("div",{className:"space-y-2",children:co.map(Y=>{var xe;return l.jsxs("button",{onClick:()=>js(Y.id),className:"w-full p-3 bg-white rounded-xl border border-purple-200 text-left text-sm hover:border-purple-400 hover:shadow-sm transition-all",children:[l.jsxs("span",{className:"font-bold text-base",children:[Y.period," "]}),": ",l.jsx("span",{className:"font-medium",children:(xe=r.find(Ge=>Ge.id===Y.classId))==null?void 0:xe.name})]},Y.id)})})]})]})]}),x==="teacher"&&l.jsxs("div",{className:"p-6 pt-4 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-dark-800 flex flex-col gap-4 rounded-b-3xl",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:" ()"}),l.jsxs("select",{value:De,onChange:Y=>st(Y.target.value),className:"w-full border border-slate-200 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white font-medium outline-none focus:ring-2 ring-indigo-500",children:[l.jsx("option",{value:"",children:" /  "}),n.map(Y=>l.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:" ()"}),l.jsxs("select",{value:ge,onChange:Y=>Be(Y.target.value),className:"w-full border border-slate-200 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white font-medium outline-none focus:ring-2 ring-indigo-500",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:" ",children:" "}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:" ",children:" "}),l.jsx("option",{value:"",children:""})]})]})]}),(ve||(mn==null?void 0:mn.teacherId)&&De)&&l.jsx("button",{onClick:()=>Tr(ve||(mn==null?void 0:mn.teacherId)||""),className:"w-full py-3 bg-indigo-600 text-white rounded-xl text-base font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200",children:" "})]})]})}),l.jsx($n,{isOpen:B,onClose:()=>j(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:Se,onChange:Y=>M(Y.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:at,className:"w-full px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:"  "}),l.jsxs("button",{onClick:yt,className:"w-full px-6 py-3 bg-purple-50 text-purple-700 border border-purple-100 rounded-xl font-bold hover:bg-purple-100 transition flex items-center justify-center gap-2",children:[l.jsx(me,{name:"Layers",size:18}),"   "]})]})]})}),l.jsx($n,{isOpen:At,onClose:()=>dt(!1),title:" ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:["   ",l.jsx("strong",{children:" "}),"    ",new Date(p).toLocaleDateString("ru-RU"),"."]}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("button",{onClick:()=>Tt("cancel"),className:`p-4 rounded-xl border text-left transition-all ${tt==="cancel"?"bg-red-50 border-red-200 ring-2 ring-red-500":"bg-white border-slate-200 hover:border-red-300"}`,children:[l.jsxs("div",{className:"font-bold text-red-600 mb-1 flex items-center gap-2",children:[l.jsx(me,{name:"X",size:18}),"   "]}),l.jsx("div",{className:"text-xs text-slate-500",children:"     ."})]}),l.jsxs("button",{onClick:()=>Tt("replace"),className:`p-4 rounded-xl border text-left transition-all ${tt==="replace"?"bg-indigo-50 border-indigo-200 ring-2 ring-indigo-500":"bg-white border-slate-200 hover:border-indigo-300"}`,children:[l.jsxs("div",{className:"font-bold text-indigo-600 mb-1 flex items-center gap-2",children:[l.jsx(me,{name:"UserCheck",size:18}),"   "]}),l.jsx("div",{className:"text-xs text-slate-500",children:"     ."})]})]}),tt==="replace"&&l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:"  "}),l.jsxs("select",{value:bt,onChange:Y=>It(Y.target.value),className:"w-full p-3 border border-slate-200 rounded-xl bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white outline-none focus:ring-2 ring-indigo-500",children:[l.jsx("option",{value:"",children:"--   --"}),e.filter(Y=>Y.id!==we&&!Y.unavailableDates.includes(p)).map(Y=>l.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),l.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-700 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>dt(!1),className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),l.jsx("button",{onClick:Et,disabled:!tt||tt==="replace"&&!bt,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})}),l.jsxs($n,{isOpen:S,onClose:()=>L(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ."}),l.jsxs("div",{className:"relative",children:[l.jsx(me,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:R,onChange:Y=>Ee(Y.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[Qs.map(Y=>{var xe;return l.jsxs("button",{onClick:()=>{L(!1),_({scheduleItemId:Y.id,subjectId:Y.subjectId,period:Y.period,shift:Y.shift,classId:Y.classId,teacherId:Y.teacherId,roomId:Y.roomId,day:Y.day}),P(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[Y.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",Y.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[Y.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:Y.subjectName}),Y.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((xe=n.find(Ge=>Ge.id===Y.roomId))==null?void 0:xe.name)||Y.roomId]})]})]},Y.id)}),R.length>1&&Qs.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",p,")"]})]})]}),l.jsx($n,{isOpen:T,onClose:()=>Z(!1),title:" ",maxWidth:"max-w-5xl",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-4 p-1 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(me,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:16}),l.jsx("input",{placeholder:"   (YYYY-MM-DD)  ...",value:H,onChange:Y=>K(Y.target.value),className:"w-full pl-9 pr-3 py-2 bg-white dark:bg-slate-800 border-none rounded-lg text-sm outline-none dark:text-white"})]}),l.jsxs("div",{className:"relative w-64",children:[l.jsxs("select",{value:ee,onChange:Y=>se(Y.target.value),className:"w-full py-2 px-3 bg-white dark:bg-slate-800 rounded-lg text-sm border-none outline-none cursor-pointer dark:text-white appearance-none",children:[l.jsx("option",{value:"",children:" "}),e.map(Y=>l.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),l.jsx(me,{name:"Filter",className:"absolute right-3 top-2.5 text-slate-400 pointer-events-none",size:14})]})]}),l.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar rounded-xl border border-slate-200 dark:border-slate-700",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 sticky top-0 z-10 shadow-sm",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:""}),l.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:""}),l.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "}),l.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "}),l.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-dark-800",children:A.filter(Y=>{var xe,Ge;if(ee&&Y.replacementTeacherId!==ee&&Y.originalTeacherId!==ee)return!1;if(H){const Ye=H.toLowerCase(),it=Y.date.includes(Ye),Nt=(xe=e.find(Zt=>Zt.id===Y.originalTeacherId))==null?void 0:xe.name.toLowerCase().includes(Ye),Ze=(Ge=e.find(Zt=>Zt.id===Y.replacementTeacherId))==null?void 0:Ge.name.toLowerCase().includes(Ye);return it||Nt||Ze}return!0}).sort((Y,xe)=>new Date(xe.date).getTime()-new Date(Y.date).getTime()).map(Y=>{const xe=e.find(Nt=>Nt.id===Y.originalTeacherId),Ge=e.find(Nt=>Nt.id===Y.replacementTeacherId),Ye=jt.find(Nt=>Nt.id===Y.scheduleItemId)||{period:"?",classId:"?"},it=r.find(Nt=>Nt.id===Ye.classId);return l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:[l.jsx("td",{className:"p-4 text-sm font-medium text-slate-600 dark:text-slate-300 whitespace-nowrap",children:new Date(Y.date).toLocaleDateString("ru-RU")}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-white",children:[Ye.period," "]}),l.jsx("span",{className:"text-xs text-slate-500",children:(it==null?void 0:it.name)||"?"})]})}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-xs font-bold text-slate-500",children:xe==null?void 0:xe.name[0]}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:xe==null?void 0:xe.name})]})}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[Y.replacementTeacherId==="cancelled"?l.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center text-red-500",children:l.jsx(me,{name:"X",size:14})}):Y.replacementTeacherId==="conducted"?l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-500",children:l.jsx(me,{name:"CheckCircle",size:14})}):l.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 font-bold text-xs",children:Ge==null?void 0:Ge.name[0]}),l.jsx("span",{className:`text-sm font-bold ${Y.replacementTeacherId==="cancelled"?"text-red-500":"text-slate-800 dark:text-white"}`,children:Y.replacementTeacherId==="cancelled"?" ":Y.replacementTeacherId==="conducted"?"":Ge==null?void 0:Ge.name})]})}),l.jsx("td",{className:"p-4 text-right",children:Y.isMerger?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:""}):Y.replacementTeacherId==="cancelled"?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:""}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:""})})]},Y.id)})})]})})]})}),l.jsx($n,{isOpen:ye,onClose:()=>_e(!1),title:" ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-base text-slate-600 dark:text-slate-300",children:"               ?"}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("button",{onClick:()=>Js("single"),className:"w-full p-4 bg-white border border-slate-200 dark:bg-slate-700 dark:border-slate-600 rounded-xl flex items-center gap-4 hover:shadow-md transition-all group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:l.jsx(me,{name:"Bell",size:20})}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"  "}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),l.jsxs("button",{onClick:()=>Js("all"),className:"w-full p-4 bg-white border border-slate-200 dark:bg-slate-700 dark:border-slate-600 rounded-xl flex items-center gap-4 hover:shadow-md transition-all group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-50 text-purple-600 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:l.jsx(me,{name:"List",size:20})}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"  ()"}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"     "})]})]})]})]})}),l.jsx($n,{isOpen:!!ft,onClose:()=>gt(null),title:" ",maxWidth:"max-w-md",children:l.jsx("div",{className:"space-y-3",children:ft&&(()=>{e.find(xe=>xe.id===ft);const Y=jt.filter(xe=>xe.teacherId===ft&&xe.day===dr).sort((xe,Ge)=>xe.period-Ge.period);return Y.length===0?l.jsx("div",{className:"text-center text-slate-400 py-8",children:" "}):Y.map(xe=>{var Nt,Ze,Zt;const Ge=(Nt=r.find(Yt=>Yt.id===xe.classId))==null?void 0:Nt.name,Ye=(Ze=t.find(Yt=>Yt.id===xe.subjectId))==null?void 0:Ze.name,it=((Zt=n.find(Yt=>Yt.id===xe.roomId))==null?void 0:Zt.name)||xe.roomId;return l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-bold text-slate-500",children:xe.period}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:Ge}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[Ye,", . ",it]})]})]},xe.id)})})()})})]})},JY=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:s}=Ki(),{schedule1:i,schedule2:a}=FA(),[o,A]=z.useState("teachers"),[c,u]=z.useState(uA()),[d,p]=z.useState(et.First),[g,v]=z.useState(1),[y,k]=z.useState(et.First),[x,I]=z.useState(1),[N,U]=z.useState(""),[D,P]=z.useState(""),[E,_]=z.useState(""),[B,j]=z.useState(""),[S,L]=z.useState({summary:"",teacherNotification:"",teacherSummary:""}),[T,Z]=z.useState(!1),[ye,_e]=z.useState({message:"",active:!1,lastUpdated:""}),Ce=z.useMemo(()=>{const K={schedule:i,schedule2:a,settings:n};return iU(new Date(c),K)},[c,i,a,n]);z.useEffect(()=>{n&&(U(n.telegramToken||""),P(n.feedbackChatId||""),_(n.weatherApiKey||""),j(n.weatherCity||"Minsk,BY"),L(n.telegramTemplates||{summary:` **  {{date}}** 

{{content}}`,teacherNotification:` **  !**
 {{date}}

{{content}}

,   .`,teacherSummary:` **   {{date}}**

{{content}},   .`}),_e(n.adminAnnouncement||{message:"",active:!1,lastUpdated:""}))},[n]),z.useEffect(()=>{v(d===et.First?1:0)},[d]),z.useEffect(()=>{I(y===et.First?1:0)},[y]);const ie=z.useMemo(()=>{const K=new Date(c).getDay();return K===0||K===6?null:Lr[K-1]},[c]),we=Ks[d],Pe=z.useMemo(()=>ie?e.filter(K=>K.shifts&&!K.shifts.includes(d)||K.unavailableDates.includes(c)?!1:!Ce.some(se=>se.teacherId===K.id&&se.day===ie&&se.period>g&&se.shift===d)).sort((K,ee)=>K.name.localeCompare(ee.name)):[],[e,c,ie,g,d,Ce]),Se=z.useMemo(()=>{if(!ie)return[];const K=new Set;return Ce.forEach(se=>{se.day===ie&&se.period===x&&se.shift===y&&se.roomId&&K.add(se.roomId)}),r.filter(se=>!K.has(se.id)).map(se=>se.name)},[Ce,r,ie,x,y]),M=async()=>{await s({settings:{...n,telegramToken:N,feedbackChatId:D,weatherApiKey:E,weatherCity:B,telegramTemplates:S,adminAnnouncement:{...ye,lastUpdated:new Date().toISOString()}}}),alert(" !"),Z(!1)},H=()=>{_e(K=>({...K,active:!K.active}))};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(me,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>A("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>A("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>A("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),o!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:c,onChange:K=>u(K.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),o==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>p(et.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===et.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>p(et.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===et.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:we.map(K=>l.jsx("button",{onClick:()=>v(K),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${g===K?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:K},K))})]})]}),o==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>k(et.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===et.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>k(et.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===et.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:Ks[y].map(K=>l.jsx("button",{onClick:()=>I(K),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${x===K?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:K},K))})]})]}),o==="settings"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700 space-y-6",children:[l.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(me,{name:"Zap",size:20}),"  "]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:N,onChange:K=>U(K.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:D,onChange:K=>P(K.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   "})]}),l.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-600",children:[l.jsxs("h4",{className:"font-bold text-sm text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-2",children:[l.jsx(me,{name:"Cloud",size:16}),"  (OpenWeatherMap)"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"API Key"}),l.jsx("input",{type:"password",value:E,onChange:K=>_(K.target.value),placeholder:"b6907d28...",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),l.jsx("input",{type:"text",value:B,onChange:K=>j(K.target.value),placeholder:"Minsk,BY",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"})]})]})]}),l.jsxs("button",{onClick:()=>Z(!0),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-indigo-200 dark:border-slate-600 text-indigo-600 dark:text-indigo-400 rounded-xl font-bold hover:bg-indigo-50 dark:hover:bg-slate-600 transition flex items-center justify-center gap-2",children:[l.jsx(me,{name:"Edit",size:18}),"   "]})]})]}),l.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-6 rounded-2xl border border-amber-100 dark:border-amber-900 space-y-6",children:[l.jsxs("h3",{className:"font-bold text-lg text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[l.jsx(me,{name:"Bell",size:20}),"  "]}),l.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:",        ( )."}),l.jsx("div",{children:l.jsx("textarea",{value:ye.message,onChange:K=>_e({...ye,message:K.target.value}),rows:4,className:"w-full border border-amber-200 dark:border-amber-800 rounded-xl p-3 text-sm bg-white dark:bg-slate-800 dark:text-white outline-none focus:border-amber-500 focus:ring-2 ring-amber-500/20 resize-none",placeholder:":     14:00..."})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("div",{className:`w-12 h-6 rounded-full p-1 transition-colors ${ye.active?"bg-amber-500":"bg-slate-300 dark:bg-slate-600"}`,children:l.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${ye.active?"translate-x-6":"translate-x-0"}`})}),l.jsx("input",{type:"checkbox",className:"hidden",checked:ye.active,onChange:H}),l.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:""})]}),l.jsx("div",{className:"text-xs text-slate-400",children:ye.lastUpdated?`: ${new Date(ye.lastUpdated).toLocaleDateString()}`:""})]})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("button",{onClick:M,className:"w-full px-6 py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 text-lg",children:[l.jsx(me,{name:"Save",size:22}),"   "]})})]})]}),o==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[Pe.map(K=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(me,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:K.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:K.subjectIds.slice(0,2).map(ee=>{const se=t.find(ue=>ue.id===ee);return se?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:se.name},ee):null})})]})]},K.id)),Pe.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",g,"   ",d]})]}),o==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[Se.map(K=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(me,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:K}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},K)),Se.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(me,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]}),l.jsx($n,{isOpen:T,onClose:()=>Z(!1),title:" ",maxWidth:"max-w-3xl",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-900 text-sm text-blue-800 dark:text-blue-300",children:[l.jsx("p",{className:"font-bold mb-1",children:" :"}),l.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[l.jsxs("li",{children:[l.jsx("code",{children:"{{date}}"}),'    (. "01.09.2023")']}),l.jsxs("li",{children:[l.jsx("code",{children:"{{content}}"}),"    "]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  (/)"}),l.jsx("textarea",{value:S.summary,onChange:K=>L({...S,summary:K.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ( )"}),l.jsx("textarea",{value:S.teacherNotification,onChange:K=>L({...S,teacherNotification:K.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  (  )"}),l.jsx("textarea",{value:S.teacherSummary,onChange:K=>L({...S,teacherSummary:K.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:M,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:" "})})]})})]})};var XY=Object.defineProperty,Bw=Object.getOwnPropertySymbols,h6=Object.prototype.hasOwnProperty,f6=Object.prototype.propertyIsEnumerable,sk=(t,e,r)=>e in t?XY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,YY=(t,e)=>{for(var r in e||(e={}))h6.call(e,r)&&sk(t,r,e[r]);if(Bw)for(var r of Bw(e))f6.call(e,r)&&sk(t,r,e[r]);return t},ZY=(t,e)=>{var r={};for(var n in t)h6.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Bw)for(var n of Bw(t))e.indexOf(n)<0&&f6.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var du;(t=>{const e=class{constructor(A,c,u,d){if(this.version=A,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],A<e.MIN_VERSION||A>e.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=A*4+17;let p=[];for(let v=0;v<this.size;v++)p.push(!1);for(let v=0;v<this.size;v++)this.modules.push(p.slice()),this.isFunction.push(p.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(u);if(this.drawCodewords(g),d==-1){let v=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const k=this.getPenaltyScore();k<v&&(d=y,v=k),this.applyMask(y)}}i(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(A,c){const u=t.QrSegment.makeSegments(A);return e.encodeSegments(u,c)}static encodeBinary(A,c){const u=t.QrSegment.makeBytes(A);return e.encodeSegments([u],c)}static encodeSegments(A,c,u=1,d=40,p=-1,g=!0){if(!(e.MIN_VERSION<=u&&u<=d&&d<=e.MAX_VERSION)||p<-1||p>7)throw new RangeError("Invalid value");let v,y;for(v=u;;v++){const N=e.getNumDataCodewords(v,c)*8,U=o.getTotalBits(A,v);if(U<=N){y=U;break}if(v>=d)throw new RangeError("Data too long")}for(const N of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])g&&y<=e.getNumDataCodewords(v,N)*8&&(c=N);let k=[];for(const N of A){n(N.mode.modeBits,4,k),n(N.numChars,N.mode.numCharCountBits(v),k);for(const U of N.getData())k.push(U)}i(k.length==y);const x=e.getNumDataCodewords(v,c)*8;i(k.length<=x),n(0,Math.min(4,x-k.length),k),n(0,(8-k.length%8)%8,k),i(k.length%8==0);for(let N=236;k.length<x;N^=253)n(N,8,k);let I=[];for(;I.length*8<k.length;)I.push(0);return k.forEach((N,U)=>I[U>>>3]|=N<<7-(U&7)),new e(v,c,I,p)}getModule(A,c){return 0<=A&&A<this.size&&0<=c&&c<this.size&&this.modules[c][A]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const A=this.getAlignmentPatternPositions(),c=A.length;for(let u=0;u<c;u++)for(let d=0;d<c;d++)u==0&&d==0||u==0&&d==c-1||u==c-1&&d==0||this.drawAlignmentPattern(A[u],A[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(A){const c=this.errorCorrectionLevel.formatBits<<3|A;let u=c;for(let p=0;p<10;p++)u=u<<1^(u>>>9)*1335;const d=(c<<10|u)^21522;i(d>>>15==0);for(let p=0;p<=5;p++)this.setFunctionModule(8,p,s(d,p));this.setFunctionModule(8,7,s(d,6)),this.setFunctionModule(8,8,s(d,7)),this.setFunctionModule(7,8,s(d,8));for(let p=9;p<15;p++)this.setFunctionModule(14-p,8,s(d,p));for(let p=0;p<8;p++)this.setFunctionModule(this.size-1-p,8,s(d,p));for(let p=8;p<15;p++)this.setFunctionModule(8,this.size-15+p,s(d,p));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let A=this.version;for(let u=0;u<12;u++)A=A<<1^(A>>>11)*7973;const c=this.version<<12|A;i(c>>>18==0);for(let u=0;u<18;u++){const d=s(c,u),p=this.size-11+u%3,g=Math.floor(u/3);this.setFunctionModule(p,g,d),this.setFunctionModule(g,p,d)}}drawFinderPattern(A,c){for(let u=-4;u<=4;u++)for(let d=-4;d<=4;d++){const p=Math.max(Math.abs(d),Math.abs(u)),g=A+d,v=c+u;0<=g&&g<this.size&&0<=v&&v<this.size&&this.setFunctionModule(g,v,p!=2&&p!=4)}}drawAlignmentPattern(A,c){for(let u=-2;u<=2;u++)for(let d=-2;d<=2;d++)this.setFunctionModule(A+d,c+u,Math.max(Math.abs(d),Math.abs(u))!=1)}setFunctionModule(A,c,u){this.modules[c][A]=u,this.isFunction[c][A]=!0}addEccAndInterleave(A){const c=this.version,u=this.errorCorrectionLevel;if(A.length!=e.getNumDataCodewords(c,u))throw new RangeError("Invalid argument");const d=e.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c],p=e.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c],g=Math.floor(e.getNumRawDataModules(c)/8),v=d-g%d,y=Math.floor(g/d);let k=[];const x=e.reedSolomonComputeDivisor(p);for(let N=0,U=0;N<d;N++){let D=A.slice(U,U+y-p+(N<v?0:1));U+=D.length;const P=e.reedSolomonComputeRemainder(D,x);N<v&&D.push(0),k.push(D.concat(P))}let I=[];for(let N=0;N<k[0].length;N++)k.forEach((U,D)=>{(N!=y-p||D>=v)&&I.push(U[N])});return i(I.length==g),I}drawCodewords(A){if(A.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let d=0;d<this.size;d++)for(let p=0;p<2;p++){const g=u-p,y=(u+1&2)==0?this.size-1-d:d;!this.isFunction[y][g]&&c<A.length*8&&(this.modules[y][g]=s(A[c>>>3],7-(c&7)),c++)}}i(c==A.length*8)}applyMask(A){if(A<0||A>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let u=0;u<this.size;u++){let d;switch(A){case 0:d=(u+c)%2==0;break;case 1:d=c%2==0;break;case 2:d=u%3==0;break;case 3:d=(u+c)%3==0;break;case 4:d=(Math.floor(u/3)+Math.floor(c/2))%2==0;break;case 5:d=u*c%2+u*c%3==0;break;case 6:d=(u*c%2+u*c%3)%2==0;break;case 7:d=((u+c)%2+u*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][u]&&d&&(this.modules[c][u]=!this.modules[c][u])}}getPenaltyScore(){let A=0;for(let p=0;p<this.size;p++){let g=!1,v=0,y=[0,0,0,0,0,0,0];for(let k=0;k<this.size;k++)this.modules[p][k]==g?(v++,v==5?A+=e.PENALTY_N1:v>5&&A++):(this.finderPenaltyAddHistory(v,y),g||(A+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),g=this.modules[p][k],v=1);A+=this.finderPenaltyTerminateAndCount(g,v,y)*e.PENALTY_N3}for(let p=0;p<this.size;p++){let g=!1,v=0,y=[0,0,0,0,0,0,0];for(let k=0;k<this.size;k++)this.modules[k][p]==g?(v++,v==5?A+=e.PENALTY_N1:v>5&&A++):(this.finderPenaltyAddHistory(v,y),g||(A+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),g=this.modules[k][p],v=1);A+=this.finderPenaltyTerminateAndCount(g,v,y)*e.PENALTY_N3}for(let p=0;p<this.size-1;p++)for(let g=0;g<this.size-1;g++){const v=this.modules[p][g];v==this.modules[p][g+1]&&v==this.modules[p+1][g]&&v==this.modules[p+1][g+1]&&(A+=e.PENALTY_N2)}let c=0;for(const p of this.modules)c=p.reduce((g,v)=>g+(v?1:0),c);const u=this.size*this.size,d=Math.ceil(Math.abs(c*20-u*10)/u)-1;return i(0<=d&&d<=9),A+=d*e.PENALTY_N4,i(0<=A&&A<=2568888),A}getAlignmentPatternPositions(){if(this.version==1)return[];{const A=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(A*2-2))*2;let u=[6];for(let d=this.size-7;u.length<A;d-=c)u.splice(1,0,d);return u}}static getNumRawDataModules(A){if(A<e.MIN_VERSION||A>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*A+128)*A+64;if(A>=2){const u=Math.floor(A/7)+2;c-=(25*u-10)*u-55,A>=7&&(c-=36)}return i(208<=c&&c<=29648),c}static getNumDataCodewords(A,c){return Math.floor(e.getNumRawDataModules(A)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][A]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][A]}static reedSolomonComputeDivisor(A){if(A<1||A>255)throw new RangeError("Degree out of range");let c=[];for(let d=0;d<A-1;d++)c.push(0);c.push(1);let u=1;for(let d=0;d<A;d++){for(let p=0;p<c.length;p++)c[p]=e.reedSolomonMultiply(c[p],u),p+1<c.length&&(c[p]^=c[p+1]);u=e.reedSolomonMultiply(u,2)}return c}static reedSolomonComputeRemainder(A,c){let u=c.map(d=>0);for(const d of A){const p=d^u.shift();u.push(0),c.forEach((g,v)=>u[v]^=e.reedSolomonMultiply(g,p))}return u}static reedSolomonMultiply(A,c){if(A>>>8||c>>>8)throw new RangeError("Byte out of range");let u=0;for(let d=7;d>=0;d--)u=u<<1^(u>>>7)*285,u^=(c>>>d&1)*A;return i(u>>>8==0),u}finderPenaltyCountPatterns(A){const c=A[1];i(c<=this.size*3);const u=c>0&&A[2]==c&&A[3]==c*3&&A[4]==c&&A[5]==c;return(u&&A[0]>=c*4&&A[6]>=c?1:0)+(u&&A[6]>=c*4&&A[0]>=c?1:0)}finderPenaltyTerminateAndCount(A,c,u){return A&&(this.finderPenaltyAddHistory(c,u),c=0),c+=this.size,this.finderPenaltyAddHistory(c,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(A,c){c[0]==0&&(A+=this.size),c.pop(),c.unshift(A)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(A,c,u){if(c<0||c>31||A>>>c)throw new RangeError("Value out of range");for(let d=c-1;d>=0;d--)u.push(A>>>d&1)}function s(A,c){return(A>>>c&1)!=0}function i(A){if(!A)throw new Error("Assertion error")}const a=class{constructor(A,c,u){if(this.mode=A,this.numChars=c,this.bitData=u,c<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(A){let c=[];for(const u of A)n(u,8,c);return new a(a.Mode.BYTE,A.length,c)}static makeNumeric(A){if(!a.isNumeric(A))throw new RangeError("String contains non-numeric characters");let c=[];for(let u=0;u<A.length;){const d=Math.min(A.length-u,3);n(parseInt(A.substr(u,d),10),d*3+1,c),u+=d}return new a(a.Mode.NUMERIC,A.length,c)}static makeAlphanumeric(A){if(!a.isAlphanumeric(A))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],u;for(u=0;u+2<=A.length;u+=2){let d=a.ALPHANUMERIC_CHARSET.indexOf(A.charAt(u))*45;d+=a.ALPHANUMERIC_CHARSET.indexOf(A.charAt(u+1)),n(d,11,c)}return u<A.length&&n(a.ALPHANUMERIC_CHARSET.indexOf(A.charAt(u)),6,c),new a(a.Mode.ALPHANUMERIC,A.length,c)}static makeSegments(A){return A==""?[]:a.isNumeric(A)?[a.makeNumeric(A)]:a.isAlphanumeric(A)?[a.makeAlphanumeric(A)]:[a.makeBytes(a.toUtf8ByteArray(A))]}static makeEci(A){let c=[];if(A<0)throw new RangeError("ECI assignment value out of range");if(A<128)n(A,8,c);else if(A<16384)n(2,2,c),n(A,14,c);else if(A<1e6)n(6,3,c),n(A,21,c);else throw new RangeError("ECI assignment value out of range");return new a(a.Mode.ECI,0,c)}static isNumeric(A){return a.NUMERIC_REGEX.test(A)}static isAlphanumeric(A){return a.ALPHANUMERIC_REGEX.test(A)}getData(){return this.bitData.slice()}static getTotalBits(A,c){let u=0;for(const d of A){const p=d.mode.numCharCountBits(c);if(d.numChars>=1<<p)return 1/0;u+=4+p+d.bitData.length}return u}static toUtf8ByteArray(A){A=encodeURI(A);let c=[];for(let u=0;u<A.length;u++)A.charAt(u)!="%"?c.push(A.charCodeAt(u)):(c.push(parseInt(A.substr(u+1,2),16)),u+=2);return c}};let o=a;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})(du||(du={}));(t=>{(e=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(du||(du={}));(t=>{(e=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(du||(du={}));var bf=du;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var eZ={L:bf.QrCode.Ecc.LOW,M:bf.QrCode.Ecc.MEDIUM,Q:bf.QrCode.Ecc.QUARTILE,H:bf.QrCode.Ecc.HIGH},tZ=128,rZ="L",nZ="#FFFFFF",sZ="#000000",iZ=!1,p6=4,aZ=.1;function oZ(t,e=0){const r=[];return t.forEach(function(n,s){let i=null;n.forEach(function(a,o){if(!a&&i!==null){r.push(`M${i+e} ${s+e}h${o-i}v1H${i+e}z`),i=null;return}if(o===n.length-1){if(!a)return;i===null?r.push(`M${o+e},${s+e} h1v1H${o+e}z`):r.push(`M${i+e},${s+e} h${o+1-i}v1H${i+e}z`);return}a&&i===null&&(i=o)})}),r.join("")}function AZ(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function lZ(t,e,r,n){if(n==null)return null;const s=r?p6:0,i=t.length+s*2,a=Math.floor(e*aZ),o=i/e,A=(n.width||a)*o,c=(n.height||a)*o,u=n.x==null?t.length/2-A/2:n.x*o,d=n.y==null?t.length/2-c/2:n.y*o;let p=null;if(n.excavate){let g=Math.floor(u),v=Math.floor(d),y=Math.ceil(A+u-g),k=Math.ceil(c+d-v);p={x:g,y:v,w:y,h:k}}return{x:u,y:d,h:c,w:A,excavation:p}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function cZ(t){const e=t,{value:r,size:n=tZ,level:s=rZ,bgColor:i=nZ,fgColor:a=sZ,includeMargin:o=iZ,imageSettings:A}=e,c=ZY(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let u=bf.QrCode.encodeText(r,eZ[s]).getModules();const d=o?p6:0,p=u.length+d*2,g=lZ(u,n,o,A);let v=null;A!=null&&g!=null&&(g.excavation!=null&&(u=AZ(u,g.excavation)),v=Co.createElement("image",{xlinkHref:A.src,height:g.h,width:g.w,x:g.x+d,y:g.y+d,preserveAspectRatio:"none"}));const y=oZ(u,d);return Co.createElement("svg",YY({height:n,width:n,viewBox:`0 0 ${p} ${p}`},c),Co.createElement("path",{fill:i,d:`M0,0 h${p}v${p}H0z`,shapeRendering:"crispEdges"}),Co.createElement("path",{fill:a,d:y,shapeRendering:"crispEdges"}),v)}const uZ=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:i,saveStaticData:a,dutyZones:o}=Ki(),{schedule1:A,schedule2:c,substitutions:u,saveScheduleData:d,dutySchedule:p,nutritionRecords:g}=FA(),v=z.useRef(null),y=z.useRef(null),k=z.useRef(null),[x,I]=z.useState(uA()),[N,U]=z.useState(()=>s0(new Date,s)),[D,P]=z.useState(!1),[E,_]=z.useState(!1),[B,j]=z.useState(""),[S,L]=z.useState(""),[T,Z]=z.useState(!1),[ye,_e]=z.useState(""),Ce=z.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:i,schedule:A,schedule2:c,substitutions:u,dutyZones:o,dutySchedule:p,nutritionRecords:g}),[t,e,r,n,s,i,A,c,u,o,p,g]),ie=()=>N===2?c:A,we=Be=>{const ve=new Date(Be).getMonth();return ve>=0&&ve<=4?c:A},Pe=z.useMemo(()=>{const Be=new Set;return r.forEach(ve=>{const de=ve.name.match(/^(\d+)/);de&&Be.add(de[1])}),Array.from(Be).sort((ve,de)=>parseInt(ve)-parseInt(de))},[r]);z.useEffect(()=>{Pe.length>0&&!ye&&_e(Pe[0])},[Pe]);const Se=Be=>{var Te;const ve=(Te=Be.target.files)==null?void 0:Te[0];if(!ve)return;const de=new FileReader;de.onload=async q=>{var le;try{const oe=JSON.parse((le=q.target)==null?void 0:le.result);if(oe.teachers&&(oe.schedule||oe.schedule2)){if(window.confirm("    . ?")){const he={...Qi,...oe,rooms:oe.rooms||Qi.rooms,classes:oe.classes||[],schedule:oe.schedule||[],schedule2:oe.schedule2||[],teachers:oe.teachers||[],subjects:oe.subjects||[],substitutions:oe.substitutions||[],settings:{...Qi.settings,...oe.settings}};await a(he),await d(he),alert("  !")}}else alert("  .")}catch{alert("  .")}},de.readAsText(ve)},M=()=>{const Be=ie();let ve=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Lr.forEach(le=>{ve+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${le}</td></tr>`,[et.First,et.Second].forEach(oe=>{const he=r.filter(Le=>Le.shift===oe);he.length!==0&&(ve+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${oe}</td></tr>`,ve+='<tr><th class="header"></th>',Ks[oe].forEach(Le=>ve+=`<th class="header">${Le} </th>`),ve+="</tr>",he.forEach(Le=>{ve+=`<tr><td class="class-cell">${Le.name}</td>`,Ks[oe].forEach(Re=>{const $e=Be.filter(Ve=>Ve.classId===Le.id&&Ve.day===le&&Ve.shift===oe&&Ve.period===Re);ve+='<td style="height: 60px;">',$e.forEach(Ve=>{const St=t.find(dt=>dt.id===Ve.subjectId),ft=e.find(dt=>dt.id===Ve.teacherId),gt=n.find(dt=>dt.id===Ve.roomId),At=gt?gt.name:Ve.roomId;ve+=`<div style="background-color: ${(St==null?void 0:St.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(St==null?void 0:St.name)||""} ${Ve.direction||""}</div>
                                <div class="meta">${(ft==null?void 0:ft.name)||""} ${At?`(. ${At})`:""}</div>
                            </div>`}),ve+="</td>"}),ve+="</tr>"}))})}),ve+="</table></body></html>";const de=new Blob([ve],{type:"application/vnd.ms-excel"}),Te=URL.createObjectURL(de),q=document.createElement("a");q.href=Te,q.download=`_22_${N}.xls`,document.body.appendChild(q),q.click(),document.body.removeChild(q)},H=()=>{const Be=ie(),ve={[ur.Monday]:{header:"#fecaca",cell:"#fee2e2"},[ur.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[ur.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[ur.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[ur.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let de=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 10pt; margin-bottom: 20px; width: 100%; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
                
                /* Doc Header/Footer Styles */
                .doc-table td { border: none !important; padding: 5px; vertical-align: top; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;de+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[et.First,et.Second].forEach(oe=>{const he=Ks[oe];de+="<table>",de+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px; background-color: #e9d5ff;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px; background-color: #e9d5ff;"></th>
                <th colspan="${Lr.length*he.length}" class="header" style="border: 2px solid #000; font-size: 14px; background-color: #f3f4f6;"> </th>
            </tr>`,de+="<tr>",Lr.forEach(Re=>{var Ve;const $e=((Ve=ve[Re])==null?void 0:Ve.header)||"#f3f4f6";de+=`<th colspan="${he.length}" class="header" style="border: 2px solid #000; background-color: ${$e};">${Re}</th>`}),de+="</tr>",de+="<tr>",Lr.forEach(Re=>{var Ve;const $e=((Ve=ve[Re])==null?void 0:Ve.header)||"#f3f4f6";he.forEach(St=>de+=`<th class="header" style="border-bottom: 2px solid #000; background-color: ${$e};"></th>`)}),de+="</tr>";const Le="#e5e7eb";de+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: ${Le};">${oe}</th>
                <th class="header" style="border: 2px solid #000; background-color: ${Le};"></th>
            `,Lr.forEach(Re=>{var Ve;const $e=((Ve=ve[Re])==null?void 0:Ve.header)||"#f3f4f6";he.forEach(St=>de+=`<th class="header" style="width: 40px; background-color: ${$e};">${St}</th>`)}),de+="</tr>",t.forEach(Re=>{const $e=e.filter(Ve=>Ve.subjectIds.includes(Re.id)&&Ve.shifts.includes(oe));$e.length!==0&&($e.forEach((Ve,St)=>{de+="<tr>",St===0&&(de+=`<td rowspan="${$e.length}" class="subject-cell" style="border: 2px solid #000; background-color: #e9d5ff;">${Re.name}</td>`),de+=`<td class="teacher-cell" style="border-right: 2px solid #000; background-color: #e9d5ff;">${Ve.name}</td>`,Lr.forEach(ft=>{var At;const gt=((At=ve[ft])==null?void 0:At.cell)||"#fff";he.forEach(dt=>{const tt=Be.find(Tt=>Tt.teacherId===Ve.id&&Tt.subjectId===Re.id&&Tt.day===ft&&Tt.period===dt&&Tt.shift===oe);if(tt){const Tt=r.find(Kt=>Kt.id===tt.classId),bt=n.find(Kt=>Kt.id===tt.roomId),It=bt?bt.name:tt.roomId,qt=It?`<sub>${It}</sub>`:"",Ht=tt.direction?` <span style="font-size:10px">(${tt.direction})</span>`:"";de+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${gt};">${Tt?Tt.name:""}${Ht}${qt}</td>`}else de+=`<td style="border: 1px solid #000; background-color: ${gt};"></td>`})}),de+="</tr>"}),de+=`<tr><td colspan="${2+Lr.length*he.length}" style="height: 2px; background-color: #000;"></td></tr>`)}),de+="</table><br/><br/>"}),de+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,de+="</body></html>";const Te=new Blob([de],{type:"application/vnd.ms-excel"}),q=URL.createObjectURL(Te),le=document.createElement("a");le.href=q,le.download=`__${N}.xls`,document.body.appendChild(le),le.click(),document.body.removeChild(le)},K=()=>{const Be=ie(),ve={[ur.Monday]:{header:"#fecaca",cell:"#fee2e2"},[ur.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[ur.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[ur.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[ur.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let de=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                /* Poster scaling */
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 16pt; margin-bottom: 40px; width: 100%; }
                td, th { border: 2px solid #000; padding: 4px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; font-size: 20pt; }
                .teacher-cell { text-align: left; padding-left: 10px; font-size: 20pt; }
                sub { font-size: 12pt; vertical-align: sub; }
                
                /* Doc Header/Footer Styles - Scaled */
                .doc-table td { border: none !important; padding: 10px; vertical-align: top; font-size: 16pt; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;de+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[et.First,et.Second].forEach(oe=>{const he=Ks[oe];de+="<table>",de+=`<tr>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 350px; background-color: #e9d5ff; font-size: 24pt;"> </th>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 450px; background-color: #e9d5ff; font-size: 24pt;"></th>
                <th colspan="${Lr.length*he.length}" class="header" style="border: 3px solid #000; font-size: 24pt; background-color: #f3f4f6;"> </th>
            </tr>`,de+="<tr>",Lr.forEach(Re=>{var Ve;const $e=((Ve=ve[Re])==null?void 0:Ve.header)||"#f3f4f6";de+=`<th colspan="${he.length}" class="header" style="border: 3px solid #000; background-color: ${$e}; font-size: 20pt;">${Re}</th>`}),de+="</tr>",de+="<tr>",Lr.forEach(Re=>{var Ve;const $e=((Ve=ve[Re])==null?void 0:Ve.header)||"#f3f4f6";de+=`<th colspan="${he.length}" class="header" style="border-bottom: 3px solid #000; background-color: ${$e}; font-size: 16pt;"></th>`}),de+="</tr>";const Le="#e5e7eb";de+=`<tr>
                <th class="header" style="border: 3px solid #000; background-color: ${Le}; font-size: 24pt;">${oe}</th>
                <th class="header" style="border: 3px solid #000; background-color: ${Le};"></th>
            `,Lr.forEach(Re=>{var Ve;const $e=((Ve=ve[Re])==null?void 0:Ve.header)||"#f3f4f6";he.forEach(St=>de+=`<th class="header" style="width: 20px; background-color: ${$e}; font-size: 16pt;">${St}</th>`)}),de+="</tr>",t.forEach(Re=>{const $e=e.filter(Ve=>Ve.subjectIds.includes(Re.id)&&Ve.shifts.includes(oe));$e.length!==0&&($e.forEach((Ve,St)=>{de+="<tr>",St===0&&(de+=`<td rowspan="${$e.length}" class="subject-cell" style="border: 3px solid #000; background-color: #e9d5ff;">${Re.name}</td>`),de+=`<td class="teacher-cell" style="border-right: 3px solid #000; background-color: #e9d5ff;">${Ve.name}</td>`,Lr.forEach(ft=>{var At;const gt=((At=ve[ft])==null?void 0:At.cell)||"#fff";he.forEach(dt=>{const tt=Be.find(Tt=>Tt.teacherId===Ve.id&&Tt.subjectId===Re.id&&Tt.day===ft&&Tt.period===dt&&Tt.shift===oe);if(tt){const Tt=r.find(wt=>wt.id===tt.classId),bt=n.find(wt=>wt.id===tt.roomId),It=bt?bt.name:tt.roomId,qt=It?`<sub>${It}</sub>`:"",Ht=tt.direction?` <span style="font-size:14px">(${tt.direction})</span>`:"";de+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${gt}; height: 60px;">${Tt?Tt.name:""}${Ht}${qt}</td>`}else de+=`<td style="border: 1px solid #000; background-color: ${gt};"></td>`})}),de+="</tr>"}),de+=`<tr><td colspan="${2+Lr.length*he.length}" style="height: 4px; background-color: #000;"></td></tr>`)}),de+="</table><br/><br/>"}),de+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,de+="</body></html>";const Te=new Blob([de],{type:"application/vnd.ms-excel"}),q=URL.createObjectURL(Te),le=document.createElement("a");le.href=q,le.download=`__${N}.xls`,document.body.appendChild(le),le.click(),document.body.removeChild(le)},ee=()=>{const Be=ie(),ve=r.filter(Le=>Le.name.startsWith(ye)).sort((Le,Re)=>Le.name.localeCompare(Re.name)),de=Array.from(new Set(ve.map(Le=>Le.shift))).sort(),Te={[ur.Monday]:{label:"#fecaca",cell:"#fee2e2"},[ur.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[ur.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[ur.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[ur.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}};let q=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; }
                    td, th { border: 1px solid #000000; text-align: center; vertical-align: middle; padding: 4px; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .class-header { font-size: 12pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .day-cell { 
                        font-weight: bold; 
                        text-transform: uppercase; 
                        writing-mode: vertical-lr; 
                        transform: rotate(180deg);
                        text-align: center;
                        vertical-align: middle;
                        border: 2px solid #000;
                        mso-rotate: 90; 
                    }
                    .period-cell { font-weight: bold; border: 2px solid #000; }
                    .content-cell { font-weight: bold; border: 1px solid #000; height: 50px; }
                    .subject { font-weight: bold; }
                    .room { font-size: 8pt; font-weight: bold; }
                </style>
            </head>
            <body>
        `;de.forEach(Le=>{const Re=ve.filter(Ve=>Ve.shift===Le),$e=Ks[Le];Re.length!==0&&(q+="<table>",q+="<tr>",q+='<td style="border:none"></td>',q+='<td style="border:none"></td>',q+=`<td colspan="${Re.length}" class="shift-header">${Le}</td>`,q+="</tr>",q+="<tr>",q+='<td style="border:none"></td>',q+='<td style="border:none"></td>',Re.forEach(Ve=>{q+=`<td class="class-header">${Ve.name}</td>`}),q+="</tr>",Lr.forEach(Ve=>{const St=Te[Ve]||{label:"#e5e7eb",cell:"#f3f4f6"};$e.forEach((ft,gt)=>{q+="<tr>",gt===0&&(q+=`<td rowspan="${$e.length}" class="day-cell" style="background-color: ${St.label};">${Ve.toUpperCase()}</td>`),q+=`<td class="period-cell" style="background-color: ${St.label};">${ft}</td>`,Re.forEach(At=>{const dt=Be.filter(tt=>tt.classId===At.id&&tt.day===Ve&&tt.shift===Le&&tt.period===ft);q+=`<td class="content-cell" style="background-color: ${St.cell};">`,dt.forEach((tt,Tt)=>{Tt>0&&(q+='<br style="mso-data-placement:same-cell;">');const bt=t.find(Ht=>Ht.id===tt.subjectId),It=n.find(Ht=>Ht.id===tt.roomId),qt=It?It.name:tt.roomId||"";q+=`<span class="subject">${(bt==null?void 0:bt.name)||""}</span>`,qt&&(q+=` <span class="room">${qt}</span>`)}),q+="</td>"}),q+="</tr>"}),q+=`<tr><td colspan="${2+Re.length}" style="height: 3px; background-color: #000000; border: none;"></td></tr>`}),q+="</table><br><br>")}),q+="</body></html>";const le=new Blob([q],{type:"application/vnd.ms-excel"}),oe=URL.createObjectURL(le),he=document.createElement("a");he.href=oe,he.download=`__${ye}_.xls`,document.body.appendChild(he),he.click(),document.body.removeChild(he)},se=()=>{const Be=new Date(x),ve=Be.getUTCMonth(),de=Be.getUTCFullYear(),Te=u.filter(At=>{const dt=new Date(At.date);return dt.getUTCMonth()===ve&&dt.getUTCFullYear()===de}).sort((At,dt)=>new Date(At.date).getTime()-new Date(dt.date).getTime());if(Te.length===0){alert("      .");return}const q=new Map;Te.forEach(At=>{const dt=`${At.scheduleItemId}_${At.date}`,tt=q.get(dt)||[];tt.push(At),q.set(dt,tt)});const le=[],oe=[];q.forEach(At=>{var wt;const dt=At[0],tt=A.find(Kt=>Kt.id===dt.scheduleItemId)||c.find(Kt=>Kt.id===dt.scheduleItemId);if(!tt)return;const Tt=r.find(Kt=>Kt.id===tt.classId),bt=t.find(Kt=>Kt.id===tt.subjectId),It=e.find(Kt=>Kt.id===dt.originalTeacherId);let qt=dt.lessonAbsenceReason||((wt=It==null?void 0:It.absenceReasons)==null?void 0:wt[dt.date])||"";dt.replacementTeacherId===dt.originalTeacherId&&dt.replacementRoomId&&!dt.replacementClassId&&(qt=" "),dt.replacementClassId&&dt.replacementSubjectId&&!dt.isMerger&&(qt=" ");const Ht={subs:At,scheduleItem:tt,cls:Tt,subj:bt,origTeacher:It,reason:qt};qt===" "?oe.push(Ht):le.push(Ht)});let he=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${Be.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const Le=At=>At.map(dt=>{const{subs:tt,scheduleItem:Tt,cls:bt,subj:It,origTeacher:qt,reason:Ht}=dt,wt=tt[0],Kt=new Date(wt.date).toLocaleDateString("ru-RU");let zr="";if(wt.replacementTeacherId==="conducted")zr=" ";else if(wt.replacementTeacherId==="cancelled")zr=" ";else if(zr=tt.map(Mr=>{const mr=e.find(Rr=>Rr.id===Mr.replacementTeacherId);return mr?mr.name:""}).join(", "),wt.isMerger){let Mr=" ()";if(wt.replacementClassId){const mr=r.find(Rr=>Rr.id===wt.replacementClassId);mr&&(Mr=` (  ${mr.name})`)}zr+=Mr}else if(wt.replacementClassId&&wt.replacementSubjectId){const Mr=r.find(Rr=>Rr.id===wt.replacementClassId),mr=t.find(Rr=>Rr.id===wt.replacementSubjectId);zr+=` ( ${(Mr==null?void 0:Mr.name)||"?"} ${(mr==null?void 0:mr.name)||"?"})`}const Qr=Tt.roomId,Hr=wt.replacementRoomId,tr=Hr||Qr,Dt=n.find(en=>en.id===tr),jt=Dt?Dt.name:tr||"-",dr=Hr?`${jt} ( .)`:jt;return`
                    <tr>
                        <td>${Kt}</td>
                        <td>${Tt.period}</td>
                        <td>${Tt.shift}</td>
                        <td>${(bt==null?void 0:bt.name)||"?"}</td>
                        <td>${(It==null?void 0:It.name)||"?"}</td>
                        <td>${(qt==null?void 0:qt.name)||"?"}</td>
                        <td>${zr}</td>
                        <td>${dr}</td>
                        <td>${Ht}</td>
                    </tr>
                `}).join(""),Re=(At,dt=!1)=>`
            <table>
            <thead>
                <tr class="${dt?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${Le(At)}
            </tbody>
            </table>
        `;le.length>0?he+=Re(le):he+="<p>     .</p>",oe.length>0&&(he+="<br/><br/>",he+='<h3 style="color: #b91c1c;">   (  )</h3>',he+=Re(oe,!0));const $e=new Map;Te.forEach(At=>{var It;if(At.replacementTeacherId==="conducted"||At.replacementTeacherId==="cancelled"||At.replacementTeacherId===At.originalTeacherId)return;const dt=e.find(qt=>qt.id===At.replacementTeacherId);if(!dt)return;const tt=$e.get(dt.id)||{name:dt.name,total:0,withoutRecord:0,merger:0,other:0,illness:0},Tt=e.find(qt=>qt.id===At.originalTeacherId);let bt=At.lessonAbsenceReason||((It=Tt==null?void 0:Tt.absenceReasons)==null?void 0:It[At.date])||"";At.replacementClassId&&At.replacementSubjectId&&!At.isMerger&&(bt=" "),tt.total++,At.isMerger?tt.merger++:bt===""?tt.illness++:bt===" "?tt.withoutRecord++:tt.other++,$e.set(dt.id,tt)});const Ve=Array.from($e.values()).sort((At,dt)=>At.name.localeCompare(dt.name));Ve.length>0&&(he+="<br/><br/>",he+="<h3>   </h3>",he+=`
             <table style="border-collapse: collapse; width: 60%;">
             <thead>
                 <tr class="header">
                     <th style="border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                 </tr>
             </thead>
             <tbody>
             `,Ve.forEach(At=>{he+=`
                     <tr>
                         <td style="border: 1px solid #999; padding: 4px;">${At.name}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${At.total}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${At.illness}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${At.withoutRecord}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${At.merger}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${At.other}</td>
                     </tr>
                 `}),he+="</tbody></table>"),he+="</body></html>";const St=new Blob([he],{type:"application/vnd.ms-excel"}),ft=URL.createObjectURL(St),gt=document.createElement("a");gt.href=ft,gt.download=`__${Be.getMonth()+1}_${Be.getFullYear()}.xls`,document.body.appendChild(gt),gt.click(),document.body.removeChild(gt)},ue=()=>{const Be=new Date(x),ve=Be.getUTCMonth(),de=Be.getUTCFullYear(),Te=u.filter(Le=>{const Re=new Date(Le.date),$e=Re.getUTCMonth()===ve&&Re.getUTCFullYear()===de,Ve=Le.refusals&&Le.refusals.length>0;return $e&&Ve}).sort((Le,Re)=>new Date(Le.date).getTime()-new Date(Re.date).getTime());if(Te.length===0){alert("      .");return}let q=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${Be.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;Te.forEach(Le=>{const Re=A.find(dt=>dt.id===Le.scheduleItemId)||c.find(dt=>dt.id===Le.scheduleItemId);if(!Re)return;const $e=new Date(Le.date).toLocaleDateString("ru-RU"),Ve=r.find(dt=>dt.id===Re.classId),St=t.find(dt=>dt.id===Re.subjectId),ft=e.find(dt=>dt.id===Le.originalTeacherId);let gt="";if(Le.replacementTeacherId==="conducted")gt=" ";else if(Le.replacementTeacherId==="cancelled")gt=" ";else{const dt=e.find(tt=>tt.id===Le.replacementTeacherId);gt=dt?dt.name:""}const At=(Le.refusals||[]).map(dt=>{const tt=e.find(Tt=>Tt.id===dt);return tt?tt.name:""}).join(", ");q+=`
                <tr>
                    <td>${$e}</td>
                    <td>${Re.period}</td>
                    <td>${Re.shift}</td>
                    <td>${(Ve==null?void 0:Ve.name)||"?"}</td>
                    <td>${(St==null?void 0:St.name)||"?"}</td>
                    <td>${(ft==null?void 0:ft.name)||"?"}</td>
                    <td>${gt}</td>
                    <td>${At}</td>
                </tr>
            `}),q+="</tbody></table></body></html>";const le=new Blob([q],{type:"application/vnd.ms-excel"}),oe=URL.createObjectURL(le),he=document.createElement("a");he.href=oe,he.download=`__${Be.getMonth()+1}_${Be.getFullYear()}.xls`,document.body.appendChild(he),he.click(),document.body.removeChild(he)},Ae=()=>{const Be=ie();let ve=`							
`;Lr.forEach(de=>{[et.First,et.Second].forEach(Te=>{r.filter(le=>le.shift===Te).forEach(le=>{Ks[Te].forEach(oe=>{Be.filter(Le=>Le.classId===le.id&&Le.day===de&&Le.shift===Te&&Le.period===oe).forEach(Le=>{const Re=t.find(ft=>ft.id===Le.subjectId),$e=e.find(ft=>ft.id===Le.teacherId),Ve=n.find(ft=>ft.id===Le.roomId),St=Ve?Ve.name:Le.roomId||"";ve+=`${de}	${Te}	${le.name}	${oe}	${(Re==null?void 0:Re.name)||""}	${($e==null?void 0:$e.name)||""}	${St}	${Le.direction||""}
`})})})})}),navigator.clipboard.writeText(ve).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},pe=async()=>{P(!0);try{if(!y.current){alert("   1- .");return}const Be=await Zd(y.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),ve=document.createElement("a");ve.href=Be.toDataURL("image/png"),ve.download=`_${x}_1.png`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve)}catch(Be){console.error(Be),alert("   ")}finally{P(!1)}},Ne=async()=>{P(!0);try{if(!k.current){alert("   2- .");return}const Be=await Zd(k.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),ve=document.createElement("a");ve.href=Be.toDataURL("image/png"),ve.download=`_${x}_2.png`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve)}catch(Be){console.error(Be),alert("   ")}finally{P(!1)}},Oe=z.useMemo(()=>u.filter(Be=>Be.date===x),[u,x]),nt=z.useMemo(()=>{const Be=we(x);return Oe.filter(ve=>{const de=Be.find(Te=>Te.id===ve.scheduleItemId);return de&&de.shift===et.First}).filter(ve=>ve.replacementTeacherId!=="conducted").length>0},[Oe,we,x]),ke=z.useMemo(()=>{const Be=we(x);return Oe.filter(ve=>{const de=Be.find(Te=>Te.id===ve.scheduleItemId);return de&&de.shift===et.Second}).filter(ve=>ve.replacementTeacherId!=="conducted").length>0},[Oe,we,x]),ce=Be=>{const ve=we(x),de=Oe.filter(q=>{const le=ve.find(oe=>oe.id===q.scheduleItemId);return le&&le.shift===Be}).filter(q=>q.replacementTeacherId!=="conducted");if(de.length===0)return null;const Te=Array.from(new Set(de.map(q=>q.scheduleItemId))).sort((q,le)=>{const oe=ve.find(Le=>Le.id===q),he=ve.find(Le=>Le.id===le);return((oe==null?void 0:oe.period)??0)-((he==null?void 0:he.period)??0)});return l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:Be}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:Te.map(q=>{var zr,Qr,Hr;const le=de.filter(tr=>tr.scheduleItemId===q),oe=le[0],he=ve.find(tr=>tr.id===q);if(!he)return null;const Le=r.find(tr=>tr.id===he.classId),Re=t.find(tr=>tr.id===he.subjectId),$e=e.find(tr=>tr.id===oe.originalTeacherId),Ve=oe.replacementRoomId,St=he.roomId?n.find(tr=>tr.id===he.roomId):null,ft=St?St.name:he.roomId||"",gt=Ve?n.find(tr=>tr.id===Ve):null,At=gt?gt.name:Ve||"",dt=oe.replacementTeacherId==="cancelled",tt=(zr=$e==null?void 0:$e.absenceReasons)==null?void 0:zr[x],Tt=oe.lessonAbsenceReason,bt=Tt===" "?Tt:tt===" "?tt:"",It=oe.replacementClassId?r.find(tr=>tr.id===oe.replacementClassId):null,qt=oe.replacementSubjectId?t.find(tr=>tr.id===oe.replacementSubjectId):null,Ht=oe.replacementTeacherId===oe.originalTeacherId&&Ve&&!It,wt=It&&qt&&!oe.isMerger,Kt=oe.replacementTeacherId===oe.originalTeacherId;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:he.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:Le==null?void 0:Le.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:Re==null?void 0:Re.name}),he.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:he.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!Kt&&!Ht&&!wt&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[$e==null?void 0:$e.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),bt&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:bt})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${dt?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:Ht?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:$e==null?void 0:$e.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):wt?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:$e==null?void 0:$e.name}),l.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",It==null?void 0:It.name]})]}):dt?l.jsx("div",{className:"flex flex-col",children:l.jsx("span",{children:" "})}):l.jsx("div",{className:"flex flex-col",children:le.length>1||oe.isMerger?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-800 text-xs",children:le.map(tr=>{const Dt=e.find(jt=>jt.id===tr.replacementTeacherId);return Dt?Dt.name:""}).join(", ")}),l.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",oe.replacementClassId?`(${(Qr=r.find(tr=>tr.id===oe.replacementClassId))==null?void 0:Qr.name})`:""]})]}):l.jsx("span",{children:(Hr=e.find(tr=>tr.id===oe.replacementTeacherId))==null?void 0:Hr.name})})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${Ve?"text-indigo-600":"text-slate-700"}`,children:Ve&&Ve!==he.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:ft}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:At})]}):l.jsx("span",{className:"text-xl",children:ft})})]},String(q))})})]})]})},R=async()=>{const Be=Gs();await ns.setPublicData(Be,Ce),await a({settings:{...s,publicScheduleId:Be}});const ve=`${window.location.origin}${window.location.pathname}#/public?id=${Be}`;j(ve),L(Be),_(!0)},Ee=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await ns.deletePublicData(s.publicScheduleId),await a({settings:{...s,publicScheduleId:null}}),alert("  ."),j(""),L(""))},De=()=>l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(x).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),st=()=>l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]}),ge=()=>{const Be=ie(),ve=r.filter(q=>q.name.startsWith(ye)).sort((q,le)=>q.name.localeCompare(le.name)),de=Array.from(new Set(ve.map(q=>q.shift))).sort(),Te={[ur.Monday]:{label:"bg-red-200",cell:"bg-red-100"},[ur.Tuesday]:{label:"bg-orange-200",cell:"bg-orange-100"},[ur.Wednesday]:{label:"bg-yellow-200",cell:"bg-yellow-100"},[ur.Thursday]:{label:"bg-green-200",cell:"bg-green-100"},[ur.Friday]:{label:"bg-blue-200",cell:"bg-blue-100"}};return ve.length===0?l.jsx("div",{className:"text-center p-10",children:"    "}):l.jsx("div",{className:"font-sans text-black",children:de.map(q=>{const le=ve.filter(he=>he.shift===q),oe=Ks[q];return le.length===0?null:l.jsx("div",{className:"mb-10 page-break-inside-avoid",children:l.jsxs("table",{className:"w-full border-collapse border-2 border-black text-center text-sm",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{colSpan:le.length,className:"border-2 border-black py-2 text-xl uppercase font-black tracking-widest bg-white",children:q})]}),l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),le.map(he=>l.jsx("th",{className:"border-2 border-black py-2 font-bold text-lg bg-white w-32",children:he.name},String(he.id)))]})]}),l.jsx("tbody",{children:Lr.map(he=>{const Le=Te[he]||{label:"bg-gray-200",cell:"bg-gray-100"};return l.jsxs(Co.Fragment,{children:[oe.map((Re,$e)=>l.jsxs("tr",{children:[$e===0&&l.jsx("td",{rowSpan:oe.length,className:`border-2 border-black font-bold uppercase text-xs writing-vertical-lr rotate-180 p-1 ${Le.label}`,style:{writingMode:"vertical-lr",transform:"rotate(180deg)"},children:he===ur.Monday?"":he===ur.Tuesday?"":he===ur.Wednesday?"":he===ur.Thursday?"":he===ur.Friday?"":he}),l.jsx("td",{className:`border-2 border-black font-bold text-base ${Le.label}`,children:Re}),le.map(Ve=>{const St=Be.filter(ft=>ft.classId===Ve.id&&ft.day===he&&ft.shift===q&&ft.period===Re);return l.jsx("td",{className:`border-2 border-black p-1 h-12 ${Le.cell}`,children:St.map(ft=>{const gt=t.find(tt=>tt.id===ft.subjectId),At=n.find(tt=>tt.id===ft.roomId),dt=At?At.name:ft.roomId||"";return l.jsxs("div",{className:"flex justify-center items-center gap-1 leading-tight text-sm font-bold",children:[l.jsx("span",{children:gt==null?void 0:gt.name}),dt&&l.jsx("span",{className:"font-black",children:dt})]},String(ft.id))})},String(Ve.id))})]},`${String(he)}-${Re}`)),l.jsx("tr",{className:"h-1 bg-black border-2 border-black",children:l.jsx("td",{colSpan:2+le.length})})]},String(he))})})]})},String(q))})})};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>ns.exportJson(Ce),className:"btn-primary btn-ripple flex items-center gap-2",children:[l.jsx(me,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:v,onChange:Se,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var Be;return(Be=v.current)==null?void 0:Be.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(me,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(me,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:x,onChange:Be=>I(Be.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:pe,disabled:D||!nt,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:D?l.jsxs(l.Fragment,{children:[l.jsx(me,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(me,{name:"Download",size:20})," 1- "]})}),l.jsx("button",{onClick:Ne,disabled:D||!ke,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:D?l.jsxs(l.Fragment,{children:[l.jsx(me,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(me,{name:"Download",size:20})," 2- "]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:Oe.length===0?l.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(De,{}),l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),l.jsx(st,{})]}):l.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[nt&&l.jsxs("div",{ref:y,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(De,{}),ce(et.First),l.jsx(st,{})]}),ke&&l.jsxs("div",{ref:k,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(De,{}),ce(et.Second),l.jsx(st,{})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"Printer",className:"text-blue-600 dark:text-blue-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsx("select",{value:ye,onChange:Be=>_e(Be.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:Pe.map(Be=>l.jsxs("option",{value:Be,children:[Be,"- "]},Be))})]}),l.jsxs("button",{onClick:()=>Z(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(me,{name:"Printer",size:20}),"    "]}),l.jsxs("button",{onClick:ee,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(me,{name:"FileSpreadsheet",size:20}),"  Excel"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:N,onChange:Be=>U(Number(Be.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:M,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(me,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:H,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(me,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:K,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(me,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:Ae,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(me,{name:"Clipboard",size:20}),"   Google Sheets"]}),l.jsxs("button",{onClick:se,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(me,{name:"List",size:20}),"    (XLS)"]}),l.jsxs("button",{onClick:ue,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(me,{name:"UserX",size:20}),"    (XLS)"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),l.jsxs("button",{onClick:()=>_(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(me,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:Ee,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(me,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:R,disabled:D,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(me,{name:"Share2",size:20}),"  "]})]}),l.jsx($n,{isOpen:E,onClose:()=>_(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),B&&l.jsxs(l.Fragment,{children:[l.jsx(cZ,{value:B,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:B}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(B),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(me,{name:"Copy",size:16}),"  "]})]})]})}),T&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["  (",ye,"- )"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"btn-primary btn-ripple flex items-center gap-2",children:[l.jsx(me,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>Z(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar bg-white",children:l.jsx(ge,{})})]})]})},dZ=()=>{var D;const{subjects:t,teachers:e,classes:r}=Ki(),{schedule1:n,schedule2:s,substitutions:i}=FA(),[a,o]=z.useState("load"),[A,c]=z.useState(((D=r[0])==null?void 0:D.id)||""),[u,d]=z.useState(()=>{const P=new Date().getMonth();return P>=0&&P<=4?2:1}),[p,g]=z.useState(["name","weeklyHours","actualHours"]),v=z.useMemo(()=>u===2?s:n,[u,n,s]),y=z.useMemo(()=>e.map(E=>{const _=v.filter(_e=>_e.teacherId===E.id),B=_.length,j=B*4,S=i.filter(_e=>_e.replacementTeacherId===E.id).length,L=i.filter(_e=>_e.originalTeacherId===E.id).length,T=j+S-L,Z={};_.forEach(_e=>{const Ce=t.find(ie=>ie.id===_e.subjectId);Ce&&(Z[Ce.name]=(Z[Ce.name]||0)+1)});const ye=Object.keys(Z).join(", ");return{id:E.id,name:E.name,weeklyHours:B,monthlyPlan:j,subsTaken:S,subsMissed:L,actualHours:T,subjectBreakdown:Z,subjectsList:ye}}).sort((E,_)=>_.actualHours-E.actualHours),[e,v,i,t]),k=[{key:"name",label:" "},{key:"weeklyHours",label:" ()"},{key:"monthlyPlan",label:" ()"},{key:"subsTaken",label:" (+)"},{key:"subsMissed",label:" (-)"},{key:"actualHours",label:" ()"},{key:"subjectsList",label:""}],x=z.useMemo(()=>A?Lr.map(P=>{const _=v.filter(B=>B.classId===A&&B.day===P).reduce((B,j)=>{const S=t.find(L=>L.id===j.subjectId);return B+((S==null?void 0:S.difficulty)||5)},0);return{label:P,value:_}}):[],[v,t,A]),I=z.useMemo(()=>{const P=e.map(_=>({name:_.name,count:i.filter(B=>B.replacementTeacherId===_.id).length})).sort((_,B)=>B.count-_.count).slice(0,5),E=e.map(_=>({name:_.name,count:_.unavailableDates.length})).sort((_,B)=>B.count-_.count).slice(0,5);return{heroes:P,absentees:E}},[e,i]),N=P=>{g(E=>E.includes(P)?E.filter(_=>_!==P):[...E,P])},U=()=>{let P="";if(a==="load")P=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+y.map(B=>`"${B.name}",${B.weeklyHours},${B.subsTaken},${B.subsMissed},${B.actualHours},"${Object.entries(B.subjectBreakdown).map(([j,S])=>j+": "+S).join(", ")}"`).join(`
`);else if(a==="sanpin")P=`Day,Score
`+x.map(B=>`${B.label},${B.value}`).join(`
`);else if(a==="builder"){const B=p.map(S=>{var L;return(L=k.find(T=>T.key===S))==null?void 0:L.label}).join(","),j=y.map(S=>p.map(L=>{const T=S[L];return typeof T=="string"&&T.includes(",")?`"${T}"`:T}).join(",")).join(`
`);P=B+`
`+j}const E=new Blob([`\uFEFF${P}`],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a");_.href=URL.createObjectURL(E),_.download=`report_${a}_${u}sem.csv`,document.body.appendChild(_),_.click(),document.body.removeChild(_)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(me,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:u,onChange:P=>d(Number(P.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:U,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[l.jsx(me,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>o("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${a==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>o("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${a==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>o("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${a==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>o("builder"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${a==="builder"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""})]})]}),a==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:y.map(P=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:P.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:P.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",P.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",P.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:P.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(P.subjectBreakdown).map(([E,_])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[E,": ",_]},E))})})]},P.id))})]})}),a==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:A,onChange:P=>c(P.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))})]}),l.jsx(Lx,{items:x,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),a==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(Lx,{items:I.heroes.map(P=>({label:P.name,value:P.count})),max:Math.max(...I.heroes.map(P=>P.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(Lx,{items:I.absentees.map(P=>({label:P.name,value:P.count})),max:Math.max(...I.absentees.map(P=>P.count),1),barClassName:"bg-red-500"})]})]}),a==="builder"&&l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-2",children:" "}),l.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(P=>l.jsx("button",{onClick:()=>N(P.key),className:`px-3 py-1.5 rounded-lg text-sm font-medium border transition-all ${p.includes(P.key)?"bg-indigo-50 border-indigo-200 text-indigo-700 dark:bg-indigo-900/30 dark:border-indigo-800 dark:text-indigo-300":"bg-white border-slate-200 text-slate-500 hover:border-indigo-300 dark:bg-slate-800 dark:border-slate-600 dark:text-slate-400"}`,children:P.label},P.key))})]}),l.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-200 dark:border-slate-600",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsx("tr",{children:p.map(P=>{var E;return l.jsx("th",{className:"p-3 text-xs font-bold text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-600",children:(E=k.find(_=>_.key===P))==null?void 0:E.label},P)})})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:y.map(P=>l.jsx("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:p.map(E=>{const _=P[E];return l.jsx("td",{className:"p-3 text-sm text-slate-700 dark:text-slate-300",children:typeof _=="object"?"":_},`${P.id}-${E}`)})},P.id))})]})})]})]})},hZ=()=>{var nt;const{teachers:t,dutyZones:e,rooms:r,saveStaticData:n}=Ki(),{dutySchedule:s,saveScheduleData:i,schedule1:a,schedule2:o}=FA(),A={approvalBlock:0,mainTitle:0,tableHeaders:-40,footerBlock:0,signatureLine:-4},[c,u]=z.useState(()=>{const ke=new Date().getMonth();return ke>=0&&ke<=4?2:1}),[d,p]=z.useState(et.First),g=c===1?a:o,v=z.useRef(null),[y,k]=z.useState(!1),[x,I]=z.useState(!1),[N,U]=z.useState(null),[D,P]=z.useState({}),[E,_]=z.useState(""),[B,j]=z.useState(null),S=(ke,ce,R)=>{const Ee=s.find(De=>De.zoneId===ke&&De.day===ce&&De.shift===R);return Ee?t.find(De=>De.id===Ee.teacherId):null},L=(ke,ce,R,Ee)=>Ee?!!s.find(st=>st.teacherId===Ee&&st.day===ce&&st.shift===R&&st.zoneId!==ke):!1,T=(ke,ce)=>{U({zoneId:ke,day:ce});const R=S(ke,ce,d);j((R==null?void 0:R.id)||null),k(!0)},Z=async()=>{if(!N)return;let ke=[...s];ke=ke.filter(ce=>!(ce.zoneId===N.zoneId&&ce.day===N.day&&ce.shift===d)),B&&ke.push({id:Gs(),zoneId:N.zoneId,day:N.day,shift:d,teacherId:B}),await i({dutySchedule:ke}),k(!1),j(null)},ye=async()=>{if(!N)return;let ke=[...s];ke=ke.filter(ce=>!(ce.zoneId===N.zoneId&&ce.day===N.day&&ce.shift===d)),await i({dutySchedule:ke}),k(!1),j(null)},_e=(ke,ce)=>{if(!ke||!ce.includedRooms)return!1;const R=ke.replace(/\D/g,"");return R&&ce.includedRooms.includes(R)?!0:ce.includedRooms.includes(ke)},Ce=async()=>{if(!window.confirm("    . ?"))return;let ke=[];const ce=[et.First,et.Second],R={};Lr.forEach(Ee=>R[Ee]=new Set);for(const Ee of Lr)for(const De of ce){const st=t.filter(ge=>g.filter(ve=>ve.teacherId===ge.id&&ve.day===Ee&&ve.shift===De).length>=1);for(const ge of e){const Be=st.map(de=>{let Te=0;R[Ee].has(de.id)&&(Te-=2e3);const q=g.filter(oe=>{var he;return oe.teacherId===de.id&&oe.day===Ee&&oe.shift===De&&oe.roomId&&_e(((he=r.find(Le=>Le.id===oe.roomId))==null?void 0:he.name)||oe.roomId,ge)}).length;return q===0?{teacher:de,score:-9999}:(Te+=q*10,g.filter(oe=>oe.teacherId===de.id&&oe.day===Ee&&oe.shift===De).length>=4&&(Te+=5),{teacher:de,score:Te})});Be.sort((de,Te)=>Te.score-de.score);const ve=Be[0];ve&&ve.score>-500&&(ke.push({id:Gs(),zoneId:ge.id,day:Ee,shift:De,teacherId:ve.teacher.id}),R[Ee].add(ve.teacher.id))}}await i({dutySchedule:ke})},ie=async()=>{window.confirm("   (  )?")&&await i({dutySchedule:[]})},we=async()=>{if(!v.current)return;const ke=await Zd(v.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1}),ce=document.createElement("a");ce.href=ke.toDataURL("image/png"),ce.download=`Duty_Schedule_${c}_sem.png`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},Pe={[ur.Monday]:{label:"#fecaca",cell:"#fee2e2"},[ur.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[ur.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[ur.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[ur.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}},Se=()=>{let ce=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 6px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 18pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 12pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #312e81; color: white; border: 2px solid #000; text-transform: uppercase; }
                    .floor-header { font-size: 12pt; font-weight: bold; background-color: #e5e7eb; border: 2px solid #000; text-align: left; padding-left: 10px; }
                    .zone-cell { font-size: 11pt; font-weight: bold; background-color: #fff; text-align: left; width: 250px; mso-number-format: "\\@"; }
                    .day-header { font-weight: bold; font-size: 12pt; border: 2px solid #000; }
                    .content-cell { font-size: 10pt; font-weight: bold; height: 35px; border: 1px solid #000; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 11pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 11pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 15px; }
                </style>
            </head>
            <body>
        `;ce+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,3)}" style="border:none"></td>
                    <td colspan="3" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        __________ ..<br>
                        "__" ______ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="6" style="border:none"></td></tr>
            </table>
        `,ce+=`
            <table>
                <tr><td colspan="6" class="title-main"> </td></tr>
                <tr><td colspan="6" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-row"><td colspan="6" style="border:none"></td></tr>
            </table>
        `,[et.First,et.Second].forEach(st=>{ce+="<table>",ce+=`<tr><th colspan="6" class="shift-header">${st}</th></tr>`,ce+="<tr>",ce+='<th class="day-header" style="background-color: #f3f4f6;"> </th>',Lr.forEach(ge=>{const Be=Pe[ge]||{label:"#ffffff"};ce+=`<th class="day-header" style="background-color: ${Be.label};">${ge}</th>`}),ce+="</tr>",Ne.forEach(ge=>{ce+=`<tr><td colspan="6" class="floor-header">${ge.floor}</td></tr>`,ge.zones.forEach(Be=>{ce+="<tr>",ce+=`<td class="zone-cell">${Be.name}</td>`,Lr.forEach(ve=>{const de=Pe[ve]||{cell:"#ffffff"},Te=S(Be.id,ve,st);ce+=`<td class="content-cell" style="background-color: ${de.cell};">${Te?Te.name:""}</td>`}),ce+="</tr>"})}),ce+="</table><br/><br/>"}),ce+=`
            <table>
                <tr>
                    <td colspan="3" class="footer-block">  </td>
                    <td colspan="1" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="2" class="footer-block" style="text-align: right;">..</td>
                </tr>
            </table>
        `,ce+="</body></html>";const R=new Blob([ce],{type:"application/vnd.ms-excel"}),Ee=URL.createObjectURL(R),De=document.createElement("a");De.href=Ee,De.download=`__${c}__.xls`,document.body.appendChild(De),De.click(),document.body.removeChild(De)},M=()=>{const ce=Oe.length+1;let De=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 5px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 20pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 14pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #e5e7eb; border: 3px solid #000; text-transform: uppercase; }
                    .floor-header { font-size: 12pt; font-weight: bold; background-color: #d1d5db; border: 2px solid #000; text-transform: uppercase; }
                    .zone-header { font-size: 10pt; font-weight: bold; background-color: #f3f4f6; border: 2px solid #000; mso-number-format: "\\@"; }
                    .day-label { font-weight: bold; font-size: 12pt; border: 2px solid #000; }
                    .content-cell { font-size: 11pt; font-weight: bold; height: 40px; border: 1px solid #000; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 12pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 12pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 20px; }
                </style>
            </head>
            <body>
        `;De+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,ce-4)}" style="border:none"></td>
                    <td colspan="4" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        ____________________ ..<br>
                        "____" __________ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="${ce}" style="border:none"></td></tr>
            </table>
        `,De+=`
            <table>
                <tr><td colspan="${ce}" class="title-main"> </td></tr>
                <tr><td colspan="${ce}" class="title-sub">       22 . </td></tr>
                <tr><td colspan="${ce}" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-row"><td colspan="${ce}" style="border:none"></td></tr>
            </table>
        `,[et.First,et.Second].forEach(q=>{De+="<table>",De+=`<tr><th colspan="${ce}" class="shift-header">${q}</th></tr>`,De+="<tr>",De+='<th rowspan="2" class="floor-header" style="width: 100px;"> </th>',Ne.forEach(le=>{De+=`<th colspan="${le.zones.length}" class="floor-header">${le.floor}</th>`}),De+="</tr>",De+="<tr>",Oe.forEach(le=>{De+=`<th class="zone-header">${le.name}</th>`}),De+="</tr>",Lr.forEach(le=>{const oe=Pe[le]||{label:"#ffffff",cell:"#ffffff"};De+="<tr>",De+=`<td class="day-label" style="background-color: ${oe.label};">${le}</td>`,Oe.forEach(he=>{const Le=S(he.id,le,q);De+=`<td class="content-cell" style="background-color: ${oe.cell};">${Le?Le.name:""}</td>`}),De+="</tr>"}),De+=`<tr><td colspan="${ce}" style="height: 4px; background-color: #000; border:none;"></td></tr>`,De+="</table><br>"});const st=Math.floor(ce*.4),ge=Math.floor(ce*.3),Be=ce-st-ge;De+=`
            <table>
                 <tr class="empty-row"><td colspan="${ce}" style="border:none"></td></tr>
                <tr>
                    <td colspan="${st}" class="footer-block">    22 .</td>
                    <td colspan="${Be}" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="${ge}" class="footer-block" style="text-align: right;">..</td>
                </tr>
            </table>
        `,De+="</body></html>";const ve=new Blob([De],{type:"application/vnd.ms-excel"}),de=URL.createObjectURL(ve),Te=document.createElement("a");Te.href=de,Te.download=`__${c}_.xls`,document.body.appendChild(Te),Te.click(),document.body.removeChild(Te)},H=async()=>{if(!D.name)return;const ke=E.split(",").map(Ee=>Ee.trim()).filter(Boolean),ce={...D,includedRooms:ke};let R=[...e];D.id?R=R.map(Ee=>Ee.id===D.id?{...Ee,...ce}:Ee):R.push({...ce,id:Gs()}),await n({dutyZones:R}),I(!1)},K=async ke=>{if(!window.confirm(" ?"))return;const ce=e.filter(R=>R.id!==ke);await n({dutyZones:ce})},ee=ke=>{var ce;ke?(P(ke),_(((ce=ke.includedRooms)==null?void 0:ce.join(", "))||"")):(P({}),_("")),I(!0)},se=()=>{if(!N)return{recommended:[],others:[],allTeachers:[]};const ke=N.day,ce=e.find(ge=>ge.id===N.zoneId),R=t.map(ge=>{const Be=g.filter(Te=>Te.teacherId===ge.id&&Te.day===ke&&Te.shift===d).length,ve=s.some(Te=>Te.day===ke&&Te.teacherId===ge.id&&Te.zoneId!==N.zoneId&&Te.shift===d),de=ce&&ce.includedRooms?g.filter(Te=>{var q;return Te.teacherId===ge.id&&Te.day===ke&&Te.shift===d&&Te.roomId&&_e(((q=r.find(le=>le.id===Te.roomId))==null?void 0:q.name)||Te.roomId,ce)}).length:0;return{t:ge,lessonsCount:Be,isBusy:ve,lessonsInZone:de}}),Ee=R.filter(ge=>ge.lessonsInZone>0&&!ge.isBusy).sort((ge,Be)=>Be.lessonsInZone-ge.lessonsInZone).map(ge=>({value:ge.t.id,label:`${ge.t.name} (${ge.lessonsInZone} .  )`})),De=R.filter(ge=>(ge.lessonsInZone===0||ge.isBusy)&&ge.lessonsCount>0).map(ge=>({value:ge.t.id,label:ge.t.name+(ge.isBusy?" ()":"")+(ge.lessonsInZone===0?" (   )":"")})),st=R.filter(ge=>ge.lessonsCount===0).map(ge=>({value:ge.t.id,label:`${ge.t.name} ( )`}));return{recommended:Ee,others:De,allTeachers:st}},{recommended:ue,others:Ae,allTeachers:pe}=se(),Ne=z.useMemo(()=>{const ke={};return e.forEach(R=>{const Ee=R.floor||" ";ke[Ee]||(ke[Ee]=[]),ke[Ee].push(R)}),Object.keys(ke).sort().map(R=>({floor:R,zones:ke[R].sort((Ee,De)=>(Ee.order||0)-(De.order||0))}))},[e]),Oe=z.useMemo(()=>Ne.flatMap(ke=>ke.zones),[Ne]);return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 no-print",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(me,{name:"Shield",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:[c,"- "]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>p(et.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${d===et.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>p(et.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${d===et.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:c,onChange:ke=>u(Number(ke.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1-"}),l.jsx("option",{value:2,children:"2-"})]})]}),l.jsxs("button",{onClick:Ce,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(me,{name:"Zap",size:16})," "]}),l.jsx("button",{onClick:ie,className:"px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition text-sm",children:l.jsx(me,{name:"Trash2",size:16})}),l.jsxs("button",{onClick:we,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(me,{name:"Image",size:16})," PNG"]}),l.jsxs("button",{onClick:Se,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(me,{name:"Table",size:16}),"  (XLS)"]}),l.jsxs("button",{onClick:M,className:"px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 border border-green-100 dark:border-green-900 rounded-xl font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(me,{name:"FileSpreadsheet",size:16})," Excel"]})]})]}),l.jsxs("div",{className:"mb-4 flex gap-2 overflow-x-auto custom-scrollbar pb-2",children:[e.map(ke=>l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-600 shrink-0",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[ke.name," ",l.jsxs("span",{className:"text-slate-400 text-xs",children:["(",ke.floor||"?",")"]})]}),l.jsx("button",{onClick:()=>ee(ke),className:"text-slate-400 hover:text-indigo-600",children:l.jsx(me,{name:"Edit2",size:12})})]},ke.id)),l.jsxs("button",{onClick:()=>ee(),className:"px-3 py-1.5 rounded-lg border border-dashed border-slate-300 dark:border-slate-500 text-slate-400 hover:text-indigo-600 hover:border-indigo-600 text-sm font-bold flex items-center gap-1 transition-colors",children:[l.jsx(me,{name:"Plus",size:14})," "]})]}),l.jsx("div",{className:"overflow-x-auto custom-scrollbar border border-slate-200 dark:border-slate-700 rounded-xl",children:l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("th",{className:"p-3 text-left text-sm font-bold text-slate-500 dark:text-slate-400 w-64 border-b border-r border-slate-200 dark:border-slate-700",children:" / "}),Lr.map(ke=>l.jsx("th",{className:"p-3 text-center text-sm font-bold text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-700 min-w-[120px]",children:ke},ke))]})}),l.jsx("tbody",{children:e.map(ke=>{var ce;return l.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[l.jsxs("td",{className:"p-3 border-r border-slate-200 dark:border-slate-700 font-bold text-slate-800 dark:text-slate-200",children:[l.jsx("div",{children:ke.name}),l.jsx("div",{className:"text-[10px] text-indigo-500 font-medium",children:ke.floor}),l.jsx("div",{className:"text-xs font-normal text-slate-400 mt-1",children:(ce=ke.includedRooms)==null?void 0:ce.join(", ")})]}),Lr.map(R=>{const Ee=S(ke.id,R,d),De=Ee?L(ke.id,R,d,Ee.id):!1;return l.jsx("td",{onClick:()=>T(ke.id,R),className:`p-2 text-center border-l border-slate-100 dark:border-slate-700 cursor-pointer ${Ee?De?"bg-red-100 dark:bg-red-900/30":"bg-indigo-50/50 dark:bg-indigo-900/10":""} hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors relative group`,children:Ee?l.jsxs("div",{className:`font-bold text-sm ${De?"text-red-600 dark:text-red-400":"text-indigo-700 dark:text-indigo-400"}`,children:[Ee.name,De&&l.jsx("div",{className:"text-[9px] uppercase",children:""})]}):l.jsx("div",{className:"text-slate-300 dark:text-slate-600 text-lg opacity-0 group-hover:opacity-100",children:"+"})},`${ke.id}-${R}`)})]},ke.id)})})]})})]}),l.jsxs("div",{className:"mt-8 bg-slate-100 dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest text-xs mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"Image",size:16}),"  "]}),l.jsx("div",{className:"overflow-auto custom-scrollbar",children:l.jsxs("div",{ref:v,id:"print-content-root",className:"bg-white p-12 min-w-[1200px] text-black font-serif shadow-lg",children:[l.jsx("div",{className:"flex justify-end items-start mb-8 text-sm leading-snug",style:{marginTop:A.approvalBlock},children:l.jsxs("div",{className:"w-[350px]",contentEditable:!0,suppressContentEditableWarning:!0,children:[l.jsx("div",{className:"font-bold mb-1",children:""}),l.jsx("div",{children:" "}),l.jsx("div",{children:" "}),l.jsx("div",{children:"  22 . "}),l.jsxs("div",{className:"mt-8 flex items-end",children:[l.jsx("div",{className:"border-b border-black flex-grow h-4",style:{marginBottom:A.signatureLine}}),l.jsx("div",{className:"ml-2 whitespace-nowrap",children:".."})]})]})}),l.jsxs("div",{className:"text-center mb-6",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:A.mainTitle},children:[l.jsx("h1",{className:"text-xl font-bold uppercase",children:" "}),l.jsx("h2",{className:"text-lg",children:"       22 . "}),l.jsxs("h3",{className:"text-lg font-bold mt-1",children:[" ",c,"-  ",new Date().getFullYear(),"/",new Date().getFullYear()+1,"  "]})]}),[et.First,et.Second].map((ke,ce)=>l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"text-center font-bold text-lg mb-2 underline",contentEditable:!0,suppressContentEditableWarning:!0,children:ke}),l.jsxs("table",{className:"w-full border-collapse border border-black text-sm text-center",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{rowSpan:2,className:"border border-black p-1 bg-gray-100 w-32 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:A.tableHeaders},children:" "}),Ne.map(R=>l.jsx("th",{colSpan:R.zones.length,className:"border border-black p-1 bg-gray-200 font-bold uppercase text-xs align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:A.tableHeaders},children:R.floor},R.floor))]}),l.jsx("tr",{children:Oe.map(R=>l.jsx("th",{className:"border border-black p-1 bg-gray-100 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:A.tableHeaders},children:R.name},R.id))})]}),l.jsx("tbody",{children:Lr.map(R=>l.jsxs("tr",{children:[l.jsx("th",{className:"border border-black p-2 font-bold bg-gray-50 text-left align-middle",contentEditable:!0,suppressContentEditableWarning:!0,children:R}),Oe.map(Ee=>{const De=S(Ee.id,R,ke);return l.jsx("td",{className:"border border-black p-1 h-12 align-middle text-center",contentEditable:!0,suppressContentEditableWarning:!0,children:De?De.name:"-"},Ee.id)})]},R))})]})]},ke)),l.jsxs("div",{className:"mt-8 flex items-end justify-between text-sm font-bold",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:A.footerBlock},children:[l.jsx("div",{children:"    22 ."}),l.jsx("div",{className:"border-b border-black flex-grow mx-4 mb-1",style:{marginBottom:A.signatureLine}}),l.jsx("div",{children:".."})]})]})})]}),l.jsx($n,{isOpen:y,onClose:()=>k(!1),title:" ",maxWidth:"max-w-2xl",children:l.jsxs("div",{className:"space-y-6 min-h-[550px] flex flex-col",children:[N&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl mb-2 text-base border border-slate-100 dark:border-slate-600 shadow-sm",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:(nt=e.find(ke=>ke.id===N.zoneId))==null?void 0:nt.name}),l.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm",children:[l.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded",children:N.day}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-medium",children:d})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("p",{className:"text-[10px] text-slate-400 mb-2",children:"        "}),l.jsx(Df,{options:[{label:" (   )",options:ue},{label:" (    )",options:Ae},{label:"  (  )",options:pe}],value:B,onChange:ke=>j(String(ke)),placeholder:"   ",groupBy:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-auto",children:[l.jsx("button",{onClick:ye,className:"px-5 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-bold text-sm transition-colors",children:" "}),l.jsx("button",{onClick:Z,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:""})]})]})}),l.jsx($n,{isOpen:x,onClose:()=>I(!1),title:D.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" (.  )",value:D.name||"",onChange:ke=>P({...D,name:ke.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:". 2 ",value:D.floor||"",onChange:ke=>P({...D,floor:ke.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( )"}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"28, 29, 30...",value:E,onChange:ke=>_(ke.target.value)}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"    "})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[D.id&&l.jsx("button",{onClick:()=>{K(D.id),I(!1)},className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:H,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})})]})},fZ=()=>{const{classes:t}=Ki(),{nutritionRecords:e,saveScheduleData:r}=FA(),{role:n,user:s}=NA(),{addToast:i}=w1(),a=n==="admin",o=n==="teacher",A=n==="canteen",[c,u]=z.useState(uA()),[d,p]=z.useState("day"),[g,v]=z.useState(()=>{const H=new Date;return`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}`}),[y,k]=z.useState(!1),[x,I]=z.useState(null),[N,U]=z.useState(""),[D,P]=z.useState(0),[E,_]=z.useState(0),B=z.useRef(null),j=z.useMemo(()=>e.filter(H=>H.date===c),[e,c]),S=z.useMemo(()=>{const[H,K]=g.split("-").map(Number);return e.filter(ee=>{const se=new Date(ee.date);return se.getFullYear()===H&&se.getMonth()+1===K})},[e,g]),L=z.useMemo(()=>{const H={totalStudents:0,totalBenefit:0,totalRegular:0,classCount:j.length,records:j};return j.forEach(K=>{H.totalStudents+=K.totalCount,H.totalBenefit+=K.benefitCount,H.totalRegular+=K.regularCount}),H},[j]),T=z.useMemo(()=>{const H=new Map;S.forEach(se=>{const ue=H.get(se.date)||{total:0,benefit:0,regular:0,classCount:0};ue.total+=se.totalCount,ue.benefit+=se.benefitCount,ue.regular+=se.regularCount,ue.classCount+=1,H.set(se.date,ue)});const K=Array.from(H.values()).reduce((se,ue)=>({total:se.total+ue.total,benefit:se.benefit+ue.benefit,regular:se.regular+ue.regular,classCount:Math.max(se.classCount,ue.classCount)}),{total:0,benefit:0,regular:0,classCount:0}),ee=H.size>0?{total:Math.round(K.total/H.size),benefit:Math.round(K.benefit/H.size),regular:Math.round(K.regular/H.size)}:{total:0,benefit:0,regular:0};return{total:K,avgPerDay:ee,daysCount:H.size,statsByDate:Array.from(H.entries()).sort((se,ue)=>se[0].localeCompare(ue[0]))}},[S]),Z=H=>{var K;return((K=t.find(ee=>ee.id===H))==null?void 0:K.name)||H},ye=H=>{const K=t.find(ee=>ee.id===H);return K&&typeof K.order=="number"?K.order:Number.MAX_SAFE_INTEGER},_e=(H,K)=>{K?(I(K),U(K.classId),P(K.totalCount),_(K.benefitCount)):(I(null),U(H||""),P(0),_(0)),k(!0)},Ce=()=>{k(!1),I(null),U(""),P(0),_(0)},ie=z.useCallback(async()=>{if(!N){i({type:"warning",title:" "});return}if(D<0||E<0){i({type:"warning",title:"    "});return}if(E>D){i({type:"warning",title:"      "});return}const H=D-E,K=new Date().toISOString();let ee;if(x)ee=e.map(se=>se.id===x.id?{...se,classId:N,totalCount:D,benefitCount:E,regularCount:H,enteredBy:(s==null?void 0:s.uid)||se.enteredBy,enteredAt:K}:se);else{const se=e.find(ue=>ue.date===c&&ue.classId===N);if(se)ee=e.map(ue=>ue.id===se.id?{...ue,totalCount:D,benefitCount:E,regularCount:H,enteredBy:(s==null?void 0:s.uid)||ue.enteredBy,enteredAt:K}:ue);else{const ue={id:Gs(),date:c,classId:N,totalCount:D,benefitCount:E,regularCount:H,enteredBy:s==null?void 0:s.uid,enteredAt:K};ee=[...e,ue]}}await r({nutritionRecords:ee}),i({type:"success",title:" "}),Ce()},[N,D,E,x,c,e,r,s,i]),we=z.useCallback(async H=>{const K=e.find(se=>se.id===H);if(!K)return;if(!a&&K.enteredBy!==(s==null?void 0:s.uid)){i({type:"warning",title:"     "});return}if(!window.confirm(" ?"))return;const ee=e.filter(se=>se.id!==H);await r({nutritionRecords:ee}),i({type:"success",title:" "})},[e,r,a,s,i]),Pe=()=>{if(!B.current)return;const H=window.open("","_blank");if(!H){i({type:"warning",title:"    "});return}const K=B.current.innerHTML;H.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>  </title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #000; padding: 8px; text-align: left; }
                    th { background-color: #f0f0f0; font-weight: bold; }
                    .text-center { text-align: center; }
                    h1 { text-align: center; margin-bottom: 20px; }
                    @media print {
                        @page { margin: 1cm; }
                    }
                </style>
            </head>
            <body>
                ${K}
            </body>
            </html>
        `),H.document.close(),H.focus(),setTimeout(()=>{H.print(),H.close()},250)},Se=z.useMemo(()=>a||s?t:[],[t,a,s]),M=z.useMemo(()=>{if(d!=="day")return[];const H=j.map(K=>K.classId);return t.filter(K=>!H.includes(K.id)).sort((K,ee)=>{const se=typeof K.order=="number"?K.order:Number.MAX_SAFE_INTEGER,ue=typeof ee.order=="number"?ee.order:Number.MAX_SAFE_INTEGER;return se!==ue?se-ue:K.name.localeCompare(ee.name)})},[t,j,d]);return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white mb-2",children:""}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:a?"   ":A?"   ":"   "})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>p(d==="day"?"month":"day"),className:"px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors font-semibold",children:d==="day"?" ":" "}),(a||A)&&l.jsxs("button",{onClick:Pe,className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[l.jsx(me,{name:"Download",size:18})," PDF"]})]})]}),l.jsx("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:d==="day"?l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),l.jsx("input",{type:"date",value:c,onChange:H=>u(H.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}):l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),l.jsx("input",{type:"month",value:g,onChange:H=>v(H.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})}),d==="day"&&M.length>0&&l.jsxs("div",{className:"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-500 text-white p-2.5 rounded-xl",children:l.jsx(me,{name:"AlertTriangle",size:20})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"    "}),l.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[M.length," ",M.length===1?"":M.length<5?"":"","   "]})]})]}),o||a?l.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(H=>l.jsx("button",{onClick:()=>{u(uA()),_e(H.id)},className:"px-4 py-2 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-xl text-sm font-semibold text-slate-700 dark:text-slate-300 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors",children:H.name},H.id))}):l.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(H=>l.jsx("span",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-amber-300 dark:border-amber-700 rounded-xl text-sm font-semibold text-slate-500 dark:text-slate-400",children:H.name},H.id))})]}),d==="day"?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:" "}),l.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:L.totalStudents})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("div",{className:"text-3xl font-black text-indigo-600",children:L.totalBenefit})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("div",{className:"text-3xl font-black text-green-600",children:L.totalRegular})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:L.classCount})]})]}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),l.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:T.total.total}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",T.avgPerDay.total,"/"]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("div",{className:"text-3xl font-black text-indigo-600",children:T.total.benefit}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",T.avgPerDay.benefit,"/"]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("div",{className:"text-3xl font-black text-green-600",children:T.total.regular}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",T.avgPerDay.regular,"/"]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),l.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:T.daysCount})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[l.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:d==="day"?`  ${new Date(c).toLocaleDateString("ru-RU")}`:`  ${new Date(g+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}`}),(o||a)&&d==="day"&&l.jsxs("button",{onClick:()=>_e(),className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[l.jsx(me,{name:"Plus",size:18}),""]})]}),d==="day"?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),a&&l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o&&l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:j.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:a?5:4,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):j.slice().sort((H,K)=>{const ee=ye(H.classId),se=ye(K.classId);return ee!==se?ee-se:Z(H.classId).localeCompare(Z(K.classId))}).map(H=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:Z(H.classId)}),l.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:H.totalCount}),l.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:H.benefitCount}),l.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:H.regularCount}),!A&&l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(o||a)&&l.jsx("button",{onClick:()=>_e(void 0,H),className:"p-2 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 text-indigo-600 rounded-lg transition-colors",title:"",children:l.jsx(me,{name:"Edit",size:18})}),l.jsx("button",{onClick:()=>we(H.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 rounded-lg transition-colors",title:"",children:l.jsx(me,{name:"Trash2",size:18})})]})})]},H.id))})]})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:T.statsByDate.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):T.statsByDate.map(([H,K])=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:new Date(H).toLocaleDateString("ru-RU",{weekday:"short",day:"numeric",month:"short"})}),l.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:K.total}),l.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:K.benefit}),l.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:K.regular}),l.jsx("td",{className:"px-4 py-3 text-center text-slate-500 dark:text-slate-400",children:K.classCount})]},H))})]})})]}),l.jsx("div",{ref:B,className:"hidden print:block",children:l.jsxs("div",{className:"p-8",children:[l.jsx("h1",{className:"text-2xl font-black mb-4 text-center",children:"  "}),d==="day"?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(c).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})]}),l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100",children:[l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),l.jsx("tbody",{children:j.slice().sort((H,K)=>{const ee=ye(H.classId),se=ye(K.classId);return ee!==se?ee-se:Z(H.classId).localeCompare(Z(K.classId))}).map(H=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:Z(H.classId)}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:H.totalCount}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:H.benefitCount}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:H.regularCount})]},H.id))}),l.jsx("tfoot",{className:"bg-slate-100 font-bold",children:l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalStudents}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalBenefit}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalRegular})]})})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(g+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})]}),l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100",children:[l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),l.jsx("tbody",{children:T.statsByDate.map(([H,K])=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:new Date(H).toLocaleDateString("ru-RU")}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:K.total}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:K.benefit}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:K.regular}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:K.classCount})]},H))}),l.jsxs("tfoot",{className:"bg-slate-100 font-bold",children:[l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.total.total}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.total.benefit}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.total.regular}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:"  "}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.avgPerDay.total}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.avgPerDay.benefit}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.avgPerDay.regular}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]})]})]})]})]})}),l.jsx($n,{isOpen:y,onClose:Ce,title:x?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:""}),l.jsx(Df,{options:Se.slice().sort((H,K)=>H.name.localeCompare(K.name)).map(H=>({value:H.id,label:H.name})),value:N||null,onChange:H=>U(String(H)),placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),l.jsx("input",{type:"number",inputMode:"numeric",min:"0",value:D,onChange:H=>{const K=parseInt(H.target.value)||0;P(K),K<E&&_(K)},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),l.jsx("input",{type:"number",inputMode:"numeric",min:"0",max:D,value:E,onChange:H=>{const K=parseInt(H.target.value)||0;_(Math.min(K,D))},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-4",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:" ()"}),l.jsx("div",{className:"text-2xl font-bold text-green-600",children:D-E})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx("button",{onClick:ie,className:"flex-1 px-4 py-3 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold",children:""}),l.jsx("button",{onClick:Ce,className:"px-4 py-3 rounded-xl bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors font-semibold",children:""})]})]})})]})},pZ=()=>{const{classes:t}=Ki(),{absenteeismRecords:e,saveScheduleData:r}=FA(),{role:n,user:s}=NA(),{addToast:i}=w1();z.useEffect(()=>{ns.syncCacheWithDatabase("absenteeism_records")},[]);const a=n==="admin",o=n==="teacher",[A,c]=z.useState(uA()),[u,d]=z.useState("day"),[p,g]=z.useState(()=>{const Ae=new Date;return`${Ae.getFullYear()}-${String(Ae.getMonth()+1).padStart(2,"0")}`}),[v,y]=z.useState(!1),[k,x]=z.useState(null),[I,N]=z.useState(""),[U,D]=z.useState([]),[P,E]=z.useState(""),[_,B]=z.useState("illness"),[j,S]=z.useState(""),L=z.useRef(null),T=z.useMemo(()=>e.filter(Ae=>Ae.date===A),[e,A]),Z=z.useMemo(()=>{const[Ae,pe]=p.split("-").map(Number);return e.filter(Ne=>{const Oe=new Date(Ne.date);return Oe.getFullYear()===Ae&&Oe.getMonth()+1===pe})},[e,p]),ye=z.useMemo(()=>{const Ae=T.map(pe=>pe.classId);return t.filter(pe=>!Ae.includes(pe.id)).sort((pe,Ne)=>{const Oe=typeof pe.order=="number"?pe.order:999999,nt=typeof Ne.order=="number"?Ne.order:999999;return Oe!==nt?Oe-nt:pe.name.localeCompare(Ne.name,"ru",{numeric:!0})})},[t,T]),_e=z.useMemo(()=>T.sort((Ae,pe)=>{const Ne=t.find(ce=>ce.id===Ae.classId),Oe=t.find(ce=>ce.id===pe.classId),nt=typeof(Ne==null?void 0:Ne.order)=="number"?Ne.order:999999,ke=typeof(Oe==null?void 0:Oe.order)=="number"?Oe.order:999999;return nt!==ke?nt-ke:((Ne==null?void 0:Ne.name)||"").localeCompare((Oe==null?void 0:Oe.name)||"","ru",{numeric:!0})}),[T,t]),Ce=Ae=>{var pe;return((pe=t.find(Ne=>Ne.id===Ae))==null?void 0:pe.name)||Ae},ie=(Ae,pe)=>{switch(Ae){case"statement":return"";case"illness":return"";case"abroad":return"  ";case"disrespectful":return"";case"other":return pe||"";default:return Ae}},we=z.useMemo(()=>{const Ae={};return t.forEach(pe=>{Ae[pe.id]={total:0,reasons:{}}}),Z.forEach(pe=>{Ae[pe.classId]||(Ae[pe.classId]={total:0,reasons:{}}),pe.absences.forEach(Ne=>{Ae[pe.classId].total++;const Oe=Ne.reason==="other"?"":ie(Ne.reason);Ae[pe.classId].reasons[Oe]=(Ae[pe.classId].reasons[Oe]||0)+1})}),Object.entries(Ae).map(([pe,Ne])=>({classId:pe,...Ne})).sort((pe,Ne)=>{const Oe=t.find(R=>R.id===pe.classId),nt=t.find(R=>R.id===Ne.classId),ke=typeof(Oe==null?void 0:Oe.order)=="number"?Oe.order:999999,ce=typeof(nt==null?void 0:nt.order)=="number"?nt.order:999999;return ke!==ce?ke-ce:((Oe==null?void 0:Oe.name)||"").localeCompare((nt==null?void 0:nt.name)||"","ru",{numeric:!0})})},[Z,t]),Pe=z.useMemo(()=>{const Ae={};return t.forEach(pe=>{Ae[pe.id]={total:0,reasons:{}}}),T.forEach(pe=>{Ae[pe.classId]||(Ae[pe.classId]={total:0,reasons:{}}),pe.absences.forEach(Ne=>{Ae[pe.classId].total++;const Oe=Ne.reason==="other"?"":ie(Ne.reason);Ae[pe.classId].reasons[Oe]=(Ae[pe.classId].reasons[Oe]||0)+1})}),Object.entries(Ae).map(([pe,Ne])=>({classId:pe,...Ne})).sort((pe,Ne)=>{const Oe=t.find(R=>R.id===pe.classId),nt=t.find(R=>R.id===Ne.classId),ke=typeof(Oe==null?void 0:Oe.order)=="number"?Oe.order:999999,ce=typeof(nt==null?void 0:nt.order)=="number"?nt.order:999999;return ke!==ce?ke-ce:((Oe==null?void 0:Oe.name)||"").localeCompare((nt==null?void 0:nt.name)||"","ru",{numeric:!0})})},[T,t]),Se=(Ae,pe)=>{pe?(x(pe),N(pe.classId),D([...pe.absences])):(x(null),N(Ae||""),D([])),E(""),B("illness"),S(""),y(!0)},M=()=>{y(!1),x(null),N(""),D([])},H=()=>{if(!P.trim()){i({type:"warning",title:"  "});return}if(U.length>=25){i({type:"warning",title:" 25 "});return}if(_==="other"&&!j.trim()){i({type:"warning",title:" "});return}D([...U,{studentName:P.trim(),reason:_,otherReason:_==="other"?j.trim():void 0}]),E(""),B("illness"),S("")},K=Ae=>{const pe=[...U];pe.splice(Ae,1),D(pe)},ee=z.useCallback(async()=>{if(!I){i({type:"warning",title:" "});return}const Ae={id:k?k.id:Gs(),date:A,classId:I,absences:U,enteredBy:(k==null?void 0:k.enteredBy)||(s==null?void 0:s.uid),enteredAt:(k==null?void 0:k.enteredAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),updatedBy:(s==null?void 0:s.email)||"unknown"},pe=k?e.map(Ne=>Ne.id===Ae.id?Ae:Ne):[...e,Ae];await r({absenteeismRecords:pe}),i({type:"success",title:k?" ":" "}),M()},[I,U,k,e,r,A,s,i]),se=async()=>{if(k&&window.confirm(' ,    ?     " ".')){const Ae=e.filter(pe=>pe.id!==k.id);await r({absenteeismRecords:Ae}),i({type:"success",title:" "}),M()}},ue=()=>{if(!L.current)return;const Ae=window.open("","_blank");if(!Ae){i({type:"warning",title:"    "});return}const pe=L.current.innerHTML;Ae.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>  </title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #000; padding: 8px; text-align: left; }
                    th { background-color: #f0f0f0; font-weight: bold; }
                    .text-center { text-align: center; }
                    h1 { text-align: center; margin-bottom: 20px; }
                    @media print {
                        @page { margin: 1cm; }
                    }
                </style>
            </head>
            <body>
                ${pe}
            </body>
            </html>
        `),Ae.document.close(),Ae.focus(),setTimeout(()=>{Ae.print(),Ae.close()},250)};return!a&&!o?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500",children:[l.jsx(me,{name:"Shield",size:48,className:"mb-4"}),l.jsx("p",{className:"text-lg font-medium",children:" "})]}):l.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-rose-100 dark:bg-rose-900/30 rounded-lg text-rose-600 dark:text-rose-400",children:l.jsx(me,{name:"UserX",size:24})})," "]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"  "})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-dark-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>d("day"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${u==="day"?"bg-white dark:bg-dark-600 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:""}),l.jsx("button",{onClick:()=>d("month"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${u==="month"?"bg-white dark:bg-dark-600 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:""})]}),u==="day"?l.jsx("input",{type:"date",value:A,onChange:Ae=>c(Ae.target.value),className:"px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-dark-800 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"}):l.jsx("input",{type:"month",value:p,onChange:Ae=>g(Ae.target.value),className:"px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-dark-800 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),l.jsxs("button",{onClick:ue,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl transition-colors shadow-lg shadow-indigo-200 dark:shadow-none",children:[l.jsx(me,{name:"Printer",size:18}),l.jsx("span",{className:"hidden sm:inline",children:""})]})]})]}),u==="day"?l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[l.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(me,{name:"AlertCircle",className:"text-amber-500",size:20}),"  (",ye.length,")"]}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-2 gap-3",children:[ye.map(Ae=>l.jsxs("button",{onClick:()=>Se(Ae.id),className:"p-3 bg-white dark:bg-dark-800 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition-all text-left group",children:[l.jsx("div",{className:"font-bold text-lg text-slate-700 dark:text-slate-200 group-hover:text-indigo-600 dark:group-hover:text-indigo-400",children:Ae.name}),l.jsx("div",{className:"text-xs text-slate-400",children:"  "})]},Ae.id)),ye.length===0&&l.jsx("div",{className:"col-span-full p-6 text-center text-slate-400 bg-slate-50 dark:bg-dark-800/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:"   "})]})]}),l.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[l.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(me,{name:"CheckCircle",className:"text-green-500",size:20})," (",_e.length,")"]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-dark-700/30 flex justify-between items-center",children:l.jsxs("h3",{className:"font-medium text-slate-700 dark:text-slate-200",children:["   ",new Date(A).toLocaleDateString("ru-RU")]})}),l.jsxs("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[_e.map(Ae=>l.jsx("div",{onClick:()=>Se(void 0,Ae),className:"p-4 hover:bg-slate-50 dark:hover:bg-dark-700/50 transition-colors cursor-pointer group",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-xl border border-indigo-100 dark:border-indigo-900/50",children:Ce(Ae.classId)}),l.jsx("div",{children:l.jsx("div",{className:"font-medium text-slate-800 dark:text-white",children:Ae.absences.length>0?`: ${Ae.absences.length} .`:" "})})]}),Ae.absences.length>0&&l.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ae.absences.slice(0,3).map((pe,Ne)=>l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 border border-rose-100 dark:border-rose-900/30",children:pe.studentName},Ne)),Ae.absences.length>3&&l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:["+",Ae.absences.length-3," "]})]})]})},Ae.id)),_e.length===0&&l.jsx("div",{className:"p-8 text-center text-slate-400",children:"    "})]})]})]})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[l.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:["  ",new Date(p).toLocaleDateString("ru-RU",{month:"long",year:"numeric"})]}),l.jsx("p",{className:"text-slate-500 mt-1",children:"    "})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-50 dark:bg-dark-700/50 text-left",children:[l.jsx("th",{className:"px-6 py-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-6 py-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:" "}),l.jsx("th",{className:"px-6 py-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:" "})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[we.map(Ae=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-dark-700/50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4 font-medium text-slate-800 dark:text-white",children:Ce(Ae.classId)}),l.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Ae.total>0?"bg-rose-100 text-rose-800 dark:bg-rose-900/30 dark:text-rose-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:Ae.total})}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:Ae.total>0?l.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(Ae.reasons).map(([pe,Ne])=>l.jsxs("span",{className:"inline-flex items-center gap-1 bg-slate-100 dark:bg-dark-700 px-2 py-1 rounded text-xs",children:[l.jsxs("span",{children:[pe,":"]}),l.jsx("span",{className:"font-semibold",children:Ne})]},pe))}):l.jsx("span",{className:"text-slate-400",children:""})})]},Ae.classId)),we.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-8 text-center text-slate-400",children:"    "})})]})]})})]}),l.jsx($n,{isOpen:v,onClose:M,title:`: ${Ce(I)}`,children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:P,onChange:Ae=>E(Ae.target.value),placeholder:" ",className:"flex-1 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-dark-800 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),l.jsxs("select",{value:_,onChange:Ae=>B(Ae.target.value),className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-dark-800 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[l.jsx("option",{value:"illness",children:""}),l.jsx("option",{value:"statement",children:""}),l.jsx("option",{value:"abroad",children:" "}),l.jsx("option",{value:"disrespectful",children:""}),l.jsx("option",{value:"other",children:""})]}),l.jsx("button",{onClick:H,className:"p-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:l.jsx(me,{name:"Plus",size:20})})]}),_==="other"&&l.jsx("input",{type:"text",value:j,onChange:Ae=>S(Ae.target.value),placeholder:" ",className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-dark-800 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),l.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-4",children:[l.jsxs("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:["  (",U.length,")"]}),U.length===0?l.jsx("div",{className:"text-center py-4 text-slate-400 bg-slate-50 dark:bg-dark-800/50 rounded-lg",children:" "}):l.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:U.map((Ae,pe)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-dark-700/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-white",children:Ae.studentName}),l.jsx("div",{className:"text-xs text-slate-500",children:ie(Ae.reason,Ae.otherReason)})]}),l.jsx("button",{onClick:()=>K(pe),className:"text-slate-400 hover:text-red-500 transition-colors",children:l.jsx(me,{name:"Trash2",size:16})})]},pe))})]})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-100 dark:border-slate-700",children:[k&&l.jsxs("button",{onClick:se,className:"px-4 py-2 text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors flex items-center gap-2",children:[l.jsx(me,{name:"Trash2",size:18}),l.jsx("span",{className:"hidden sm:inline",children:""})]}),l.jsxs("div",{className:"flex gap-3 ml-auto",children:[l.jsx("button",{onClick:M,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-dark-700 rounded-lg transition-colors",children:""}),l.jsx("button",{onClick:ee,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:""})]})]})]})}),l.jsx("div",{ref:L,className:"hidden print:block",children:l.jsxs("div",{className:"p-8",children:[l.jsx("h1",{className:"text-2xl font-black mb-4 text-center",children:u==="day"?`    ${new Date(A).toLocaleDateString("ru-RU")}`:`    ${new Date(p).toLocaleString("ru-RU",{month:"long",year:"numeric"})}`}),l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100",children:[l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:"."}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:" ."}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:""})]})}),l.jsx("tbody",{children:(u==="day"?Pe:we).map(Ae=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:Ce(Ae.classId)}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center font-bold",children:Ae.total}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Ae.reasons.||0}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Ae.reasons.||0}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Ae.reasons.||0}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Ae.reasons["  "]||0}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Ae.reasons.||0})]},Ae.classId))})]})]})})]})},gZ=()=>{const{setGuestRole:t,role:e,loading:r}=NA(),n=Qp(),[s,i]=z.useState("select"),[a,o]=z.useState(""),[A,c]=z.useState(""),[u,d]=z.useState(""),[p,g]=z.useState(!1);z.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher"||e==="canteen")&&n("/dashboard")},[e,r,n]);const v=async k=>{if(k.preventDefault(),d(""),g(!0),!Sa){d("Firebase .  ."),g(!1);return}try{let x=a;s==="teacher"?x="teacher@gymnasium22.com":s==="canteen"&&(x="canteen@gymnasium22.com"),await zV(Sa,x,A)}catch(x){console.error("Firebase Auth Error:",x);const I=x==null?void 0:x.code;let N="   .";switch(I){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":N="   .";break;case"auth/invalid-email":N="  email.";break;case"auth/too-many-requests":N="  . .";break;default:N=" .  ."}d(N)}finally{g(!1)}},y=()=>{t(),n("/schedule")};return l.jsxs("div",{className:"min-h-screen mesh-gradient-bg flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),l.jsx("div",{className:"absolute top-20 right-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-20 left-1/2 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"}),l.jsxs("div",{className:"rounded-3xl shadow-2xl max-w-md w-full p-8 transition-all relative z-10 bg-white/60 dark:bg-slate-800/60 border border-white/20 dark:border-slate-700 backdrop-blur-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl text-white shadow-lg shadow-indigo-500/30 mb-4 transform hover:scale-105 transition-transform duration-300",children:l.jsx(me,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight mb-2",children:" Pro22"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-300 font-medium",children:"  "})]}),s==="select"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("button",{onClick:y,className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-xl text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(me,{name:"Users",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" / "}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),l.jsx(me,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-emerald-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>i("teacher"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-xl text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(me,{name:"BookOpen",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),l.jsx(me,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-indigo-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>i("canteen"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 p-3 rounded-xl text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform",children:l.jsx(me,{name:"Coffee",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),l.jsx(me,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-green-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>i("admin"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-xl text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(me,{name:"Settings",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"    "})]}),l.jsx(me,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-purple-500 transition-colors",size:20})]})]}),s!=="select"&&l.jsxs("form",{onSubmit:v,className:"space-y-5 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx("button",{type:"button",onClick:()=>{i("select"),d("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(me,{name:"ArrowRight",className:"rotate-180",size:24})}),l.jsx("h2",{className:"font-bold text-xl dark:text-white",children:s==="teacher"?"  ":s==="canteen"?"  ":"  "})]}),s==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(me,{name:"User",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"email",inputMode:"email",autoComplete:"email",value:a,onChange:k=>o(k.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"admin@school.com",autoFocus:!0,required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(me,{name:"Briefcase",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"password",inputMode:"text",autoComplete:"current-password",value:A,onChange:k=>c(k.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"",required:!0})]})]}),u&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-xl border border-red-100 dark:border-red-900/50 animate-shake",children:u}),l.jsxs("button",{type:"submit",disabled:p||r,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[p||r?l.jsx(me,{name:"Loader",className:"animate-spin",size:20}):l.jsx(me,{name:"LogOut",className:"rotate-180",size:20}),p?"...":"  "]})]})]}),l.jsxs("div",{className:"absolute bottom-6 text-center w-full text-slate-400 dark:text-slate-500 text-xs font-medium",children:[" ",new Date().getFullYear(),"  Pro22.   ."]})]})},ik=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},ak=(t,e)=>{try{localStorage.setItem(t,e)}catch(r){console.warn("Failed to save to localStorage:",r)}},vo=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:s}=NA();return s?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(me,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?l.jsx(Pm,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(Pm,{to:"/login",replace:!0})},mZ=()=>{const{role:t,loading:e}=NA();return e?null:t==="guest"?l.jsx(Pm,{to:"/schedule",replace:!0}):l.jsx(Pm,{to:"/dashboard",replace:!0})},wZ=()=>{const[t,e]=z.useState(!1),[r,n]=z.useState(ik("theme")||"light"),[s,i]=z.useState(ik("new_year_mode")==="true"),{isLoading:a}=Ki(),{logout:o,role:A,user:c}=NA();if(z.useEffect(()=>{const p=()=>{window.innerWidth>=1024&&e(!1)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),z.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),ak("theme",r)},[r]),z.useEffect(()=>{s?document.documentElement.classList.add("new-year-mode"):document.documentElement.classList.remove("new-year-mode"),ak("new_year_mode",String(s))},[s]),a)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(me,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const d=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher","canteen"]},{to:"/schedule",label:" 1 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/duty",label:"",icon:"Shield",roles:["admin"]},{to:"/nutrition",label:"",icon:"Coffee",roles:["admin","teacher","canteen"]},{to:"/absenteeism",label:"",icon:"UserX",roles:["admin","teacher"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(p=>p.roles.includes(A||""));return l.jsxs("div",{className:`flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300 ${s?"festive-bg":"mesh-gradient-bg"}`,children:[s&&l.jsx("div",{className:"snow-overlay no-print"}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 lg:w-64 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print shadow-2xl lg:shadow-none overflow-hidden`,children:l.jsxs("div",{className:"h-full flex flex-col relative",children:[s&&l.jsx("div",{className:"bg-garland"}),l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 pt-8",children:[l.jsxs("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white relative shadow-lg shadow-indigo-200 dark:shadow-none transition-colors duration-500",children:[l.jsx(me,{name:"GraduationCap",size:24}),s&&l.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:""})]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" Pro22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V2.0"})]})]}),l.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:d.map(p=>l.jsxs(_o,{to:p.to,onClick:()=>e(!1),className:({isActive:g})=>`
                                    group flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-semibold transition-all relative
                                    ${g?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:text-slate-700 dark:hover:text-slate-300"}
                                `,children:[l.jsx(me,{name:p.icon,size:18,className:"flex-shrink-0"}),l.jsx("span",{className:"flex-1 truncate",children:p.label})]},p.to))}),l.jsx("div",{className:"hidden lg:block mb-2",children:l.jsx(BK,{})}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between px-2",children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate max-w-[120px]",children:c&&c.email||""}),l.jsx("button",{onClick:o,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(me,{name:"LogOut",size:16})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 shadow-sm",children:r==="light"?l.jsx(me,{name:"Moon",size:18}):l.jsx(me,{name:"Sun",size:18})}),l.jsx("button",{onClick:()=>i(!s),className:`flex items-center justify-center gap-2 p-2.5 rounded-xl transition-all border active:scale-95 shadow-sm ${s?"bg-red-600 text-white border-red-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-100 dark:border-slate-600 hover:text-red-500"}`,title:" ",children:l.jsx(me,{name:"Snowflake",size:18,className:s?"animate-spin-slow":""})})]})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-transparent relative",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white/80 dark:bg-dark-800/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 no-print sticky top-0 z-30",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" Pro22"}),s&&l.jsx("div",{className:"ml-auto text-xl",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 pb-24 lg:pb-8 custom-scrollbar relative",children:l.jsx(xP,{})}),l.jsx(_K,{onMenuClick:()=>e(!0),role:A})]})]})},xZ=()=>{const[t,e]=z.useState(null),[r,n]=z.useState(!0),[s]=FN(),i=s.get("id");return z.useEffect(()=>{i?(n(!0),ns.getPublicData(i).then(a=>{const o={...Qi,...a,settings:{...Qi.settings,...a==null?void 0:a.settings}};e(o),n(!1)}).catch(a=>{console.error("Failed to load public data:",a),e(null),n(!1)})):(n(!1),e(null))},[i]),r?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(me,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(AU,{initialData:t,children:l.jsx(uU,{children:l.jsx(dU,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(me,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(wU,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(me,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]})};function vZ(){return l.jsx(xK,{children:l.jsx(mK,{children:l.jsx(AU,{children:l.jsx(uU,{children:l.jsx(dU,{children:l.jsx(NP,{children:l.jsxs(yP,{children:[l.jsx(Ai,{path:"/login",element:l.jsx(gZ,{})}),l.jsxs(Ai,{path:"/",element:l.jsx(vo,{children:l.jsx(wZ,{})}),children:[l.jsx(Ai,{index:!0,element:l.jsx(mZ,{})}),l.jsx(Ai,{path:"dashboard",element:l.jsx(vo,{allowedRoles:["admin","teacher","canteen"],children:l.jsx(EK,{})})}),l.jsx(Ai,{path:"schedule",element:l.jsx(ok,{semester:1})}),l.jsx(Ai,{path:"schedule2",element:l.jsx(ok,{semester:2})}),l.jsx(Ai,{path:"substitutions",element:l.jsx(vo,{allowedRoles:["admin"],children:l.jsx(WY,{})})}),l.jsx(Ai,{path:"duty",element:l.jsx(vo,{allowedRoles:["admin"],children:l.jsx(hZ,{})})}),l.jsx(Ai,{path:"nutrition",element:l.jsx(vo,{allowedRoles:["admin","teacher","canteen"],children:l.jsx(fZ,{})})}),l.jsx(Ai,{path:"absenteeism",element:l.jsx(vo,{allowedRoles:["admin","teacher"],children:l.jsx(pZ,{})})}),l.jsx(Ai,{path:"directory",element:l.jsx(vo,{allowedRoles:["admin"],children:l.jsx(qY,{})})}),l.jsx(Ai,{path:"admin",element:l.jsx(vo,{allowedRoles:["admin"],children:l.jsx(JY,{})})}),l.jsx(Ai,{path:"reports",element:l.jsx(vo,{allowedRoles:["admin"],children:l.jsx(dZ,{})})}),l.jsx(Ai,{path:"export",element:l.jsx(vo,{allowedRoles:["admin"],children:l.jsx(uZ,{})})})]}),l.jsx(Ai,{path:"/public",element:l.jsx(xZ,{})})]})})})})})})})}const ok=({semester:t=1})=>{const{role:e}=NA();return l.jsx(wU,{readOnly:e!=="admin",semester:t})};Bv.createRoot(document.getElementById("root")).render(l.jsx(Co.StrictMode,{children:l.jsx(vZ,{})}));export{Xr as _,bZ as c,Ak as g};
